!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("http"),require("https"),require("url"),require("file-type")):"function"==typeof define&&define.amd?define(["http","https","url","file-type"],t):"object"==typeof exports?exports.Carbon=t(require("http"),require("https"),require("url"),require("file-type")):e.Carbon=t(e.http,e.https,e.url,e.fileType)}(this,function(e,t,r,n){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=69)}([function(e,t,r){"use strict";function n(e,t){return"function"==typeof e[t]}function i(e,t){return!!e&&a(e[t])}function o(e,t){return!!e&&!!Object.getOwnPropertyDescriptor(e,t)}function a(e){return void 0!==e}function s(e){return null===e}function u(e){return e instanceof Array}function c(e){return"string"==typeof e||e instanceof String}function l(e){return"boolean"==typeof e}function f(e){return"number"==typeof e||e instanceof Number}function p(e){return!!f(e)&&e%1==0}function d(e){return!!f(e)&&e%1!=0}function h(e){return e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function g(e){return"object"==typeof e&&!!e}function y(e){return g(e)&&!u(e)&&!h(e)&&!b(e)&&!("undefined"!=typeof Blob&&e instanceof Blob)&&!("[object Set]"===Object.prototype.toString.call(e))}function v(e){return"function"==typeof e}function b(e){return g(e)&&n(e,"get")&&n(e,"has")&&i(e,"size")&&n(e,"clear")&&n(e,"delete")&&n(e,"entries")&&n(e,"forEach")&&n(e,"get")&&n(e,"has")&&n(e,"keys")&&n(e,"set")&&n(e,"values")}function m(e){if(!c(e))return!1;switch(e.toLowerCase()){case"true":case"yes":case"y":case"1":return!0;case"false":case"no":case"n":case"0":default:return!1}}function P(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0,i=t;n<i.length;n++){var o=i[n];if(o)for(var a in o)o.hasOwnProperty(a)&&(e[a]=o[a])}return e}function _(e,t){if(!g(e)&&!v(e))throw new Error("IllegalArgument");for(var r in e)if(e.hasOwnProperty(r)&&!1===t(r,e[r]))break}function O(e,t,r,n,i,o){if(void 0===o&&(o={}),e===t)return!0;if(!g(e)||!g(t))return!1;if(h(e))return e.getTime()===t.getTime();for(var a=R.joinWithoutDuplicates(Object.keys(e),Object.keys(t)),s=0,c=a;s<c.length;s++){var l=c[s];if(!(l in e&&l in t))return!1;if(typeof e!=typeof t)return!1;if(!(l in o)&&!v(e[l])){var f=y(e[l]);if(u(e[l])&&r.arrays||f&&r.objects||h(e[l])){if(f){for(var p=n.length;p--;)if(n[p]===e[l])return i[p]===t[l];n.push(e[l]),i.push(t[l])}if(!O(e[l],t[l],r,n,i))return!1;f&&(n.pop(),i.pop())}else if(e[l]!==t[l])return!1}}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.hasFunction=n,t.hasProperty=i,t.hasPropertyDefined=o,t.isDefined=a,t.isNull=s,t.isArray=u,t.isString=c,t.isBoolean=l,t.isNumber=f,t.isInteger=p,t.isDouble=d,t.isDate=h,t.isObject=g,t.isPlainObject=y,t.isFunction=v,t.isMap=b,t.parseBoolean=m,t.extend=P,t.forEachOwnProperty=_;var C=function(){function e(){}return e.extend=function(t,r,n,i){if(void 0===n&&(n={arrays:!1,objects:!1}),void 0===i&&(i={}),!u(r)&&!y(r)||!u(t)&&!y(t))return null;var o=t;r.__CarbonSDK_circularReferenceFlag=o;for(var a=0,s=Object.keys(r);a<s.length;a++){var c=s[a];if(!v(r[c])&&"__CarbonSDK_circularReferenceFlag"!==c&&!(c in i)){var l=r[c];(u(l)&&n.arrays||y(l)&&n.objects)&&(l=l.__CarbonSDK_circularReferenceFlag||e.clone(l,n)),o[c]=l}}return delete r.__CarbonSDK_circularReferenceFlag,o},e.clone=function(t,r,n){void 0===r&&(r={arrays:!1,objects:!1}),void 0===n&&(n={});var i=u(t);if(!i&&!y(t))return null;var o=i?[]:Object.create(Object.getPrototypeOf(t));return e.extend(o,t,r,n)},e.areEqual=function(e,t,r,n){return void 0===r&&(r={arrays:!1,objects:!1}),void 0===n&&(n={}),O(e,t,r,[e],[t],n)},e.areShallowlyEqual=function(e,t){if(e===t)return!0;if(!g(e)||!g(t))return!1;var r=[];for(var n in e)if(e.hasOwnProperty(n)&&!v(e[n])){if(!(n in t))return!1;if(e[n]!==t[n])return!1;r.push(n)}for(var n in t)if(t.hasOwnProperty(n)&&!v(t[n])){if(!(n in e))return!1;if(-1===r.indexOf(n))return!1}return!0},e}();t.O=C;var S=function(){function e(){}return e.startsWith=function(e,t){return 0===e.lastIndexOf(t,0)},e.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},e.contains=function(e,t){return-1!==e.indexOf(t)},e}();t.S=S;var R=function(){function e(){}return e.from=function(e){for(var t=[],r=e.next();!r.done;)t.push(r.value),r=e.next();return t},e.joinWithoutDuplicates=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e[0].slice(),n=1,i=e.length;n<i;n++)r=r.concat(e[n].filter(function(e){return r.indexOf(e)<0}));return r},e.indexOf=function(e,t,r){if(void 0===r&&(r=function(e,t){return e===t}),!e)return-1;for(var n=0,i=e.length;n<i;++n)if(r(e[n],t))return n;return-1},e}();t.A=R;var w=function(){function e(){}return e.from=function(e){var t=new Map;return _(e,function(e,r){t.set(e,r)}),t},e.extend=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0,i=t.length;n<i;n++)for(var o=t[n],a=o.entries(),s=a.next();!s.done;){var u=s.value,c=u[0],l=u[1];e.set(c,l),s=a.next()}return e},e}();t.M=w;var A=function(){function e(){}return e.is=function(t){return e.regExp.test(t)},e.generate=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},e}();A.regExp=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,t.UUID=A},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(116);t.C=n;var i=r(117);t.CP=i;var o=r(118);t.CS=o;var a=r(119);t.LDP=a;var s=r(120);t.RDF=s;var u=r(18);t.XSD=u;var c=r(121);t.VCARD=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(80);t.IDAlreadyInUseError=n.default;var i=r(81);t.IllegalActionError=i.default;var o=r(13);t.IllegalArgumentError=o.default;var a=r(82);t.IllegalStateError=a.default;var s=r(50);t.InvalidJSONLDSyntaxError=s.default;var u=r(83);t.NotImplementedError=u.default},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(11),o=r(5),a=function(e){function t(r,n){var i=e.call(this,r)||this;return Object.setPrototypeOf(i,t.prototype),o.Factory.createFrom(i),i.errors=[],i.requestID=null,i.response=n,i.statusCode=n.status,i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"HTTPError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=a,t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(35);t.Literal=n;var i=r(63);t.Document=i;var o=r(34);t.List=o;var a=r(36);t.Node=a;var s=r(12);t.URI=s;var u=r(64);t.Value=u},function(e,t,r){"use strict";function n(e){this.types.push(e)}function i(e){return-1!==this.types.indexOf(e)}function o(e){var t=this.types.indexOf(e);-1!==t&&this.types.splice(t,1)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(6),s=r(0),u=function(){function e(){}return e.hasClassProperties=function(e){return s.hasPropertyDefined(e,"types")&&s.hasFunction(e,"addType")&&s.hasFunction(e,"hasType")&&s.hasFunction(e,"removeType")},e.is=function(t){return a.Factory.is(t)&&e.hasClassProperties(t)},e.create=function(t,r){return void 0===t&&(t=null),void 0===r&&(r=null),e.createFrom({},t,r)},e.createFrom=function(t,r,n){void 0===r&&(r=null),void 0===n&&(n=null),r=r||(t.id||""),n=n||(t.types||[]);var i=e.decorate(t);return i.id=r,i.types=n,i},e.decorate=function(t){return a.Factory.decorate(t),e.hasClassProperties(t)?t:(Object.defineProperties(t,{types:{writable:!0,enumerable:!1,configurable:!0,value:[]},addType:{writable:!0,enumerable:!1,configurable:!0,value:n},hasType:{writable:!0,enumerable:!1,configurable:!0,value:i},removeType:{writable:!0,enumerable:!1,configurable:!0,value:o}}),t)},e}();t.Factory=u;var c=function(){function e(){}return e.hasType=function(t,r){return-1!==e.getTypes(t).indexOf(r)},e.getTypes=function(e){return e.types||[]},e}();t.Util=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(0),o=function(){function e(){}return e.hasClassProperties=function(e){return!!(i.hasPropertyDefined(e,"_id")&&i.hasPropertyDefined(e,"_resolved")&&i.hasPropertyDefined(e,"id")&&i.hasFunction(e,"isResolved")&&i.hasPropertyDefined(e,"resolve"))},e.is=function(t){return!(!i.isObject(t)||!e.hasClassProperties(t))},e.create=function(t){return e.createFrom({},t)},e.createFrom=function(t,r){r=r||"";var n=e.decorate(t);return n.id=r,n},e.decorate=function(t){return e.hasClassProperties(t)?t:(Object.defineProperties(t,{_id:{writable:!0,enumerable:!1,configurable:!0,value:""},_resolved:{writable:!0,enumerable:!1,configurable:!0,value:!1},id:{enumerable:!1,configurable:!0,get:function(){return this._id?this._id:""},set:function(e){this._id=e}},isResolved:{writable:!1,enumerable:!1,configurable:!0,value:function(){return this._resolved}},resolve:{writable:!1,enumerable:!1,configurable:!0,value:function(){return Promise.reject(new n.NotImplementedError("A simple pointer cannot be resolved by it self."))}}}),t)},e}();t.Factory=o;var a=function(){function e(){}return e.areEqual=function(e,t){return e.id===t.id},e.getIDs=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var i=n[r];t.push(i.id)}return t},e.resolveAll=function(e){var t=e.map(function(e){return e.resolve()});return Promise.all(t).then(function(e){return[e.map(function(e){return e[0]}),e.map(function(e){return e[1]})]})},e}();t.Util=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(51);t.Errors=n;var i=r(28);t.Header=i;var o=r(29);t.JSONParser=o;var a=r(52);t.Method=a.default;var s=r(106);t.Parser=s;var u=r(107);t.Request=u;var c=r(53);t.Response=c;var l=r(108);t.StatusCode=l.default;var f=r(109);t.StringParser=f},function(e,t,r){"use strict";function n(e){var t=this;return e===t.id||!!t.inScope(e)&&t.hasFragment(e)}function i(e){var t=this;if(!t.inScope(e))return null;if(e===t.id)return t;var r=t.getFragment(e);return r=r||t.createFragment(e)}function o(e){var t=this,r=C.Factory.is(e)?e.id:e;return r===t.id||(!!S.URI.Util.isBNodeID(r)||(!!S.URI.Util.isFragmentOf(r,t.id)||S.URI.Util.isFragmentOf(r,"")))}function a(e){var t=this;if(S.URI.Util.isAbsolute(e)){if(!S.URI.Util.isFragmentOf(e,t.id))return!1;e=S.URI.Util.hasFragment(e)?S.URI.Util.getFragment(e):e}else w.S.startsWith(e,"#")&&(e=e.substring(1));return t._fragmentsIndex.has(e)}function s(e){var t=this;return S.URI.Util.isBNodeID(e)?t._fragmentsIndex.get(e)||null:t.getNamedFragment(e)}function u(e){var t=this;if(S.URI.Util.isBNodeID(e))throw new b.IllegalArgumentError("Named fragments can't have a id that starts with '_:'.");if(S.URI.Util.isAbsolute(e)){if(!S.URI.Util.isFragmentOf(e,t.id))throw new b.IllegalArgumentError("The id is out of scope.");e=S.URI.Util.hasFragment(e)?S.URI.Util.getFragment(e):e}else w.S.startsWith(e,"#")&&(e=e.substring(1));return t._fragmentsIndex.get(e)||null}function c(){var e=this;return w.A.from(e._fragmentsIndex.values())}function l(e,t){var r=this;t=w.isString(e)?e:t;var n=!w.isString(e)&&e?e:{};if(t){if(!S.URI.Util.isBNodeID(t))return r.createNamedFragment(n,t);if(this._fragmentsIndex.has(t))throw new b.IDAlreadyInUseError("The slug provided is already being used by a fragment.")}var i=v.Factory.createFrom(n,t,r);return r._fragmentsIndex.set(i.id,i),y(r,i),i}function f(e,t){var r=this;t=w.isString(e)?e:t;var n=!w.isString(e)&&e?e:{};if(S.URI.Util.isBNodeID(t))throw new b.IllegalArgumentError("Named fragments can't have a slug that starts with '_:'.");if(S.URI.Util.isAbsolute(t)){if(!S.URI.Util.isFragmentOf(t,r.id))throw new b.IllegalArgumentError("The slug is out of scope.");t=S.URI.Util.hasFragment(t)?S.URI.Util.getFragment(t):t}else w.S.startsWith(t,"#")&&(t=t.substring(1));if(r._fragmentsIndex.has(t))throw new b.IDAlreadyInUseError("The slug provided is already being used by a fragment.");var i=P.Factory.createFrom(n,t,r);return r._fragmentsIndex.set(t,i),y(r,i),i}function p(e){var t=this,r=w.isString(e)?e:e.id;if(S.URI.Util.isAbsolute(r)){if(!S.URI.Util.isFragmentOf(r,t.id))return;r=S.URI.Util.hasFragment(r)?S.URI.Util.getFragment(r):r}else w.S.startsWith(r,"#")&&(r=r.substring(1));t._fragmentsIndex.delete(r)}function d(e){var t=this,r=w.isString(e)?e:e.id;if(S.URI.Util.isBNodeID(r))throw new b.IllegalArgumentError("You can only remove NamedFragments.");t._removeFragment(r)}function h(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var r=e?e.getGeneralSchema():new O.DigestedObjectSchema;t=t||new m.default;var n=[];n.push(this),n=n.concat(this.getFragments());for(var i=[],o=0,a=n;o<a.length;o++){var s=a[o],u=e?e.getSchemaFor(s):new O.DigestedObjectSchema;i.push(t.expand(s,r,u))}var c={"@id":this.id,"@graph":i};return JSON.stringify(c)}function g(){var e=this,t=this.getFragments().filter(function(e){return S.URI.Util.isBNodeID(e.id)}),r=new Set;y(this,this,r),t.forEach(function(t){r.has(t.id)||e._fragmentsIndex.delete(t.id)})}function y(e,t,r){void 0===r&&(r=new Set);for(var n,i,o,a=Object.keys(t),s=0,u=a;s<u.length;s++){var c=u[s];if(n=t[c],w.isArray(n))y(e,n,r);else if(w.isPlainObject(n))if(C.Factory.is(n))e.hasFragment(n.id)&&!r.has(n.id)&&(r.add(n.id),y(e,n,r));else if(!(i="id"in n?n.id:"slug"in n?S.URI.Util.hasFragment(n.slug)?n.slug:"#"+n.slug:"")||e.inScope(i)){var l=e.getFragment(i);l?l!==n&&(Object.assign(l,n),o=t[c]=l,y(e,o,r)):(o=e.createFragment(n,i),y(e,o,r))}}}Object.defineProperty(t,"__esModule",{value:!0});var v=r(48),b=r(2),m=r(30),P=r(58),_=r(1),O=r(9),C=r(6),S=r(4),R=r(5),w=r(0);t.RDF_CLASS=_.C.Class.Document,t.SCHEMA={contains:{"@id":_.LDP.Predicate.contains,"@container":"@set","@type":"@id"},members:{"@id":_.LDP.Predicate.member,"@container":"@set","@type":"@id"},membershipResource:{"@id":_.LDP.Predicate.membershipResource,"@type":"@id"},isMemberOfRelation:{"@id":_.LDP.Predicate.isMemberOfRelation,"@type":"@id"},hasMemberRelation:{"@id":_.LDP.Predicate.hasMemberRelation,"@type":"@id"},insertedContentRelation:{"@id":_.LDP.Predicate.insertedContentRelation,"@type":"@id"},created:{"@id":_.C.Predicate.created,"@type":_.XSD.DataType.dateTime},modified:{"@id":_.C.Predicate.modified,"@type":_.XSD.DataType.dateTime},defaultInteractionModel:{"@id":_.C.Predicate.defaultInteractionModel,"@type":"@id"},accessPoints:{"@id":_.C.Predicate.accessPoint,"@type":"@id","@container":"@set"}};var A=function(){function e(){}return e.hasClassProperties=function(e){return w.isObject(e)&&w.hasPropertyDefined(e,"_fragmentsIndex")&&w.hasFunction(e,"_normalize")&&w.hasFunction(e,"_removeFragment")&&w.hasFunction(e,"hasFragment")&&w.hasFunction(e,"getFragment")&&w.hasFunction(e,"getNamedFragment")&&w.hasFunction(e,"getFragments")&&w.hasFunction(e,"createFragment")&&w.hasFunction(e,"createNamedFragment")&&w.hasFunction(e,"removeNamedFragment")&&w.hasFunction(e,"toJSON")},e.is=function(t){return R.Factory.is(t)&&e.hasClassProperties(t)},e.create=function(){return e.createFrom({})},e.createFrom=function(t){if(e.is(t))throw new b.IllegalArgumentError("The object provided is already a Document");var r=t;R.Factory.is(t)||(r=R.Factory.createFrom(t));var n=e.decorate(r);return y(n,n),n},e.decorate=function(t){return R.Factory.decorate(t),e.hasClassProperties(t)?t:(Object.defineProperties(t,{_fragmentsIndex:{writable:!1,enumerable:!1,configurable:!0,value:new Map},_normalize:{writable:!1,enumerable:!1,configurable:!0,value:g},_removeFragment:{writable:!0,enumerable:!1,configurable:!0,value:p},hasPointer:{writable:!0,enumerable:!1,configurable:!0,value:n},getPointer:{writable:!0,enumerable:!1,configurable:!0,value:i},inScope:{writable:!0,enumerable:!1,configurable:!0,value:o},hasFragment:{writable:!0,enumerable:!1,configurable:!0,value:a},getFragment:{writable:!0,enumerable:!1,configurable:!0,value:s},getNamedFragment:{writable:!0,enumerable:!1,configurable:!0,value:u},getFragments:{writable:!0,enumerable:!1,configurable:!0,value:c},createFragment:{writable:!0,enumerable:!1,configurable:!0,value:l},createNamedFragment:{writable:!0,enumerable:!1,configurable:!0,value:f},removeNamedFragment:{writable:!0,enumerable:!1,configurable:!0,value:d},toJSON:{writable:!0,enumerable:!1,configurable:!0,value:h}}),t)},e}();t.Factory=A},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(2),o=r(1),a=r(4),s=r(0);!function(e){e[e.SET=0]="SET",e[e.LIST=1]="LIST",e[e.LANGUAGE=2]="LANGUAGE"}(n=t.ContainerType||(t.ContainerType={}));var u;!function(e){e[e.ID=0]="ID",e[e.VOCAB=1]="VOCAB"}(u=t.PointerType||(t.PointerType={}));var c=function(){function e(){this.base="",this.vocab=null,this.language=null,this.prefixes=new Map,this.properties=new Map,this.prefixedURIs=new Map}return e}();t.DigestedObjectSchema=c;var l=function(){function e(){this.uri=null,this.literal=null,this.literalType=null,this.pointerType=null,this.containerType=null}return e}();t.DigestedPropertyDefinition=l;var f=function(){function e(){}return e.digestSchema=function(t){if(!s.isArray(t))return e.digestSingleSchema(t);for(var r=[],n=0,i=t;n<i.length;n++){var o=i[n];r.push(e.digestSingleSchema(o))}return e.combineDigestedObjectSchemas(r)},e.combineDigestedObjectSchemas=function(t){if(0===t.length)throw new i.IllegalArgumentError("At least one DigestedObjectSchema needs to be specified.");var r=new c;r.vocab=t[0].vocab,r.base=t[0].base,r.language=t[0].language;for(var n=0,o=t;n<o.length;n++){var a=o[n];s.M.extend(r.prefixes,a.prefixes),s.M.extend(r.prefixedURIs,a.prefixedURIs),s.M.extend(r.properties,a.properties)}return e.resolvePrefixedURIs(r),r},e.resolvePrefixedURI=function(e,t){if(null===e)return null;if(!a.URI.Util.isPrefixed(e))return e;var r=e.split(":"),n=r[0],i=r[1];return t.prefixes.has(n)&&(e=t.prefixes.get(n)+i),e},e._resolvePrefixedURI=function(e,t){if(null===e.stringValue||!a.URI.Util.isPrefixed(e.stringValue))return e;var r=e.stringValue.split(":"),n=r[0],i=r[1];return t.prefixes.has(n)?e.stringValue=t.prefixes.get(n)+i:(t.prefixedURIs.has(n)||t.prefixedURIs.set(n,[]),t.prefixedURIs.get(n).push(e)),e},e.digestSingleSchema=function(t){for(var r=new c,f=0,p=["@base","@vocab"];f<p.length;f++){var d=p[f];if(d in t){var h=t[d];if(null!==h&&!s.isString(h))throw new i.IllegalArgumentError("The value of '"+d+"' must be a string or null.");if("@vocab"===d&&""===h||!a.URI.Util.isAbsolute(h)&&!a.URI.Util.isBNodeID(h))throw new i.IllegalArgumentError("The value of '"+d+"' must be an absolute URI"+("@base"===d?" or an empty string":"")+".");r[d.substr(1)]=h}}if(r.base=r.base||"","@language"in t){var h=t["@language"];if(null!==h&&!s.isString(h))throw new i.InvalidJSONLDSyntaxError("The value of '@language' must be a string or null.");r.language=h}for(var d in t)if(t.hasOwnProperty(d)&&"@reverse"!==d&&"@index"!==d&&"@base"!==d&&"@vocab"!==d&&"@language"!==d){var g=t[d];if(s.isString(g)){if(a.URI.Util.isPrefixed(d))throw new i.IllegalArgumentError("A prefixed property cannot be equal to another URI.");var y=new a.URI.Class(g);a.URI.Util.isPrefixed(y.stringValue)&&(y=e._resolvePrefixedURI(y,r)),r.prefixes.set(d,y)}else{if(!g||!s.isObject(g))throw new i.IllegalArgumentError("ObjectSchema Properties can only have string values or object values.");var v=g,b=new l;if("@id"in v){if(a.URI.Util.isPrefixed(d))throw new i.IllegalArgumentError("A prefixed property cannot have assigned another URI.");if(!s.isString(v["@id"]))throw new i.IllegalArgumentError("@id needs to point to a string");b.uri=e._resolvePrefixedURI(new a.URI.Class(v["@id"]),r)}else a.URI.Util.isPrefixed(d)?b.uri=e._resolvePrefixedURI(new a.URI.Class(d),r):null!==r.vocab&&(b.uri=new a.URI.Class(r.vocab+d));if("@type"in v){if(!s.isString(v["@type"]))throw new i.IllegalArgumentError("@type needs to point to a string");if("@id"===v["@type"]||"@vocab"===v["@type"])b.literal=!1,b.pointerType="@id"===v["@type"]?u.ID:u.VOCAB;else{b.literal=!0;var m=e._resolvePrefixedURI(new a.URI.Class(v["@type"]),r);a.URI.Util.isRelative(m.stringValue)&&m.stringValue in o.XSD.DataType&&(m.stringValue=o.XSD.DataType[m.stringValue]),b.literalType=m}}if("@language"in v){var P=v["@language"];if(null!==P&&!s.isString(P))throw new i.IllegalArgumentError("@language needs to point to a string or null.");b.language=P}if("@container"in v)switch(v["@container"]){case"@set":b.containerType=n.SET;break;case"@list":b.containerType=n.LIST;break;case"@language":if(s.isString(b.language))throw new i.IllegalArgumentError("@container cannot be set to @language when the property definition already contains an @language tag.");b.containerType=n.LANGUAGE;break;default:throw new i.IllegalArgumentError("@container needs to be equal to '@list', '@set', or '@language'")}r.properties.set(d,b)}}return e.resolvePrefixedURIs(r),r},e.resolvePrefixedURIs=function(t){return t.prefixes.forEach(function(r,n){if(t.prefixedURIs.has(n)){for(var i=t.prefixedURIs.get(n),o=0,a=i;o<a.length;o++){var s=a[o];e._resolvePrefixedURI(s,t)}t.prefixedURIs.delete(n)}}),t},e}();t.Digester=f;var p=function(){function e(){}return e.resolveURI=function(e,t){return a.URI.Util.isAbsolute(e)?e:(a.URI.Util.isPrefixed(e)?e=f.resolvePrefixedURI(e,t):null!==t.vocab&&(e=t.vocab+e),e)},e}();t.Util=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(41);t.ACE=n;var i=r(42);t.ACL=i;var o=r(23);t.Agent=o;var a=r(24);t.Agents=a;var s=r(43);t.BasicAuthenticator=s.default;var u=r(74);t.PersistedACE=u;var c=r(75);t.PersistedACL=c;var l=r(76);t.PersistedAgent=l;var f=r(25);t.PersistedRole=f;var p=r(44);t.Role=p;var d=r(45);t.Roles=d;var h=r(78);t.TokenAuthenticator=h.default;var g=r(77);t.Ticket=g;var y=r(46);t.Token=y;var v=r(47);t.UsernameAndPasswordToken=v.default;var b,m=r(2),P=r(27),_=r(15),O=r(7),C=r(1),S=r(5),R=r(4),w=r(0);!function(e){e[e.BASIC=0]="BASIC",e[e.TOKEN=1]="TOKEN"}(b=t.Method||(t.Method={}));var A=function(){function e(e){this.roles=null,this.agents=null,this.context=e,this.authenticators=[],this.authenticators[b.BASIC]=new s.default,this.authenticators[b.TOKEN]=new h.default(this.context)}return Object.defineProperty(e.prototype,"authenticatedAgent",{get:function(){return this._authenticatedAgent?this._authenticatedAgent:this.context.parentContext&&this.context.parentContext.auth?this.context.parentContext.auth.authenticatedAgent:null},enumerable:!0,configurable:!0}),e.prototype.isAuthenticated=function(e){return void 0===e&&(e=!0),this.authenticator&&this.authenticator.isAuthenticated()||e&&!!this.context.parentContext&&!!this.context.parentContext.auth&&this.context.parentContext.auth.isAuthenticated()},e.prototype.authenticate=function(e,t){return this.authenticateUsing("TOKEN",e,t)},e.prototype.authenticateUsing=function(e,t,r){switch(e){case"BASIC":return this.authenticateWithBasic(t,r);case"TOKEN":return this.authenticateWithToken(t,r);default:return Promise.reject(new m.IllegalArgumentError("No exists the authentication method '"+e+"'"))}},e.prototype.addAuthentication=function(e){this.isAuthenticated(!1)?this.authenticator.addAuthentication(e):this.context.parentContext&&this.context.parentContext.auth?this.context.parentContext.auth.addAuthentication(e):console.warn("There is no authentication to add to the request.")},e.prototype.clearAuthentication=function(){this.authenticator&&(this.authenticator.clearAuthentication(),this.authenticator=null,this._authenticatedAgent=null)},e.prototype.createTicket=function(e,t){var r=this;void 0===t&&(t={});var n=this.context.resolve(e),i=this.context.resolve(g.TICKETS_CONTAINER),o=P.Factory.create(this.context.documents);return g.Factory.createFrom(o.createResource(),n),this.isAuthenticated()&&this.addAuthentication(t),O.Request.Util.setAcceptHeader("application/ld+json",t),O.Request.Util.setContentTypeHeader("application/ld+json",t),O.Request.Util.setPreferredInteractionModel(C.LDP.Class.RDFSource,t),O.Request.Service.post(i,o.toJSON(),t,new _.Parser.Class).then(function(e){var t=e[0],n=e[1],i=R.Node.Util.getFreeNodes(t),o=i.filter(function(e){return R.Node.Util.hasType(e,g.RDF_CLASS)});if(0===o.length)throw new O.Errors.BadResponseError("No "+g.RDF_CLASS+" was returned.",n);if(o.length>1)throw new O.Errors.BadResponseError("Multiple "+g.RDF_CLASS+" were returned.",n);var a=o[0],s=S.Factory.create(),u=r.context.documents.getSchemaFor(a);return r.context.documents.jsonldConverter.compact(a,s,u,r.context.documents),[s,n]})},e.prototype.getAuthenticatedURL=function(e,t){var r=this.context.resolve(e);return this.createTicket(r,t).then(function(e){var t=e[0];e[1];return r+=R.URI.Util.hasQuery(r)?"&":"?",r+="ticket="+t.ticketKey})},e.prototype.authenticateWithBasic=function(e,t){var r,n=this,i=this.authenticators[b.BASIC];r=new v.default(e,t),this.clearAuthentication();var o;return i.authenticate(r).then(function(e){return o=e,n.getAuthenticatedAgent(i)}).then(function(e){return n._authenticatedAgent=e,n.authenticator=i,o})},e.prototype.authenticateWithToken=function(e,t){var r=this,n=this.authenticators[b.TOKEN],i=null,o=null;if(w.isString(e)&&w.isString(t))o=new v.default(e,t);else{if(!y.Factory.hasRequiredValues(e))return Promise.reject(new m.IllegalArgumentError("Parameters do not match with the authentication request."));i=e}return this.clearAuthentication(),n.authenticate(o||i).then(function(e){return i=e,l.Factory.is(i.agent)?i.agent:r.getAuthenticatedAgent(n)}).then(function(e){return r._authenticatedAgent=e,i.agent=e,r.authenticator=n,i})},e.prototype.getAuthenticatedAgent=function(e){var t={};return e.addAuthentication(t),this.context.documents.get("agents/me/",t).then(function(e){var t=e[0];e[1];return t})},e}();t.Class=A,t.default=A},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),"captureStackTrace"in Error&&Error.captureStackTrace(n,n.constructor),n.message=r,n}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"AbstractError"},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.name+": "+this.message},t}(Error);t.Class=i,t.default=i},function(e,t,r){"use strict";function n(e,t){for(var r=t.prefixes.entries();;){var n=r.next();if(n.done)return e;var i=n.value,o=i[0],a=i[1];if(s.isAbsolute(a.toString())&&e.startsWith(a.toString()))return s.prefix(e,o,a.toString())}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),o=r(0),a=function(){function e(e){this.stringValue=e}return e.prototype.toString=function(){return this.stringValue},e}();t.Class=a;var s=function(){function e(){}return e.hasFragment=function(e){return-1!==e.indexOf("#")},e.hasQuery=function(e){return-1!==e.indexOf("?")},e.hasProtocol=function(e){return o.S.startsWith(e,"https://")||o.S.startsWith(e,"http://")},e.isAbsolute=function(e){return o.S.startsWith(e,"http://")||o.S.startsWith(e,"https://")||o.S.startsWith(e,"://")},e.isRelative=function(t){return!e.isAbsolute(t)},e.isBNodeID=function(e){return o.S.startsWith(e,"_:")},e.generateBNodeID=function(){return"_:"+o.UUID.generate()},e.isPrefixed=function(t){return!e.isAbsolute(t)&&!e.isBNodeID(t)&&o.S.contains(t,":")},e.isFragmentOf=function(t,r){return!!e.hasFragment(t)&&e.getDocumentURI(t)===r},e.isBaseOf=function(t,r){if(t===r)return!0;if(""===t)return!0;if(e.isRelative(r)&&!e.isPrefixed(r))return!0;if(r.startsWith(t)){if(o.S.endsWith(t,"/")||o.S.endsWith(t,"#"))return!0;var n=r.substring(t.length);if(o.S.startsWith(n,"/")||o.S.startsWith(n,"#"))return!0}return!1},e.getRelativeURI=function(e,t){return e.startsWith(t)?e.substring(t.length):e},e.getDocumentURI=function(e){var t=e.split("#");if(t.length>2)throw new Error("IllegalArgument: The URI provided has more than one # sign.");return t[0]},e.getFragment=function(e){var t=e.split("#");if(t.length<2)return null;if(t.length>2)throw new Error("IllegalArgument: The URI provided has more than one # sign.");return t[1]},e.getSlug=function(t){var r=t.split("#");if(2===r.length)return e.getSlug(r[1]);if(r.length>2)throw new i.IllegalArgumentError("Invalid URI: The uri contains two '#' symbols.");if(""===(t=r[0]))return t;if("/"===t)return t;var n=t.split("/");return""===n[n.length-1]?n[n.length-2]+"/":n[n.length-1]},e.getParameters=function(t){var r=new Map;return e.hasQuery(t)?(t.replace(/^.*\?/,"").split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),n=t.shift(),i=t.length>0?t.join("="):null;r.has(n)?r.set(n,[].concat(r.get(n),i)):r.set(n,i)}),r):r},e.resolve=function(t,r){if(e.isAbsolute(r)||e.isBNodeID(r)||e.isPrefixed(r))return r;var n=t.substr(0,t.indexOf("://")+3),i=t.substr(t.indexOf("://")+3,t.length-1);return-1===i.lastIndexOf("/")&&(i+="/"),o.S.startsWith(r,"?")||o.S.startsWith(r,"#")?(e.hasQuery(i)&&(i=i.substr(0,i.indexOf("?"))),!e.hasFragment(i)||o.S.startsWith(r,"?")&&!o.S.endsWith(i,"#")||(i=e.getDocumentURI(i))):(i=i.substr(0,i.lastIndexOf("/")+1),o.S.endsWith(i,"?")||o.S.endsWith(i,"#")||o.S.endsWith(i,"/")||(i+="/")),o.S.startsWith(r,"/")&&(r=r.substr(1,r.length)),n+i+r},e.removeProtocol=function(e){return o.S.startsWith(e,"https://")?e.substr(5,e.length):o.S.startsWith(e,"http://")?e.substr(4,e.length):e},e.prefix=function(t,r,i){void 0===i&&(i=null);var a=o.isString(r)?null:r,s=o.isString(r)?r:null;return null!==a?n(t,a):e.isPrefixed(t)||!t.startsWith(i)?t:s+":"+t.substring(i.length)},e}();t.Util=s,t.default=a},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(11),o=function(e){function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"IllegalArgumentError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(44),o=r(0);t.RDF_CLASS=n.CS.Class.AppRole,t.SCHEMA={parentRole:{"@id":n.CS.Predicate.parentRole,"@type":"@id"},childRoles:{"@id":n.CS.Predicate.childRole,"@type":"@id","@container":"@set"}};var a=function(){function e(){}return e.hasClassProperties=function(e){return o.isObject(e)},e.is=function(e){return i.Factory.is(e)&&e.hasType(t.RDF_CLASS)},e.create=function(t,r){return e.createFrom({},t,r)},e.createFrom=function(e,t,r){var o=i.Factory.createFrom(e,t,r);return o.types.push(n.CS.Class.AppRole),o},e}();t.Factory=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(30);t.Converter=n;var i=r(54);t.Parser=i;var o=r(55);t.Processor=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(110);t.AddMemberAction=n;var i=r(111);t.DirectContainer=i;var o=r(56);t.Error=o;var a=r(31);t.ErrorResponse=a;var s=r(112);t.IndirectContainer=s;var u=r(113);t.RemoveMemberAction=u;var c=r(115);t.ResponseMetadata=c;var l=r(114);t.ResourceMetadata=l},function(e,t,r){"use strict";function n(e){var t,r=this;return t=r.isResolved()?Promise.resolve(r.accessControlList):r.executeSELECTQuery("SELECT ?acl WHERE {\n\t\t\t<"+r.id+"> <"+a.CS.Predicate.accessControlList+"> ?acl.\n\t\t}").then(function(e){var t=e[0];e[1];return t.bindings[0].acl}),t.then(function(t){return r._documents.get(t.id,e)}).then(function(e){var t=e[0],r=e[1];if(!u.Util.hasType(t,o.ACL.RDF_CLASS))throw new i.Errors.BadResponseError("The response does not contains a "+o.ACL.RDF_CLASS+" object.",r);return[t,r]})}Object.defineProperty(t,"__esModule",{value:!0});var i=r(7),o=r(10),a=r(1),s=r(19),u=r(5),c=r(0),l=function(){function e(){}return e.hasClassProperties=function(e){return c.isObject(e)&&c.hasFunction(e,"getACL")},e.is=function(t){return e.hasClassProperties(t)&&s.Factory.is(t)},e.decorate=function(t){if(e.hasClassProperties(t))return t;var r=t;return Object.defineProperties(r,{getACL:{writable:!1,enumerable:!1,configurable:!0,value:n}}),r},e}();t.Factory=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.namespace="http://www.w3.org/2001/XMLSchema#";var i=function(){function e(){}return e}();i.date=t.namespace+"date",i.dateTime=t.namespace+"dateTime",i.duration=t.namespace+"duration",i.gDay=t.namespace+"gDay",i.gMonth=t.namespace+"gMonth",i.gMonthDay=t.namespace+"gMonthDay",i.gYear=t.namespace+"gYear",i.gYearMonth=t.namespace+"gYearMonth",i.time=t.namespace+"time",i.byte=t.namespace+"byte",i.decimal=t.namespace+"decimal",i.int=t.namespace+"int",i.integer=t.namespace+"integer",i.long=t.namespace+"long",i.negativeInteger=t.namespace+"negativeInteger",i.nonNegativeInteger=t.namespace+"nonNegativeInteger",i.nonPositiveInteger=t.namespace+"nonPositiveInteger",i.positiveInteger=t.namespace+"positiveInteger",i.short=t.namespace+"short",i.unsignedLong=t.namespace+"unsignedLong",i.unsignedInt=t.namespace+"unsignedInt",i.unsignedShort=t.namespace+"unsignedShort",i.unsignedByte=t.namespace+"unsignedByte",i.double=t.namespace+"double",i.float=t.namespace+"float",i.boolean=t.namespace+"boolean",i.string=t.namespace+"string",i.object=t.namespace+"object",t.DataType=i,n.forEachOwnProperty(i,function(e,t){i[t]=e})},function(e,t,r){"use strict";function n(e){return function(){if(e.call(this))return!0;for(var t=this,r=0,n=t.getFragments();r<n.length;r++){var i=n[r];if(i.isDirty())return!0}for(var o=0,a=t._savedFragments;o<a.length;o++){var i=a[o];if(!t.hasFragment(i.id))return!0}return!1}}function i(e){return function(){var t=this;t._fragmentsIndex.clear();for(var r=0,n=t._savedFragments;r<n.length;r++){var i=n[r],o="slug"in i?i.slug:i.id;i.revert(),t._fragmentsIndex.set(o,i)}e.call(t)}}function o(){var e=this;e._savedFragments=G.A.from(e._fragmentsIndex.values())}function a(e){if(Y.Util.isAbsolute(e))return e;var t=this._documents.getGeneralSchema();return V.Util.resolveURI(e,t)}function s(e){return function(t){t=a.call(this,t),e.call(this,t)}}function u(e){return function(t){return t=a.call(this,t),e.call(this,t)}}function c(e){return function(t){t=a.call(this,t),e.call(this,t)}}function l(e){return function(t,r){var n=e.call(this,t,r),i=n.id;return W.URI.Util.isBNodeID(i)?X.Factory.decorate(n):Q.Factory.decorate(n),n}}function f(e){return function(t,r){var n=e.call(this,t,r);return X.Factory.decorate(n)}}function p(){return this._documents.refresh(this)}function d(){return this._documents.save(this)}function h(){return this._documents.saveAndRefresh(this)}function g(){return this._documents.delete(this.id)}function y(){return this._documents.getDownloadURL(this.id)}function v(e){return this._documents.addMember(this.id,e)}function b(e){return this._documents.addMembers(this.id,e)}function m(e,t,r){void 0===r&&(r={}),r=k.Request.Util.isOptions(e)?e:k.Request.Util.isOptions(t)?t:r;var n=G.isString(e)||k.Request.Util.isOptions(e)||!e?{}:e,i=G.isString(e)?e:G.isString(t)?t:null;return this._documents.createChild(this.id,n,i,r)}function P(e,t,r){return this._documents.createChildren(this.id,e,t,r)}function _(e,t,r){void 0===r&&(r={}),r=k.Request.Util.isOptions(e)?e:k.Request.Util.isOptions(t)?t:r;var n=G.isString(e)||k.Request.Util.isOptions(e)||!e?{}:e,i=G.isString(e)?e:G.isString(t)?t:null;return this._documents.createChildAndRetrieve(this.id,n,i,r)}function O(e,t,r){return this._documents.createChildrenAndRetrieve(this.id,e,t,r)}function C(e,t,r){return this._documents.createAccessPoint(this.id,e,t,r)}function S(e,t,r){return this._documents.createAccessPoints(this.id,e,t,r)}function R(){return this._documents.listChildren(this.id)}function w(e){return this._documents.getChildren(this.id,e)}function A(e){return void 0===e&&(e=!0),this._documents.listMembers(this.id,e)}function D(e,t){var r=!0;return G.isBoolean(e)?r=e:t=e,this._documents.getMembers(this.id,r,t)}function T(e){return this._documents.removeMember(this.id,e)}function j(e){return this._documents.removeMembers(this.id,e)}function E(){return this._documents.removeAllMembers(this.id)}function I(e,t){return this._documents.upload(this.id,e,t)}function x(e,t){return void 0===t&&(t={}),this._documents.executeRawASKQuery(this.id,e,t)}function U(e,t){return void 0===t&&(t={}),this._documents.executeASKQuery(this.id,e,t)}function F(e,t){return void 0===t&&(t={}),this._documents.executeRawSELECTQuery(this.id,e,t)}function M(e,t){return void 0===t&&(t={}),this._documents.executeSELECTQuery(this.id,e,t)}function L(e,t){return void 0===t&&(t={}),this._documents.executeRawCONSTRUCTQuery(this.id,e,t)}function N(e,t){return void 0===t&&(t={}),this._documents.executeRawDESCRIBEQuery(this.id,e,t)}function q(e,t){return void 0===t&&(t={}),this._documents.executeUPDATE(this.id,e,t)}function B(){return this._documents.sparql(this.id)}Object.defineProperty(t,"__esModule",{value:!0});var H=r(8),k=r(7),V=r(9),z=r(33),X=r(32),Q=r(60),K=r(6),W=r(4),G=r(0),Y=r(12),J=function(){function e(){}return e.hasClassProperties=function(e){return G.hasPropertyDefined(e,"_documents")&&G.hasPropertyDefined(e,"_etag")&&G.hasFunction(e,"refresh")&&G.hasFunction(e,"save")&&G.hasFunction(e,"saveAndRefresh")&&G.hasFunction(e,"delete")&&G.hasFunction(e,"getDownloadURL")&&G.hasFunction(e,"addMember")&&G.hasFunction(e,"addMembers")&&G.hasFunction(e,"createAccessPoint")&&G.hasFunction(e,"createAccessPoints")&&G.hasFunction(e,"createChild")&&G.hasFunction(e,"createChildren")&&G.hasFunction(e,"createChildAndRetrieve")&&G.hasFunction(e,"createChildrenAndRetrieve")&&G.hasFunction(e,"getChildren")&&G.hasFunction(e,"getMembers")&&G.hasFunction(e,"listChildren")&&G.hasFunction(e,"listMembers")&&G.hasFunction(e,"removeMember")&&G.hasFunction(e,"removeMembers")&&G.hasFunction(e,"removeAllMembers")&&G.hasFunction(e,"upload")&&G.hasFunction(e,"executeRawASKQuery")&&G.hasFunction(e,"executeASKQuery")&&G.hasFunction(e,"executeRawSELECTQuery")&&G.hasFunction(e,"executeSELECTQuery")&&G.hasFunction(e,"executeRawDESCRIBEQuery")&&G.hasFunction(e,"executeRawCONSTRUCTQuery")&&G.hasFunction(e,"executeUPDATE")&&G.hasFunction(e,"sparql")},e.is=function(t){return e.hasClassProperties(t)&&H.Factory.is(t)},e.create=function(t,r,n){void 0===n&&(n={});var i=H.Factory.create();return i.id=t,e.decorate(i,r,n)},e.createFrom=function(t,r,n,i){void 0===i&&(i={});var o=H.Factory.createFrom(t);return o.id=r,e.decorate(o,n,i)},e.decorate=function(t,r,a){if(void 0===a&&(a={}),H.Factory.decorate(t),z.Factory.decorate(t,a),e.hasClassProperties(t))return t;var k=t;return Object.defineProperties(k,{_documents:{writable:!1,enumerable:!1,configurable:!0,value:r},_etag:{writable:!0,enumerable:!1,configurable:!0,value:null},_savedFragments:{writable:!0,enumerable:!1,configurable:!0,value:[]},_syncSavedFragments:{writable:!1,enumerable:!1,configurable:!0,value:o},addType:{writable:!1,enumerable:!1,configurable:!0,value:s(k.addType)},hasType:{writable:!1,enumerable:!1,configurable:!0,value:u(k.hasType)},removeType:{writable:!1,enumerable:!1,configurable:!0,value:c(k.removeType)},hasPointer:{writable:!1,enumerable:!1,configurable:!0,value:function(){var e=k.hasPointer;return function(t){return W.URI.Util.isPrefixed(t)&&(t=V.Digester.resolvePrefixedURI(t,this._documents.getGeneralSchema())),!!e.call(this,t)||!Y.Util.isBNodeID(t)&&this._documents.hasPointer(t)}}()},getPointer:{writable:!1,enumerable:!1,configurable:!0,value:function(){var e=k.getPointer,t=k.inScope;return function(r){return W.URI.Util.isPrefixed(r)&&(r=V.Digester.resolvePrefixedURI(r,this._documents.getGeneralSchema())),t.call(this,r)?e.call(this,r):this._documents.getPointer(r)}}()},inScope:{writable:!1,enumerable:!1,configurable:!0,value:function(){var e=k.inScope;return function(t){var r=K.Factory.is(t)?t.id:t;return W.URI.Util.isPrefixed(r)&&(r=V.Digester.resolvePrefixedURI(r,this._documents.getGeneralSchema())),!!e.call(this,r)||this._documents.inScope(r)}}()},refresh:{writable:!1,enumerable:!1,configurable:!0,value:p},save:{writable:!1,enumerable:!1,configurable:!0,value:d},saveAndRefresh:{writable:!1,enumerable:!1,configurable:!0,value:h},delete:{writable:!1,enumerable:!1,configurable:!0,value:g},getDownloadURL:{writable:!1,enumerable:!1,configurable:!0,value:y},addMember:{writable:!1,enumerable:!1,configurable:!0,value:v},addMembers:{writable:!1,enumerable:!1,configurable:!0,value:b},createChild:{writable:!1,enumerable:!1,configurable:!0,value:m},createChildren:{writable:!1,enumerable:!1,configurable:!0,value:P},createChildAndRetrieve:{writable:!1,enumerable:!1,configurable:!0,value:_},createChildrenAndRetrieve:{writable:!1,enumerable:!1,configurable:!0,value:O},createAccessPoint:{writable:!1,enumerable:!1,configurable:!0,value:C},createAccessPoints:{writable:!1,enumerable:!1,configurable:!0,value:S},listChildren:{writable:!1,enumerable:!1,configurable:!0,value:R},getChildren:{writable:!1,enumerable:!1,configurable:!0,value:w},listMembers:{writable:!1,enumerable:!1,configurable:!0,value:A},getMembers:{writable:!1,enumerable:!1,configurable:!0,value:D},removeMember:{writable:!1,enumerable:!1,configurable:!0,value:T},removeMembers:{writable:!1,enumerable:!1,configurable:!0,value:j},removeAllMembers:{writable:!1,enumerable:!1,configurable:!0,value:E},upload:{writable:!1,enumerable:!1,configurable:!0,value:I},executeRawASKQuery:{writable:!1,enumerable:!1,configurable:!0,value:x},executeASKQuery:{writable:!1,enumerable:!1,configurable:!0,value:U},executeRawSELECTQuery:{writable:!1,enumerable:!1,configurable:!0,value:F},executeSELECTQuery:{writable:!1,enumerable:!1,configurable:!0,value:M},executeRawCONSTRUCTQuery:{writable:!1,enumerable:!1,configurable:!0,value:L},executeRawDESCRIBEQuery:{writable:!1,enumerable:!1,configurable:!0,value:N},executeUPDATE:{writable:!1,enumerable:!1,configurable:!0,value:q},sparql:{writable:!1,enumerable:!1,configurable:!0,value:B},createFragment:{writable:!1,enumerable:!1,configurable:!0,value:l(k.createFragment)},createNamedFragment:{writable:!1,enumerable:!1,configurable:!0,value:f(k.createNamedFragment)},isDirty:{writable:!1,enumerable:!1,configurable:!0,value:n(k.isDirty)},revert:{writable:!1,enumerable:!1,configurable:!0,value:i(k.revert)}}),k},e}();t.Factory=J},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),i=r(1),o=r(0),a=r(13),s=r(22);t.PersistedRole=s;var u=r(14);t.Role=u;var c=r(40);t.Roles=c;var l=r(21);t.Context=l.default,t.RDF_CLASS=i.CS.Class.Application,t.SCHEMA={name:{"@id":i.CS.Predicate.namae,"@type":i.XSD.DataType.string},description:{"@id":i.CS.Predicate.description,"@type":i.XSD.DataType.string},rootContainer:{"@id":i.CS.Predicate.rootContainer,"@type":"@id"},allowsOrigins:{"@id":i.CS.Predicate.allowsOrigin,"@container":"@set"}};var f=function(){function e(){}return e.hasClassProperties=function(e){return o.hasPropertyDefined(e,"name")},e.is=function(r){return n.Factory.hasClassProperties(r)&&e.hasClassProperties(r)&&r.hasType(t.RDF_CLASS)},e.create=function(t,r){return e.createFrom({},t,r)},e.createFrom=function(e,t,r){if(n.Factory.hasClassProperties(e)||(e=n.Factory.createFrom(e)),!o.isString(t)||!t)throw new a.default("The name cannot be empty.");var s=e;return s.name=t,s.types.push(i.CS.Class.Application),r&&(s.description=r),s},e}();t.Factory=f},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(38),o=r(72),a=r(22),s=r(4),u=r(14),c=function(e){function t(t,r){var n=e.call(this,t)||this;return n.auth=new o.default(n),n.documents.documentDecorators.set(u.RDF_CLASS,{decorator:a.Factory.decorate,parameters:[n.auth.roles]}),n._app=r,n.base=n.getBase(n.app),n.documents.removePointer(r.rootContainer),r.rootContainer=n.documents.getPointer(r.rootContainer.id),n}return n(t,e),Object.defineProperty(t.prototype,"app",{get:function(){return this._app},enumerable:!0,configurable:!0}),t.prototype.resolve=function(e){if(s.URI.Util.isAbsolute(e))return e;var t=this.parentContext.resolve(this.base);return s.URI.Util.resolve(t,e)},t.prototype.getBase=function(e){return e.rootContainer.id},t}(i.default);t.Class=c,t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(14),i=r(25),o=r(0),a=function(){function e(){}return e.hasClassProperties=function(e){return o.hasPropertyDefined(e,"_roles")},e.is=function(t){return e.hasClassProperties(t)&&n.Factory.is(t)&&i.Factory.is(t)},e.decorate=function(t,r){var n=t;return e.hasClassProperties(n)?n:(i.Factory.decorate(n,r),n)},e}();t.Factory=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),i=r(13),o=r(1),a=r(0);t.RDF_CLASS=o.CS.Class.Agent,t.SCHEMA={name:{"@id":o.CS.Predicate.namae,"@type":o.XSD.DataType.string},email:{"@id":o.VCARD.Predicate.email,"@type":o.XSD.DataType.string},password:{"@id":o.CS.Predicate.password,"@type":o.XSD.DataType.string},enabled:{"@id":o.CS.Predicate.enabled,"@type":o.XSD.DataType.boolean},platformRoles:{"@id":o.CS.Predicate.platformRole,"@type":"@id","@container":"@set"}};var s=function(){function e(){}return e.hasClassProperties=function(e){return a.hasPropertyDefined(e,"name")&&a.hasPropertyDefined(e,"email")&&a.hasPropertyDefined(e,"password")},e.is=function(r){return e.hasClassProperties(r)&&n.Factory.hasClassProperties(r)&&r.hasType(t.RDF_CLASS)},e.create=function(t,r,n){return e.createFrom({},t,r,n)},e.createFrom=function(e,t,r,a){if(n.Factory.hasClassProperties(e)||(e=n.Factory.createFrom(e)),!t)throw new i.default("The name cannot be empty.");if(!r)throw new i.default("The email cannot be empty.");if(!a)throw new i.default("The password cannot be empty.");var s=e;return s.name=t,s.email=r,s.password=a,s.types.push(o.CS.Class.Agent),s},e}();t.Factory=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(23),i=r(2),o=r(12),a=function(){function e(e){this.context=e}return e.prototype.register=function(e,t){var r=this;return void 0===t&&(t=null),this.resolveURI("").then(function(o){if(!n.Factory.is(e))throw new i.IllegalArgumentError("The Document is not a cs:Agent object.");return r.context.documents.createChild(o,e,t)})},e.prototype.get=function(e,t){var r=this;return this.resolveURI(e).then(function(e){return r.context.documents.get(e,t)})},e.prototype.enable=function(e,t){return this.changeEnabledStatus(e,!0,t)},e.prototype.disable=function(e,t){return this.changeEnabledStatus(e,!1,t)},e.prototype.delete=function(e,t){var r=this;return this.resolveURI(e).then(function(e){return r.context.documents.delete(e,t)})},e.prototype.changeEnabledStatus=function(e,t,r){var n;return this.get(e,r).then(function(e){var r=e[0],i=e[1];return n=i,r.enabled=t,r.save()}).then(function(e){var t=e[0],r=e[1];return[t,[n,r]]})},e.prototype.resolveURI=function(e){var t=this;return new Promise(function(r){var n=t.context.resolve(t.getContainerURI()),a=o.Util.resolve(n,e);if(!o.Util.isBaseOf(n,a))throw new i.IllegalArgumentError("The URI provided is not a valid agent of the current context.");r(a)})},e.prototype.getContainerURI=function(){if(!this.context.hasSetting("platform.agents.container"))throw new i.IllegalStateError("The agents container URI hasn't been set.");return this.context.getSetting("platform.agents.container")},e}();t.Class=a,t.default=a},function(e,t,r){"use strict";function n(e,t,r){return l.call(this),this._roles.createChild(this.id,e,t,r)}function i(e){return l.call(this),this._roles.listAgents(this.id,e)}function o(e,t){return l.call(this),this._roles.getAgents(this.id,e,t)}function a(e,t){return l.call(this),this._roles.addAgents(this.id,[e],t)}function s(e,t){return l.call(this),this._roles.addAgents(this.id,e,t)}function u(e,t){return l.call(this),this._roles.removeAgents(this.id,[e],t)}function c(e,t){return l.call(this),this._roles.removeAgents(this.id,e,t)}function l(){if(!this._roles)throw new f.IllegalStateError("The context of the current role, does not support roles management.")}Object.defineProperty(t,"__esModule",{value:!0});var f=r(2),p=r(17),d=r(0),h=function(){function e(){}return e.hasClassProperties=function(e){return d.hasPropertyDefined(e,"_roles")&&d.hasFunction(e,"createChild")&&d.hasFunction(e,"listAgents")&&d.hasFunction(e,"getAgents")&&d.hasFunction(e,"addAgent")&&d.hasFunction(e,"addAgents")&&d.hasFunction(e,"removeAgent")&&d.hasFunction(e,"removeAgents")},e.is=function(t){return e.hasClassProperties(t)&&p.Factory.is(t)},e.decorate=function(t,r){var l=t;return e.hasClassProperties(l)?l:(p.Factory.hasClassProperties(l)||p.Factory.decorate(l),Object.defineProperties(l,{_roles:{writable:!1,enumerable:!1,configurable:!0,value:r},createChild:{writable:!0,enumerable:!1,configurable:!0,value:n},listAgents:{writable:!0,enumerable:!1,configurable:!0,value:i},getAgents:{writable:!0,enumerable:!1,configurable:!0,value:o},addAgent:{writable:!0,enumerable:!1,configurable:!0,value:a},addAgents:{writable:!0,enumerable:!1,configurable:!0,value:s},removeAgent:{writable:!0,enumerable:!1,configurable:!0,value:u},removeAgents:{writable:!0,enumerable:!1,configurable:!0,value:c}}),l)},e}();t.Factory=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=r(0),o=function(){function e(){}return e.hasClassProperties=function(e){return i.hasPropertyDefined(e,"document")},e.create=function(e,t){return this.createFrom({},e,t)},e.createFrom=function(t,r,o){void 0===o&&(o=null);var a=r&&i.isString(r)?r:"";o=o||r;var s=n.Factory.createFrom(t,a);return e.hasClassProperties(s)?s:(Object.defineProperties(s,{document:{writable:!1,enumerable:!1,configurable:!0,value:o}}),s)},e}();t.Factory=o},function(e,t,r){"use strict";function n(e){var t=this;return o(e)?t.hasResource(e):t._documents.hasPointer(e)}function i(e){var t=this;if(!o(e))return t._documents.getPointer(e);var r=t.getResource(e);return r||t.createResource(e)}function o(e){return y.URI.Util.isBNodeID(e)}function a(e){var t=this,r=g.Factory.is(e)?e.id:e;return o(r)||t._documents.inScope(r)}function s(e){return this._resourcesIndex.has(e)}function u(e){return this._resourcesIndex.get(e)||null}function c(){var e=this;return b.A.from(e._resourcesIndex.values())}function l(e){return this.createResourceFrom({},e)}function f(e,t){var r=this;if(t){if(!o(t))throw new d.IllegalArgumentError('The id "'+t+'" is out of scope.');if(r._resourcesIndex.has(t))throw new d.IDAlreadyInUseError('The id "'+t+'" is already in use by another resource.')}else t=y.URI.Util.generateBNodeID();var n=v.Factory.createFrom(e,t);return r._resourcesIndex.set(t,n),n}function p(){for(var e=this._documents.getGeneralSchema(),t=new h.default,r=this.getResources(),n=[],i=0,o=r;i<o.length;i++){var a=o[i];n.push(t.expand(a,e,this._documents.getSchemaFor(a)))}return JSON.stringify(n)}Object.defineProperty(t,"__esModule",{value:!0});var d=r(2),h=r(30),g=r(6),y=r(4),v=r(5),b=r(0),m=function(){function e(){}return e.hasClassProperties=function(e){return b.hasPropertyDefined(e,"_documents")&&b.hasPropertyDefined(e,"_resourcesIndex")&&b.hasFunction(e,"hasResource")&&b.hasFunction(e,"getResource")&&b.hasFunction(e,"getResources")&&b.hasFunction(e,"createResource")&&b.hasFunction(e,"createResourceFrom")&&b.hasFunction(e,"hasPointer")&&b.hasFunction(e,"getPointer")&&b.hasFunction(e,"inScope")&&b.hasFunction(e,"toJSON")},e.create=function(t){return e.createFrom({},t)},e.createFrom=function(t,r){var n=e.decorate(t);return n._documents=r,n},e.decorate=function(t){return e.hasClassProperties(t)?t:(Object.defineProperties(t,{_resourcesIndex:{writable:!1,enumerable:!1,configurable:!0,value:new Map},hasPointer:{writable:!1,enumerable:!1,configurable:!0,value:n},getPointer:{writable:!1,enumerable:!1,configurable:!0,value:i},inScope:{writable:!1,enumerable:!1,configurable:!0,value:a},hasResource:{writable:!1,enumerable:!1,configurable:!0,value:s},getResource:{writable:!1,enumerable:!1,configurable:!0,value:u},getResources:{writable:!1,enumerable:!1,configurable:!0,value:c},createResource:{writable:!1,enumerable:!1,configurable:!0,value:l},createResourceFrom:{writable:!1,enumerable:!1,configurable:!0,value:f},toJSON:{writable:!1,enumerable:!1,configurable:!0,value:p}}),t)},e}();t.Factory=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.values=[],e&&(Array.isArray(e)?this.values=e:this.setValues(e))}return e.prototype.toString=function(){return this.values.join(", ")},e.prototype.setValues=function(e){this.values=[];for(var t=e.split(","),r=0,n=t.length;r<n;r++){var o=t[r].trim();this.values.push(new i(o))}},e}();t.Class=n;var i=function(){function e(e){this.value=e}return e.prototype.toString=function(){return this.value},e}();t.Value=i;var o=function(){function e(){}return e.parseHeaders=function(e){for(var t=new Map,r=e.split(/\r?\n/),i=0,o=r.length;i<o;i++){var a=r[i];if(a.trim()){var s=a.split(":");if(s.length<2)throw new Error("ParseError: The header couldn't be parsed.");s.length>2&&(s[1]=s.slice(1).join(":"));var u=s[0].trim().toLowerCase(),c=new n(s[1].trim());if(t.has(u)){t.get(u).values.concat(c.values)}else t.set(u,c)}}return t},e}();t.Util=o,t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.parse=function(e){return new Promise(function(t,r){try{t(JSON.parse(e))}catch(e){r(e)}})},e}();t.Class=n,t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(9),o=r(1),a=r(6),s=r(4),u=r(0),c=function(){function e(t){this._literalSerializers=t||e.getDefaultSerializers()}return Object.defineProperty(e.prototype,"literalSerializers",{get:function(){return this._literalSerializers},enumerable:!0,configurable:!0}),e.getDefaultSerializers=function(){var e=new Map;return e.set(o.XSD.DataType.date,s.Literal.Serializers.XSD.dateSerializer),e.set(o.XSD.DataType.dateTime,s.Literal.Serializers.XSD.dateTimeSerializer),e.set(o.XSD.DataType.time,s.Literal.Serializers.XSD.timeSerializer),e.set(o.XSD.DataType.integer,s.Literal.Serializers.XSD.integerSerializer),e.set(o.XSD.DataType.int,s.Literal.Serializers.XSD.integerSerializer),e.set(o.XSD.DataType.unsignedInt,s.Literal.Serializers.XSD.unsignedIntegerSerializer),e.set(o.XSD.DataType.long,s.Literal.Serializers.XSD.integerSerializer),e.set(o.XSD.DataType.unsignedLong,s.Literal.Serializers.XSD.unsignedIntegerSerializer),e.set(o.XSD.DataType.float,s.Literal.Serializers.XSD.floatSerializer),e.set(o.XSD.DataType.double,s.Literal.Serializers.XSD.floatSerializer),e.set(o.XSD.DataType.boolean,s.Literal.Serializers.XSD.booleanSerializer),e.set(o.XSD.DataType.string,s.Literal.Serializers.XSD.stringSerializer),e},e.getPropertyURI=function(e,t,r){var i,o=null;if(null!==t.uri?(i=t.uri.toString(),s.URI.Util.isRelative(i)&&(o=i)):o=e,null!==o){if(null===r)throw new n.InvalidJSONLDSyntaxError("The context doesn't have a default vocabulary and the object schema does not define a proper absolute @id for the property '"+e+"'");i=r+o}return i},e.prototype.compact=function(e,t,r,n){void 0===n&&(n=null);var i=n?t:null,o=n?r:t;if(n=n||r,!u.isArray(e))return this.compactSingle(e,i,o,n);for(var a=e,s=i||[],c=0,l=a.length;c<l;c++){var f=a[c],p=s[c]=s[c]?s[c]:{};this.compactSingle(f,p,o,n)}return s},e.prototype.expand=function(e,t,r){if(!u.isArray(e))return this.expandSingle(e,t,r)},e.prototype.expandSingle=function(t,r,n){var o=this,a={};return a["@id"]=t.id?t.id:"",t.types&&(a["@type"]=t.types.map(function(e){return i.Util.resolveURI(e,r)})),u.forEachOwnProperty(t,function(t,c){if("id"!==t&&"types"!==t){var l,f=null;if(n.properties.has(t)){var p=u.O.clone(n.properties.get(t),{objects:!0});f=e.getPropertyURI(t,p,n.vocab),l=o.expandProperty(c,p,r,n)}else(s.URI.Util.isAbsolute(t)||null!==n.vocab)&&(l=o.expandPropertyValue(c,r,n),f=i.Util.resolveURI(t,r));l&&f&&(a[f]=l)}}),a},e.prototype.expandProperty=function(e,t,r,o){switch(t.containerType){case null:return t.literal?this.expandPropertyLiteral(e,t.literalType.toString()):!1===t.literal?this.expandPropertyPointer(e,r,o):this.expandPropertyValue(e,r,o);case i.ContainerType.LIST:return t.literal?this.expandPropertyLiteralList(e,t.literalType.toString()):!1===t.literal?this.expandPropertyPointerList(e,r,o):this.expandPropertyList(e,r,o);case i.ContainerType.SET:return t.literal?this.expandPropertyLiterals(e,t.literalType.toString()):!1===t.literal?this.expandPropertyPointers(e,r,o):this.expandPropertyValues(e,r,o);case i.ContainerType.LANGUAGE:return this.expandPropertyLanguageMap(e);default:throw new n.IllegalArgumentError("The containerType specified is not supported.")}},e.prototype.expandPropertyValue=function(e,t,r){if(u.isArray(e))return this.expandPropertyValues(e,t,r);var n=this.expandValue(e,t,r);return n?[n]:null},e.prototype.expandPropertyPointer=function(e,t,r){var n=this.expandPointer(e,t,r);return n?[n]:null},e.prototype.expandPropertyLiteral=function(e,t){var r=this.serializeLiteral(e,t);return null===r?null:[{"@value":r,"@type":t}]},e.prototype.expandPropertyList=function(e,t,r){e=u.isArray(e)?e:[e];var n=this.expandArray(e,t,r);return n?[{"@list":n}]:null},e.prototype.expandPropertyPointerList=function(e,t,r){return[{"@list":this.expandPropertyPointers(e,t,r)}]},e.prototype.expandPropertyLiteralList=function(e,t){return[{"@list":this.expandPropertyLiterals(e,t)}]},e.prototype.expandPropertyValues=function(e,t,r){e=u.isArray(e)?e:[e];var n=this.expandArray(e,t,r);return n||null},e.prototype.expandPropertyPointers=function(e,t,r){e=u.isArray(e)?e:[e];for(var n=[],i=0,o=e;i<o.length;i++){var a=o[i],s=this.expandPointer(a,t,r);s&&n.push(s)}return n},e.prototype.expandPropertyLiterals=function(e,t){e=u.isArray(e)?e:[e];for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n],a=this.serializeLiteral(o,t);a&&r.push({"@value":a,"@type":t})}return r},e.prototype.expandPropertyLanguageMap=function(e){var t=this;if(!u.isObject(e))return null;var r=[];return u.forEachOwnProperty(e,function(e,n){var i=t.literalSerializers.get(o.XSD.DataType.string).serialize(n);r.push({"@value":i,"@type":o.XSD.DataType.string,"@language":e})}),r},e.prototype.serializeLiteral=function(e,t){if(a.Factory.is(e))return null;if(!this.literalSerializers.has(t))return null;try{return this.literalSerializers.get(t).serialize(e)}catch(e){return null}},e.prototype.expandPointer=function(e,t,r){var n,o=!0;if(a.Factory.is(e)?(o=!1,e=e.id):u.isString(e)||(e=null),!(n=e))return null;if(n=i.Digester.resolvePrefixedURI(n,t),t.properties.has(n)){var s=t.properties.get(n);s.uri&&(n=s.uri.stringValue)}return o&&r.vocab&&(n=i.Util.resolveURI(n,t)),{"@id":n}},e.prototype.expandArray=function(e,t,r){for(var n=[],i=0,o=e;i<o.length;i++){var a=o[i],s=this.expandValue(a,t,r);s&&n.push(s)}return n.length?n:null},e.prototype.expandValue=function(e,t,r){return u.isArray(e)?null:a.Factory.is(e)?this.expandPointer(e,t,r):this.expandLiteral(e)},e.prototype.expandLiteral=function(e){var t,r;switch(!0){case u.isFunction(e):return null;case u.isDate(e):r=o.XSD.DataType.dateTime;break;case u.isNumber(e):r=o.XSD.DataType.float;break;case u.isBoolean(e):r=o.XSD.DataType.boolean;break;case u.isString(e):r=o.XSD.DataType.string;break;default:return null}return t=this.literalSerializers.get(r).serialize(e),{"@value":t,"@type":r}},e.prototype.compactSingle=function(e,t,r,o){var a=this,c=this.getPropertyURINameMap(r);if(!e["@id"])throw new n.IllegalArgumentError("The expandedObject doesn't have an @id defined.");return t.id=e["@id"],t.types=e["@type"]?e["@type"]:[],u.forEachOwnProperty(e,function(n,u){if("@id"!==n&&"@type"!==n){var l,f=n,p=e[n];c.has(n)?(f=c.get(n),l=r.properties.get(f)):(null!==r.vocab&&(f=s.URI.Util.getRelativeURI(n,r.vocab)),l=new i.DigestedPropertyDefinition,l.containerType=a.getPropertyContainerType(p)),t[f]=a.getPropertyValue(e,n,l,o)}}),t},e.prototype.getPropertyContainerType=function(e){return 1!==e.length?i.ContainerType.SET:s.List.Factory.is(e[0])?i.ContainerType.LIST:null},e.prototype.getPropertyValue=function(e,t,r,o){switch(r.containerType){case null:return r.literal?s.Node.Util.getPropertyLiteral(e,t,r.literalType.toString()):!1===r.literal?s.Node.Util.getPropertyPointer(e,t,o):s.Node.Util.getProperty(e,t,o);case i.ContainerType.LIST:return r.literal?s.Node.Util.getPropertyLiteralList(e,t,r.literalType.toString()):!1===r.literal?s.Node.Util.getPropertyPointerList(e,t,o):s.Node.Util.getPropertyList(e,t,o);case i.ContainerType.SET:return r.literal?s.Node.Util.getPropertyLiterals(e,t,r.literalType.toString()):!1===r.literal?s.Node.Util.getPropertyPointers(e,t,o):s.Node.Util.getProperties(e,t,o);case i.ContainerType.LANGUAGE:return s.Node.Util.getPropertyLanguageMap(e,t);default:throw new n.IllegalArgumentError("The containerType specified is not supported.")}},e.prototype.getPropertyURINameMap=function(t){var r=new Map;return t.properties.forEach(function(n,i){var o=e.getPropertyURI(i,n,t.vocab);r.set(o,i)}),r},e}();t.Class=c,t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(27),i=r(54),o=r(1),a=r(4),s=r(37),u=r(13);t.RDF_CLASS=o.C.Class.ErrorResponse,t.SCHEMA={errors:{"@id":o.C.Predicate.error,"@type":"@id","@container":"@set"},requestID:{"@id":o.C.Predicate.requestID,"@type":o.XSD.DataType.string},statusCode:{"@id":o.C.Predicate.httpStatusCode,"@type":o.XSD.DataType.int}};var c=function(){function e(){}return e.getMessage=function(e){for(var t=[],r=0,n=e.errors;r<n.length;r++){var i=n[r];t.push(i.message)}return t.join(", ")},e}();t.Util=c;var l=function(){function e(){}return e.prototype.parse=function(e,r){void 0===r&&(r={});var o=s.default.documents;return(new i.default).parse(e).then(function(e){for(var i=n.Factory.create(o),s=0,c=e;s<c.length;s++){var l=c[s],f=void 0,p=!1;if(a.Node.Util.hasType(l,t.RDF_CLASS)){if(p)throw new u.default("The input string contains more than once c:ErrorResponse.");f=i.createResourceFrom(r),p=!0}else f=i.getPointer(l["@id"]);o.jsonldConverter.compact(l,f,o.getSchemaFor(l),i)}if(!r)throw new u.default("The input string does not contains a c:ErrorResponse.");return r})},e}();t.Parser=l},function(e,t,r){"use strict";function n(e){if(c.URI.Util.isAbsolute(e))return e;var t=this.document._documents.getGeneralSchema();return s.Util.resolveURI(e,t)}function i(e){return function(t){t=n.call(this,t),e.call(this,t)}}function o(e){return function(t){return t=n.call(this,t),e.call(this,t)}}function a(e){return function(t){t=n.call(this,t),e.call(this,t)}}Object.defineProperty(t,"__esModule",{value:!0});var s=r(9),u=r(33),c=r(4),l=function(){function e(){}return e.decorate=function(e,t){return void 0===t&&(t={}),u.Factory.decorate(e,t),Object.defineProperties(e,{addType:{writable:!1,enumerable:!1,configurable:!0,value:i(e.addType)},hasType:{writable:!1,enumerable:!1,configurable:!0,value:o(e.hasType)},removeType:{writable:!1,enumerable:!1,configurable:!0,value:a(e.removeType)}}),e},e}();t.Factory=l},function(e,t,r){"use strict";function n(){var e=this;e._snapshot=a.O.clone(e,{arrays:!0}),"id"in e&&(e._snapshot.id=e.id),"types"in e&&(e._snapshot.types=a.O.clone(e.types))}function i(){var e=this;if(!a.O.areEqual(e,e._snapshot,{arrays:!0},{id:!0,types:!0}))return!0;var t=!1;return"id"in e&&(t=t||e._snapshot.id!==e.id),"types"in e&&(t=t||!a.O.areEqual(e._snapshot.types,e.types)),t}function o(){for(var e=this,t=0,r=Object.keys(e);t<r.length;t++){var n=r[t];n in e._snapshot||delete e[n]}a.O.extend(e,e._snapshot,{arrays:!0})}Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),s=function(){function e(){}return e.hasClassProperties=function(e){return a.hasPropertyDefined(e,"_snapshot")&&a.hasFunction(e,"_syncSnapshot")&&a.hasFunction(e,"isDirty")&&a.hasFunction(e,"revert")},e.decorate=function(t,r){if(void 0===r&&(r={}),e.hasClassProperties(t))return t;var a=t;return Object.defineProperties(a,{_snapshot:{writable:!0,enumerable:!1,configurable:!0,value:r},_syncSnapshot:{writable:!1,enumerable:!1,configurable:!0,value:n},isDirty:{writable:!1,enumerable:!1,configurable:!0,value:i},revert:{writable:!1,enumerable:!1,configurable:!0,value:o}}),a},e}();t.Factory=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(){}return e.is=function(e){return n.hasPropertyDefined(e,"@list")},e}();t.Factory=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(18),o=r(2),a=r(125);t.Serializers=a;var s=function(){function e(){}return e.from=function(e){if(n.isNull(e))throw new o.IllegalArgumentError("Null cannot be converted into a Literal");if(!n.isDefined(e))throw new o.IllegalArgumentError("The value is undefined");var t;switch(!0){case n.isDate(e):t=i.DataType.dateTime,e=e.toISOString();break;case n.isNumber(e):t=n.isInteger(e)?i.DataType.integer:i.DataType.double;break;case n.isString(e):t=i.DataType.string;break;case n.isBoolean(e):t=i.DataType.boolean;break;default:t=i.DataType.object,e=JSON.stringify(e)}var r={"@value":e.toString()};return t&&(r["@type"]=t),r},e.parse=function(e,t){void 0===t&&(t=null);var r;if(n.isString(e))r=e;else{var o=e;if(!o)return null;if(!n.hasProperty(o,"@value"))return null;t="@type"in o?o["@type"]:null,r=o["@value"]}if(null===t)return r;if(!n.hasProperty(i.DataType,t))return r;var a,s;switch(t){case i.DataType.date:case i.DataType.dateTime:a=new Date(r);break;case i.DataType.time:s=r.match(/(\d+):(\d+):(\d+)\.(\d+)Z/),a=new Date,a.setUTCHours(parseFloat(s[1]),parseFloat(s[2]),parseFloat(s[3]),parseFloat(s[4]));break;case i.DataType.duration:break;case i.DataType.gDay:case i.DataType.gMonth:case i.DataType.gMonthDay:case i.DataType.gYear:case i.DataType.gYearMonth:break;case i.DataType.byte:case i.DataType.decimal:case i.DataType.int:case i.DataType.integer:case i.DataType.long:case i.DataType.negativeInteger:case i.DataType.nonNegativeInteger:case i.DataType.nonPositiveInteger:case i.DataType.positiveInteger:case i.DataType.short:case i.DataType.unsignedLong:case i.DataType.unsignedInt:case i.DataType.unsignedShort:case i.DataType.unsignedByte:case i.DataType.double:case i.DataType.float:a=parseFloat(r);break;case i.DataType.boolean:a=n.parseBoolean(r);break;case i.DataType.string:a=r;break;case i.DataType.object:a=JSON.parse(r)}return a},e.is=function(e){return n.hasProperty(e,"@value")&&n.isString(e["@value"])},e.hasType=function(e,t){return!e["@type"]&&t===i.DataType.string||e["@type"]===t},e}();t.Factory=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(63),o=r(34),a=r(35),s=r(64),u=r(18),c=function(){function e(){}return e.is=function(e){return n.hasProperty(e,"@id")&&n.isString(e["@id"])},e.create=function(e){return{"@id":e}},e}();t.Factory=c;var l=function(){function e(){}return e.areEqual=function(e,t){return e["@id"]===t["@id"]},e.hasType=function(t,r){return-1!==e.getTypes(t).indexOf(r)},e.getTypes=function(e){return"@type"in e?e["@type"]:[]},e.getPropertyURI=function(e,t){if(!(t in e))return null;if(!n.isArray(e[t]))return null;var r=e[t].find(function(e){return c.is(e)});return void 0!==r?r["@id"]:null},e.getFreeNodes=function(e){return n.isArray(e)?e.filter(function(e){return!i.Factory.is(e)}).filter(function(e){return c.is(e)}):[]},e.getProperty=function(e,t,r){var n=e[t];if(!n)return null;if(!n.length)return null;var i=n[0];return s.Util.parseValue(i,r)},e.getPropertyPointer=function(e,t,r){var n=e[t];if(!n)return null;for(var i=0,o=n;i<o.length;i++){var a=o[i];if(c.is(a))return r.getPointer(a["@id"])}return null},e.getPropertyLiteral=function(e,t,r){var n=e[t];if(!n)return null;for(var i=0,o=n;i<o.length;i++){var s=o[i];if(a.Factory.is(s)&&a.Factory.hasType(s,r))return a.Factory.parse(s)}return null},e.getPropertyList=function(t,r,n){var i=t[r];if(!i)return null;var o=e.getList(i);if(!o)return null;for(var a=[],u=0,c=o["@list"];u<c.length;u++){var l=c[u];a.push(s.Util.parseValue(l,n))}return a},e.getPropertyPointerList=function(t,r,n){var i=t[r];if(!i)return null;var o=e.getList(i);if(!o)return null;for(var a=[],s=0,u=o["@list"];s<u.length;s++){var l=u[s];if(c.is(l)){var f=n.getPointer(l["@id"]);a.push(f)}}return a},e.getPropertyLiteralList=function(t,r,n){var i=t[r];if(!i)return null;var o=e.getList(i);if(!o)return null;for(var s=[],u=0,c=o["@list"];u<c.length;u++){var l=c[u];a.Factory.is(l)&&(a.Factory.hasType(l,n)&&s.push(a.Factory.parse(l)))}return s},e.getProperties=function(e,t,r){var n=e[t];if(!n)return null;if(!n.length)return null;for(var i=[],o=0,a=n;o<a.length;o++){var u=a[o],c=s.Util.parseValue(u,r);null!==c&&i.push(c)}return i},e.getPropertyPointers=function(e,t,r){var n=e[t];if(!n)return[];if(!n.length)return[];for(var i=[],o=0,a=n;o<a.length;o++){var s=a[o];if(c.is(s)){var u=r.getPointer(s["@id"]);null!==u&&i.push(u)}}return i},e.getPropertyURIs=function(e,t){var r=e[t];if(!r)return null;if(!r.length)return null;for(var n=[],i=0,o=r;i<o.length;i++){var a=o[i];c.is(a)&&n.push(a["@id"])}return n},e.getPropertyLiterals=function(e,t,r){var n=e[t];if(!n)return null;for(var i=[],o=0,s=n;o<s.length;o++){var u=s[o];a.Factory.is(u)&&(a.Factory.hasType(u,r)&&i.push(a.Factory.parse(u)))}return i},e.getPropertyLanguageMap=function(e,t){var r=e[t];if(!r)return null;for(var n={},i=0,o=r;i<o.length;i++){var s=o[i];if(a.Factory.is(s)&&a.Factory.hasType(s,u.DataType.string)){var c=s["@language"];c&&(n[c]=a.Factory.parse(s))}}return n},e.getList=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];if(o.Factory.is(n))return n}return null},e}();t.Util=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(14),i=r(70),o=r(10),a=r(48),s=r(49),u=r(56),c=r(31),l=r(2),f=r(16),p=r(1),d=r(9),h=r(62),g=r(4),y=r(127),v=function(){function e(){this.settings=new Map,this.generalObjectSchema=new d.DigestedObjectSchema,this.typeObjectSchemaMap=new Map,this.auth=null,this.documents=new s.default(this),this.registerDefaultObjectSchemas()}return Object.defineProperty(e.prototype,"parentContext",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.getBaseURI=function(){return this.resolve("")},e.prototype.resolve=function(e){return e},e.prototype.hasSetting=function(e){return this.settings.has(e)||!!this.parentContext&&this.parentContext.hasSetting(e)},e.prototype.getSetting=function(e){return this.settings.has(e)?this.settings.get(e):this.parentContext&&this.parentContext.hasSetting(e)?this.parentContext.getSetting(e):null},e.prototype.setSetting=function(e,t){this.settings.set(e,t)},e.prototype.deleteSetting=function(e){this.settings.delete(e)},e.prototype.hasObjectSchema=function(e){return e=this.resolveTypeURI(e),!!this.typeObjectSchemaMap.has(e)||!(!this.parentContext||!this.parentContext.hasObjectSchema(e))},e.prototype.getObjectSchema=function(e){if(void 0===e&&(e=null),e)return e=this.resolveTypeURI(e),this.typeObjectSchemaMap.has(e)?this.typeObjectSchemaMap.get(e):this.parentContext&&this.parentContext.hasObjectSchema(e)?this.parentContext.getObjectSchema(e):null;if(this.generalObjectSchema)return this.generalObjectSchema;if(this.parentContext)return this.parentContext.getObjectSchema();throw new l.IllegalStateError},e.prototype.extendObjectSchema=function(e,t){void 0===t&&(t=null);var r=t?e:null;t=t||e;var n=d.Digester.digestSchema(t);r?this.extendTypeObjectSchema(n,r):this.extendGeneralObjectSchema(n)},e.prototype.clearObjectSchema=function(e){void 0===e&&(e=null),e?(e=this.resolveTypeURI(e),this.typeObjectSchemaMap.delete(e)):this.generalObjectSchema=this.parentContext?null:new d.DigestedObjectSchema},e.prototype.extendGeneralObjectSchema=function(e){var t;t=this.generalObjectSchema?this.generalObjectSchema:this.parentContext?this.parentContext.getObjectSchema():new d.DigestedObjectSchema,this.generalObjectSchema=d.Digester.combineDigestedObjectSchemas([new d.DigestedObjectSchema,t,e])},e.prototype.extendTypeObjectSchema=function(e,t){t=this.resolveTypeURI(t);var r;r=this.typeObjectSchemaMap.has(t)?this.typeObjectSchemaMap.get(t):this.parentContext&&this.parentContext.hasObjectSchema(t)?this.parentContext.getObjectSchema(t):new d.DigestedObjectSchema;var n=d.Digester.combineDigestedObjectSchemas([r,e]);this.typeObjectSchemaMap.set(t,n)},e.prototype.registerDefaultObjectSchemas=function(){this.extendObjectSchema(a.SCHEMA),this.extendObjectSchema(h.RDF_CLASS,h.SCHEMA),this.extendObjectSchema(y.RDF_CLASS,y.SCHEMA),this.extendObjectSchema(i.RDF_CLASS,i.SCHEMA),this.extendObjectSchema(u.RDF_CLASS,u.SCHEMA),this.extendObjectSchema(c.RDF_CLASS,c.SCHEMA),this.extendObjectSchema(p.CS.Class.Application,{name:{"@id":p.CS.Predicate.namae,"@type":p.XSD.DataType.string},description:{"@id":p.CS.Predicate.description,"@type":p.XSD.DataType.string},rootContainer:{"@id":p.CS.Predicate.rootContainer,"@type":"@id"},allowsOrigins:{"@id":p.CS.Predicate.allowsOrigin,"@container":"@set"}}),this.extendObjectSchema(n.RDF_CLASS,o.Role.SCHEMA),this.extendObjectSchema(n.RDF_CLASS,n.SCHEMA),this.extendObjectSchema(f.ResponseMetadata.RDF_CLASS,f.ResponseMetadata.SCHEMA),this.extendObjectSchema(f.ResourceMetadata.RDF_CLASS,f.ResourceMetadata.SCHEMA),this.extendObjectSchema(f.AddMemberAction.RDF_CLASS,f.AddMemberAction.SCHEMA),this.extendObjectSchema(f.RemoveMemberAction.RDF_CLASS,f.RemoveMemberAction.SCHEMA),this.extendObjectSchema(o.ACE.RDF_CLASS,o.ACE.SCHEMA),this.extendObjectSchema(o.ACL.RDF_CLASS,o.ACL.SCHEMA),this.extendObjectSchema(o.Agent.RDF_CLASS,o.Agent.SCHEMA),this.extendObjectSchema(o.Ticket.RDF_CLASS,o.Ticket.SCHEMA),this.extendObjectSchema(o.Token.RDF_CLASS,o.Token.SCHEMA)},e.prototype.resolveTypeURI=function(e){if(g.URI.Util.isAbsolute(e))return e;var t,r=this.getObjectSchema();return this.hasSetting("vocabulary")&&(t=this.resolve(this.getSetting("vocabulary"))),g.URI.Util.isPrefixed(e)?e=d.Digester.resolvePrefixedURI(e,r):t&&(e=t+e),e},e}();t.Class=v,t.instance=new v,t.default=t.instance},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(37),o=function(e){function t(t){void 0===t&&(t=null);var r=e.call(this)||this;return r._parentContext=t||i.instance,r.generalObjectSchema=null,r.typeObjectSchemaMap=new Map,r}return n(t,e),Object.defineProperty(t.prototype,"parentContext",{get:function(){return this._parentContext},enumerable:!0,configurable:!0}),t}(i.Class);t.Class=o,t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),i=r(1);t.RDF_CLASS=i.C.Class.AccessPoint;var o=function(){function e(){}return e.is=function(e){return n.DirectContainer.Factory.is(e)},e.create=function(t,r,n){return e.createFrom({},t,r,n)},e.createFrom=function(e,t,r,i){return n.DirectContainer.Factory.createFrom(e,t,r,i)},e}();t.Factory=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(21),o=r(14),a=r(2),s=r(1),u=r(22),c=r(45),l=function(e){function t(t){if(!(t instanceof i.default))throw new a.NotImplementedError("The context provided is not a AppContext.");return e.call(this,t)||this}return n(t,e),t.prototype.createChild=function(t,r,n,i){return o.Factory.is(r)?e.prototype.createChild.call(this,t,r,n,i):Promise.reject(new a.IllegalArgumentError("The role is not a valid `Carbon.App.Role.Class` object."))},t.prototype.get=function(t,r){return e.prototype.get.call(this,t,r).then(function(e){var t=e[0],r=e[1];if(!u.Factory.is(t))throw new a.IllegalArgumentError("The resource fetched is not a "+s.CS.Class.AppRole);return[t,r]})},t}(c.default);t.Class=l,t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(0);t.RDF_CLASS=n.CS.Class.AccessControlEntry,t.SCHEMA={granting:{"@id":n.CS.Predicate.granting,"@type":n.XSD.DataType.boolean},permissions:{"@id":n.CS.Predicate.permission,"@type":"@id","@container":"@set"},subjects:{"@id":n.CS.Predicate.subject,"@type":"@id","@container":"@set"},subjectsClass:{"@id":n.CS.Predicate.subjectClass,"@type":"@id"}};var o=function(){function e(){}return e.hasClassProperties=function(e){return i.hasPropertyDefined(e,"granting")&&i.hasPropertyDefined(e,"permissions")&&i.hasPropertyDefined(e,"subjects")&&i.hasPropertyDefined(e,"subjectsClass")},e.createFrom=function(e,r,n,i,o){var a=e;return a.types||(a.types=[]),a.types.push(t.RDF_CLASS),a.granting=r,a.subjects=n,a.subjectsClass=i,a.permissions=o,a},e}();t.Factory=o},function(e,t,r){"use strict";function n(e){return _.Factory.is(e)?e:_.Factory.create(e)}function i(e){var t=this;return(O.isArray(e)?e:[e]).map(function(e){return t._parsePointer(e)})}function o(e,t,r,n,i){var o,a=i.filter(function(r){return 1===r.subjects.length&&r.granting===e&&_.Util.areEqual(r.subjects[0],t)});return 0===a.length?(o=m.Factory.createFrom(this.createFragment(),e,[t],r,[]),i.push(o)):o=a[0],Array.prototype.push.apply(o.permissions,n),o}function a(e,t,r,n,a){for(var s=i.call(this,t),u=this._parsePointer(r),c=i.call(this,n),l=0,f=s;l<f.length;l++){var p=f[l];g.call(this,p,c,a),o.call(this,e,p,u,c,a)}}function s(e,t,r){var n=this;n.entries=n.entries||[],a.call(this,!0,e,t,r,n.entries)}function u(e,t,r){var n=this;n.entries=n.entries||[],a.call(this,!1,e,t,r,n.entries)}function c(e,t,r,n){var i=this;i.inheritableEntries=i.inheritableEntries||[],a.call(this,e,t,r,n,i.inheritableEntries)}function l(e,t,r){for(var n=r.filter(function(t){return-1!==O.A.indexOf(t.subjects,e,_.Util.areEqual)}),i=0,o=n;i<o.length;i++){var a=o[i];if(-1!==O.A.indexOf(a.permissions,t,_.Util.areEqual))return a.granting}return null}function f(e,t,r){return r?l(this._parsePointer(e),this._parsePointer(t),r):null}function p(e,t){var r=this;return f.call(this,e,t,r.entries)}function d(e,t){var r=this,n=f.call(this,e,t,r.entries);return null===n?null:!n}function h(e,t){var r=this;return f.call(this,e,t,r.inheritableEntries)}function g(e,t,r){if(r)for(var n=this,i=n.entries===r?n.inheritableEntries:n.entries,a=r.filter(function(t){return-1!==O.A.indexOf(t.subjects,e,_.Util.areEqual)}),s=0,u=a;s<u.length;s++){var c=u[s];if(i&&-1!==O.A.indexOf(i,c,_.Util.areEqual)){r.splice(O.A.indexOf(r,c,_.Util.areEqual),1);var l=o.call(this,c.granting,e,c.subjectsClass,c.permissions,r);a.push(l)}else if(c.subjects.length>1){c.subjects.splice(O.A.indexOf(c.subjects,e,_.Util.areEqual),1);var l=o.call(this,c.granting,e,c.subjectsClass,c.permissions,r);a.push(l)}else{for(var f=0,p=t;f<p.length;f++){var d=p[f],h=O.A.indexOf(c.permissions,d,_.Util.areEqual);-1!==h&&c.permissions.splice(h,1)}0===c.permissions.length&&(r.splice(O.A.indexOf(r,c,_.Util.areEqual),1),n._removeFragment(c))}}}function y(e,t,r){var n=this._parsePointer(e),o=i.call(this,t);g.call(this,n,o,r)}function v(e,t){var r=this;y.call(this,e,t,r.entries)}function b(e,t){var r=this;y.call(this,e,t,r.inheritableEntries)}Object.defineProperty(t,"__esModule",{value:!0});var m=r(41),P=r(1),_=r(6),O=r(0);t.RDF_CLASS=P.CS.Class.AccessControlList,t.SCHEMA={entries:{"@id":P.CS.Predicate.accessControlEntry,"@type":"@id","@container":"@set"},accessTo:{"@id":P.CS.Predicate.accessTo,"@type":"@id"},inheritableEntries:{"@id":P.CS.Predicate.inheritableEntry,"@type":"@id","@container":"@set"}};var C=function(){function e(){}return e.hasClassProperties=function(e){return O.hasPropertyDefined(e,"accessTo")&&O.hasFunction(e,"_parsePointer")&&O.hasFunction(e,"grant")&&O.hasFunction(e,"deny")&&O.hasFunction(e,"configureChildInheritance")&&O.hasFunction(e,"grants")&&O.hasFunction(e,"denies")&&O.hasFunction(e,"getChildInheritance")&&O.hasFunction(e,"remove")&&O.hasFunction(e,"removeChildInheritance")},e.decorate=function(t){var r=t;return e.hasClassProperties(r)?r:(Object.defineProperties(r,{_parsePointer:{writable:!0,enumerable:!1,configurable:!0,value:n},grant:{writable:!0,enumerable:!1,configurable:!0,value:s},deny:{writable:!0,enumerable:!1,configurable:!0,value:u},configureChildInheritance:{writable:!0,enumerable:!1,configurable:!0,value:c},grants:{writable:!0,enumerable:!1,configurable:!0,value:p},denies:{writable:!0,enumerable:!1,configurable:!0,value:d},getChildInheritance:{writable:!0,enumerable:!1,configurable:!0,value:h},remove:{writable:!0,enumerable:!1,configurable:!0,value:v},removeChildInheritance:{writable:!0,enumerable:!1,configurable:!0,value:b}}),r)},e}();t.Factory=C},function(e,t,r){"use strict";function n(e){return"undefined"!=typeof btoa?btoa(e):new Buffer(e).toString("base64")}Object.defineProperty(t,"__esModule",{value:!0});var i=r(7),o=r(2),a=r(79),s=function(){function e(){}return e.prototype.isAuthenticated=function(){return!!this.credentials},e.prototype.authenticate=function(e){var t=this;if(null===e)throw new o.IllegalArgumentError("The authenticationToken cannot be null.");return new Promise(function(r,n){if(!e.username)throw new o.IllegalArgumentError("The username cannot be empty.");if(!e.password)throw new o.IllegalArgumentError("The password cannot be empty.");t.credentials=new a.Class(e.username,e.password),r(t.credentials)})},e.prototype.addAuthentication=function(e){if(!this.isAuthenticated())throw new o.IllegalStateError("The authenticator isn't authenticated.");var t=e.headers?e.headers:e.headers=new Map;return this.addBasicAuthenticationHeader(t),e},e.prototype.clearAuthentication=function(){this.credentials=null},e.prototype.addBasicAuthenticationHeader=function(e){if(!e.has("authorization")){var t=new i.Header.Class;e.set("authorization",t);var r="Basic "+n(this.credentials.username+":"+this.credentials.password);t.values.push(new i.Header.Value(r))}},e}();t.Class=s,t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(8),o=r(1),a=r(13);t.SCHEMA={name:{"@id":o.CS.Predicate.namae,"@type":o.XSD.DataType.string},description:{"@id":o.CS.Predicate.description,"@type":o.XSD.DataType.string},agents:{"@id":o.CS.Predicate.agent,"@type":"@id","@container":"@set"}};var s=function(){function e(){}return e.hasClassProperties=function(e){return n.hasPropertyDefined(e,"name")},e.is=function(t){return e.hasClassProperties(t)&&i.Factory.is(t)},e.create=function(t,r){return e.createFrom({},t,r)},e.createFrom=function(e,t,r){if(i.Factory.hasClassProperties(e)||(e=i.Factory.createFrom(e)),!t)throw new a.default("The name cannot be empty.");var n=e;return n.name=t,n.description=r,n},e}();t.Factory=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(7),o=r(17),a=r(25),s=r(12),u=r(0),c=function(){function e(e){this.context=e}return e.prototype.createChild=function(e,t,r,o){var c=this,l=u.isString(e)?e:e.id,f=u.isString(r)?r:null;o=i.Request.Util.isOptions(r)?r:o;var p,d,h;return this.resolveURI("").then(function(e){if(p=e,l=s.Util.resolve(p,l),!s.Util.isBaseOf(p,l))throw new n.IllegalArgumentError("The parent role provided is not a valid role of the current context.");return c.context.documents.exists(l)}).then(function(e){var r=e[0];e[1];if(!r)throw new n.IllegalArgumentError("The parent role provided does not exist.");return c.context.documents.createChild(p,t,f,o)}).then(function(e){var t=e[0],r=e[1];return h=r,d=a.Factory.decorate(t,c),c.context.documents.addMember(l,t)}).then(function(e){return[d,h]})},e.prototype.get=function(e,t){var r=this;return this.resolveURI(e).then(function(e){return r.context.documents.get(e,t)})},e.prototype.listAgents=function(e,t){var r=this;return this.getAgentsAccessPoint(e).then(function(e){return r.context.documents.listMembers(e.id,t)}).then(function(e){var t=e[0],r=e[1];return[t.map(function(e){return o.Factory.decorate(e)}),r]})},e.prototype.getAgents=function(e,t,r){var n=this;return this.getAgentsAccessPoint(e).then(function(e){return n.context.documents.getMembers(e.id,t,r)})},e.prototype.addAgent=function(e,t,r){return this.addAgents(e,[t],r)},e.prototype.addAgents=function(e,t,r){var n=this;return this.getAgentsAccessPoint(e).then(function(e){return n.context.documents.addMembers(e.id,t,r)})},e.prototype.removeAgent=function(e,t,r){return this.removeAgents(e,[t],r)},e.prototype.removeAgents=function(e,t,r){var n=this;return this.getAgentsAccessPoint(e).then(function(e){return n.context.documents.removeMembers(e.id,t,r)})},e.prototype.resolveURI=function(e){var t=this;return new Promise(function(r){var i=t.context.resolve(t.getContainerURI()),o=s.Util.resolve(i,e);if(!s.Util.isBaseOf(i,o))throw new n.IllegalArgumentError("The URI provided is not a valid role of the current context.");r(o)})},e.prototype.getAgentsAccessPoint=function(e){var t=this;return this.resolveURI(e).then(function(e){return t.context.documents.executeSELECTQuery(e," select distinct ?agentsAccessPoint where {\n\t\t\t\t<"+e+"> <https://carbonldp.com/ns/v1/platform#accessPoint> ?agentsAccessPoint .\n\t\t\t\t?agentsAccessPoint <http://www.w3.org/ns/ldp#hasMemberRelation> <https://carbonldp.com/ns/v1/security#agent> .\n\t\t\t}")}).then(function(e){var t=e[0];e[1];return t.bindings[0].agentsAccessPoint})},e.prototype.getContainerURI=function(){if(!this.context.hasSetting("platform.roles.container"))throw new n.IllegalStateError("The roles container setting hasn't been declared.");return this.context.getSetting("platform.roles.container")},e}();t.Class=c,t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(5),o=r(0);t.RDF_CLASS=n.CS.Class.Token,t.SCHEMA={key:{"@id":n.CS.Predicate.tokenKey,"@type":n.XSD.DataType.string},expirationTime:{"@id":n.CS.Predicate.expirationTime,"@type":n.XSD.DataType.dateTime},agent:{"@id":n.CS.Predicate.credentialsOf,"@type":"@id"}};var a=function(){function e(){}return e.is=function(t){return i.Factory.is(t)&&e.hasClassProperties(t)},e.hasClassProperties=function(e){return o.hasPropertyDefined(e,"key")&&o.hasPropertyDefined(e,"expirationTime")&&o.hasPropertyDefined(e,"agent")},e.hasRequiredValues=function(e){return o.hasProperty(e,"key")&&o.hasProperty(e,"expirationTime")},e.decorate=function(e){return this.hasClassProperties(e),e},e}();t.Factory=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this._username=e,this._password=t}return Object.defineProperty(e.prototype,"username",{get:function(){return this._username},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"password",{get:function(){return this._password},enumerable:!0,configurable:!0}),e}();t.Class=n,t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(26),i=r(1),o=r(4),a=r(0);t.SCHEMA={bNodeIdentifier:{"@id":i.C.Predicate.bNodeIdentifier,"@type":i.XSD.DataType.string}};var s=function(){function e(){}return e.createFrom=function(t,r,i){var s=r&&a.isString(r)?r:o.URI.Util.generateBNodeID();i=i||r;var u=n.Factory.createFrom(t,s,i);return e.decorate(u,u.bNodeIdentifier)},e.decorate=function(e,t){void 0===t&&(t=a.UUID.generate());var r=e;return r.bNodeIdentifier=t,r},e}();t.Factory=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(7),o=r(4),a=r(0),s=r(39),u=r(10),c=r(8),l=r(27),f=r(15),p=r(19),d=r(17),h=r(62),g=r(6),y=r(1),v=r(9),b=r(16),m=r(65),P=r(5),_=r(128),O=r(66),C=function(){function e(e){if(void 0===e&&(e=null),this.context=e,this.pointers=new Map,this.documentsBeingResolved=new Map,this.context&&this.context.parentContext){var t=this.context.parentContext.documents.jsonldConverter;this._jsonldConverter=new f.Converter.Class(t.literalSerializers)}else this._jsonldConverter=new f.Converter.Class;var r=new Map;if(this.context&&this.context.parentContext){var n=this.context.parentContext.documents.documentDecorators;n&&(r=this._documentDecorators=a.M.extend(r,n))}else r.set(h.RDF_CLASS,{decorator:d.Factory.decorate}),r.set(u.ACL.RDF_CLASS,{decorator:u.PersistedACL.Factory.decorate}),r.set(u.Agent.RDF_CLASS,{decorator:u.PersistedAgent.Factory.decorate});this._documentDecorators=r}return Object.defineProperty(e.prototype,"jsonldConverter",{get:function(){return this._jsonldConverter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"documentDecorators",{get:function(){return this._documentDecorators},enumerable:!0,configurable:!0}),e.prototype.inScope=function(e){var t=g.Factory.is(e)?e.id:e;if(o.URI.Util.isBNodeID(t))return!1;if(this.context){o.URI.Util.isPrefixed(t)&&(t=v.Digester.resolvePrefixedURI(t,this.context.getObjectSchema()));var r=this.context.getBaseURI();if(o.URI.Util.isRelative(t))return!0;if(o.URI.Util.isBaseOf(r,t))return!0}else if(o.URI.Util.isAbsolute(t))return!0;return this.context&&this.context.parentContext?this.context.parentContext.documents.inScope(t):o.URI.Util.isRelative(t)},e.prototype.hasPointer=function(e){return e=this.getPointerID(e),!!this.pointers.has(e)||!(!this.context||!this.context.parentContext)&&this.context.parentContext.documents.hasPointer(e)},e.prototype.getPointer=function(e){var t=this.getPointerID(e);if(null===t){if(this.context&&this.context.parentContext)return this.context.parentContext.documents.getPointer(e);throw new n.IllegalArgumentError("The pointer id is not supported by this module.")}var r;return this.pointers.has(t)||(r=this.createPointer(t),this.pointers.set(t,r)),this.pointers.get(t)},e.prototype.removePointer=function(e){var t=a.isString(e)?e:e.id,r=this.getPointerID(t);return null===r?!(!this.context||!this.context.parentContext)&&this.context.parentContext.documents.removePointer(t):this.pointers.delete(r)},e.prototype.get=function(e,t){var r=this;void 0===t&&(t={});var n=this.getPointerID(e);if(e=this.getRequestURI(e),this.setDefaultRequestOptions(t,y.LDP.Class.RDFSource),this.hasPointer(e)){var a=this.getPointer(e);if(a.isResolved())return Promise.resolve([a,null])}if(this.documentsBeingResolved.has(n))return this.documentsBeingResolved.get(n);var s=i.Request.Service.get(e,t,new o.Document.Parser).then(function(t){var o=t[0],a=t[1],s=i.Response.Util.getETag(a);if(null===s)throw new i.Errors.BadResponseError("The response doesn't contain an ETag",a);var u=a.getHeader("Content-Location");if(u){if(1!==u.values.length)throw new i.Errors.BadResponseError("The response contains more than one Content-Location header.",a);if(!(e=u.toString()))throw new i.Errors.BadResponseError("The response doesn't contain a valid 'Content-Location' header.",a)}var c=r.getRDFDocument(e,o,a);if(null===c)throw new i.Errors.BadResponseError("No document was returned.",a);var l=r._getPersistedDocument(c,a);return l._etag=s,r.documentsBeingResolved.delete(n),[l,a]});return this.documentsBeingResolved.set(n,s),s},e.prototype.exists=function(e,t){return void 0===t&&(t={}),e=this.getRequestURI(e),this.setDefaultRequestOptions(t,y.LDP.Class.RDFSource),i.Request.Service.head(e,t).then(function(e){return[!0,e]},function(e){return 404===e.response.status?[!1,e.response]:Promise.reject(e)})},e.prototype.createChild=function(e,t,r,i){void 0===i&&(i={});var o=a.isString(r)?r:null;if(i=!a.isString(r)&&r?r:i,p.Factory.is(t))return Promise.reject(new n.IllegalArgumentError("The child provided has been already persisted."));var s=c.Factory.is(t)?t:c.Factory.createFrom(t);return this.setDefaultRequestOptions(i,y.LDP.Class.Container),this.persistDocument(e,o,s,i)},e.prototype.createChildren=function(e,t,r,n){var i=this;void 0===n&&(n={});var o=a.isArray(r)?r:null;return n=!a.isArray(r)&&r?r:n,Promise.all(t.map(function(t,r){var s=null!==o&&r<o.length&&o[r]?o[r]:null,u=Object.assign({},n);return n.headers&&(u.headers=a.M.extend(new Map,n.headers)),i.createChild(e,t,s,u)})).then(function(e){return[e.map(function(e){return e[0]}),e.map(function(e){return e[1]})]})},e.prototype.createChildAndRetrieve=function(e,t,r,n){var o=this;void 0===n&&(n={});var a=[],s=i.Request.Util.isOptions(r)?r:n;return i.Request.Util.setPreferredRetrievalResource("Created",s),this.createChild(e,t,r,n).then(function(e){var t=e[0],r=e[1];return a.push(r),t.isResolved()?[t,null]:o.get(t.id)}).then(function(e){var t=e[0],r=e[1];return r&&a.push(r),[t,a]})},e.prototype.createChildrenAndRetrieve=function(e,t,r,n){void 0===n&&(n={});var o=[],a=i.Request.Util.isOptions(r)?r:n;return i.Request.Util.setPreferredRetrievalResource("Created",a),this.createChildren(e,t,r,n).then(function(e){var t=e[0],r=e[1];return o.push(r),t.every(function(e){return e.isResolved()})?[t,null]:g.Util.resolveAll(t)}).then(function(e){var t=e[0],r=e[1];return r&&o.push(r),[t,o]})},e.prototype.listChildren=function(e,t){var r=this;void 0===t&&(t={}),e=this.getRequestURI(e),this.setDefaultRequestOptions(t,y.LDP.Class.Container);var n={include:[y.LDP.Class.PreferContainment],omit:[y.LDP.Class.PreferMembership,y.LDP.Class.PreferMinimalContainer,y.C.Class.PreferContainmentResources,y.C.Class.PreferMembershipResources]};return i.Request.Util.setContainerRetrievalPreferences(n,t),i.Request.Service.get(e,t,new o.Document.Parser).then(function(t){var n=t[0],i=t[1],a=r.getRDFDocument(e,n,i);if(null===a)return[[],i];var s=r.getDocumentResource(a,i);return[o.Node.Util.getPropertyPointers(s,y.LDP.Predicate.contains,r).map(function(e){return p.Factory.decorate(e,r)}),i]})},e.prototype.getChildren=function(e,t,r){var n=this,a=_.Factory.is(t)?t:null;r=i.Request.Util.isOptions(t)?t:i.Request.Util.isOptions(r)?r:{},e=this.getRequestURI(e),this.setDefaultRequestOptions(r,y.LDP.Class.Container);var s=e;a&&(e+=_.Util.stringifyRetrievalPreferences(a,this.getGeneralSchema()));var u={include:[y.LDP.Class.PreferContainment,y.C.Class.PreferContainmentResources],omit:[y.LDP.Class.PreferMembership,y.LDP.Class.PreferMinimalContainer,y.C.Class.PreferMembershipResources]};return i.Request.Util.setContainerRetrievalPreferences(u,r),i.Request.Service.get(e,r,new f.Parser.Class).then(function(e){var t=e[0],r=e[1],i=o.Node.Util.getFreeNodes(t),a=o.Document.Util.getDocuments(t).filter(function(e){return e["@id"]!==s});return[n.getPersistedMetadataResources(i,a,r),r]})},e.prototype.createAccessPoint=function(e,t,r,i){void 0===i&&(i={});var o=a.isString(r)?r:null;if(i=!a.isString(r)&&r?r:i,p.Factory.is(t))return Promise.reject(new n.IllegalArgumentError("The accessPoint provided has been already persisted."));var u=s.Factory.is(t)?t:s.Factory.createFrom(t,this.getPointer(e),t.hasMemberRelation,t.isMemberOfRelation);return u.membershipResource.id!==e?Promise.reject(new n.IllegalArgumentError("The documentURI must be the same as the accessPoint's membershipResource")):(this.setDefaultRequestOptions(i,y.LDP.Class.RDFSource),this.persistDocument(e,o,u,i))},e.prototype.createAccessPoints=function(e,t,r,n){var i=this;void 0===n&&(n={});var o=a.isArray(r)?r:null;return n=!a.isArray(r)&&r?r:n,Promise.all(t.map(function(t,r){var s=null!==o&&r<o.length&&o[r]?o[r]:null,u=Object.assign({},n);return n.headers&&(u.headers=a.M.extend(new Map,n.headers)),i.createAccessPoint(e,t,s,u)})).then(function(e){return[e.map(function(e){return e[0]}),e.map(function(e){return e[1]})]})},e.prototype.upload=function(e,t,o,s){var u=this;void 0===s&&(s={});var c=a.isString(o)?o:null;if(s=!a.isString(o)&&o?o:s,"undefined"!=typeof Blob){if(!(t instanceof Blob))return Promise.reject(new n.IllegalArgumentError("The data is not a valid Blob object."));i.Request.Util.setContentTypeHeader(t.type,s)}else{if(!(t instanceof Buffer))return Promise.reject(new n.IllegalArgumentError("The data is not a valid Buffer object."));var l=r(137),f=l(t);i.Request.Util.setContentTypeHeader(f?f.mime:"application/octet-stream",s)}return e=this.getRequestURI(e),this.setDefaultRequestOptions(s,y.LDP.Class.Container),c&&i.Request.Util.setSlug(c,s),i.Request.Service.post(e,t,s).then(function(e){var t=e.getHeader("Location");if(null===t||t.values.length<1)throw new i.Errors.BadResponseError("The response is missing a Location header.",e);if(1!==t.values.length)throw new i.Errors.BadResponseError("The response contains more than one Location header.",e);var r=t.values[0].toString();return[u.getPointer(r),e]})},e.prototype.listMembers=function(e,t,r){var n=this,s=!a.isBoolean(t)||t,u=i.Request.Util.isOptions(t)?t:i.Request.Util.isOptions(r)?r:{};e=this.getRequestURI(e),this.setDefaultRequestOptions(u,y.LDP.Class.Container);var c={include:[y.LDP.Class.PreferMinimalContainer,y.LDP.Class.PreferMembership],omit:[y.LDP.Class.PreferContainment,y.C.Class.PreferContainmentResources,y.C.Class.PreferMembershipResources]};return s?c.include.push(y.C.Class.NonReadableMembershipResourceTriples):c.omit.push(y.C.Class.NonReadableMembershipResourceTriples),i.Request.Util.setContainerRetrievalPreferences(c,u),i.Request.Service.get(e,u,new o.Document.Parser).then(function(t){var r=t[0],a=t[1],s=n.getRDFDocument(e,r,a);if(null===s)throw new i.Errors.BadResponseError("No document was returned.",a);var u=n.getDocumentResource(s,a),c=n.getMembershipResource(u,r,a);if(null===c)return[[],a];var l=o.Node.Util.getPropertyURI(u,y.LDP.Predicate.hasMemberRelation);return[o.Node.Util.getPropertyPointers(c,l,n).map(function(e){return p.Factory.decorate(e,n)}),a]})},e.prototype.getMembers=function(e,t,r,n){var s=this,u=!a.isBoolean(t)||t,c=_.Factory.is(t)?t:_.Factory.is(r)?r:null;n=i.Request.Util.isOptions(t)?t:i.Request.Util.isOptions(r)?r:i.Request.Util.isOptions(n)?n:{},e=this.getRequestURI(e),this.setDefaultRequestOptions(n,y.LDP.Class.Container);var l=e;c&&(e+=_.Util.stringifyRetrievalPreferences(c,this.getGeneralSchema()));var p={include:[y.LDP.Class.PreferMinimalContainer,y.LDP.Class.PreferMembership,y.C.Class.PreferMembershipResources],omit:[y.LDP.Class.PreferContainment,y.C.Class.PreferContainmentResources]};return u?p.include.push(y.C.Class.NonReadableMembershipResourceTriples):p.omit.push(y.C.Class.NonReadableMembershipResourceTriples),i.Request.Util.setContainerRetrievalPreferences(p,n),i.Request.Service.get(e,n,new f.Parser.Class).then(function(e){var t=e[0],r=e[1],n=o.Node.Util.getFreeNodes(t),a=o.Document.Util.getDocuments(t),u=s.getRDFDocument(l,a,r);if(null===u)throw new i.Errors.BadResponseError("No document was returned.",r);var c=s.getDocumentResource(u,r),f=s.getMembershipResource(c,a,r);return null===f?[[],r]:(a=a.filter(function(e){return!o.Node.Util.areEqual(e,c)&&!o.Node.Util.areEqual(e,f)}),[s.getPersistedMetadataResources(n,a,r),r])})},e.prototype.addMember=function(e,t,r){return void 0===r&&(r={}),this.addMembers(e,[t],r)},e.prototype.addMembers=function(e,t,r){void 0===r&&(r={});for(var o=[],s=0,u=t;s<u.length;s++){var c=u[s];if(c=a.isString(c)?this.getPointer(c):c,!g.Factory.is(c))return Promise.reject(new n.IllegalArgumentError("No Carbon.Pointer or URI provided."));o.push(c)}e=this.getRequestURI(e),this.setDefaultRequestOptions(r,y.LDP.Class.Container),i.Request.Util.setContentTypeHeader("application/ld+json",r);var l=b.AddMemberAction.Factory.createDocument(o),f=l.toJSON(this,this.jsonldConverter);return i.Request.Service.put(e,f,r)},e.prototype.removeMember=function(e,t,r){return void 0===r&&(r={}),this.removeMembers(e,[t],r)},e.prototype.removeMembers=function(e,t,r){void 0===r&&(r={});for(var o=[],s=0,u=t;s<u.length;s++){var c=u[s];if(c=a.isString(c)?this.getPointer(c):c,!g.Factory.is(c))return Promise.reject(new n.IllegalArgumentError("No Carbon.Pointer or URI provided."));o.push(c)}e=this.getRequestURI(e),this.setDefaultRequestOptions(r,y.LDP.Class.Container),i.Request.Util.setContentTypeHeader("application/ld+json",r);var l=b.RemoveMemberAction.Factory.createDocument(o),f={include:[y.C.Class.PreferSelectedMembershipTriples],omit:[y.C.Class.PreferMembershipTriples]};i.Request.Util.setContainerRetrievalPreferences(f,r,!1);var p=l.toJSON(this,this.jsonldConverter);return i.Request.Service.delete(e,p,r)},e.prototype.removeAllMembers=function(e,t){void 0===t&&(t={}),e=this.getRequestURI(e),this.setDefaultRequestOptions(t,y.LDP.Class.Container);var r={include:[y.C.Class.PreferMembershipTriples],omit:[y.C.Class.PreferMembershipResources,y.C.Class.PreferContainmentTriples,y.C.Class.PreferContainmentResources,y.C.Class.PreferContainer]};return i.Request.Util.setContainerRetrievalPreferences(r,t,!1),i.Request.Service.delete(e,t)},e.prototype.save=function(e,t){void 0===t&&(t={});var r=this.getRequestURI(e.id);this.setDefaultRequestOptions(t,y.LDP.Class.RDFSource),i.Request.Util.setContentTypeHeader("application/ld+json",t),i.Request.Util.setIfMatchHeader(e._etag,t),e._normalize();var n=e.toJSON(this,this.jsonldConverter);return i.Request.Service.put(r,n,t).then(function(t){return[e,t]})},e.prototype.refresh=function(e,t){var r=this;void 0===t&&(t={});var n=this.getRequestURI(e.id);return this.setDefaultRequestOptions(t,y.LDP.Class.RDFSource),i.Request.Util.setIfNoneMatchHeader(e._etag,t),i.Request.Service.get(n,t,new o.Document.Parser).then(function(e){var t=e[0],o=e[1];if(null===o)return[t,o];var a=i.Response.Util.getETag(o);if(null===a)throw new i.Errors.BadResponseError("The response doesn't contain an ETag",o);var s=r.getRDFDocument(n,t,o);if(null===s)throw new i.Errors.BadResponseError("No document was returned.",o);var u=r._getPersistedDocument(s,o);return u._etag=a,[u,o]}).catch(function(t){return 304===t.statusCode?[e,null]:Promise.reject(t)})},e.prototype.saveAndRefresh=function(e,t){var r=this;void 0===t&&(t={});var n=[];return i.Request.Util.setPreferredRetrievalResource("Modified",t),this.save(e,t).then(function(t){var i=(t[0],t[1]),o=i.getHeader("Preference-Applied");return null!==o&&"return=representation"===o.toString()?r.updateFromPreferenceApplied(e,i):(n.push(i),e.refresh())}).then(function(t){var r=(t[0],t[1]);return n.push(r),[e,n]})},e.prototype.delete=function(e,t){var r=this;return void 0===t&&(t={}),e=this.getRequestURI(e),this.setDefaultRequestOptions(t,y.LDP.Class.RDFSource),i.Request.Service.delete(e,t).then(function(t){var n=r.getPointerID(e);return r.pointers.delete(n),t})},e.prototype.getDownloadURL=function(e,t){return this.context.auth||Promise.reject(new n.IllegalStateError("This instance doesn't support Authenticated request.")),this.context.auth.getAuthenticatedURL(e,t)},e.prototype.getGeneralSchema=function(){if(!this.context)return new v.DigestedObjectSchema;var e=v.Digester.combineDigestedObjectSchemas([this.context.getObjectSchema()]);return this.context.hasSetting("vocabulary")&&(e.vocab=this.context.resolve(this.context.getSetting("vocabulary"))),e},e.prototype.getSchemaFor=function(e){return"@id"in e?this.getDigestedObjectSchemaForExpandedObject(e):this.getDigestedObjectSchemaForDocument(e)},e.prototype.executeRawASKQuery=function(e,t,r){return void 0===r&&(r={}),e=this.getRequestURI(e),this.context&&this.context.auth&&this.context.auth.isAuthenticated()&&this.context.auth.addAuthentication(r),m.Service.executeRawASKQuery(e,t,r)},e.prototype.executeASKQuery=function(e,t,r){return void 0===r&&(r={}),e=this.getRequestURI(e),this.context&&this.context.auth&&this.context.auth.isAuthenticated()&&this.context.auth.addAuthentication(r),m.Service.executeASKQuery(e,t,r)},e.prototype.executeRawSELECTQuery=function(e,t,r){return void 0===r&&(r={}),e=this.getRequestURI(e),this.context&&this.context.auth&&this.context.auth.isAuthenticated()&&this.context.auth.addAuthentication(r),m.Service.executeRawSELECTQuery(e,t,r)},e.prototype.executeSELECTQuery=function(e,t,r){return void 0===r&&(r={}),e=this.getRequestURI(e),this.context&&this.context.auth&&this.context.auth.isAuthenticated()&&this.context.auth.addAuthentication(r),m.Service.executeSELECTQuery(e,t,this,r)},e.prototype.executeRawCONSTRUCTQuery=function(e,t,r){return void 0===r&&(r={}),e=this.getRequestURI(e),this.context&&this.context.auth&&this.context.auth.isAuthenticated()&&this.context.auth.addAuthentication(r),m.Service.executeRawCONSTRUCTQuery(e,t,r)},e.prototype.executeRawDESCRIBEQuery=function(e,t,r){return void 0===r&&(r={}),e=this.getRequestURI(e),this.context&&this.context.auth&&this.context.auth.isAuthenticated()&&this.context.auth.addAuthentication(r),m.Service.executeRawDESCRIBEQuery(e,t,r)},e.prototype.executeUPDATE=function(e,t,r){if(void 0===r&&(r={}),!o.URI.Util.isAbsolute(e)){if(!this.context)throw new n.IllegalArgumentError("This Documents instance doesn't support relative URIs.");e=this.context.resolve(e)}return this.context&&this.context.auth&&this.context.auth.isAuthenticated()&&this.context.auth.addAuthentication(r),m.Service.executeUPDATE(e,t,r)},e.prototype.sparql=function(e){var t=new O.default;t._documents=this,t._entryPoint=e;var r=t.base(e);if(this.context){r.base(this.context.getBaseURI()),this.context.hasSetting("vocabulary")&&r.vocab(this.context.resolve(this.context.getSetting("vocabulary")));this.context.getObjectSchema().prefixes.forEach(function(e,t){r.prefix(t,e.stringValue)})}return r},e.prototype._getPersistedDocument=function(e,t){var r=this.getDocumentResource(e,t),n=o.Document.Util.getBNodeResources(e);n=n.concat(o.Document.Util.getFragmentResources(e));var i,a=r["@id"],s=this.getPointer(a);return i=p.Factory.is(s)?this.updatePersistedDocument(s,r,n):this.createPersistedDocument(s,r,n),i._resolved=!0,i},e.prototype._getFreeResources=function(e){var t=l.Factory.create(this),r=e.map(function(e){return t.createResource(e["@id"])});return this.compact(e,r,t),t},e.prototype.persistDocument=function(e,t,r,a){var s=this;if(e=this.getRequestURI(e),i.Request.Util.setContentTypeHeader("application/ld+json",a),r.id){var u=r.id;if(this.context&&(u=this.context.resolve(u)),!o.URI.Util.isBaseOf(e,u))return Promise.reject(new n.IllegalArgumentError("The document's URI is not relative to the parentURI specified"))}if(r.__CarbonSDK_InProgressOfPersisting)return Promise.reject(new n.IllegalArgumentError("The document is already being persisted."));Object.defineProperty(r,"__CarbonSDK_InProgressOfPersisting",{configurable:!0,enumerable:!1,writable:!1,value:!0});var c=r.toJSON(this,this.jsonldConverter);return t&&i.Request.Util.setSlug(t,a),i.Request.Service.post(e,c,a).then(function(e){delete r.__CarbonSDK_InProgressOfPersisting;var t=e.getHeader("Location");if(null===t||t.values.length<1)throw new i.Errors.BadResponseError("The response is missing a Location header.",e);if(1!==t.values.length)throw new i.Errors.BadResponseError("The response contains more than one Location header.",e);var n=s.getPointerID(t.values[0].toString()),o=p.Factory.decorate(s.createPointerFrom(r,n),s),a=d.Factory.decorate(o);s.pointers.set(n,a);var u=e.getHeader("Preference-Applied");return null===u||"return=representation"!==u.toString()?[a,e]:s.updateFromPreferenceApplied(a,e)}).catch(function(e){return delete r.__CarbonSDK_InProgressOfPersisting,Promise.reject(e)})},e.prototype.getRDFDocument=function(e,t,r){if(t=t.filter(function(t){return t["@id"]===e}),t.length>1)throw new i.Errors.BadResponseError("Several documents share the same id.",r);return t.length>0?t[0]:null},e.prototype.getDocumentResource=function(e,t){var r=o.Document.Util.getDocumentResources(e);if(0===r.length)throw new i.Errors.BadResponseError("The RDFDocument: "+e["@id"]+", doesn't contain a document resource.",t);if(r.length>1)throw new i.Errors.BadResponseError("The RDFDocument: "+e["@id"]+", contains more than one document resource.",t);return r[0]},e.prototype.getPointerID=function(e){if(o.URI.Util.isBNodeID(e))throw new n.IllegalArgumentError("BNodes cannot be fetched directly.");if(this.context){if(o.URI.Util.isPrefixed(e)&&(e=v.Digester.resolvePrefixedURI(e,this.getGeneralSchema())),o.URI.Util.isRelative(e))return"/"===e[0]?e.substr(1):e;var t=this.context.getBaseURI();return o.URI.Util.isBaseOf(t,e)?e.substring(t.length):null}if(o.URI.Util.isRelative(e))throw new n.IllegalArgumentError("This Documents instance doesn't support relative URIs.");if(o.URI.Util.isPrefixed(e))throw new n.IllegalArgumentError("This Documents instance doesn't support prefixed URIs.");return e},e.prototype.createPointer=function(e){return this.createPointerFrom({},e)},e.prototype.createPointerFrom=function(e,t){var r=this,n=this.context?this.context.resolve(t):t,i=g.Factory.createFrom(e,n);return Object.defineProperty(i,"resolve",{writable:!1,enumerable:!1,configurable:!0,value:function(){return r.get(n)}}),i},e.prototype.compact=function(e,t,r){if(!a.isArray(e))return this.compactSingle(e,t,r);for(var n=e,i=t||[],o=0,s=n.length;o<s;o++){var u=n[o],c=i[o]=i[o]?i[o]:{};this.compactSingle(u,c,r)}return i},e.prototype.compactSingle=function(e,t,r){var n=this.getDigestedObjectSchemaForExpandedObject(e);return this.jsonldConverter.compact(e,t,n,r)},e.prototype.getDigestedObjectSchemaForExpandedObject=function(e){var t=o.Node.Util.getTypes(e);return this.getDigestedObjectSchema(t,e["@id"])},e.prototype.getDigestedObjectSchemaForDocument=function(e){var t=P.Util.getTypes(e);return this.getDigestedObjectSchema(t,e.id)},e.prototype.getDigestedObjectSchema=function(t,r){if(!this.context)return new v.DigestedObjectSchema;var n=[this.context.getObjectSchema()];!a.isDefined(r)||o.URI.Util.hasFragment(r)||o.URI.Util.isBNodeID(r)||n.push(e._documentSchema);for(var i=0,s=t;i<s.length;i++){var u=s[i];this.context.hasObjectSchema(u)&&n.push(this.context.getObjectSchema(u))}var c=v.Digester.combineDigestedObjectSchemas(n);return this.context.hasSetting("vocabulary")&&(c.vocab=this.context.resolve(this.context.getSetting("vocabulary"))),c},e.prototype.updateObject=function(e,t){for(var r=a.A.joinWithoutDuplicates(Object.keys(t),Object.keys(e)),n=0,i=r;n<i.length;n++){var o=i[n];a.hasProperty(t,o)?e[o]=t[o]:delete e[o]}return e},e.prototype.getAssociatedFragment=function(e,t,r){if(!o.URI.Util.isBNodeID(r["@id"]))return t.get(r["@id"]);for(var n=o.Node.Util.getProperty(r,y.C.Predicate.bNodeIdentifier,null),i=0,a=e;i<a.length;i++){var s=a[i];if(o.URI.Util.isBNodeID(s.id)){var u=s;if(u.bNodeIdentifier&&u.bNodeIdentifier===n)return s}}return null},e.prototype.getRequestURI=function(e){if(o.URI.Util.isRelative(e)){if(!this.context)throw new n.IllegalArgumentError("This Documents instance doesn't support relative URIs.");e=this.context.resolve(e)}else if(o.URI.Util.isPrefixed(e)){if(!this.context)throw new n.IllegalArgumentError("This Documents instance doesn't support prefixed URIs.");if(e=v.Digester.resolvePrefixedURI(e,this.context.getObjectSchema()),o.URI.Util.isPrefixed(e))throw new n.IllegalArgumentError('The prefixed URI "'+e+'" could not be resolved.')}else if(this.context){var t=this.context.getBaseURI();if(!o.URI.Util.isBaseOf(t,e))throw new n.IllegalArgumentError("The provided URI '"+e+"' is not a valid URI for the current context.")}return e},e.prototype.setDefaultRequestOptions=function(e,t){return this.context&&this.context.auth&&this.context.auth.isAuthenticated()&&this.context.auth.addAuthentication(e),i.Request.Util.setAcceptHeader("application/ld+json",e),i.Request.Util.setPreferredInteractionModel(t,e),e},e.prototype.getMembershipResource=function(e,t,r){var n,a=o.Node.Util.getPropertyURI(e,y.LDP.Predicate.membershipResource);if(e["@id"]===a)n=e;else if(null===a){if(-1===e["@type"].indexOf(y.LDP.Class.BasicContainer))throw new i.Errors.BadResponseError("The document is not an ldp:BasicContainer and it doesn't contain an ldp:membershipResource triple.",r);n=e}else{var s=this.getRDFDocument(a,t,r);if(null===s)return null;n=this.getDocumentResource(s,r)}return n},e.prototype.createPersistedDocument=function(e,t,r){for(var n=p.Factory.decorate(e,this),i=[],o=0,a=r;o<a.length;o++){var s=a[o];i.push(n.createFragment(s["@id"]))}return this.compact(t,n,n),this.compact(r,i,n),n._syncSnapshot(),i.forEach(function(e){return e._syncSnapshot()}),n._syncSavedFragments(),this.decoratePersistedDocument(n),n},e.prototype.updatePersistedDocument=function(e,t,r){var n=new Map,i=[];e.getFragments().forEach(function(t){if(e._removeFragment(t.id),o.URI.Util.isBNodeID(t.id))i.push(t);else{var r=o.URI.Util.isRelative(t.id)?o.URI.Util.resolve(e.id,t.id):t.id;n.set(r,t)}});for(var a=[],s=0,u=r;s<u.length;s++){var c=u[s],l=this.getAssociatedFragment(i,n,c);l=e.createFragment(l||{},c["@id"]),a.push([l,c])}for(var f=0,p=a;f<p.length;f++){var d=p[f],l=d[0],h=d[1];this.updateObject(l,this.compact(h,{},e)),l._syncSnapshot()}return e._syncSavedFragments(),this.updateObject(e,this.compact(t,{},e)),e._syncSnapshot(),this.decoratePersistedDocument(e),e},e.prototype.getPersistedMetadataResources=function(e,t,r){var n=this,o=this._getFreeResources(e),a=o.getResources().filter(b.ResponseMetadata.Factory.hasRDFClass);if(0===a.length)return[];if(a.length>1)throw new i.Errors.BadResponseError("The response contained multiple "+b.ResponseMetadata.RDF_CLASS+" objects.",r);return t.forEach(function(e){return n._getPersistedDocument(e,r)}),a[0].resourcesMetadata.map(function(e){var t=e.resource;return t._etag=e.eTag,t})},e.prototype.decoratePersistedDocument=function(e){this._documentDecorators.forEach(function(t,r){e.hasType(r)&&t.decorator.apply(null,[e].concat(t.parameters))})},e.prototype.updateFromPreferenceApplied=function(e,t){var r=this;return(new o.Document.Parser).parse(t.data).then(function(n){var o=i.Response.Util.getETag(t);if(null===o)throw new i.Errors.BadResponseError("The response doesn't contain an ETag",t);var a=r.getRDFDocument(e.id,n,t);if(null===a)throw new i.Errors.BadResponseError("No document was returned.",t);return e=r._getPersistedDocument(a,t),e._etag=o,[e,t]})},e}();C._documentSchema=v.Digester.digestSchema(c.SCHEMA),t.Class=C,t.default=C},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(11),o=function(e){function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"InvalidJSONLDSyntaxError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);t.Error=n.default;var i=r(85);t.BadRequestError=i.default;var o=r(86);t.ConflictError=o.default;var a=r(87);t.ForbiddenError=a.default;var s=r(88);t.MethodNotAllowedError=s.default;var u=r(89);t.NotAcceptableError=u.default;var c=r(90);t.NotFoundError=c.default;var l=r(91);t.PreconditionFailedError=l.default;var f=r(92);t.PreconditionRequiredError=f.default;var p=r(93);t.RequestEntityTooLargeError=p.default;var d=r(94);t.RequestHeaderFieldsTooLargeError=d.default;var h=r(95);t.RequestURITooLongError=h.default;var g=r(96);t.TooManyRequestsError=g.default;var y=r(97);t.UnauthorizedError=y.default;var v=r(98);t.UnsupportedMediaTypeError=v.default;var b=r(100);t.BadResponseError=b.default;var m=r(99);t.BadGatewayError=m.default;var P=r(101);t.GatewayTimeoutError=P.default;var _=r(102);t.HTTPVersionNotSupportedError=_.default;var O=r(103);t.InternalServerErrorError=O.default;var C=r(104);t.NotImplementedError=C.default;var S=r(105);t.ServiceUnavailableError=S.default;var R=r(84);t.UnknownError=R.default;var w=[];t.client=w,w.push(i.default),w.push(o.default),w.push(a.default),w.push(s.default),w.push(u.default),w.push(c.default),w.push(l.default),w.push(f.default),w.push(p.default),w.push(d.default),w.push(h.default),w.push(g.default),w.push(y.default),w.push(v.default);var A=[];t.server=A,A.push(b.default),A.push(m.default),A.push(P.default),A.push(_.default),A.push(O.default),A.push(C.default),A.push(S.default);var D=new Map;t.statusCodeMap=D;for(var T=0,j=w.length;T<j;T++)D.set(w[T].statusCode,w[T]);for(var T=0,E=A.length;T<E;T++)D.set(A[T].statusCode,A[T])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n;!function(e){e[e.OPTIONS=0]="OPTIONS",e[e.HEAD=1]="HEAD",e[e.GET=2]="GET",e[e.POST=3]="POST",e[e.PUT=4]="PUT",e[e.PATCH=5]="PATCH",e[e.DELETE=6]="DELETE"}(n=t.Method||(t.Method={})),t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28),i=r(0),o=function(){function e(e,t,r){if(void 0===r&&(r={}),"undefined"!=typeof XMLHttpRequest&&e instanceof XMLHttpRequest){var n=e;this.status=n.status,this.data=n.responseText,this.setHeaders(n.getAllResponseHeaders())}else this.status=r.statusCode,this.data=t||"",this.setHeaders(r.headers);this.request=e}return e.prototype.getHeader=function(e){return e=e.toLowerCase(),this.headers.get(e)||null},e.prototype.setHeaders=function(e){if(i.isString(e))this.headers=n.Util.parseHeaders(e);else if(this.headers=new Map,i.isObject(e))for(var t=0,r=Object.keys(e);t<r.length;t++){var o=r[t];this.headers.set(o,new n.Class(e[o]))}},e}();t.Class=o;var a=function(){function e(){}return e.getETag=function(e){if(!e||!e.headers)return null;var t=e.getHeader("ETag");return t&&t.values.length?(t.values.length>1&&console.warn("The response contains more than one ETag. Response: %o",e),t.values[0].toString()):null},e}();t.Util=a,t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29),i=r(55),o=function(){function e(){}return e.prototype.parse=function(e){return(new n.default).parse(e).then(function(e){return i.default.expand(e)})},e}();t.Class=o,t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(50),i=r(2),o=r(7),a=r(9),s=r(4),u=r(0),c=function(){function e(){}return e.expand=function(t){return this.retrieveContexts(t,Object.create(null),"").then(function(){var r=e.process(new a.DigestedObjectSchema,t);return u.isObject(r)&&"@graph"in r&&1===Object.keys(r).length?r=r["@graph"]:null===r&&(r=[]),u.isArray(r)||(r=[r]),r})},e.getTargetFromLinkHeader=function(e){for(var t=0,r=e.values;t<r.length;t++){var n=r[t],i=n.toString().match(/\s*<([^>]*?)>\s*(?:;\s*(.*))?/);if(i){for(var o=i[1],a=i[2],s=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,u={};;){if(!(i=s.exec(a)))break;u[i[1]]=void 0===i[2]?i[3]:i[2]}if("http://www.w3.org/ns/json-ld#context"===u.rel)return o}}return null},e.findContextURLs=function(t,r,n,i){void 0===i&&(i=!1);var o=Object.keys(r).length;if(u.isArray(t))for(var a=0,c=t;a<c.length;a++){var l=c[a];e.findContextURLs(l,r,n)}else if(u.isPlainObject(t))for(var f in t)if("@context"===f){var p=t[f];if(u.isArray(p))for(var d=p,h=0,g=d.length;h<g;++h){var y=d[h];if(u.isString(y)){var v=y;v=s.URI.Util.resolve(n,v),i?u.isArray(r[v])?(Array.prototype.splice.apply(d,[h,1].concat(r[v])),h+=r[v].length-1,g=d.length):d[h]=r[v]:v in r||(r[v]=!0)}}else if(u.isString(p)){var v=p;v=s.URI.Util.resolve(n,v),i?t[f]=r[v]:v in r||(r[v]=null)}}else e.findContextURLs(t[f],r,n);return o<Object.keys(r).length},e.retrieveContexts=function(t,r,i){if(Object.keys(r).length>10)return Promise.reject(new n.default("Maximum number of @context URLs exceeded."));var a=Object.create(null);if(!e.findContextURLs(t,a,i))return Promise.resolve();var s=[];for(var c in a){if(c in r)return Promise.reject(new n.default("Cyclical @context URLs detected."));var l={sendCredentialsOnCORS:!1};o.Request.Util.setAcceptHeader("application/ld+json, application/json",l);var f=o.Request.Service.get(c,l,new o.JSONParser.Class);s.push(function(t,n){return n.then(function(n){var i=n[0],o=n[1],s=u.O.clone(r);s[t]=!0;var c={"@context":{}},l=o.getHeader("Content-Type");if(u.S.contains(l.toString(),"application/ld+json"))c["@context"]="@context"in i?i["@context"]:{};else{l=o.getHeader("Link");var f=void 0;l&&(f=e.getTargetFromLinkHeader(l)),f&&(c["@context"]=f)}return a[t]=c["@context"],e.retrieveContexts(c,s,t)})}(c,f))}return Promise.all(s).then(function(){e.findContextURLs(t,a,i,!0)})},e.isKeyword=function(e){if(!u.isString(e))return!1;switch(e){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return!0;default:return!1}},e.isValidType=function(e){if(u.isString(e))return!0;if(!u.isArray(e))return!1;for(var t=0,r=e;t<r.length;t++){var n=r[t];if(!u.isString(n))return!1}return!0},e.expandURI=function(t,r,n){return void 0===n&&(n={}),null===r||e.isKeyword(r)||s.URI.Util.isAbsolute(r)?r:t.properties.has(r)?t.properties.get(r).uri.stringValue:s.URI.Util.isPrefixed(r)?a.Digester.resolvePrefixedURI(r,t):t.prefixes.has(r)?t.prefixes.get(r).stringValue:n.vocab?null===t.vocab?null:t.vocab+r:(n.base&&s.URI.Util.resolve(t.base,r),r)},e.expandLanguageMap=function(e){for(var t=[],r=Object.keys(e).sort(),i=0,o=r;i<o.length;i++){var a=o[i],s=e[a];u.isArray(s)||(s=[s]);for(var c=0,l=s;c<l.length;c++){var f=l[c];if(null!==f){if(!u.isString(f))throw new n.default("Language map values must be strings.");t.push({"@value":f,"@language":a.toLowerCase()})}}}return t},e.getContainer=function(e,t){if(e.properties.has(t))return e.properties.get(t).containerType},e.expandValue=function(t,r,n){if(u.isNull(r)||!u.isDefined(r))return null;if("@id"===n)return e.expandURI(t,r,{base:!0});if("@type"===n)return e.expandURI(t,r,{vocab:!0,base:!0});var i=new a.DigestedPropertyDefinition;if(t.properties.has(n)&&(i=t.properties.get(n)),!1===i.literal||"@graph"===n&&u.isString(r)){var o={base:!0};return i.pointerType===a.PointerType.VOCAB&&(o.vocab=!0),{"@id":e.expandURI(t,r,o)}}if(e.isKeyword(n))return r;var s={};if(i.literalType)s["@type"]=i.literalType.stringValue;else if(u.isString(r)){var c=u.isDefined(i.language)?i.language:t.language;null!==c&&(s["@language"]=c)}return-1===["boolean","number","string"].indexOf(typeof r)&&(r=r.toString()),s["@value"]=r,s},e.process=function(t,r,o,c){if(u.isNull(r)||!u.isDefined(r))return null;if(!u.isArray(r)&&!u.isObject(r))return c||null!==o&&"@graph"!==o?e.expandValue(t,r,o):null;if(u.isArray(r)){var l=e.getContainer(t,o);c=c||l===a.ContainerType.LIST;for(var f=[],p=0,d=r;p<d.length;p++){var h=d[p],g=e.process(t,h,o);if(null!==g){if(c&&(u.isArray(g)||s.List.Factory.is(g)))throw new n.default("Lists of lists are not permitted.");u.isArray(g)||(g=[g]),Array.prototype.push.apply(f,g)}}return f}"@context"in r&&(t=a.Digester.combineDigestedObjectSchemas([a.Digester.digestSchema(r["@context"]),t]));for(var y={},v=Object.keys(r),b=0,m=v;b<m.length;b++){var P=m[b];if("@context"!==P){var _=e.expandURI(t,P,{vocab:!0});if(_&&(s.URI.Util.isAbsolute(_)||s.URI.Util.isBNodeID(_)||e.isKeyword(_))){var O=r[P];if(e.isKeyword(_)){if("@id"===_&&!u.isString(O))throw new n.default('"@id" value must a string.');if("@type"===_&&!e.isValidType(O))throw new n.default('"@type" value must a string, an array of strings.');if("@graph"===_&&!u.isObject(O)&&!u.isArray(O))throw new n.default('"@graph" value must not be an object or an array.');if("@value"===_&&(u.isObject(O)||u.isArray(O)))throw new n.default('"@value" value must not be an object or an array.');if("@language"===_){if(null===O)continue;if(!u.isString(O))throw new n.default('"@language" value must be a string.');O=O.toLowerCase()}if("@index"===_&&!u.isString(O))throw new n.default('"@index" value must be a string.');if("@reverse"===_&&!u.isObject(O))throw new n.default('"@reverse" value must be an object.');if("@index"===_||"@reverse"===_)throw new i.NotImplementedError('The SDK does not support "@index" and "@reverse" tags.')}var C=void 0,l=e.getContainer(t,P);if(l===a.ContainerType.LANGUAGE&&u.isObject(O))C=e.expandLanguageMap(O);else{var S=P,R="@list"===_;(R||"@set"===_)&&(S=o,R&&"@graph"===o&&(S=null)),C=e.process(t,O,S,R)}if(null!==C||"@value"===_){"@list"===_||s.List.Factory.is(C)||l!==a.ContainerType.LIST||(u.isArray(C)||(C=[C]),C={"@list":C});var w=-1===["@type","@id","@value","@language"].indexOf(_);e.addValue(y,_,C,{propertyIsArray:w})}}}}return"@value"in y?null===y["@value"]&&(y=null):"@type"in y?u.isArray(y["@type"])||(y["@type"]=[y["@type"]]):"@set"in y&&(y=y["@set"]),y},e.addValue=function(t,r,n,i){if(u.isArray(n)){var o=n;0===o.length&&i.propertyIsArray&&!u.hasProperty(t,r)&&(t[r]=[]);for(var a=0,s=o;a<s.length;a++){var c=s[a];e.addValue(t,r,c,i)}}else if(r in t){if(!e.hasValue(t,r,n)){var l=t[r];u.isArray(l)||(l=t[r]=[l]),l.push(n)}}else t[r]=i.propertyIsArray?[n]:n},e.hasProperty=function(e,t){if(t in e){var r=e[t];return!u.isArray(r)||r.length>0}return!1},e.compareValues=function(e,t){if(e===t)return!0;if(u.isObject(e)&&u.isObject(t)){if("@value"in e&&e["@value"]===t["@value"]&&e["@type"]===t["@type"]&&e["@language"]===t["@language"]&&e["@index"]===t["@index"])return!0;if("@id"in e)return e["@id"]===t["@id"]}return!1},e.hasValue=function(t,r,n){if(e.hasProperty(t,r)){var i=t[r],o=s.List.Factory.is(i);if(o||u.isArray(i))for(var a=o?i["@list"]:i,c=0,l=a;c<l.length;c++){var f=l[c];if(e.compareValues(f,n))return!0}else if(!u.isArray(n))return e.compareValues(i,n)}return!1},e}();t.Class=c,t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.RDF_CLASS=n.C.Class.Error,t.SCHEMA={carbonCode:{"@id":n.C.Predicate.carbonCode,"@type":n.XSD.DataType.string},message:{"@id":n.C.Predicate.message,"@type":n.XSD.DataType.string}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(5);t.RDF_CLASS=n.C.Class.VolatileResource;var o=function(){function e(){}return e.is=function(t){return i.Factory.is(t)&&e.hasRDFClass(t)},e.hasRDFClass=function(e){return!!e&&-1!==("@type"in e?e["@type"]:"types"in e?e.types:[]).indexOf(t.RDF_CLASS)},e}();t.Factory=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(26),i=r(4),o=r(0),a=function(){function e(){}return e.hasClassProperties=function(e){return o.hasPropertyDefined(e,"slug")},e.create=function(e,t){return this.createFrom({},e,t)},e.createFrom=function(e,t,r){var o=r.id+"#"+t,a=n.Factory.createFrom(e,o,r);return this.hasClassProperties(a)?a:(Object.defineProperties(a,{slug:{enumerable:!1,configurable:!0,get:function(){return i.URI.Util.getFragment(a.id)},set:function(e){this.id=this.document.id+"#"+e}}}),a)},e}();t.Factory=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(20),i=r(17),o=r(0),a=function(){function e(){}return e.hasClassProperties=function(e){return o.hasPropertyDefined(e,"rootContainer")},e.is=function(t){return n.Factory.is(t)&&i.Factory.is(t)&&e.hasClassProperties(t)},e}();t.Factory=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(32),i=function(){function e(){}return e.decorate=function(e,t){return void 0===t&&(t={}),n.Factory.decorate(e,t),e},e}();t.Factory=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(24),o=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.get=function(t,r){return e.prototype.get.call(this,t,r)},t}(i.Class);t.Class=o,t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.RDF_CLASS=n.CS.Class.ProtectedDocument,t.SCHEMA={accessControlList:{"@id":n.CS.Predicate.accessControlList,"@type":"@id"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(15),i=r(36),o=r(0),a=r(12),s=function(){function e(){}return e.is=function(e){return o.hasProperty(e,"@graph")&&o.isArray(e["@graph"])},e.create=function(e,t){var r=t?i.Factory.create(t):{};return r["@graph"]=e,r},e}();t.Factory=s;var u=function(){function e(){}return e.getDocuments=function(e){if(o.isArray(e)){return e.filter(function(e){return s.is(e)})}return o.isObject(e)&&s.is(e)?[e]:[]},e.getResources=function(t){for(var r=i.Util.getFreeNodes(t),n=e.getDocuments(t),o=[].concat(r),a=0,s=n;a<s.length;a++){var u=s[a];o=o.concat(u["@graph"])}return o},e.getDocumentResources=function(t){for(var r=e.getResources(t),n=[],i=0,o=r.length;i<o;i++){var s=r[i],u=s["@id"];u&&(a.Util.hasFragment(u)||a.Util.isBNodeID(u)||n.push(s))}return n},e.getFragmentResources=function(t,r){var n=e.getResources(t),i=null;r&&(i=o.isString(r)?r:r["@id"]);for(var s=[],u=0,c=n.length;u<c;u++){var l=n[u],f=l["@id"];if(f&&a.Util.hasFragment(f))if(i){var p=a.Util.getDocumentURI(f);p===i&&s.push(l)}else s.push(l)}return s},e.getBNodeResources=function(t){for(var r=e.getResources(t),n=[],i=0,o=r.length;i<o;i++){var s=r[i];"@id"in s&&!a.Util.isBNodeID(s["@id"])||n.push(s)}return n},e}();t.Util=u;var c=function(){function e(){}return e.prototype.parse=function(e){return(new n.Parser.Class).parse(e).then(function(e){return u.getDocuments(e)})},e}();t.Parser=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(34),i=r(35),o=r(36),a=function(){function e(){}return e.parseValue=function(t,r){if(i.Factory.is(t))return i.Factory.parse(t);if(o.Factory.is(t))return r.getPointer(t["@id"]);if(n.Factory.is(t)){for(var a=[],s=t["@list"],u=0,c=s;u<c.length;u++){var l=c[u];a.push(e.parseValue(l,r))}return a}return null},e}();t.Util=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(66);t.Builder=n;var i=r(129);t.RawResults=i;var o=r(67);t.RawResultsParser=o;var a=r(131);t.Service=a.default;var s=r(130);t.SELECTResults=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(133);t.Class=n.default;var i=n.default.prototype,o=i.initInterfaces;i.initInterfaces=function(){o.call(this);var e=this;this.interfaces.finishSelect={execute:function(){return e._documents.executeSELECTQuery(e._entryPoint,e.toCompactString())},executeRaw:function(){return e._documents.executeRawSELECTQuery(e._entryPoint,e.toCompactString())}}},t.default=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29),i=function(){function e(){}return e.prototype.parse=function(e){return(new n.default).parse(e).then(function(e){return e})},e}();t.Class=i,t.default=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(38),o=r(39),a=r(20),s=r(73),u=r(10),c=r(8),l=r(49),f=r(2),p=r(26),d=r(7),h=r(15),g=r(16),y=r(58),v=r(1),b=r(9),m=r(59),P=r(19),_=r(32),O=r(60),C=r(33),S=r(122),R=r(6),w=r(4),A=r(5),D=r(37),T=r(132),j=r(65),E=r(0),I=function(e){function t(t){var r=e.call(this)||this;return r.auth=new S.Auth.Class(r),t=t?E.extend({},T.defaultSettings,t):T.defaultSettings,E.M.extend(r.settings,E.M.from(t)),r.apps=new s.Class(r),r}return n(t,e),Object.defineProperty(t,"version",{get:function(){return"0.42.0"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return t.version},enumerable:!0,configurable:!0}),t.prototype.resolve=function(e){if(w.URI.Util.isAbsolute(e))return e;var t=this.settings.get("http.ssl")?"https://":"http://";return t+=this.settings.get("domain")+"/"+this.getSetting("platform.container"),w.URI.Util.resolve(t,e)},t.prototype.getAPIDescription=function(){return this.documents.get("api/").then(function(e){var t=e[0];e[1];return t})},t}(i.Class);I.AccessPoint=o,I.App=a,I.Apps=s,I.Auth=u,I.Document=c,I.Documents=l,I.Errors=f,I.Fragment=p,I.HTTP=d,I.JSONLD=h,I.LDP=g,I.NamedFragment=y,I.NS=v,I.ObjectSchema=b,I.PersistedApp=m,I.PersistedDocument=P,I.PersistedFragment=_,I.PersistedNamedFragment=O,I.PersistedResource=C,I.Platform=S,I.Pointer=R,I.RDF=w,I.Resource=A,I.SDKContext=D,I.Settings=T,I.SPARQL=j,I.Utils=E,t.Class=I,t.default=I},function(e,t,r){"use strict";var n=r(68);e.exports=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.RDF_CLASS=n.C.Class.API,t.SCHEMA={version:{"@id":n.C.Predicate.version,"@type":n.XSD.DataType.string},buildDate:{"@id":n.C.Predicate.buildDate,"@type":n.XSD.DataType.dateTime}}},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(24),o=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.get=function(t,r){return e.prototype.get.call(this,t,r)},t}(i.Class);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(71),o=r(40),a=r(10),s=function(e){function t(t){var r=e.call(this,t)||this;return r.roles=new o.default(t),r.agents=new i.default(t),r}return n(t,e),t}(a.default);t.Class=s,t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(20),i=r(21),o=r(2),a=r(1),s=r(59),u=r(6),c=r(4),l=r(0),f=function(){function e(e){this.context=e}return e.prototype.getContext=function(e){var t=this,r=l.isString(e)?null:e,n=r?r.id:e;return n?this.resolveURI(n).then(function(e){return r=t.context.documents.getPointer(e),r.resolve()}).then(function(e){var r=e[0];e[1];if(!s.Factory.is(r))throw new o.IllegalArgumentError("The resource fetched is not a "+a.CS.Class.Application+".");return new i.default(t.context,r)}):Promise.reject(new o.IllegalArgumentError("The application's URI must be defined."))},e.prototype.getAllContexts=function(){var e=this;return this.resolveURI("").then(function(t){if(!e.context.auth||!e.context.auth.isAuthenticated())return e.context.documents.getMembers(e.getContainerURI(),!1);var r=e.context.auth.authenticatedAgent.id;return e.context.documents.executeSELECTQuery(r,"\n\t\t\t\tSELECT ?app WHERE {\n\t\t\t\t\t<"+r+"> <"+a.C.Predicate.appRoleMap+"> ?roleMap.\n\t\t\t\t\t?roleMap <"+a.C.Predicate.entry+"> ?appEntry.\n\t\t\t\t\t?appEntry <"+a.C.Predicate.key+"> ?app.\n\t\t\t\t}\n\t\t\t").then(function(e){var t=e[0],r=(e[1],t.bindings.map(function(e){return e.app}));return u.Util.resolveAll(r)})}).then(function(t){var r=t[0];t[1];return r.map(function(t){return new i.default(e.context,t)})})},e.prototype.create=function(e,t){var r=this;return void 0===t&&(t=null),this.resolveURI("").then(function(i){if(!n.Factory.is(e))throw new o.IllegalArgumentError("The Document is not a `Carbon.App.Class` object.");return r.context.documents.createChild(i,e,t)})},e.prototype.delete=function(e,t){var r=this;return e?this.resolveURI(e).then(function(e){return r.context.documents.delete(e,t)}):Promise.reject(new o.IllegalArgumentError("The application's URI must be defined."))},e.prototype.resolveURI=function(e){var t=this;return new Promise(function(r){var n=t.context.resolve(t.getContainerURI()),i=c.URI.Util.resolve(n,e);if(!c.URI.Util.isBaseOf(n,i))throw new o.IllegalArgumentError("The URI provided is not a valid app of the current context.");r(i)})},e.prototype.getContainerURI=function(){if(!this.context.hasSetting("platform.apps.container"))throw new o.IllegalStateError("The apps container URI hasn't been set.");return this.context.getSetting("platform.apps.container")},e}();t.Class=f,t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";function n(e){return o.Factory.is(e)?e:this.getPointer(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=r(42),o=r(6),a=r(0),s=function(){function e(){}return e.hasClassProperties=function(e){return a.hasPropertyDefined(e,"accessTo")},e.decorate=function(e){var t=i.Factory.decorate(e);Object.defineProperties(t,{_parsePointer:{writable:!0,enumerable:!1,configurable:!0,value:n}});var r=function(e){return e.subjects||t._removeFragment(e),!!e.subjects};return t.entries&&(t.entries=t.entries.filter(r)),t.inheritableEntries&&(t.inheritableEntries=t.inheritableEntries.filter(r)),t},e}();t.Factory=s},function(e,t,r){"use strict";function n(){return this.enabled=!0,this.save()}function i(){return this.enabled=!1,this.save()}Object.defineProperty(t,"__esModule",{value:!0});var o=r(23),a=r(17),s=r(0),u=function(){function e(){}return e.hasClassProperties=function(e){return s.hasPropertyDefined(e,"name")&&s.hasPropertyDefined(e,"email")&&s.hasPropertyDefined(e,"enabled")&&s.hasFunction(e,"enable")&&s.hasFunction(e,"disable")},e.is=function(t){return e.hasClassProperties(t)&&a.Factory.is(t)&&t.hasType(o.RDF_CLASS)},e.decorate=function(t){var r=t;return e.hasClassProperties(r)?r:(a.Factory.hasClassProperties(r)||a.Factory.decorate(r),Object.defineProperties(r,{enable:{writable:!1,enumerable:!1,configurable:!0,value:n},disable:{writable:!1,enumerable:!1,configurable:!0,value:i}}),r)},e}();t.Factory=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(6),o=r(5),a=r(12);t.TICKETS_CONTAINER="auth-tickets/",t.RDF_CLASS=n.CS.Class.Ticket,t.SCHEMA={forURI:{"@id":n.CS.Predicate.forIRI,"@type":"@id"},expirationTime:{"@id":n.CS.Predicate.expirationTime,"@type":n.XSD.DataType.dateTime},ticketKey:{"@id":n.CS.Predicate.ticketKey,"@type":n.XSD.DataType.string}};var s=function(){function e(){}return e.create=function(t){return e.createFrom(o.Factory.create(a.Util.generateBNodeID()),t)},e.createFrom=function(e,r){var n=e;return n.forURI=i.Factory.create(r),n.types.push(t.RDF_CLASS),n},e}();t.Factory=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(7),o=r(15),a=r(16),s=r(1),u=r(4),c=r(5),l=r(43),f=r(47),p=r(46),d=r(0),h=function(){function e(e){if(null===e)throw new n.IllegalArgumentError("context cannot be null");this.context=e,this.basicAuthenticator=new l.default}return e.prototype.isAuthenticated=function(){return!!this._credentials&&this._credentials.expirationTime>new Date},e.prototype.authenticate=function(e){var t=this;if(e instanceof f.default)return this.basicAuthenticator.authenticate(e).then(function(){return t.createToken()}).then(function(e){var r=e[0];e[1];return t.basicAuthenticator.clearAuthentication(),t._credentials=r,r});var r=e;return d.isString(r.expirationTime)&&(e.expirationTime=new Date(r.expirationTime)),r.expirationTime<=new Date?Promise.reject(new n.IllegalArgumentError("The token provided in not valid.")):(this._credentials=r,Promise.resolve(r))},e.prototype.addAuthentication=function(e){var t=e.headers?e.headers:e.headers=new Map;return this.addTokenAuthenticationHeader(t),e},e.prototype.clearAuthentication=function(){this._credentials=null},e.prototype.createToken=function(){var t=this,r=this.context.resolve(e.TOKEN_CONTAINER),n={};return this.basicAuthenticator.addAuthentication(n),i.Request.Util.setAcceptHeader("application/ld+json",n),i.Request.Util.setPreferredInteractionModel(s.LDP.Class.RDFSource,n),i.Request.Service.post(r,null,n,new o.Parser.Class).then(function(e){var r=e[0],n=e[1],o=u.Node.Util.getFreeNodes(r),s=t.context.documents._getFreeResources(o),l=s.getResources().filter(function(e){return c.Util.hasType(e,p.RDF_CLASS)});if(0===l.length)throw new i.Errors.BadResponseError("No '"+p.RDF_CLASS+"' was returned.",n);if(l.length>1)throw new i.Errors.BadResponseError("Multiple '"+p.RDF_CLASS+"' were returned. ",n);var f=l[0];u.Document.Util.getDocuments(r).filter(function(e){return e["@id"]===f.agent.id}).forEach(function(e){return t.context.documents._getPersistedDocument(e,n)});var d=s.getResources().find(function(e){return c.Util.hasType(e,a.ResponseMetadata.RDF_CLASS)});return d&&d.resourcesMetadata.forEach(function(e){e.resource._etag=e.eTag}),[f,n]})},e.prototype.addTokenAuthenticationHeader=function(e){if(!e.has("authorization")){var t=new i.Header.Class;e.set("authorization",t);var r="Token "+this._credentials.key;t.values.push(new i.Header.Value(r))}},e}();h.TOKEN_CONTAINER="auth-tokens/",t.Class=h,t.default=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this._username=e,this._password=t}return Object.defineProperty(e.prototype,"username",{get:function(){return this._username},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"password",{get:function(){return this._password},enumerable:!0,configurable:!0}),e}();t.Class=n,t.default=n},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(11),o=function(e){function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"IDAlreadyInUseError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(11),o=function(e){function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"IllegalActionError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(11),o=function(e){function t(r){void 0===r&&(r="");var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"IllegalStateError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(11),o=function(e){function t(r){void 0===r&&(r="");var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"NotImplementedError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"UnknownError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 400},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"BadRequestError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 409},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"ConflictError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 403},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"ForbiddenError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 405},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"MethodNotAllowedError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 406},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"NotAcceptableError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 404},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"NotFoundError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 412},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"PreconditionFailedError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 428},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"PreconditionRequiredError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 413},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"RequestEntityTooLargeError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 431},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"RequestHeaderFieldsTooLargeError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 414},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"RequestURITooLongError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 429},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"TooManyRequestsError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 401},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"UnauthorizedError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 415},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"UnsupportedMediaTypeError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 502},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"BadGatewayError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"BadResponseError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 504},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"GatewayTimeoutError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 505},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"HTTPVersionNotSupportedError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 500},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"InternalServerErrorError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 501},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"NotImplementedError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(e){function t(r,n){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return 503},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"ServiceUnavailableError"},enumerable:!0,configurable:!0}),t}(i.default);t.Class=o,t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";function n(e,t){for(var r=e.keys(),n=r.next();!n.done;){var i=n.value;t(i,e.get(i).toString()),n=r.next()}}function i(e,t,r){if(r.status>=200&&r.status<=299)e(r);else if(r.status>=400&&r.status<600&&l.statusCodeMap.has(r.status)){var n=l.statusCodeMap.get(r.status),i=new n("",r);r.data||t(i);var o=new h.Parser;o.parse(r.data,i).then(function(e){i.message=h.Util.getMessage(e),t(i)}).catch(function(){i.message=r.data,t(i)})}else t(new l.UnknownError(r.data,r))}function o(e,t,r,o){return new Promise(function(a,s){var u=o.request?o.request:new XMLHttpRequest;u.open(e,t,!0),o.headers&&n(o.headers,function(e,t){return u.setRequestHeader(e,t)}),u.withCredentials=o.sendCredentialsOnCORS,o.timeout&&(u.timeout=o.timeout),u.onload=u.onerror=function(){var e=new d.default(u);i(a,s,e)},r?u.send(r):u.send()})}function a(e,t,o,a){return new Promise(function(s,u){function c(e,t){var r=[];t.on("data",function(e){"string"==typeof e&&(e=Buffer.from(e,"utf-8")),r.push(e)}).on("end",function(){var n=Buffer.concat(r).toString("utf8"),o=new d.default(e,n,t);i(s,u,o)})}function l(t){var h=f.parse(t),g=r("http:"===h.protocol?134:135),y={protocol:h.protocol,host:h.host,hostname:h.hostname,port:parseFloat(h.port),path:h.path,method:e,headers:{},withCredentials:a.sendCredentialsOnCORS};a.headers&&n(a.headers,function(e,t){return y.headers[e]=t});var v=g.request(y);a.timeout&&v.setTimeout(a.timeout),v.on("response",function(e){if(e.statusCode>=300&&e.statusCode<=399&&"location"in e.headers&&++p<10)return l(f.resolve(t,e.headers.location));c(v,e)}),v.on("error",function(e){var t=new d.default(v,e.message);i(s,u,t)}),v.end(o)}var f=r(136),p=0;l(t)})}function s(e){return g.isString(e)||"undefined"!=typeof Blob&&e instanceof Blob||"undefined"!=typeof Buffer&&e instanceof Buffer}Object.defineProperty(t,"__esModule",{value:!0});var u=r(2),c=r(28),l=r(51),f=r(52),p=r(1),d=r(53),h=r(31),g=r(0),y=function(){function e(){}return e.send=function(t,r,n,i,u){void 0===n&&(n=e.defaultOptions),void 0===i&&(i=e.defaultOptions),void 0===u&&(u=null);var c=null,l=g.hasProperty(i,"parse")?n:i;u=g.hasProperty(i,"parse")?i:u,s(n)?c=n:l=n||l,l=g.extend({},e.defaultOptions,l),g.isNumber(t)&&(t=f.default[t]);var p;return p="undefined"!=typeof XMLHttpRequest?o(t,r,c,l):a(t,r,c,l),null===u?p:p.then(function(e){return u.parse(e.data).then(function(t){return[t,e]})})},e.options=function(t,r){return void 0===r&&(r=e.defaultOptions),e.send(f.default.OPTIONS,t,r)},e.head=function(t,r){return void 0===r&&(r=e.defaultOptions),e.send(f.default.HEAD,t,r)},e.get=function(t,r,n){return void 0===r&&(r=e.defaultOptions),void 0===n&&(n=null),e.send(f.default.GET,t,null,r,n)},e.post=function(t,r,n,i){return void 0===r&&(r=e.defaultOptions),void 0===n&&(n=e.defaultOptions),void 0===i&&(i=null),e.send(f.default.POST,t,r,n,i)},e.put=function(t,r,n,i){return void 0===r&&(r=e.defaultOptions),void 0===n&&(n=e.defaultOptions),void 0===i&&(i=null),e.send(f.default.PUT,t,r,n,i)},e.patch=function(t,r,n,i){return void 0===r&&(r=e.defaultOptions),void 0===n&&(n=e.defaultOptions),void 0===i&&(i=null),e.send(f.default.PATCH,t,r,n,i)},e.delete=function(t,r,n,i){return void 0===r&&(r=e.defaultOptions),void 0===n&&(n=e.defaultOptions),void 0===i&&(i=null),e.send(f.default.DELETE,t,r,n,i)},e}();y.defaultOptions={sendCredentialsOnCORS:!0},t.Service=y;var v=function(){function e(){}return e.getHeader=function(e,t,r){if(void 0===r&&(r=!1),e=e.toLowerCase(),r){var n=t.headers?t.headers:t.headers=new Map;n.has(e)||n.set(e,new c.Class)}if(t.headers)return t.headers.get(e)},e.setAcceptHeader=function(e,t){return(t.headers?t.headers:t.headers=new Map).set("accept",new c.Class(e)),t},e.setContentTypeHeader=function(e,t){return(t.headers?t.headers:t.headers=new Map).set("content-type",new c.Class(e)),t},e.setIfMatchHeader=function(e,t){return(t.headers?t.headers:t.headers=new Map).set("if-match",new c.Class(e)),t},e.setIfNoneMatchHeader=function(e,t){return(t.headers?t.headers:t.headers=new Map).set("if-none-match",new c.Class(e)),t},e.setPreferredInteractionModel=function(t,r){return e.getHeader("prefer",r,!0).values.push(new c.Value(t+"; rel=interaction-model")),r},e.setPreferredRetrievalResource=function(t,r){var n,i=e.getHeader("prefer",r,!0);switch(t){case"Created":n=p.C.Class.CreatedResource;break;case"Modified":n=p.C.Class.ModifiedResource;break;default:throw new u.IllegalArgumentError("Invalid type of request: '"+t+"'.")}return i.values.push(new c.Value("return=representation; "+n)),r},e.setContainerRetrievalPreferences=function(t,r,n){void 0===n&&(n=!0);for(var i=e.getHeader("prefer",r,!0),o=n?"return=representation; ":"",a=["include","omit"],s=0,u=a;s<u.length;s++){var l=u[s];l in t&&t[l].length>0&&i.values.push(new c.Value(""+o+l+'="'+t[l].join(" ")+'"'))}return r},e.setSlug=function(t,r){return e.getHeader("slug",r,!0).values.push(new c.Value(t)),r},e.isOptions=function(e){return g.hasPropertyDefined(e,"headers")||g.hasPropertyDefined(e,"sendCredentialsOnCORS")||g.hasPropertyDefined(e,"timeout")||g.hasPropertyDefined(e,"request")},e}();t.Util=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n;!function(e){e[e.CONTINUE=100]="CONTINUE",e[e.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",e[e.OK=200]="OK",e[e.CREATED=201]="CREATED",e[e.ACCEPTED=202]="ACCEPTED",e[e.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",e[e.NO_CONTENT=204]="NO_CONTENT",e[e.RESET_CONTENT=205]="RESET_CONTENT",e[e.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",e[e.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",e[e.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",e[e.FOUND=302]="FOUND",e[e.SEE_OTHER=303]="SEE_OTHER",e[e.NOT_MODIFIED=304]="NOT_MODIFIED",e[e.USE_PROXY=305]="USE_PROXY",e[e.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",e[e.FORBIDDEN=403]="FORBIDDEN",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",e[e.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",e[e.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",e[e.REQUEST_TIME_OUT=408]="REQUEST_TIME_OUT",e[e.CONFLICT=409]="CONFLICT",e[e.GONE=410]="GONE",e[e.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",e[e.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",e[e.REQUEST_ENTITY_TOO_LARGE=413]="REQUEST_ENTITY_TOO_LARGE",e[e.REQUEST_URI_TOO_LARGE=414]="REQUEST_URI_TOO_LARGE",e[e.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",e[e.REQUESTED_RANGE_NOT_SATISFIABLE=416]="REQUESTED_RANGE_NOT_SATISFIABLE",e[e.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",e[e.BAD_GATEWAY=502]="BAD_GATEWAY",e[e.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",e[e.GATEWAY_TIME_OUT=504]="GATEWAY_TIME_OUT",e[e.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED"}(n=t.StatusCode||(t.StatusCode={})),t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.parse=function(e){return new Promise(function(t,r){t(e)})},e}();t.Class=n,t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),i=r(1),o=r(0);t.RDF_CLASS=i.C.Class.AddMemberAction,t.SCHEMA={targetMembers:{"@id":i.C.Predicate.targetMember,"@type":"@id","@container":"@set"}};var a=function(){function e(){}return e.hasClassProperties=function(e){return o.hasPropertyDefined(e,"targetMembers")},e.createDocument=function(e){var r=n.Factory.create();return r.createFragment({targetMembers:e}).types.push(t.RDF_CLASS),r},e}();t.Factory=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),i=r(2),o=r(1),a=r(0);t.RDF_CLASS=o.LDP.Class.DirectContainer;var s=function(){function e(){}return e.hasClassProperties=function(e){return a.hasPropertyDefined(e,"membershipResource")},e.is=function(r){return e.hasClassProperties(r)&&n.Factory.is(r)&&r.hasType(t.RDF_CLASS)},e.create=function(t,r,n){return e.createFrom({},t,r,n)},e.createFrom=function(t,r,s,u){if(e.is(t))throw new i.IllegalArgumentError("The base object is already a DirectContainer.");if(!r)throw new i.IllegalArgumentError("The property membershipResource cannot be null.");if(!s)throw new i.IllegalArgumentError("The property hasMemberRelation cannot be empty.");if(!u&&a.isDefined(u))throw new i.IllegalArgumentError("The property isMemberOfRelation cannot be empty.");var c=t;return n.Factory.is(t)||(c=n.Factory.createFrom(t)),c.types.push(o.LDP.Class.Container),c.types.push(o.LDP.Class.DirectContainer),c.membershipResource=r,c.hasMemberRelation=s,c.isMemberOfRelation=u,c},e}();t.Factory=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(0);t.RDF_CLASS=n.LDP.Class.IndirectContainer;var o=function(){function e(){}return e.hasClassProperties=function(e){return i.hasPropertyDefined(e,"insertedContentRelation")},e}();t.Factory=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),i=r(1),o=r(0);t.RDF_CLASS=i.C.Class.RemoveMemberAction,t.SCHEMA={targetMembers:{"@id":i.C.Predicate.targetMember,"@type":"@id","@container":"@set"}};var a=function(){function e(){}return e.hasClassProperties=function(e){return o.hasPropertyDefined(e,"targetMembers")},e.createDocument=function(e){var r=n.Factory.create();return r.createFragment({targetMembers:e}).types.push(t.RDF_CLASS),r},e}();t.Factory=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(0),o=r(57);t.RDF_CLASS=n.C.Class.ResourceMetadata,t.SCHEMA={eTag:{"@id":n.C.Predicate.eTag,"@type":n.XSD.DataType.string},resource:{"@id":n.C.Predicate.resource,"@type":"@id"}};var a=function(){function e(){}return e.hasClassProperties=function(e){return i.hasPropertyDefined(e,"eTag")&&i.hasPropertyDefined(e,"resource")},e.is=function(t){return o.Factory.is(t)&&e.hasClassProperties(t)&&e.hasRDFClass(t)},e.hasRDFClass=function(e){return!!e&&-1!==("@type"in e?e["@type"]:"types"in e?e.types:[]).indexOf(t.RDF_CLASS)},e}();t.Factory=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(0),o=r(57);t.RDF_CLASS=n.C.Class.ResponseMetadata,t.SCHEMA={resourcesMetadata:{"@id":n.C.Predicate.resourceMetadata,"@type":"@id","@container":"@set"}};var a=function(){function e(){}return e.hasClassProperties=function(e){return i.hasPropertyDefined(e,"resourcesMetadata")},e.is=function(t){return o.Factory.is(t)&&e.hasClassProperties(t)&&e.hasRDFClass(t)},e.hasRDFClass=function(e){return!!e&&-1!==("@type"in e?e["@type"]:"types"in e?e.types:[]).indexOf(t.RDF_CLASS)},e}();t.Factory=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.namespace="https://carbonldp.com/ns/v1/platform#";var n=function(){function e(){}return Object.defineProperty(e,"AccessPoint",{get:function(){return t.namespace+"AccessPoint"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"AddMemberAction",{get:function(){return t.namespace+"AddMemberAction"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"API",{get:function(){return t.namespace+"API"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CreatedResource",{get:function(){return t.namespace+"CreatedResource"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Document",{get:function(){return t.namespace+"Document"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ModifiedResource",{get:function(){return t.namespace+"ModifiedResource"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NonReadableMembershipResourceTriples",{get:function(){return t.namespace+"NonReadableMembershipResourceTriples"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PreferContainer",{get:function(){return t.namespace+"PreferContainer"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PreferContainmentResources",{get:function(){return t.namespace+"PreferContainmentResources"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PreferContainmentTriples",{get:function(){return t.namespace+"PreferContainmentTriples"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PreferMembershipResources",{get:function(){return t.namespace+"PreferMembershipResources"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PreferMembershipTriples",{get:function(){return t.namespace+"PreferMembershipTriples"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PreferSelectedMembershipTriples",{get:function(){return t.namespace+"PreferSelectedMembershipTriples"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"VolatileResource",{get:function(){return t.namespace+"VolatileResource"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RDFRepresentation",{get:function(){return t.namespace+"RDFRepresentation"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RemoveMemberAction",{get:function(){return t.namespace+"RemoveMemberAction"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ErrorResponse",{get:function(){return t.namespace+"ErrorResponse"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Error",{get:function(){return t.namespace+"Error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ResponseMetadata",{get:function(){return t.namespace+"ResponseMetadata"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ResourceMetadata",{get:function(){return t.namespace+"ResourceMetadata"},enumerable:!0,configurable:!0}),e}();t.Class=n;var i=function(){function e(){}return Object.defineProperty(e,"accessPoint",{get:function(){return t.namespace+"accessPoint"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"appRoleMap",{get:function(){return t.namespace+"appRoleMap"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"bNodeIdentifier",{get:function(){return t.namespace+"bNodeIdentifier"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"buildDate",{get:function(){return t.namespace+"buildDate"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"carbonCode",{get:function(){return t.namespace+"carbonCode"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"created",{get:function(){return t.namespace+"created"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultInteractionModel",{get:function(){return t.namespace+"defaultInteractionModel"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"entry",{get:function(){return t.namespace+"entry"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"error",{get:function(){return t.namespace+"error"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"eTag",{get:function(){return t.namespace+"eTag"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"httpStatusCode",{get:function(){return t.namespace+"httpStatusCode"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"key",{get:function(){return t.namespace+"key"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"mediaType",{get:function(){return t.namespace+"mediaType"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"message",{get:function(){return t.namespace+"message"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"modified",{get:function(){return t.namespace+"modified"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"requestID",{get:function(){return t.namespace+"requestID"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"resourceMetadata",{get:function(){return t.namespace+"resourceMetadata"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"resource",{get:function(){return t.namespace+"resource"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"size",{get:function(){return t.namespace+"size"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"targetMember",{get:function(){return t.namespace+"targetMember"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"version",{get:function(){return t.namespace+"version"},enumerable:!0,configurable:!0}),e}();t.Predicate=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="https://carbonldp.com/ns/v1/patch#";t.namespace=n;var i=function(){function e(){}return e}();i.ADD_ACTION=n+"addAction",i.SET_ACTION=n+"setAction",i.DELETE_ACTION=n+"deleteAction",t.Predicate=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="https://carbonldp.com/ns/v1/security#";t.namespace=n;var i=function(){function e(){}return Object.defineProperty(e,"AccessControlEntry",{get:function(){return n+"AccessControlEntry"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"AccessControlList",{get:function(){return n+"AccessControlList"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"AddMember",{get:function(){return n+"AddMember"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Agent",{get:function(){return n+"Agent"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"AllOrigins",{get:function(){return n+"AllOrigins"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Application",{get:function(){return n+"Application"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"AppRole",{get:function(){return n+"AppRole"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CreateAccessPoint",{get:function(){return n+"CreateAccessPoint"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CreateChild",{get:function(){return n+"CreateChild"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Delete",{get:function(){return n+"Delete"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Download",{get:function(){return n+"Download"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Extend",{get:function(){return n+"Extend"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ManageSecurity",{get:function(){return n+"ManageSecurity"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PlatformRole",{get:function(){return n+"PlatformRole"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ProtectedDocument",{get:function(){return n+"ProtectedDocument"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Read",{get:function(){return n+"Read"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RemoveMember",{get:function(){return n+"RemoveMember"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Ticket",{get:function(){return n+"Ticket"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Token",{get:function(){return n+"Token"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Update",{get:function(){return n+"Update"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Upload",{get:function(){return n+"Upload"},enumerable:!0,configurable:!0}),e}();t.Class=i;var o=function(){function e(){}return Object.defineProperty(e,"accessControlEntry",{get:function(){return n+"accessControlEntry"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"accessControlList",{get:function(){return n+"accessControlList"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"accessTo",{get:function(){return n+"accessTo"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"agent",{get:function(){return n+"agent"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"allowsOrigin",{get:function(){return n+"allowsOrigin"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"childRole",{get:function(){return n+"childRole"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"credentialsOf",{get:function(){return n+"credentialsOf"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"description",{get:function(){return n+"description"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"enabled",{get:function(){return n+"enabled"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"expirationTime",{get:function(){return n+"expirationTime"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"forIRI",{get:function(){return n+"forIRI"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"granting",{get:function(){return n+"granting"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"inheritableEntry",{get:function(){return n+"inheritableEntry"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"namae",{get:function(){return n+"name"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"parentRole",{get:function(){return n+"parentRole"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"password",{get:function(){return n+"password"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"permission",{get:function(){return n+"permission"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"platformRole",{get:function(){return n+"platformRole"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"rootContainer",{get:function(){return n+"rootContainer"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"subject",{get:function(){return n+"subject"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"subjectClass",{get:function(){return n+"subjectClass"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ticketKey",{get:function(){return n+"ticketKey"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tokenKey",{get:function(){return n+"tokenKey"},enumerable:!0,configurable:!0}),e}();t.Predicate=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="http://www.w3.org/ns/ldp#";t.namespace=n;var i=function(){function e(){}return Object.defineProperty(e,"Resource",{get:function(){return n+"Resource"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RDFSource",{get:function(){return n+"RDFSource"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Container",{get:function(){return n+"Container"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BasicContainer",{get:function(){return n+"BasicContainer"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DirectContainer",{get:function(){return n+"DirectContainer"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IndirectContainer",{get:function(){return n+"IndirectContainer"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NonRDFSource",{get:function(){return n+"NonRDFSource"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MemberSubject",{get:function(){return n+"MemberSubject"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PreferContainment",{get:function(){return n+"PreferContainment"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PreferMembership",{get:function(){return n+"PreferMembership"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PreferEmptyContainer",{get:function(){return n+"PreferEmptyContainer"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PreferMinimalContainer",{get:function(){return n+"PreferMinimalContainer"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Page",{get:function(){return n+"Page"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PageSortCriterion",{get:function(){return n+"PageSortCriterion"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Ascending",{get:function(){return n+"Ascending"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Descending",{get:function(){return n+"Descending"},enumerable:!0,configurable:!0}),e}();t.Class=i;var o=function(){function e(){}return Object.defineProperty(e,"contains",{get:function(){return n+"contains"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"member",{get:function(){return n+"member"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"hasMemberRelation",{get:function(){return n+"hasMemberRelation"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMemberOfRelation",{get:function(){return n+"isMemberOfRelation"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"membershipResource",{get:function(){return n+"membershipResource"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"insertedContentRelation",{get:function(){return n+"insertedContentRelation"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"constrainedBy",{get:function(){return n+"constrainedBy"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pageSortCriteria",{get:function(){return n+"pageSortCriteria"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pageSortOrder",{get:function(){return n+"pageSortOrder"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pageSortCollation",{get:function(){return n+"pageSortCollation"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pageSequence",{get:function(){return n+"pageSequence"},enumerable:!0,configurable:!0}),e}();t.Predicate=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="http://www.w3.org/1999/02/22-rdf-syntax-ns#";t.namespace=n;var i=function(){function e(){}return e}();i.type=n+"type",t.Predicate=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.namespace="http://www.w3.org/2001/vcard-rdf/3.0#";var n=function(){function e(){}return Object.defineProperty(e,"email",{get:function(){return t.namespace+"email"},enumerable:!0,configurable:!0}),e}();t.Predicate=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(61);t.Agents=n;var i=r(123);t.Auth=i;var o=r(124);t.PersistedAgent=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(61),o=r(10),a=r(2),s=function(e){function t(t){var r=e.call(this,t)||this;return r.agents=new i.Class(t),r}return n(t,e),Object.defineProperty(t.prototype,"roles",{get:function(){throw new a.NotImplementedError("Currently there is no support for Platform Roles")},set:function(e){},enumerable:!0,configurable:!0}),t}(o.Class);t.Class=s,t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(126);t.XSD=n},function(e,t,r){"use strict";function n(e){var t=String(e);return 1===t.length&&(t="0"+t),t}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),a=r(0),s=function(){function e(){}return e.prototype.serialize=function(e){if(!a.isDate(e))throw new o.IllegalArgumentError("The value is not a Date object.");return e.getUTCFullYear()+"-"+n(e.getUTCMonth()+1)+"-"+n(e.getUTCDate())},e}();t.DateSerializer=s,t.dateSerializer=new s;var u=function(){function e(){}return e.prototype.serialize=function(e){if(!a.isDate(e))throw new o.IllegalArgumentError("The value is not a Date object.");return e.toISOString()},e}();t.DateTimeSerializer=u,t.dateTimeSerializer=new u;var c=function(){function e(){}return e.prototype.serialize=function(e){if(!a.isDate(e))throw new o.IllegalArgumentError("The value is not a Date object.");return n(e.getUTCHours())+":"+n(e.getUTCMinutes())+":"+n(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},e}();t.TimeSerializer=c,t.timeSerializer=new c;var l=function(){function e(){}return e.prototype.serialize=function(e){if(!a.isNumber(e))throw new o.IllegalArgumentError("The value is not a number.");return(~~e).toString()},e}();t.IntegerSerializer=l,t.integerSerializer=new l;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.serialize=function(t){var r=e.prototype.serialize.call(this,t);return r=a.S.startsWith(r,"-")?r.substring(1):r},t}(l);t.UnsignedIntegerSerializer=f,t.unsignedIntegerSerializer=new f;var p=function(){function e(){}return e.prototype.serialize=function(e){if(!a.isNumber(e))throw new o.IllegalArgumentError("The value is not a number.");return e===Number.POSITIVE_INFINITY?"INF":e===Number.NEGATIVE_INFINITY?"-INF":e.toString()},e}();t.FloatSerializer=p,t.floatSerializer=new p;var d=function(){function e(){}return e.prototype.serialize=function(e){return(!!e).toString()},e}();t.BooleanSerializer=d,t.booleanSerializer=new d;var h=function(){function e(){}return e.prototype.serialize=function(e){return String(e)},e}();t.StringSerializer=h,t.stringSerializer=new h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(19),o=r(0);t.RDF_CLASS=n.C.Class.RDFRepresentation,t.SCHEMA={mediaType:{"@id":n.C.Predicate.mediaType,"@type":n.XSD.DataType.string},size:{"@id":n.C.Predicate.size,"@type":n.XSD.DataType.long}};var a=function(){function e(){}return e.hasClassProperties=function(e){return o.hasPropertyDefined(e,"mediaType")&&o.hasPropertyDefined(e,"size")},e.is=function(r){return e.hasClassProperties(r)&&i.Factory.is(r)&&r.hasType(t.RDF_CLASS)},e}();t.Factory=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(13),i=r(9),o=r(18),a=r(12),s=r(0),u=["numeric","string","boolean","dateTime"],c=function(){function e(){}return e.is=function(e){return s.hasPropertyDefined(e,"orderBy")||s.hasPropertyDefined(e,"limit")||s.hasPropertyDefined(e,"offset")},e}();t.Factory=c;var l=function(){function e(){}return e.stringifyRetrievalPreferences=function(e,t){var r="";if("limit"in e&&(r+="limit="+e.limit),"offset"in e&&(r+=(r?"&":"")+"offset="+e.offset),"orderBy"in e&&e.orderBy.length>0){r+=(r?"&":"")+"orderBy=";for(var s=[],c=0,l=e.orderBy;c<l.length;c++){var f=l[c],p="";if("@id"in f){var d=f["@id"],h=!1;d.startsWith("-")&&(h=!0,d=d.substr(1)),t&&a.Util.isRelative(d)&&(d=i.Util.resolveURI(d,t)),p+=(h?"-":"")+"<"+encodeURI(d).replace("#","%23")+">"}if("@type"in f){if(!p)throw new n.default("The @id property is missing in OrderBy property.");var g=f["@type"];if(-1===u.indexOf(g))throw new n.default("The @type value specified is not valid.");"numeric"!==g&&(g="<"+encodeURI(o.DataType[g]).replace("#","%23")+">"),p+=";"+g}if("@language"in f){if(!p)throw new n.default("The @id property is missing in OrderBy property.");p+=";"+f["@language"]}s.push(p)}r+=s.join(",")}return r?"?"+r:r},e}();t.Util=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(){}return Object.defineProperty(e,"URI",{get:function(){return"uri"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LITERAL",{get:function(){return"literal"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BNODE",{get:function(){return"bnode"},enumerable:!0,configurable:!0}),e}();t.ValueTypes=i;var o=function(){function e(){}return e.hasClassProperties=function(e){return n.hasPropertyDefined(e,"head")},e.is=function(t){return n.isObject(t)&&e.hasClassProperties(t)},e}();t.Factory=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(7),o=r(4),a=r(0),s=r(67),u=function(){function e(){}return e.executeRawASKQuery=function(t,r,n){return void 0===n&&(n={}),n=a.extend(n,e.defaultOptions),i.Request.Util.setAcceptHeader("application/sparql-results+json",n),i.Request.Util.setContentTypeHeader("application/sparql-query",n),i.Request.Service.post(t,r,n,e.resultsParser)},e.executeASKQuery=function(t,r,n){return void 0===n&&(n={}),e.executeRawASKQuery(t,r,n).then(function(e){var t=e[0],r=e[1];return[t.boolean,r]})},e.executeRawSELECTQuery=function(t,r,n){return void 0===n&&(n={}),n=a.extend(n,e.defaultOptions),i.Request.Util.setAcceptHeader("application/sparql-results+json",n),i.Request.Util.setContentTypeHeader("application/sparql-query",n),i.Request.Service.post(t,r,n,e.resultsParser)},e.executeSELECTQuery=function(t,r,n,i){return void 0===i&&(i={}),e.executeRawSELECTQuery(t,r,i).then(function(t){for(var r=t[0],i=t[1],o=r.results.bindings,a=[],s=0,u=o;s<u.length;s++){var c=u[s],l={};for(var f in c)if(c.hasOwnProperty(f)){var p=c[f];l[f]=e.parseRawBindingProperty(p,n)}a.push(l)}return[{vars:r.head.vars,bindings:a},i]})},e.executeRawCONSTRUCTQuery=function(t,r,n){return void 0===n&&(n={}),n=a.extend(n,e.defaultOptions),void 0===i.Request.Util.getHeader("Accept",n)&&i.Request.Util.setAcceptHeader("application/ld+json",n),i.Request.Util.setContentTypeHeader("application/sparql-query",n),i.Request.Service.post(t,r,n,e.stringParser)},e.executeRawDESCRIBEQuery=function(t,r,n){return void 0===n&&(n={}),n=a.extend(n,e.defaultOptions),void 0===i.Request.Util.getHeader("Accept",n)&&i.Request.Util.setAcceptHeader("application/ld+json",n),i.Request.Util.setContentTypeHeader("application/sparql-query",n),i.Request.Service.post(t,r,n,e.stringParser)},e.executeUPDATE=function(t,r,n){return void 0===n&&(n={}),n=a.extend(n,e.defaultOptions),void 0===i.Request.Util.getHeader("Accept",n)&&i.Request.Util.setAcceptHeader("application/ld+json",n),i.Request.Util.setContentTypeHeader("application/sparql-update",n),i.Request.Service.post(t,r,n)},e.parseRawBindingProperty=function(e,t){switch(e.type){case"uri":return t.getPointer(e.value);case"bnode":throw new n.NotImplementedError("BNodes cannot be queried directly");case"literal":return"datatype"in e?o.Literal.Factory.parse(e.value,e.datatype):o.Literal.Factory.parse(e.value);default:throw new n.IllegalArgumentError("The bindingProperty has an unsupported type")}},e}();u.defaultOptions={},u.resultsParser=new s.default,u.stringParser=new i.StringParser.Class,t.Class=u,t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10);t.defaultSettings={domain:"carbonldp.com","http.ssl":!0,"auth.method":n.Method.TOKEN,"platform.container":"platform/","platform.apps.container":"apps/","platform.agents.container":"agents/","platform.roles.container":"roles/",vocabulary:"vocabulary/#"},t.default=t.defaultSettings},function(e,t,r){"use strict";var n=r(!function(){var e=new Error('Cannot find module "./Utils/IRI"');throw e.code="MODULE_NOT_FOUND",e}()),i=r(!function(){var e=new Error('Cannot find module "./Utils/Patterns"');throw e.code="MODULE_NOT_FOUND",e}()),o=r(!function(){var e=new Error('Cannot find module "./PatternBuilder"');throw e.code="MODULE_NOT_FOUND",e}()),a=r(!function(){var e=new Error('Cannot find module "./Tokens/Token"');throw e.code="MODULE_NOT_FOUND",e}()),s=r(!function(){var e=new Error('Cannot find module "./Tokens/StringLiteral"');throw e.code="MODULE_NOT_FOUND",e}()),u=r(!function(){var e=new Error('Cannot find module "./Tokens/RightSymbol"');throw e.code="MODULE_NOT_FOUND",e}()),c=r(!function(){var e=new Error('Cannot find module "./Tokens/NumberLiteral"');throw e.code="MODULE_NOT_FOUND",e}()),l=r(!function(){var e=new Error('Cannot find module "./Patterns/Tokens"');throw e.code="MODULE_NOT_FOUND",e}()),f=r(!function(){var e=new Error('Cannot find module "./Tokens/NewLineSymbol"');throw e.code="MODULE_NOT_FOUND",e}()),p=function(){function e(){this._prefixes=new Map,this.initInterfaces()}return e.prototype.base=function(e){return this._base=e,this.interfaces.queryClause},e.prototype.vocab=function(e){return this._vocab=e,this.interfaces.queryClause},e.prototype.prefix=function(e,t){return this._prefixes.set(e,{iri:t,used:!1}),this.interfaces.queryClause},e.prototype.select=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(0===t.length)throw new Error("IllegalArgumentError: Need to provide al least one variable.");return this._selects=[l.SELECT],t.forEach(function(t){return e._selects.push(l.VAR_SYMBOL,new s.StringLiteral(t))}),Object.assign(this.interfaces.finishClause,this.interfaces.finishSelect),Object.assign({},this.interfaces.whereClause,this.interfaces.fromClause)},e.prototype.selectAll=function(){return this._selects=[l.SELECT,new u.RightSymbol("*")],Object.assign(this.interfaces.finishClause,this.interfaces.finishSelect),Object.assign({},this.interfaces.whereClause,this.interfaces.fromClause)},e.prototype.from=function(e){return this._from=[l.FROM].concat(this._resolveIRI(e)),this.interfaces.whereClause},e.prototype.fromNamed=function(e){return this._from=[l.FROM,l.NAMED].concat(this._resolveIRI(e)),this.interfaces.whereClause},e.prototype.where=function(e){var t=e(new o.PatternBuilder(this));return this._where=[l.WHERE].concat(i.getBlockTokens(t)),Object.assign({},this.interfaces.groupClause,this.interfaces.havingClause,this.interfaces.orderClause,this.interfaces.limitClause,this.interfaces.offsetClause,this.interfaces.finishClause)},e.prototype.groupBy=function(e){return this._group=[l.GROUP,l.BY,new s.StringLiteral(e)],Object.assign({},this.interfaces.havingClause,this.interfaces.orderClause,this.interfaces.limitClause,this.interfaces.offsetClause,this.interfaces.finishClause)},e.prototype.having=function(e){return this._having=[l.HAVING,new s.StringLiteral(e)],Object.assign({},this.interfaces.orderClause,this.interfaces.limitClause,this.interfaces.offsetClause,this.interfaces.finishClause)},e.prototype.orderBy=function(e){return this._order=[l.ORDER,l.BY,new s.StringLiteral(e)],Object.assign({},this.interfaces.limitClause,this.interfaces.offsetClause,this.interfaces.finishClause)},e.prototype.limit=function(e){return this._limit=[l.LIMIT,new c.NumberLiteral(e)],this._offset?this.interfaces.finishClause:Object.assign({},this.interfaces.offsetClause,this.interfaces.finishClause)},e.prototype.offset=function(e){return this._offset=[l.OFFSET,new c.NumberLiteral(e)],this._limit?this.interfaces.finishClause:Object.assign({},this.interfaces.limitClause,this.interfaces.finishClause)},e.prototype.constructQuery=function(e){var t=[];if(this._base&&t.push(l.BASE,l.OPEN_IRI,new s.StringLiteral(this._base),l.CLOSE_IRI),this._prefixes.forEach(function(r,n){(r.used||e===a.TokenFormat.PRETTY)&&t.push(l.PREFIX,new s.StringLiteral(n+":"),l.OPEN_IRI,new s.StringLiteral(r.iri),l.CLOSE_IRI)}),this._selects&&t.push.apply(t,this._selects),this._from&&t.push.apply(t,this._from),this._where&&t.push.apply(t,this._where),this._order&&t.push.apply(t,this._order),this._having&&t.push.apply(t,this._having),this._group&&t.push.apply(t,this._group),this._limit&&t.push.apply(t,this._limit),this._offset&&t.push.apply(t,this._offset),e===a.TokenFormat.COMPACT)return t.reduce(function(r,n,i){var o=t[i+1];return o===l.EMPTY_SEPARATOR&&(o=t[i+2]),r+n.getTokenValue(e,o)},"");if(e===a.TokenFormat.PRETTY){var r=[],n={token:null,indentation:0,subject:0,property:0,spaces:0};return t.reduce(function(i,o,a){var s=t[a+1],u=o.getTokenValue(e,s);if(0===n.spaces?(n.subject+=u.length,u.endsWith(" ")&&n.spaces++):1===n.spaces&&(n.property+=u.length,u.endsWith(" ")&&n.spaces++),-1!==[l.OPEN_MULTI_BLOCK,l.OPEN_MULTI_BN,l.OPEN_MULTI_LIST].indexOf(o))r.push(n),n={token:o,indentation:n.indentation+4,subject:0,property:0,spaces:o===l.OPEN_MULTI_BLOCK?0:o===l.OPEN_MULTI_BN?1:2};else if(-1!==[l.CLOSE_MULTI_LIST].indexOf(o)){if(!(s instanceof f.NewLineSymbol)){for(var c=n;-1===[l.OPEN_MULTI_BLOCK,l.OPEN_MULTI_BN,l.OPEN_MULTI_LIST].indexOf(c.token);)c=r.pop();r.push(c),n={token:o,indentation:c.indentation+4,subject:0,property:0,spaces:1}}}else if(-1!==[l.SAME_SUBJECT_SEPARATOR,l.SAME_PROPERTY_SEPARATOR,l.CLOSE_MULTI_LIST].indexOf(o)){for(var p=n;-1===[l.OPEN_MULTI_BLOCK,l.OPEN_MULTI_BN,l.OPEN_MULTI_LIST,l.CLOSE_MULTI_LIST,l.CLOSE_MULTI_BN].indexOf(p.token);)p=r.pop();r.push(p),o===l.SAME_SUBJECT_SEPARATOR?n={token:o,indentation:p.indentation+n.subject,subject:n.subject,property:0,spaces:1}:o===l.SAME_PROPERTY_SEPARATOR&&(n={token:o,indentation:p.indentation+n.subject+n.property,subject:n.subject,property:n.property,spaces:2})}else if(o===l.GRAPH_PATTERN_SEPARATOR){for(;n.token!==l.OPEN_MULTI_BLOCK;)n=r.pop();n.spaces=0,n.subject=0,n.property=0}if(s===l.CLOSE_MULTI_BLOCK){for(;n.token!==l.OPEN_MULTI_BLOCK;)n=r.pop();n=r.pop()}else if(s===l.CLOSE_MULTI_BN){for(;n.token!==l.OPEN_MULTI_BN;)n=r.pop();n=r.pop()}else if(s===l.CLOSE_MULTI_LIST){for(;n.token!==l.OPEN_MULTI_LIST;)n=r.pop();n=r.pop()}return u.endsWith("\n")&&(u+=" ".repeat(n.indentation)),i+u},"")}},e.prototype.toCompactString=function(){return this.constructQuery(a.TokenFormat.COMPACT)},e.prototype.toString=function(){return this.toCompactString()},e.prototype.toPrettyString=function(){return this.constructQuery(a.TokenFormat.PRETTY)},e.prototype.initInterfaces=function(){this.interfaces={queryClause:{base:this.base.bind(this),vocab:this.vocab.bind(this),prefix:this.prefix.bind(this),select:this.select.bind(this),selectAll:this.selectAll.bind(this)},fromClause:{from:this.from.bind(this),fromNamed:this.fromNamed.bind(this)},whereClause:{where:this.where.bind(this)},groupClause:{groupBy:this.groupBy.bind(this)},havingClause:{having:this.having.bind(this)},orderClause:{orderBy:this.orderBy.bind(this)},limitClause:{limit:this.limit.bind(this)},offsetClause:{offset:this.offset.bind(this)},finishClause:{toCompactString:this.toCompactString.bind(this),toPrettyString:this.toPrettyString.bind(this)}}},e.prototype._resolveIRI=function(e,t){void 0===t&&(t=!1);var r;if(n.isPrefixed(e)){var i=n.getPrefixedParts(e),o=this._prefixes.get(i[0]);if(void 0===o)throw new Error("IllegalArgumentError: The used prefix has not been declared");r=[new s.StringLiteral(i[0]),l.PREFIX_SYMBOL,new s.StringLiteral(i[1])],o.used=!0}else r=n.resolve(e,t?this._vocab:void 0);return r},e}();t.SPARQLER=p,Object.defineProperty(t,"__esModule",{value:!0}),t.default=p},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("url")},function(e,t){e.exports=n}])});