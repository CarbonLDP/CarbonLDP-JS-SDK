{"version":3,"sources":["Document.ts"],"names":[],"mappings":"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","file":"Document.js","sourcesContent":["import * as BlankNode from \"./BlankNode\";\nimport * as Errors from \"./Errors\";\nimport * as Fragment from \"./Fragment\";\nimport JSONLDConverter from \"./JSONLDConverter\";\nimport * as NamedFragment from \"./NamedFragment\";\nimport * as NS from \"./NS\";\nimport * as ObjectSchema from \"./ObjectSchema\";\nimport * as Pointer from \"./Pointer\";\nimport * as RDF from \"./RDF\";\nimport * as Resource from \"./Resource\";\nimport * as Utils from \"./Utils\";\n\nexport const RDF_CLASS:string = NS.C.Class.Document;\n\nexport const SCHEMA:ObjectSchema.Class = {\n\t\"contains\": {\n\t\t\"@id\": NS.LDP.Predicate.contains,\n\t\t\"@container\": \"@set\",\n\t\t\"@type\": \"@id\",\n\t},\n\t\"members\": {\n\t\t\"@id\": NS.LDP.Predicate.member,\n\t\t\"@container\": \"@set\",\n\t\t\"@type\": \"@id\",\n\t},\n\t\"membershipResource\": {\n\t\t\"@id\": NS.LDP.Predicate.membershipResource,\n\t\t\"@type\": \"@id\",\n\t},\n\t\"isMemberOfRelation\": {\n\t\t\"@id\": NS.LDP.Predicate.isMemberOfRelation,\n\t\t\"@type\": \"@id\",\n\t},\n\t\"hasMemberRelation\": {\n\t\t\"@id\": NS.LDP.Predicate.hasMemberRelation,\n\t\t\"@type\": \"@id\",\n\t},\n\t\"insertedContentRelation\": {\n\t\t\"@id\": NS.LDP.Predicate.insertedContentRelation,\n\t\t\"@type\": \"@id\",\n\t},\n\t\"created\": {\n\t\t\"@id\": NS.C.Predicate.created,\n\t\t\"@type\": NS.XSD.DataType.dateTime,\n\t},\n\t\"modified\": {\n\t\t\"@id\": NS.C.Predicate.modified,\n\t\t\"@type\": NS.XSD.DataType.dateTime,\n\t},\n\t\"defaultInteractionModel\": {\n\t\t\"@id\": NS.C.Predicate.defaultInteractionModel,\n\t\t\"@type\": \"@id\",\n\t},\n\t\"accessPoints\": {\n\t\t\"@id\": NS.C.Predicate.accessPoint,\n\t\t\"@type\": \"@id\",\n\t\t\"@container\": \"@set\",\n\t},\n};\n\nexport interface Class extends Resource.Class, Pointer.Library, Pointer.Validator {\n\tdefaultInteractionModel?:Pointer.Class;\n\tisMemberOfRelation?:Pointer.Class;\n\thasMemberRelation?:Pointer.Class;\n\n\t_fragmentsIndex:Map<string, Fragment.Class>;\n\n\t_normalize():void;\n\n\t_removeFragment( fragment:Fragment.Class ):void;\n\t_removeFragment( slug:string ):void;\n\n\thasFragment( slug:string ):boolean;\n\tgetFragment<T>( slug:string ):T & Fragment.Class;\n\tgetNamedFragment<T>( slug:string ):T & NamedFragment.Class;\n\tgetFragments():Fragment.Class[];\n\n\tcreateFragment<T extends Object>( object:T, slug:string ):T & Fragment.Class;\n\tcreateFragment<T extends Object>( object:T ):T & Fragment.Class;\n\tcreateFragment( slug:string ):Fragment.Class;\n\tcreateFragment():Fragment.Class;\n\n\tcreateNamedFragment<T extends Object>( object:T, slug:string ):T & NamedFragment.Class;\n\tcreateNamedFragment( slug:string ):NamedFragment.Class;\n\n\tremoveNamedFragment( fragment:NamedFragment.Class ):void;\n\tremoveNamedFragment( slug:string ):void;\n\n\ttoJSON( objectSchemaResolver:ObjectSchema.Resolver, jsonldConverter:JSONLDConverter ):string;\n\ttoJSON( objectSchemaResolver:ObjectSchema.Resolver ):string;\n\ttoJSON():string;\n}\n\nfunction hasPointer( id:string ):boolean {\n\tlet document:Class = <Class> this;\n\n\tif( id === document.id ) return true;\n\n\tif( ! document.inScope( id ) ) return false;\n\n\treturn document.hasFragment( id );\n}\n\nfunction getPointer( id:string ):Pointer.Class {\n\tlet document:Class = <Class> this;\n\n\tif( ! document.inScope( id ) ) return null;\n\n\tif( id === document.id ) return document;\n\n\tlet fragment:Fragment.Class = document.getFragment( id );\n\tfragment = ! fragment ? document.createFragment( id ) : fragment;\n\n\treturn fragment;\n}\n\nfunction inScope( pointer:Pointer.Class ):boolean;\nfunction inScope( id:string ):boolean;\nfunction inScope( idOrPointer:any ):boolean {\n\tlet document:Class = <Class> this;\n\n\tlet id:string = Pointer.Factory.is( idOrPointer ) ? idOrPointer.id : idOrPointer;\n\n\tif( id === document.id ) return true;\n\n\tif( RDF.URI.Util.isBNodeID( id ) ) return true;\n\n\tif( RDF.URI.Util.isFragmentOf( id, document.id ) ) return true;\n\n\treturn RDF.URI.Util.isFragmentOf( id, \"\" );\n}\n\nfunction hasFragment( id:string ):boolean {\n\tlet document:Class = <Class> this;\n\n\tif( RDF.URI.Util.isAbsolute( id ) ) {\n\t\tif( ! RDF.URI.Util.isFragmentOf( id, document.id ) ) return false;\n\t\tid = RDF.URI.Util.hasFragment( id ) ? RDF.URI.Util.getFragment( id ) : id;\n\t} else if( Utils.S.startsWith( id, \"#\" ) ) id = id.substring( 1 );\n\n\treturn document._fragmentsIndex.has( id );\n}\nfunction getFragment( id:string ):Fragment.Class {\n\tlet document:Class = <Class> this;\n\n\tif( ! RDF.URI.Util.isBNodeID( id ) ) return document.getNamedFragment( id );\n\n\treturn document._fragmentsIndex.get( id ) || null;\n}\nfunction getNamedFragment( id:string ):NamedFragment.Class {\n\tlet document:Class = <Class> this;\n\n\tif( RDF.URI.Util.isBNodeID( id ) ) throw new Errors.IllegalArgumentError( \"Named fragments can't have a id that starts with '_:'.\" );\n\tif( RDF.URI.Util.isAbsolute( id ) ) {\n\t\tif( ! RDF.URI.Util.isFragmentOf( id, document.id ) ) throw new Errors.IllegalArgumentError( \"The id is out of scope.\" );\n\t\tid = RDF.URI.Util.hasFragment( id ) ? RDF.URI.Util.getFragment( id ) : id;\n\t} else if( Utils.S.startsWith( id, \"#\" ) ) id = id.substring( 1 );\n\n\treturn <NamedFragment.Class> document._fragmentsIndex.get( id ) || null;\n}\nfunction getFragments():Fragment.Class[] {\n\tlet document:Class = <Class> this;\n\treturn Utils.A.from( document._fragmentsIndex.values() );\n}\n\nfunction createFragment<T extends Object>( object:T, slug:string ):T & Fragment.Class;\nfunction createFragment<T extends Object>( object:T ):T & Fragment.Class;\nfunction createFragment( slug:string ):Fragment.Class;\nfunction createFragment():Fragment.Class;\nfunction createFragment<T extends Object>( slugOrObject?:any, slug?:string ):T & Fragment.Class {\n\tlet document:Class = <Class> this;\n\tslug = Utils.isString( slugOrObject ) ? slugOrObject : slug;\n\tlet object:T = ! Utils.isString( slugOrObject ) && ! ! slugOrObject ? slugOrObject : <T> {};\n\n\tif( slug ) {\n\t\tif( ! RDF.URI.Util.isBNodeID( slug ) ) return document.createNamedFragment<T>( object, slug );\n\t\tif( this._fragmentsIndex.has( slug ) ) throw new Errors.IDAlreadyInUseError( \"The slug provided is already being used by a fragment.\" );\n\t}\n\n\tlet fragment: T & BlankNode.Class = BlankNode.Factory.createFrom<T>( object, slug, document );\n\tdocument._fragmentsIndex.set( fragment.id, fragment );\n\n\tconvertNestedObjects( document, fragment );\n\treturn fragment;\n}\n\nfunction createNamedFragment<T extends Object>( object:T, slug:string ):NamedFragment.Class & T;\nfunction createNamedFragment( slug:string ):NamedFragment.Class;\nfunction createNamedFragment<T extends Object>( slugOrObject:any, slug?:string ):T & NamedFragment.Class {\n\tlet document:Class = <Class> this;\n\tslug = Utils.isString( slugOrObject ) ? slugOrObject : slug;\n\tlet object:T = ! Utils.isString( slugOrObject ) && ! ! slugOrObject ? slugOrObject : <T> {};\n\n\tif( RDF.URI.Util.isBNodeID( slug ) ) throw new Errors.IllegalArgumentError( \"Named fragments can't have a slug that starts with '_:'.\" );\n\n\tif( RDF.URI.Util.isAbsolute( slug ) ) {\n\t\tif( ! RDF.URI.Util.isFragmentOf( slug, document.id ) ) throw new Errors.IllegalArgumentError( \"The slug is out of scope.\" );\n\t\tslug = RDF.URI.Util.hasFragment( slug ) ? RDF.URI.Util.getFragment( slug ) : slug;\n\t} else if( Utils.S.startsWith( slug, \"#\" ) ) slug = slug.substring( 1 );\n\n\tif( document._fragmentsIndex.has( slug ) ) throw new Errors.IDAlreadyInUseError( \"The slug provided is already being used by a fragment.\" );\n\n\tlet fragment:T & NamedFragment.Class = NamedFragment.Factory.createFrom<T>( object, slug, document );\n\tdocument._fragmentsIndex.set( slug, fragment );\n\n\tconvertNestedObjects( document, fragment );\n\treturn fragment;\n}\n\nfunction removeFragment( fragment:Fragment.Class ):void;\nfunction removeFragment( slug:string ):void;\nfunction removeFragment( fragmentOrSlug:any ):void {\n\tlet document:Class = <Class> this;\n\n\tlet id:string = Utils.isString( fragmentOrSlug ) ? fragmentOrSlug : <Fragment.Class> fragmentOrSlug.id;\n\n\tif( RDF.URI.Util.isAbsolute( id ) ) {\n\t\tif( ! RDF.URI.Util.isFragmentOf( id, document.id ) ) return;\n\t\tid = RDF.URI.Util.hasFragment( id ) ? RDF.URI.Util.getFragment( id ) : id;\n\t} else if( Utils.S.startsWith( id, \"#\" ) ) id = id.substring( 1 );\n\n\tdocument._fragmentsIndex.delete( id );\n}\n\nfunction removeNamedFragment( fragment:NamedFragment.Class ):void;\nfunction removeNamedFragment( slug:string ):void;\nfunction removeNamedFragment( fragmentOrSlug:any ):void {\n\tlet document:Class = <Class> this;\n\n\tlet id:string = Utils.isString( fragmentOrSlug ) ? fragmentOrSlug : <Fragment.Class> fragmentOrSlug.id;\n\n\tif( RDF.URI.Util.isBNodeID( id ) ) throw new Errors.IllegalArgumentError( \"You can only remove NamedFragments.\" );\n\n\tdocument._removeFragment( id );\n}\n\nfunction toJSON( objectSchemaResolver:ObjectSchema.Resolver, jsonldConverter:JSONLDConverter ):string;\nfunction toJSON( objectSchemaResolver:ObjectSchema.Resolver ):string;\nfunction toJSON():string;\nfunction toJSON( objectSchemaResolver:ObjectSchema.Resolver = null, jsonldConverter:JSONLDConverter = null ):string {\n\tlet generalSchema:ObjectSchema.DigestedObjectSchema = objectSchemaResolver ? objectSchemaResolver.getGeneralSchema() : new ObjectSchema.DigestedObjectSchema();\n\tjsonldConverter = ! ! jsonldConverter ? jsonldConverter : new JSONLDConverter();\n\n\tlet resources:{ toJSON:() => string }[] = [];\n\tresources.push( this );\n\tresources = resources.concat( this.getFragments() );\n\n\tlet expandedResources:RDF.Node.Class[] = [];\n\tfor( let resource of resources ) {\n\t\tlet resourceSchema:ObjectSchema.DigestedObjectSchema = objectSchemaResolver ? objectSchemaResolver.getSchemaFor( resource ) : new ObjectSchema.DigestedObjectSchema();\n\n\t\texpandedResources.push( jsonldConverter.expand( resource, generalSchema, resourceSchema ) );\n\t}\n\n\tlet graph:RDF.Document.Class = {\n\t\t\"@id\": this.id,\n\t\t\"@graph\": expandedResources,\n\t};\n\n\treturn JSON.stringify( graph );\n}\n\nfunction normalize():void {\n\tlet currentFragments:Fragment.Class[] = (<Class> this).getFragments().filter( fragment => RDF.URI.Util.isBNodeID( fragment.id ) );\n\tlet usedFragmentsIDs:Set<string> = new Set();\n\n\tconvertNestedObjects( this, this, usedFragmentsIDs );\n\n\tcurrentFragments.forEach( fragment => {\n\t\tif( ! usedFragmentsIDs.has( fragment.id ) ) {\n\t\t\t(<Class> this)._fragmentsIndex.delete( fragment.id );\n\t\t}\n\t} );\n}\n\nexport class Factory {\n\tstatic hasClassProperties( documentResource:Object ):boolean {\n\t\treturn (\n\t\t\tUtils.isObject( documentResource ) &&\n\n\t\t\tUtils.hasPropertyDefined( documentResource, \"_fragmentsIndex\" ) &&\n\n\t\t\tUtils.hasFunction( documentResource, \"_normalize\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"_removeFragment\" ) &&\n\n\t\t\tUtils.hasFunction( documentResource, \"hasFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"getFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"getNamedFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"getFragments\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"createFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"createNamedFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"removeNamedFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"toJSON\" )\n\t\t);\n\t}\n\n\tstatic is( object:Object ):boolean {\n\t\treturn (\n\t\t\tResource.Factory.is( object ) &&\n\t\t\tFactory.hasClassProperties( object )\n\t\t);\n\t}\n\n\tstatic create():Class {\n\t\treturn Factory.createFrom( {} );\n\t}\n\n\tstatic createFrom<T extends Object>( object:T ):T & Class {\n\t\tif( Factory.is( object ) ) throw new Errors.IllegalArgumentError( \"The object provided is already a Document\" );\n\n\t\tlet resource:Resource.Class = <any> object;\n\t\tif( ! Resource.Factory.is( object ) ) resource = Resource.Factory.createFrom( object );\n\n\t\tlet document:T & Class = Factory.decorate<T>( <any> resource );\n\t\tconvertNestedObjects( document, document );\n\n\t\treturn document;\n\t}\n\n\tstatic decorate<T extends Object>( object:T ):T & Class {\n\t\tResource.Factory.decorate( object );\n\n\t\tif( Factory.hasClassProperties( object ) ) return <any> object;\n\n\t\tObject.defineProperties( object, {\n\t\t\t\"_fragmentsIndex\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: new Map<string, Fragment.Class>(),\n\t\t\t},\n\t\t\t\"_normalize\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: normalize,\n\t\t\t},\n\t\t\t\"_removeFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: removeFragment,\n\t\t\t},\n\t\t\t\"hasPointer\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: hasPointer,\n\t\t\t},\n\t\t\t\"getPointer\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getPointer,\n\t\t\t},\n\t\t\t\"inScope\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: inScope,\n\t\t\t},\n\t\t\t\"hasFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: hasFragment,\n\t\t\t},\n\t\t\t\"getFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getFragment,\n\t\t\t},\n\t\t\t\"getNamedFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getNamedFragment,\n\t\t\t},\n\t\t\t\"getFragments\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getFragments,\n\t\t\t},\n\t\t\t\"createFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: createFragment,\n\t\t\t},\n\t\t\t\"createNamedFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: createNamedFragment,\n\t\t\t},\n\t\t\t\"removeNamedFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: removeNamedFragment,\n\t\t\t},\n\t\t\t\"toJSON\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: toJSON,\n\t\t\t},\n\t\t} );\n\n\t\treturn <any> object;\n\t}\n}\n\nfunction convertNestedObjects( parent:Class, actual:any, fragmentsTracker?:Set<string> ):void {\n\tlet next:any;\n\tlet idOrSlug:string;\n\tlet fragment:Fragment.Class;\n\n\tlet keys:string[] = Object.keys( actual );\n\tfor( let key of keys ) {\n\t\tnext = actual[ key ];\n\n\t\tif( Utils.isArray( next ) ) {\n\t\t\tconvertNestedObjects( parent, next, fragmentsTracker );\n\t\t\tcontinue;\n\t\t}\n\n\t\tif( ! Utils.isPlainObject( next ) ) continue;\n\t\tif( Pointer.Factory.is( next ) ) {\n\t\t\tif( parent.hasFragment( next.id ) ) {\n\t\t\t\tif( fragmentsTracker ) fragmentsTracker.add( next.id );\n\t\t\t\tconvertNestedObjects( parent, next, fragmentsTracker );\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\n\t\tidOrSlug = ( \"id\" in next ) ? next.id : ( ( \"slug\" in next ) ? \"#\" + next.slug : \"\" );\n\t\tif( ! ! idOrSlug && ! parent.inScope( idOrSlug ) ) continue;\n\n\t\tlet parentFragment:Fragment.Class = parent.getFragment( idOrSlug );\n\n\t\tif( ! parentFragment ) {\n\t\t\tfragment = parent.createFragment( <Object> next, idOrSlug );\n\t\t\tconvertNestedObjects( parent, fragment, fragmentsTracker );\n\n\t\t} else if( parentFragment !== next ) {\n\t\t\tObject.assign( parentFragment, next );\n\t\t\tfragment = actual[ key ] = parentFragment;\n\t\t\tconvertNestedObjects( parent, fragment, fragmentsTracker );\n\t\t}\n\n\t}\n\n}\n\nexport default Class;\n"],"sourceRoot":"/source/"}