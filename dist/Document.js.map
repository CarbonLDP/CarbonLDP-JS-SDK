{"version":3,"sources":["Document.ts"],"names":[],"mappings":"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","file":"Document.js","sourcesContent":["import * as BlankNode from \"./BlankNode\";\nimport * as Errors from \"./Errors\";\nimport * as Fragment from \"./Fragment\";\nimport JSONLDConverter from \"./JSONLDConverter\";\nimport * as NamedFragment from \"./NamedFragment\";\nimport * as ObjectSchema from \"./ObjectSchema\";\nimport * as Pointer from \"./Pointer\";\nimport * as RDF from \"./RDF\";\nimport * as Resource from \"./Resource\";\nimport * as Utils from \"./Utils\";\n\nexport interface Class extends Resource.Class, Pointer.Library, Pointer.Validator {\n\t_fragmentsIndex:Map<string, Fragment.Class>;\n\n\thasFragment( slug:string ):boolean;\n\tgetFragment( slug:string ):Fragment.Class;\n\tgetNamedFragment( slug:string ):NamedFragment.Class;\n\tgetFragments():Fragment.Class[];\n\n\tcreateFragment<T extends Object>( slug:string, object:T ):NamedFragment.Class & T;\n\tcreateFragment<T extends Object>( object:T ):Fragment.Class & T;\n\tcreateFragment():Fragment.Class;\n\tcreateFragment( slug:string ):NamedFragment.Class;\n\n\tcreateNamedFragment<T extends Object>( slug:string, object:T ):NamedFragment.Class & T;\n\tcreateNamedFragment( slug:string ):NamedFragment.Class;\n\n\tremoveFragment( fragment:NamedFragment.Class ):void;\n\tremoveFragment( fragment:Fragment.Class ):void;\n\tremoveFragment( slug:string ):void;\n\tremoveFragment( fragmentOrSlug:any ):void;\n\n\ttoJSON( objectSchemaResolver:ObjectSchema.Resolver, jsonldConverter:JSONLDConverter ):string;\n\ttoJSON( objectSchemaResolver:ObjectSchema.Resolver ):string;\n\ttoJSON():string;\n}\n\nfunction hasPointer( id:string ):boolean {\n\tlet document:Class = <Class> this;\n\n\tif( id === document.id ) return true;\n\n\tif( ! document.inScope( id ) ) return false;\n\n\treturn document.hasFragment( id );\n}\n\nfunction getPointer( id:string ):Pointer.Class {\n\tlet document:Class = <Class> this;\n\n\tif( ! document.inScope( id ) ) return null;\n\n\tif( id === document.id ) return document;\n\n\tlet fragment:Fragment.Class = document.getFragment( id );\n\tfragment = ! fragment ? document.createFragment( id ) : fragment;\n\n\treturn fragment;\n}\n\nfunction inScope( pointer:Pointer.Class ):boolean;\nfunction inScope( id:string ):boolean;\nfunction inScope( idOrPointer:any ):boolean {\n\tlet document:Class = <Class> this;\n\n\tlet id:string = Pointer.Factory.is( idOrPointer ) ? idOrPointer.id : idOrPointer;\n\n\tif( id === document.id ) return true;\n\n\tif( RDF.URI.Util.isBNodeID( id ) ) return true;\n\n\tif( RDF.URI.Util.isFragmentOf( id, document.id ) ) return true;\n\n\treturn RDF.URI.Util.isRelative( id );\n}\n\nfunction hasFragment( id:string ):boolean {\n\tlet document:Class = <Class> this;\n\n\tif( RDF.URI.Util.isAbsolute( id ) ) {\n\t\tif( ! RDF.URI.Util.isFragmentOf( id, document.id ) ) return false;\n\t\tid = RDF.URI.Util.hasFragment( id ) ? RDF.URI.Util.getFragment( id ) : id;\n\t} else if( Utils.S.startsWith( id, \"#\" ) ) id = id.substring( 1 );\n\n\treturn document._fragmentsIndex.has( id );\n}\nfunction getFragment( id:string ):Fragment.Class {\n\tlet document:Class = <Class> this;\n\n\tif( ! RDF.URI.Util.isBNodeID( id ) ) return document.getNamedFragment( id );\n\n\treturn document._fragmentsIndex.get( id ) || null;\n}\nfunction getNamedFragment( id:string ):NamedFragment.Class {\n\tlet document:Class = <Class> this;\n\n\tif( RDF.URI.Util.isBNodeID( id ) ) throw new Errors.IllegalArgumentError( \"Named fragments can't have a id that starts with '_:'.\" );\n\tif( RDF.URI.Util.isAbsolute( id ) ) {\n\t\tif( ! RDF.URI.Util.isFragmentOf( id, document.id ) ) throw new Errors.IllegalArgumentError( \"The id is out of scope.\" );\n\t\tid = RDF.URI.Util.hasFragment( id ) ? RDF.URI.Util.getFragment( id ) : id;\n\t} else if( Utils.S.startsWith( id, \"#\" ) ) id = id.substring( 1 );\n\n\treturn <NamedFragment.Class> document._fragmentsIndex.get( id ) || null;\n}\nfunction getFragments():Fragment.Class[] {\n\tlet document:Class = <Class> this;\n\treturn Utils.A.from( document._fragmentsIndex.values() );\n}\n\nfunction createFragment<T extends Object>( slug:string, object:T ):NamedFragment.Class & T;\nfunction createFragment<T extends Object>( object:T ):Fragment.Class & T;\nfunction createFragment( slug:string ):NamedFragment.Class;\nfunction createFragment():Fragment.Class;\nfunction createFragment( slugOrObject?:any, object?:any ):any {\n\tlet document:Class = <Class> this;\n\tlet slug:string = Utils.isString( slugOrObject ) ? slugOrObject : null;\n\tobject = Utils.isString( slugOrObject ) ? object : slugOrObject;\n\tobject = object || {};\n\n\tif( slug ) {\n\t\tif( ! RDF.URI.Util.isBNodeID( slug ) ) return document.createNamedFragment( slug, object );\n\t\tif( this._fragmentsIndex.has( slug ) ) throw new Errors.IDAlreadyInUseError( \"The slug provided is already being used by a fragment.\" );\n\t}\n\n\tlet fragment:BlankNode.Class = BlankNode.Factory.createFrom( object, document, slug );\n\tdocument._fragmentsIndex.set( fragment.id, fragment );\n\n\tconvertNestedObjects( document, fragment );\n\treturn fragment;\n}\n\nfunction createNamedFragment<T extends Object>( slug:string, object:T ):NamedFragment.Class & T;\nfunction createNamedFragment( slug:string ):NamedFragment.Class;\nfunction createNamedFragment( slug:string, object?:any ):any {\n\tlet document:Class = <Class> this;\n\tobject = object || {};\n\n\tif( RDF.URI.Util.isBNodeID( slug ) ) throw new Errors.IllegalArgumentError( \"Named fragments can't have a slug that starts with '_:'.\" );\n\n\tif( RDF.URI.Util.isAbsolute( slug ) ) {\n\t\tif( ! RDF.URI.Util.isFragmentOf( slug, document.id ) ) throw new Errors.IllegalArgumentError( \"The slug is out of scope.\" );\n\t\tslug = RDF.URI.Util.hasFragment( slug ) ? RDF.URI.Util.getFragment( slug ) : slug;\n\t} else if( Utils.S.startsWith( slug, \"#\" ) ) slug = slug.substring( 1 );\n\n\tif( document._fragmentsIndex.has( slug ) ) throw new Errors.IDAlreadyInUseError( \"The slug provided is already being used by a fragment.\" );\n\n\tlet fragment:NamedFragment.Class = <NamedFragment.Class> NamedFragment.Factory.createFrom( object, slug, document );\n\tdocument._fragmentsIndex.set( slug, fragment );\n\n\tconvertNestedObjects( document, fragment );\n\treturn fragment;\n}\n\nfunction removeFragment( fragment:NamedFragment.Class ):void;\nfunction removeFragment( fragment:Fragment.Class ):void;\nfunction removeFragment( slug:string ):void;\nfunction removeFragment( fragmentOrSlug:any ):void {\n\tlet document:Class = <Class> this;\n\n\tlet id:string = Utils.isString( fragmentOrSlug ) ? fragmentOrSlug : <Fragment.Class> fragmentOrSlug.id;\n\n\tif( RDF.URI.Util.isAbsolute( id ) ) {\n\t\tif( ! RDF.URI.Util.isFragmentOf( id, document.id ) ) return;\n\t\tid = RDF.URI.Util.hasFragment( id ) ? RDF.URI.Util.getFragment( id ) : id;\n\t} else if( Utils.S.startsWith( id, \"#\" ) ) id = id.substring( 1 );\n\n\tdocument._fragmentsIndex.delete( id );\n}\n\nfunction toJSON( objectSchemaResolver:ObjectSchema.Resolver, jsonLDConverter:JSONLDConverter ):string;\nfunction toJSON( objectSchemaResolver:ObjectSchema.Resolver ):string;\nfunction toJSON():string;\nfunction toJSON( objectSchemaResolver:ObjectSchema.Resolver = null, jsonldConverter:JSONLDConverter = null ):string {\n\tjsonldConverter = ! ! jsonldConverter ? jsonldConverter : new JSONLDConverter();\n\n\tlet resources:{ toJSON:() => string }[] = [];\n\tresources.push( this );\n\tresources = resources.concat( this.getFragments() );\n\n\tlet expandedResources:RDF.Node.Class[] = [];\n\tfor( let resource of resources ) {\n\t\tlet digestedContext:ObjectSchema.DigestedObjectSchema = objectSchemaResolver ? objectSchemaResolver.getSchemaFor( resource ) : new ObjectSchema.DigestedObjectSchema();\n\n\t\texpandedResources.push( jsonldConverter.expand( resource, digestedContext ) );\n\t}\n\n\tlet graph:RDF.Document.Class = {\n\t\t\"@id\": this.id,\n\t\t\"@graph\": expandedResources,\n\t};\n\n\treturn JSON.stringify( graph );\n}\n\nexport class Factory {\n\tstatic hasClassProperties( documentResource:Object ):boolean {\n\t\treturn (\n\t\t\tUtils.isObject( documentResource ) &&\n\n\t\t\tUtils.hasPropertyDefined( documentResource, \"_fragmentsIndex\" ) &&\n\n\t\t\tUtils.hasFunction( documentResource, \"hasFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"getFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"getNamedFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"getFragments\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"createFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"createNamedFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"removeFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"toJSON\" )\n\t\t);\n\t}\n\n\tstatic is( object:Object ):boolean {\n\t\treturn (\n\t\t\tResource.Factory.is( object ) &&\n\t\t\tFactory.hasClassProperties( object )\n\t\t);\n\t}\n\n\tstatic create():Class {\n\t\treturn Factory.createFrom( {} );\n\t}\n\n\tstatic createFrom<T extends Object>( object:T ):T & Class {\n\t\tif( Factory.is( object ) ) throw new Errors.IllegalArgumentError( \"The object passed is already a Document\" );\n\n\t\tlet resource:Resource.Class = <any> object;\n\t\tif( ! Resource.Factory.is( object ) ) resource = Resource.Factory.createFrom( object );\n\n\t\tlet document:T & Class = Factory.decorate<T>( <any> resource );\n\t\tconvertNestedObjects( document, document );\n\n\t\treturn document;\n\t}\n\n\tstatic decorate<T extends Object>( object:T ):T & Class {\n\t\tif( Factory.hasClassProperties( object ) ) return <any> object;\n\n\t\tObject.defineProperties( object, {\n\t\t\t\"_fragmentsIndex\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: new Map<string, Fragment.Class>(),\n\t\t\t},\n\t\t\t\"hasPointer\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: hasPointer,\n\t\t\t},\n\t\t\t\"getPointer\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getPointer,\n\t\t\t},\n\t\t\t\"inScope\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: inScope,\n\t\t\t},\n\t\t\t\"hasFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: hasFragment,\n\t\t\t},\n\t\t\t\"getFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getFragment,\n\t\t\t},\n\t\t\t\"getNamedFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getNamedFragment,\n\t\t\t},\n\t\t\t\"getFragments\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getFragments,\n\t\t\t},\n\t\t\t\"createFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: createFragment,\n\t\t\t},\n\t\t\t\"createNamedFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: createNamedFragment,\n\t\t\t},\n\t\t\t\"removeFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: removeFragment,\n\t\t\t},\n\t\t\t\"toJSON\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: toJSON,\n\t\t\t},\n\t\t} );\n\n\t\treturn <any> object;\n\t}\n}\n\nfunction convertNestedObjects( parent:Class, actual:any ):void {\n\tlet next:any;\n\tlet idOrSlug:string;\n\tlet fragment:Fragment.Class;\n\n\tlet keys:string[] = Object.keys( actual );\n\tfor( let key of keys ) {\n\t\tnext = actual[ key ];\n\n\t\tif( Utils.isArray( next ) ) {\n\t\t\tconvertNestedObjects( parent, next );\n\t\t\tcontinue;\n\t\t}\n\n\t\tif( ! Utils.isPlainObject( next ) || Pointer.Factory.is( next ) ) continue;\n\n\t\tidOrSlug = ( \"id\" in next ) ? next.id : ( ( \"slug\" in next ) ? next.slug : \"\" );\n\t\tif( ! parent.inScope( idOrSlug ) ) continue;\n\n\t\tlet parentFragment:Fragment.Class = parent.getFragment( idOrSlug );\n\n\t\tif( ! parentFragment ) {\n\t\t\tfragment = parent.createFragment( idOrSlug, next );\n\t\t\tconvertNestedObjects( parent, fragment );\n\n\t\t} else if( parentFragment !== next ) {\n\t\t\tObject.assign( parentFragment, next );\n\t\t\tfragment = actual[ key ] = parentFragment;\n\t\t\tconvertNestedObjects( parent, fragment );\n\t\t}\n\n\t}\n\n}\n\nexport default Class;\n"],"sourceRoot":"/source/"}