{"version":3,"sources":["Document.ts"],"names":[],"mappings":"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","file":"Document.js","sourcesContent":["import * as Errors from \"./Errors\";\nimport * as Fragment from \"./Fragment\";\nimport JSONLDConverter from \"./JSONLDConverter\";\nimport * as NamedFragment from \"./NamedFragment\";\nimport * as ObjectSchema from \"./ObjectSchema\";\nimport * as Pointer from \"./Pointer\";\nimport * as RDF from \"./RDF\";\nimport * as Resource from \"./Resource\";\nimport * as Utils from \"./Utils\";\n\nexport interface Class extends Resource.Class, Pointer.Library, Pointer.Validator {\n\t_fragmentsIndex:Map<string, Fragment.Class>;\n\n\thasFragment( slug:string ):boolean;\n\tgetFragment( slug:string ):Fragment.Class;\n\tgetNamedFragment( slug:string ):NamedFragment.Class;\n\tgetFragments():Fragment.Class[];\n\n\tcreateFragment():Fragment.Class;\n\tcreateFragment( slug:string ):NamedFragment.Class;\n\tcreateNamedFragment( slug:string ):NamedFragment.Class;\n\n\tremoveFragment( fragment:NamedFragment.Class ):void;\n\tremoveFragment( fragment:Fragment.Class ):void;\n\tremoveFragment( slug:string ):void;\n\tremoveFragment( fragmentOrSlug:any ):void;\n\n\ttoJSON( objectSchemaResolver:ObjectSchema.Resolver, jsonldConverter:JSONLDConverter ):string;\n\ttoJSON( objectSchemaResolver:ObjectSchema.Resolver ):string;\n\ttoJSON():string;\n}\n\nfunction hasPointer( id:string ):boolean {\n\tlet document:Class = <Class> this;\n\n\tif( id === document.id ) return true;\n\n\tif( ! document.inScope( id ) ) return false;\n\n\treturn document.hasFragment( id );\n}\n\nfunction getPointer( id:string ):Pointer.Class {\n\tlet document:Class = <Class> this;\n\n\tif( ! document.inScope( id ) ) return null;\n\n\tif( id === document.id ) return document;\n\n\tlet fragment:Fragment.Class = document.getFragment( id );\n\tfragment = ! fragment ? document.createFragment( id ) : fragment;\n\n\treturn fragment;\n}\n\nfunction inScope( pointer:Pointer.Class ):boolean;\nfunction inScope( id:string ):boolean;\nfunction inScope( idOrPointer:any ):boolean {\n\tlet document:Class = <Class> this;\n\n\tlet id:string = Pointer.Factory.is( idOrPointer ) ? idOrPointer.id : idOrPointer;\n\n\tif( id === document.id ) return true;\n\n\tif( RDF.URI.Util.isBNodeID( id ) ) return true;\n\n\tif( RDF.URI.Util.isFragmentOf( id, document.id ) ) return true;\n\n\treturn RDF.URI.Util.isRelative( id );\n}\n\nfunction hasFragment( id:string ):boolean {\n\tlet document:Class = <Class> this;\n\n\tif( RDF.URI.Util.isAbsolute( id ) ) {\n\t\tif( ! RDF.URI.Util.isFragmentOf( id, document.id ) ) return false;\n\t\tid = RDF.URI.Util.hasFragment( id ) ? RDF.URI.Util.getFragment( id ) : id;\n\t} else if( Utils.S.startsWith( id, \"#\" ) ) id = id.substring( 1 );\n\n\treturn document._fragmentsIndex.has( id );\n}\nfunction getFragment( id:string ):Fragment.Class {\n\tlet document:Class = <Class> this;\n\n\tif( ! RDF.URI.Util.isBNodeID( id ) ) return document.getNamedFragment( id );\n\n\treturn document._fragmentsIndex.get( id ) || null;\n}\nfunction getNamedFragment( id:string ):NamedFragment.Class {\n\tlet document:Class = <Class> this;\n\n\tif( RDF.URI.Util.isBNodeID( id ) ) throw new Errors.IllegalArgumentError( \"Named fragments can't have a id that starts with '_:'.\" );\n\tif( RDF.URI.Util.isAbsolute( id ) ) {\n\t\tif( ! RDF.URI.Util.isFragmentOf( id, document.id ) ) throw new Errors.IllegalArgumentError( \"The id is out of scope.\" );\n\t\tid = RDF.URI.Util.hasFragment( id ) ? RDF.URI.Util.getFragment( id ) : id;\n\t} else if( Utils.S.startsWith( id, \"#\" ) ) id = id.substring( 1 );\n\n\treturn <NamedFragment.Class> document._fragmentsIndex.get( id ) || null;\n}\nfunction getFragments():Fragment.Class[] {\n\tlet document:Class = <Class> this;\n\treturn Utils.A.from( document._fragmentsIndex.values() );\n}\n\nfunction createFragment( slug:string ):NamedFragment.Class;\nfunction createFragment( slug?:string ):Fragment.Class;\nfunction createFragment( slug:any = null ):any {\n\tlet document:Class = <Class> this;\n\n\tlet id:string;\n\tif( slug ) {\n\t\tif( ! RDF.URI.Util.isBNodeID( slug ) ) return document.createNamedFragment( slug );\n\t\tid = slug;\n\t\tif( this._fragmentsIndex.has( id ) ) throw new Errors.IDAlreadyInUseError( \"The slug provided is already being used by a fragment.\" );\n\t} else {\n\t\tid = Fragment.Util.generateID();\n\t}\n\n\tlet fragment:Fragment.Class = Fragment.Factory.create( id, document );\n\n\tdocument._fragmentsIndex.set( id, fragment );\n\n\treturn fragment;\n}\nfunction createNamedFragment( slug:string ):NamedFragment.Class {\n\tlet document:Class = <Class> this;\n\n\tif( RDF.URI.Util.isBNodeID( slug ) ) throw new Errors.IllegalArgumentError( \"Named fragments can't have a slug that starts with '_:'.\" );\n\n\tif( RDF.URI.Util.isAbsolute( slug ) ) {\n\t\tif( ! RDF.URI.Util.isFragmentOf( slug, document.id ) ) throw new Errors.IllegalArgumentError( \"The slug is out of scope.\" );\n\t\tslug = RDF.URI.Util.hasFragment( slug ) ? RDF.URI.Util.getFragment( slug ) : slug;\n\t} else if( Utils.S.startsWith( slug, \"#\" ) ) slug = slug.substring( 1 );\n\n\tif( document._fragmentsIndex.has( slug ) ) throw new Errors.IDAlreadyInUseError( \"The slug provided is already being used by a fragment.\" );\n\n\tlet fragment:NamedFragment.Class = <NamedFragment.Class> NamedFragment.Factory.create( slug, document );\n\n\tdocument._fragmentsIndex.set( slug, fragment );\n\n\treturn fragment;\n}\n\nfunction removeFragment( fragment:NamedFragment.Class ):void;\nfunction removeFragment( fragment:Fragment.Class ):void;\nfunction removeFragment( slug:string ):void;\nfunction removeFragment( fragmentOrSlug:any ):void {\n\tlet document:Class = <Class> this;\n\n\tlet id:string = Utils.isString( fragmentOrSlug ) ? fragmentOrSlug : <Fragment.Class> fragmentOrSlug.id;\n\n\tif( RDF.URI.Util.isAbsolute( id ) ) {\n\t\tif( ! RDF.URI.Util.isFragmentOf( id, document.id ) ) return;\n\t\tid = RDF.URI.Util.hasFragment( id ) ? RDF.URI.Util.getFragment( id ) : id;\n\t} else if( Utils.S.startsWith( id, \"#\" ) ) id = id.substring( 1 );\n\n\tdocument._fragmentsIndex.delete( id );\n}\n\nfunction toJSON( objectSchemaResolver:ObjectSchema.Resolver, jsonLDConverter:JSONLDConverter ):string;\nfunction toJSON( objectSchemaResolver:ObjectSchema.Resolver ):string;\nfunction toJSON():string;\nfunction toJSON( objectSchemaResolver:ObjectSchema.Resolver = null, jsonldConverter:JSONLDConverter = null ):string {\n\tjsonldConverter = !! jsonldConverter ? jsonldConverter : new JSONLDConverter();\n\n\tlet resources:{ toJSON:() => string }[] = [];\n\tresources.push( this );\n\tresources = resources.concat( this.getFragments() );\n\n\tlet expandedResources:RDF.Node.Class[] = [];\n\tfor( let resource of resources ) {\n\t\tlet digestedContext:ObjectSchema.DigestedObjectSchema = objectSchemaResolver ? objectSchemaResolver.getSchemaFor( resource ) : new ObjectSchema.DigestedObjectSchema();\n\n\t\texpandedResources.push( jsonldConverter.expand( resource, digestedContext, this ) );\n\t}\n\n\tlet graph:RDF.Document.Class = {\n\t\t\"@id\": this.id,\n\t\t\"@graph\": expandedResources,\n\t};\n\n\treturn JSON.stringify( graph );\n}\n\nexport class Factory {\n\tstatic hasClassProperties( documentResource:Object ):boolean {\n\t\treturn (\n\t\t\tUtils.isObject( documentResource ) &&\n\n\t\t\tUtils.hasPropertyDefined( documentResource, \"_fragmentsIndex\" ) &&\n\n\t\t\tUtils.hasFunction( documentResource, \"hasFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"getFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"getNamedFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"getFragments\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"createFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"createNamedFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"removeFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"toJSON\" )\n\t\t);\n\t}\n\n\tstatic create( uri:string ):Class;\n\tstatic create():Class;\n\tstatic create( uri:string = null ):Class {\n\t\treturn Factory.createFrom( {}, uri );\n\t}\n\n\tstatic createFrom<T extends Object>( object:T, uri:string ):T & Class;\n\tstatic createFrom<T extends Object>( object:T ):T & Class;\n\tstatic createFrom<T extends Object>( object:T, uri:string = null ):T & Class {\n\t\tif( !! uri && RDF.URI.Util.isBNodeID( uri ) ) throw new Errors.IllegalArgumentError( \"Documents cannot have a BNodeID as a uri.\" );\n\n\t\tlet resource:Resource.Class = Resource.Factory.createFrom( object, uri );\n\n\t\tlet document:Class = Factory.decorate( resource );\n\n\t\treturn <any> document;\n\t}\n\n\tstatic decorate<T extends Object>( object:T ):T & Class {\n\t\tif( Factory.hasClassProperties( object ) ) return <any> object;\n\n\t\tObject.defineProperties( object, {\n\t\t\t\"_fragmentsIndex\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: new Map<string, Fragment.Class>(),\n\t\t\t},\n\t\t\t\"hasPointer\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: hasPointer,\n\t\t\t},\n\t\t\t\"getPointer\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getPointer,\n\t\t\t},\n\t\t\t\"inScope\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: inScope,\n\t\t\t},\n\t\t\t\"hasFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: hasFragment,\n\t\t\t},\n\t\t\t\"getFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getFragment,\n\t\t\t},\n\t\t\t\"getNamedFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getNamedFragment,\n\t\t\t},\n\t\t\t\"getFragments\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getFragments,\n\t\t\t},\n\t\t\t\"createFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: createFragment,\n\t\t\t},\n\t\t\t\"createNamedFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: createNamedFragment,\n\t\t\t},\n\t\t\t\"removeFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: removeFragment,\n\t\t\t},\n\t\t\t\"toJSON\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: toJSON,\n\t\t\t},\n\t\t} );\n\n\t\treturn <any> object;\n\t}\n}\n\nexport default Document;\n"],"sourceRoot":"/source/"}