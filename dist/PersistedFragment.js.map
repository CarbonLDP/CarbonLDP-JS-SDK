{"version":3,"sources":["PersistedFragment.ts"],"names":[],"mappings":";;AACA,6CAA+C;AAE/C,uDAAyD;AACzD,2BAA6B;AAO7B,oBAAqB,GAAU;IAC9B,EAAE,CAAA,CAAE,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAE,GAAG,CAAG,CAAC;QAAC,MAAM,CAAC,GAAG,CAAC;IAEhD,IAAI,MAAM,GAA8C,IAAK,CAAC,QAAQ,CAAC,UAAU,CAAC,gBAAgB,EAAE,CAAC;IACrG,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAE,GAAG,EAAE,MAAM,CAAE,CAAC;AACpD,CAAC;AAED,uBAAwB,aAAqC;IAC5D,MAAM,CAAC,UAAU,IAAW;QAC3B,IAAI,GAAG,UAAU,CAAC,IAAI,CAAE,IAAI,EAAE,IAAI,CAAE,CAAC;QACrC,aAAa,CAAC,IAAI,CAAE,IAAI,EAAE,IAAI,CAAE,CAAC;IAClC,CAAC,CAAC;AACH,CAAC;AAED,uBAAwB,aAAwC;IAC/D,MAAM,CAAC,UAAU,IAAW;QAC3B,IAAI,GAAG,UAAU,CAAC,IAAI,CAAE,IAAI,EAAE,IAAI,CAAE,CAAC;QACrC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAE,IAAI,EAAE,IAAI,CAAE,CAAC;IACzC,CAAC,CAAC;AACH,CAAC;AAED,0BAA2B,aAAqC;IAC/D,MAAM,CAAC,UAAU,IAAW;QAC3B,IAAI,GAAG,UAAU,CAAC,IAAI,CAAE,IAAI,EAAE,IAAI,CAAE,CAAC;QACrC,aAAa,CAAC,IAAI,CAAE,IAAI,EAAE,IAAI,CAAE,CAAC;IAClC,CAAC,CAAC;AACH,CAAC;AAED;IAAA;IA4BA,CAAC;IA1BO,gBAAQ,GAAf,UAA2C,QAAU,EAAE,QAAoB;QAApB,yBAAA,EAAA,aAAoB;QAC1E,iBAAiB,CAAC,OAAO,CAAC,QAAQ,CAAE,QAAQ,EAAE,QAAQ,CAAE,CAAC;QAEzD,MAAM,CAAC,gBAAgB,CAAE,QAAQ,EAAE;YAClC,SAAS,EAAE;gBACV,QAAQ,EAAE,KAAK;gBACf,UAAU,EAAE,KAAK;gBACjB,YAAY,EAAE,IAAI;gBAClB,KAAK,EAAE,aAAa,CAAE,QAAQ,CAAC,OAAO,CAAE;aACxC;YACD,SAAS,EAAE;gBACV,QAAQ,EAAE,KAAK;gBACf,UAAU,EAAE,KAAK;gBACjB,YAAY,EAAE,IAAI;gBAClB,KAAK,EAAE,aAAa,CAAE,QAAQ,CAAC,OAAO,CAAE;aACxC;YACD,YAAY,EAAE;gBACb,QAAQ,EAAE,KAAK;gBACf,UAAU,EAAE,KAAK;gBACjB,YAAY,EAAE,IAAI;gBAClB,KAAK,EAAE,gBAAgB,CAAE,QAAQ,CAAC,UAAU,CAAE;aAC9C;SACD,CAAE,CAAC;QAEJ,MAAM,CAAO,QAAQ,CAAC;IACvB,CAAC;IACF,cAAC;AAAD,CA5BA,AA4BC,IAAA;AA5BY,0BAAO","file":"PersistedFragment.js","sourcesContent":["import * as Fragment from \"./Fragment\";\nimport * as ObjectSchema from \"./ObjectSchema\";\nimport * as PersistedDocument from \"./PersistedDocument\";\nimport * as PersistedResource from \"./PersistedResource\";\nimport * as RDF from \"./RDF\";\nimport { isObject } from \"./Utils\";\n\nexport interface Class extends PersistedResource.Class, Fragment.Class {\n\tdocument:PersistedDocument.Class;\n}\n\nfunction resolveURI( uri:string ):string {\n\tif( RDF.URI.Util.isAbsolute( uri ) ) return uri;\n\n\tlet schema:ObjectSchema.DigestedObjectSchema = (<Class> this).document._documents.getGeneralSchema();\n\treturn ObjectSchema.Util.resolveURI( uri, schema );\n}\n\nfunction extendAddType( superFunction:( type:string ) => void ):( type:string ) => void {\n\treturn function( type:string ):void {\n\t\ttype = resolveURI.call( this, type );\n\t\tsuperFunction.call( this, type );\n\t};\n}\n\nfunction extendHasType( superFunction:( type:string ) => boolean ):( type:string ) => boolean {\n\treturn function( type:string ):boolean {\n\t\ttype = resolveURI.call( this, type );\n\t\treturn superFunction.call( this, type );\n\t};\n}\n\nfunction extendRemoveType( superFunction:( type:string ) => void ):( type:string ) => void {\n\treturn function( type:string ):void {\n\t\ttype = resolveURI.call( this, type );\n\t\tsuperFunction.call( this, type );\n\t};\n}\n\nexport class Factory {\n\n\tstatic decorate<T extends Fragment.Class>( fragment:T, snapshot:Object = {} ):T & Class {\n\t\tPersistedResource.Factory.decorate( fragment, snapshot );\n\n\t\tObject.defineProperties( fragment, {\n\t\t\t\"addType\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: extendAddType( fragment.addType ),\n\t\t\t},\n\t\t\t\"hasType\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: extendHasType( fragment.hasType ),\n\t\t\t},\n\t\t\t\"removeType\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: extendRemoveType( fragment.removeType ),\n\t\t\t},\n\t\t} );\n\n\t\treturn <any> fragment;\n\t}\n}\n\nexport default Class;\n"]}