{"version":3,"sources":["ObjectSchema.ts"],"names":[],"mappings":"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","file":"ObjectSchema.js","sourcesContent":["import * as Errors from \"./Errors\";\nimport * as NS from \"./NS\";\nimport * as RDF from \"./RDF\";\nimport * as Utils from \"./Utils\";\n\nexport interface PropertyDefinition {\n\t\"@id\"?:string;\n\t\"@type\"?:string;\n\t\"@language\"?:string;\n\t\"@container\"?:string;\n}\n\nexport interface Class {\n\t\"@base\"?:string;\n\t\"@vocab\"?:string;\n\t\"@index\"?:Object;\n\t\"@language\"?:string;\n\t\"@reverse\"?:Object;\n\n\t[ name:string ]:(string | PropertyDefinition);\n}\n\nexport enum ContainerType {\n\tSET,\n\tLIST,\n\tLANGUAGE,\n}\n\nexport enum PointerType {\n\tID,\n\tVOCAB,\n}\n\nexport class DigestedObjectSchema {\n\tbase:string;\n\tlanguage:string;\n\tvocab:string;\n\tprefixes:Map<string, RDF.URI.Class>;\n\tproperties:Map<string, DigestedPropertyDefinition>;\n\tprefixedURIs:Map<string, RDF.URI.Class[]>;\n\n\tconstructor() {\n\t\tthis.base = \"\";\n\t\tthis.vocab = null;\n\t\tthis.language = null;\n\t\tthis.prefixes = new Map<string, RDF.URI.Class>();\n\t\tthis.properties = new Map<string, DigestedPropertyDefinition>();\n\t\tthis.prefixedURIs = new Map<string, RDF.URI.Class[]>();\n\t}\n}\n\nexport class DigestedPropertyDefinition {\n\turi:RDF.URI.Class = null;\n\tliteral:boolean = null;\n\tliteralType:RDF.URI.Class = null;\n\tpointerType:PointerType = null;\n\tlanguage:string;\n\tcontainerType:ContainerType = null;\n}\n\nexport interface Resolver {\n\tgetGeneralSchema():DigestedObjectSchema;\n\n\tgetSchemaFor( object:Object, path?:string ):DigestedObjectSchema;\n}\n\nexport class Digester {\n\tstatic digestSchema( schemas:Class[], vocab?:string ):DigestedObjectSchema;\n\tstatic digestSchema( schema:Class, vocab?:string ):DigestedObjectSchema;\n\tstatic digestSchema( schemaOrSchemas:any, vocab?:string ):DigestedObjectSchema {\n\t\tschemaOrSchemas = Utils.isArray( schemaOrSchemas ) ? schemaOrSchemas : [ schemaOrSchemas ];\n\n\t\tlet digestedSchemas:DigestedObjectSchema[] = [];\n\t\tfor( let schema of <Class[]> schemaOrSchemas ) {\n\t\t\tdigestedSchemas.push( Digester.digestSingleSchema( schema, vocab ) );\n\t\t}\n\n\t\treturn Digester.combineDigestedObjectSchemas( digestedSchemas );\n\t}\n\n\tstatic combineDigestedObjectSchemas( digestedSchemas:DigestedObjectSchema[] ):DigestedObjectSchema {\n\t\tif( digestedSchemas.length === 0 ) throw new Errors.IllegalArgumentError( \"At least one DigestedObjectSchema needs to be specified.\" );\n\n\t\tlet combinedSchema:DigestedObjectSchema = new DigestedObjectSchema();\n\t\tcombinedSchema.vocab = digestedSchemas[ 0 ].vocab;\n\t\tcombinedSchema.base = digestedSchemas[ 0 ].base;\n\t\tcombinedSchema.language = digestedSchemas[ 0 ].language;\n\n\t\tfor( let digestedSchema of digestedSchemas ) {\n\t\t\tUtils.M.extend( combinedSchema.prefixes, digestedSchema.prefixes );\n\t\t\tUtils.M.extend( combinedSchema.prefixedURIs, digestedSchema.prefixedURIs );\n\t\t\tUtils.M.extend( combinedSchema.properties, digestedSchema.properties );\n\t\t}\n\n\t\tDigester.resolvePrefixedURIs( combinedSchema );\n\n\t\treturn combinedSchema;\n\t}\n\n\tstatic digestPropertyDefinition( digestedSchema:DigestedObjectSchema, propertyName:string, propertyDefinition:PropertyDefinition, vocab?:string ):DigestedPropertyDefinition {\n\t\tconst digestedDefinition:DigestedPropertyDefinition = new DigestedPropertyDefinition();\n\n\t\tif( \"@id\" in propertyDefinition ) {\n\t\t\tif( RDF.URI.Util.isPrefixed( propertyName ) ) throw new Errors.IllegalArgumentError( \"A prefixed property cannot have assigned another URI.\" );\n\t\t\tif( ! Utils.isString( propertyDefinition[ \"@id\" ] ) ) throw new Errors.IllegalArgumentError( \"@id needs to point to a string\" );\n\t\t}\n\t\tdigestedDefinition.uri = new RDF.URI.Class( propertyDefinition[ \"@id\" ] || propertyName );\n\t\tDigester._resolveURI( digestedDefinition.uri, digestedSchema, vocab );\n\n\t\tif( \"@type\" in propertyDefinition ) {\n\t\t\tif( ! Utils.isString( propertyDefinition[ \"@type\" ] ) ) throw new Errors.IllegalArgumentError( \"@type needs to point to a string\" );\n\n\t\t\tif( propertyDefinition[ \"@type\" ] === \"@id\" || propertyDefinition[ \"@type\" ] === \"@vocab\" ) {\n\t\t\t\tdigestedDefinition.literal = false;\n\t\t\t\tdigestedDefinition.pointerType = ( propertyDefinition[ \"@type\" ] === \"@id\" ) ? PointerType.ID : PointerType.VOCAB;\n\t\t\t} else {\n\t\t\t\tdigestedDefinition.literal = true;\n\n\t\t\t\tlet type:RDF.URI.Class = Digester._resolvePrefixedURI( new RDF.URI.Class( propertyDefinition[ \"@type\" ] ), digestedSchema );\n\t\t\t\tif( RDF.URI.Util.isRelative( type.stringValue ) && type.stringValue in NS.XSD.DataType ) type.stringValue = NS.XSD.DataType[ type.stringValue ];\n\n\t\t\t\tdigestedDefinition.literalType = type;\n\t\t\t}\n\t\t}\n\n\t\tif( \"@language\" in propertyDefinition ) {\n\t\t\tlet language:string = propertyDefinition[ \"@language\" ];\n\t\t\tif( language !== null && ! Utils.isString( language ) ) throw new Errors.IllegalArgumentError( \"@language needs to point to a string or null.\" );\n\t\t\tdigestedDefinition.language = language;\n\t\t}\n\n\t\tif( \"@container\" in propertyDefinition ) {\n\t\t\tswitch( propertyDefinition[ \"@container\" ] ) {\n\t\t\t\tcase \"@set\":\n\t\t\t\t\tdigestedDefinition.containerType = ContainerType.SET;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"@list\":\n\t\t\t\t\tdigestedDefinition.containerType = ContainerType.LIST;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"@language\":\n\t\t\t\t\tif( Utils.isString( digestedDefinition.language ) ) throw new Errors.IllegalArgumentError( \"@container cannot be set to @language when the property definition already contains an @language tag.\" );\n\t\t\t\t\tdigestedDefinition.containerType = ContainerType.LANGUAGE;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Errors.IllegalArgumentError( \"@container needs to be equal to '@list', '@set', or '@language'\" );\n\t\t\t}\n\t\t}\n\n\t\treturn digestedDefinition;\n\t}\n\n\tpublic static resolvePrefixedURI( uri:string, digestedSchema:DigestedObjectSchema ):string {\n\t\tif( uri === null ) return null;\n\t\tif( ! RDF.URI.Util.isPrefixed( uri ) ) return uri;\n\n\t\tlet [ prefix, slug ]:[ string, string ] = <[ string, string ]> uri.split( \":\" );\n\n\t\tif( digestedSchema.prefixes.has( prefix ) ) {\n\t\t\turi = digestedSchema.prefixes.get( prefix ) + slug;\n\t\t}\n\n\t\treturn uri;\n\t}\n\n\tprivate static _resolveURI( uri:RDF.URI.Class, digestedSchema:DigestedObjectSchema, vocab?:string ):RDF.URI.Class {\n\t\turi.stringValue = Util.resolveURI( uri.stringValue, digestedSchema, vocab );\n\t\tif( RDF.URI.Util.isPrefixed( uri.stringValue ) ) {\n\t\t\tconst [ prefix ]:string[] = uri.stringValue.split( \":\" );\n\t\t\tif( ! digestedSchema.prefixedURIs.has( prefix ) ) digestedSchema.prefixedURIs.set( prefix, [] );\n\t\t\tdigestedSchema.prefixedURIs.get( prefix ).push( uri );\n\t\t}\n\n\t\treturn uri;\n\t}\n\n\tprivate static _resolvePrefixedURI( uri:RDF.URI.Class, digestedSchema:DigestedObjectSchema ):RDF.URI.Class {\n\t\tif( uri.stringValue === null || ! RDF.URI.Util.isPrefixed( uri.stringValue ) ) return uri;\n\n\t\tlet [ prefix, slug ]:[ string, string ] = <[ string, string ]> uri.stringValue.split( \":\" );\n\n\t\tif( digestedSchema.prefixes.has( prefix ) ) {\n\t\t\turi.stringValue = digestedSchema.prefixes.get( prefix ) + slug;\n\t\t} else {\n\t\t\tif( ! digestedSchema.prefixedURIs.has( prefix ) ) digestedSchema.prefixedURIs.set( prefix, [] );\n\t\t\tdigestedSchema.prefixedURIs.get( prefix ).push( uri );\n\t\t}\n\n\t\treturn uri;\n\t}\n\n\tprivate static digestSingleSchema( schema:Class, vocab?:string ):DigestedObjectSchema {\n\t\tlet digestedSchema:DigestedObjectSchema = new DigestedObjectSchema();\n\n\t\tfor( let propertyName of [ \"@base\", \"@vocab\" ] ) {\n\t\t\tif( ! ( propertyName in schema ) ) continue;\n\t\t\tlet value:string = <string> schema[ propertyName ];\n\n\t\t\tif( value !== null && ! Utils.isString( value ) ) throw new Errors.IllegalArgumentError( `The value of '${ propertyName }' must be a string or null.` );\n\t\t\tif( ( propertyName === \"@vocab\" && value === \"\" ) || ! RDF.URI.Util.isAbsolute( value ) && ! RDF.URI.Util.isBNodeID( value ) ) throw new Errors.IllegalArgumentError( `The value of '${ propertyName }' must be an absolute URI${ propertyName === \"@base\" ? \" or an empty string\" : \"\" }.` );\n\n\t\t\tdigestedSchema[ propertyName.substr( 1 ) ] = value;\n\t\t}\n\t\tdigestedSchema.base = digestedSchema.base || \"\";\n\n\t\tif( \"@language\" in schema ) {\n\t\t\tlet value:string = <string> schema[ \"@language\" ];\n\t\t\tif( value !== null && ! Utils.isString( value ) ) throw new Errors.InvalidJSONLDSyntaxError( `The value of '@language' must be a string or null.` );\n\t\t\tdigestedSchema.language = value;\n\t\t}\n\n\t\tfor( let propertyName in schema ) {\n\t\t\tif( ! schema.hasOwnProperty( propertyName ) ) continue;\n\n\t\t\tif( propertyName === \"@reverse\" ) continue;\n\t\t\tif( propertyName === \"@index\" ) continue;\n\t\t\tif( propertyName === \"@base\" ) continue;\n\t\t\tif( propertyName === \"@vocab\" ) continue;\n\t\t\tif( propertyName === \"@language\" ) continue;\n\n\t\t\tlet propertyValue:( string | PropertyDefinition ) = schema[ propertyName ];\n\n\t\t\tif( Utils.isString( propertyValue ) ) {\n\t\t\t\tif( RDF.URI.Util.isPrefixed( propertyName ) ) throw new Errors.IllegalArgumentError( \"A prefixed property cannot be equal to another URI.\" );\n\n\t\t\t\tlet uri:RDF.URI.Class = new RDF.URI.Class( <string> propertyValue );\n\t\t\t\tif( RDF.URI.Util.isPrefixed( uri.stringValue ) ) uri = Digester._resolvePrefixedURI( uri, digestedSchema );\n\n\t\t\t\tdigestedSchema.prefixes.set( propertyName, uri );\n\t\t\t} else if( ! ! propertyValue && Utils.isObject( propertyValue ) ) {\n\t\t\t\tconst digestedDefinition:DigestedPropertyDefinition = Digester.digestPropertyDefinition( digestedSchema, propertyName, propertyValue, vocab );\n\t\t\t\tdigestedSchema.properties.set( propertyName, digestedDefinition );\n\t\t\t} else {\n\t\t\t\tthrow new Errors.IllegalArgumentError( \"ObjectSchema Properties can only have string values or object values.\" );\n\t\t\t}\n\t\t}\n\n\t\tDigester.resolvePrefixedURIs( digestedSchema );\n\n\t\treturn digestedSchema;\n\t}\n\n\tprivate static resolvePrefixedURIs( digestedSchema:DigestedObjectSchema ):DigestedObjectSchema {\n\t\tdigestedSchema.prefixes.forEach( ( prefixValue:RDF.URI.Class, prefixName:string ) => {\n\t\t\tif( ! digestedSchema.prefixedURIs.has( prefixName ) ) return;\n\n\t\t\tlet prefixedURIs:RDF.URI.Class[] = digestedSchema.prefixedURIs.get( prefixName );\n\t\t\tfor( let prefixedURI of prefixedURIs ) {\n\t\t\t\tDigester._resolvePrefixedURI( prefixedURI, digestedSchema );\n\t\t\t}\n\n\t\t\tdigestedSchema.prefixedURIs.delete( prefixName );\n\t\t} );\n\n\t\treturn digestedSchema;\n\t}\n}\n\nexport class Util {\n\tstatic resolveURI( uri:string, schema:DigestedObjectSchema, vocab?:string ):string {\n\t\tif( RDF.URI.Util.isAbsolute( uri ) ) return uri;\n\n\t\tif( RDF.URI.Util.isPrefixed( uri ) ) {\n\t\t\turi = Digester.resolvePrefixedURI( uri, schema );\n\t\t} else if( schema.vocab !== null || vocab ) {\n\t\t\turi = ( schema.vocab || vocab ) + uri;\n\t\t}\n\n\t\treturn uri;\n\t}\n}\n\nexport default Class;\n"]}