{"version":3,"sources":["LDP/PersistedRDFSource.ts"],"names":[],"mappings":";AACA,IAAY,GAAG,WAAM,eAAe,CAAC,CAAA;AACrC,IAAY,IAAI,WAAM,WAAW,CAAC,CAAA;AAIlC,IAAY,QAAQ,WAAM,eAAe,CAAC,CAAA;AAC1C,IAAY,KAAK,WAAM,YAAY,CAAC,CAAA;AAcpC;IAAA;IAoCA,CAAC;IAlCO,0BAAkB,GAAzB,UAA2B,MAAa;QACvC,MAAM,CAAC,KAAK,CAAC,kBAAkB,CAAE,MAAM,EAAE,SAAS,CAAE;eAChD,KAAK,CAAC,kBAAkB,CAAE,MAAM,EAAE,UAAU,CAAE;eAC9C,KAAK,CAAC,kBAAkB,CAAE,MAAM,EAAE,yBAAyB,CAAE;eAC7D,KAAK,CAAC,kBAAkB,CAAE,MAAM,EAAE,cAAc,CAAE;eAClD,KAAK,CAAC,kBAAkB,CAAE,MAAM,EAAE,mBAAmB,CAAE;eACvD,KAAK,CAAC,WAAW,CAAE,MAAM,EAAE,mBAAmB,CAAE;eAChD,KAAK,CAAC,WAAW,CAAE,MAAM,EAAE,QAAQ,CAAE,CACvC;IACH,CAAC;IAEM,gBAAQ,GAAf,UAAoD,QAAU;QAC7D,EAAE,CAAA,CAAE,OAAO,CAAC,kBAAkB,CAAE,QAAQ,CAAG,CAAC;YAAC,MAAM,CAAO,QAAQ,CAAC;QAEnE,IAAI,SAAS,GAAmB,QAAQ,CAAC;QAEzC,MAAM,CAAC,gBAAgB,CAAE,SAAS,EAAE;YACnC,QAAQ,EAAE;gBACT,QAAQ,EAAE,KAAK;gBACf,UAAU,EAAE,KAAK;gBACjB,YAAY,EAAE,IAAI;gBAClB,KAAK,EAAE,MAAM;aACb;YACD,mBAAmB,EAAE;gBACpB,QAAQ,EAAE,KAAK;gBACf,UAAU,EAAE,KAAK;gBACjB,YAAY,EAAE,IAAI;gBAClB,KAAK,EAAE,iBAAiB;aACxB;SACD,CAAE,CAAC;QAEJ,MAAM,CAAC,SAAS,CAAC;IAClB,CAAC;IAEF,cAAC;AAAD,CApCA,AAoCC,IAAA;AApCY,eAAO,UAoCnB,CAAA;AAED,gBAAiB,cAAoC;IACpD,IAAI,IAAI,GAAiB,IAAI,CAAC;IAC9B,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAE,IAAI,CAAC,iBAAiB,CAAC,EAAE,EAAE,cAAc,CAAE,CAAC,IAAI,CAAE,UAAE,EAA6D;YAA3D,WAAG,EAAE,gBAAQ;QAC9F,EAAE,CAAA,CAAE,CAAE,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAE,GAAG,EAAE,GAAG,CAAC,SAAS,CAAG,CAAC;YAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAE,+DAA+D,EAAE,QAAQ,CAAE,CAAC;QACxK,MAAM,CAAC,CAAE,GAAG,EAAE,QAAQ,CAAE,CAAC;IAC1B,CAAC,CAAE,CAAC;AACL,CAAC;AAED,2BAA4B,WAA6B,EAAE,IAAkB,EAAE,cAAwC;IAA5D,oBAAkB,GAAlB,WAAkB;IAAE,8BAAwC,GAAxC,mBAAwC;IACtH,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAE,WAAW,EAAE,IAAI,EAAE,cAAc,CAAE,CAAC;AAC/E,CAAC","file":"LDP/PersistedRDFSource.js","sourcesContent":["import * as AccessPoint from \"./../AccessPoint\";\nimport * as ACL from \"./../Auth/ACL\";\nimport * as HTTP from \"./../HTTP\";\nimport * as PersistedACL from \"./../Auth/PersistedACL\";\nimport * as PersistedDocument from \"./../PersistedDocument\";\nimport * as Pointer from \"./../Pointer\";\nimport * as Resource from \"./../Resource\";\nimport * as Utils from \"./../Utils\";\n\nexport interface Class extends PersistedDocument.Class {\n\tcreated:Date;\n\tmodified:Date;\n\tdefaultInteractionModel:Pointer.Class;\n\taccessPoints?:Pointer.Class[];\n\taccessControlList:Pointer.Class;\n\n\tcreateAccessPoint( accessPoint:AccessPoint.Class, slug?:string, requestOptions?:HTTP.Request.Options ):Promise<[ Pointer.Class, HTTP.Response.Class ]>;\n\n\tgetACL( requestOptions?:HTTP.Request.Options ):Promise<[ PersistedACL.Class, HTTP.Response.Class ]>;\n}\n\nexport class Factory {\n\n\tstatic hasClassProperties( object:Object ):boolean {\n\t\treturn Utils.hasPropertyDefined( object, \"created\" )\n\t\t\t&& Utils.hasPropertyDefined( object, \"modified\" )\n\t\t\t&& Utils.hasPropertyDefined( object, \"defaultInteractionModel\" )\n\t\t\t&& Utils.hasPropertyDefined( object, \"accessPoints\" )\n\t\t\t&& Utils.hasPropertyDefined( object, \"accessControlList\" )\n\t\t\t&& Utils.hasFunction( object, \"createAccessPoint\" )\n\t\t\t&& Utils.hasFunction( object, \"getACL\" )\n\t\t\t;\n\t}\n\n\tstatic decorate<T extends PersistedDocument.Class>( document:T ):T & Class {\n\t\tif( Factory.hasClassProperties( document ) ) return <any> document;\n\n\t\tlet rdfSource:T & Class = <any> document;\n\n\t\tObject.defineProperties( rdfSource, {\n\t\t\t\"getACL\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getACL,\n\t\t\t},\n\t\t\t\"createAccessPoint\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: createAccessPoint,\n\t\t\t},\n\t\t} );\n\n\t\treturn rdfSource;\n\t}\n\n}\n\nfunction getACL( requestOptions?:HTTP.Request.Options ):Promise<[ PersistedACL.Class, HTTP.Response.Class ]> {\n\tlet that:Class = <Class> this;\n\treturn that._documents.get( that.accessControlList.id, requestOptions ).then( ( [ acl, response ]:[ PersistedACL.Class, HTTP.Response.Class ] ) => {\n\t\tif( ! Resource.Util.hasType( acl, ACL.RDF_CLASS ) ) throw new HTTP.Errors.BadResponseError( \"The response does not contains a cs:AccessControlList object.\", response );\n\t\treturn [ acl, response ];\n\t} );\n}\n\nfunction createAccessPoint( accessPoint:AccessPoint.Class, slug:string = null, requestOptions:HTTP.Request.Options = {} ):Promise<[ Pointer.Class, HTTP.Response.Class ]> {\n\treturn this._documents.createAccessPoint( accessPoint, slug, requestOptions );\n}\n"],"sourceRoot":"/source/"}