{"version":3,"sources":["PersistedDocument.ts"],"names":[],"mappings":"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","file":"PersistedDocument.js","sourcesContent":["import * as Document from \"./Document\";\nimport Documents from \"./Documents\";\nimport * as HTTP from \"./HTTP\";\nimport * as Fragment from \"./Fragment\";\nimport * as NamedFragment from \"./NamedFragment\";\nimport * as PersistedResource from \"./PersistedResource\";\nimport * as PersistedFragment from \"./PersistedFragment\";\nimport * as PersistedNamedFragment from \"./PersistedNamedFragment\";\nimport * as Pointer from \"./Pointer\";\nimport * as RDF from \"./RDF\";\nimport * as SPARQL from \"./SPARQL\";\nimport * as Utils from \"./Utils\";\nimport * as URI from \"./RDF/URI\";\n\nexport interface Class extends Pointer.Class, PersistedResource.Class, Document.Class {\n\t_documents:Documents;\n\t_etag:string;\n\t_fragmentsIndex:Map<string, PersistedFragment.Class>;\n\t_savedFragments:PersistedFragment.Class[];\n\t_syncSavedFragments():void;\n\n\tgetFragment( slug:string ):PersistedFragment.Class;\n\tgetNamedFragment( slug:string ):PersistedNamedFragment.Class;\n\tgetFragments():PersistedFragment.Class[];\n\n\tcreateFragment():PersistedFragment.Class;\n\tcreateFragment( slug:string ):PersistedNamedFragment.Class;\n\tcreateFragment<T extends Object>( slug:string, object:T ):PersistedNamedFragment.Class & T;\n\tcreateFragment<T extends Object>( object:T ):PersistedFragment.Class & T;\n\n\tcreateNamedFragment( slug:string ):PersistedNamedFragment.Class;\n\tcreateNamedFragment<T extends Object>( slug:string, object:T ):PersistedNamedFragment.Class & T;\n\n\trefresh():Promise<[Class, HTTP.Response.Class]>;\n\n\tsave():Promise<[Class, HTTP.Response.Class]>;\n\tsaveAndRefresh():Promise<[ Class, [ HTTP.Response.Class, HTTP.Response.Class ] ]>;\n\n\tdestroy():Promise<HTTP.Response.Class>;\n\n\tgetDownloadURL():Promise<string>;\n\n\texecuteRawASKQuery( askQuery:string, requestOptions?:HTTP.Request.Options ):Promise<[ SPARQL.RawResults.Class, HTTP.Response.Class ]>;\n\texecuteASKQuery( askQuery:string, requestOptions?:HTTP.Request.Options ):Promise<[ boolean, HTTP.Response.Class ]>;\n\texecuteRawSELECTQuery( selectQuery:string, requestOptions?:HTTP.Request.Options ):Promise<[ SPARQL.RawResults.Class, HTTP.Response.Class ]>;\n\texecuteSELECTQuery( selectQuery:string, requestOptions?:HTTP.Request.Options ):Promise<[ SPARQL.SELECTResults.Class, HTTP.Response.Class ]>;\n\texecuteRawCONSTRUCTQuery( constructQuery:string, requestOptions?:HTTP.Request.Options ):Promise<[ string, HTTP.Response.Class ]>;\n\texecuteRawDESCRIBEQuery( describeQuery:string, requestOptions?:HTTP.Request.Options ):Promise<[ string, HTTP.Response.Class ]>;\n\texecuteUPDATE( updateQuery:string, requestOptions?:HTTP.Request.Options ):Promise<HTTP.Response.Class>;\n}\n\nfunction extendIsDirty( superFunction:() => boolean ):() => boolean {\n\treturn function():boolean {\n\t\tlet isDirty:boolean = superFunction.call( this );\n\t\tif( isDirty ) return true;\n\n\t\tlet document:Class = this;\n\n\t\tfor( let fragment of document.getFragments() ) {\n\t\t\tif( fragment.isDirty() ) return true;\n\t\t}\n\n\t\t// Check if an already saved fragment was removed\n\t\tfor( let fragment of document._savedFragments ) {\n\t\t\tif( ! document.hasFragment( fragment.id ) ) return true;\n\t\t}\n\n\t\treturn false;\n\t};\n}\n\nfunction syncSavedFragments():void {\n\tlet document:Class = this;\n\tdocument._savedFragments = Utils.A.from( document._fragmentsIndex.values() );\n}\n\nfunction extendCreateFragment( superFunction:( slug:string ) => NamedFragment.Class ):( slug:string ) => PersistedNamedFragment.Class;\nfunction extendCreateFragment( superFunction:() => Fragment.Class ):() => PersistedFragment.Class;\nfunction extendCreateFragment( superFunction:( slug:string, object:Object ) => NamedFragment.Class ):( slug:string, object:Object ) => PersistedNamedFragment.Class;\nfunction extendCreateFragment( superFunction:( object:Object ) => Fragment.Class ):( object:Object ) => PersistedFragment.Class;\nfunction extendCreateFragment( superFunction:( slug?:string, object?:Object ) => any ):any {\n\treturn function( slugOrObject:string = null, object:Object = null ):any {\n\t\tlet fragment:Fragment.Class = superFunction.call( this, slugOrObject, object );\n\t\tlet id:string = fragment.id;\n\n\t\tif( RDF.URI.Util.isBNodeID( id ) ) {\n\t\t\tPersistedFragment.Factory.decorate( fragment );\n\t\t} else {\n\t\t\tPersistedNamedFragment.Factory.decorate( fragment );\n\t\t}\n\t\treturn fragment;\n\t};\n}\nfunction extendCreateNamedFragment( superFunction:( slug:string ) => NamedFragment.Class ):( slug:string ) => PersistedNamedFragment.Class;\nfunction extendCreateNamedFragment( superFunction:( slug:string, object:Object ) => NamedFragment.Class ):( slug:string, object:Object ) => PersistedNamedFragment.Class;\nfunction extendCreateNamedFragment( superFunction:( slug:string, object?:Object ) => NamedFragment.Class ):any {\n\treturn function( slug:string, object:Object = null ):PersistedNamedFragment.Class {\n\t\tlet fragment:NamedFragment.Class = superFunction.call( this, slug, object );\n\t\treturn PersistedFragment.Factory.decorate( fragment );\n\t};\n}\n\nfunction refresh():Promise<[Class, HTTP.Response.Class]> {\n\treturn this._documents.refresh( this );\n}\nfunction save():Promise<[Class, HTTP.Response.Class]> {\n\treturn this._documents.save( this );\n}\nfunction saveAndRefresh():Promise<[ Class, [ HTTP.Response.Class, HTTP.Response.Class] ]> {\n\tlet saveResponse:HTTP.Response.Class;\n\treturn this._documents.save( this ).then( ( [ document, response ]:[ Class, HTTP.Response.Class ] ) => {\n\t\tsaveResponse = response;\n\t\treturn this._documents.refresh( this );\n\n\t} ).then( ( [ document, response ]:[ Class, HTTP.Response.Class ] ) => {\n\t\treturn [ this, [ saveResponse, response ] ];\n\n\t} );\n}\n\nfunction destroy():Promise<HTTP.Response.Class> {\n\treturn this._documents.delete( this.id );\n}\n\nfunction getDownloadURL():Promise<string> {\n\treturn (<Class> this)._documents.getDownloadURL( (<Class> this).id );\n}\n\nfunction executeRawASKQuery( askQuery:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ SPARQL.RawResults.Class, HTTP.Response.Class ]> {\n\treturn this._documents.executeRawASKQuery( this.id, askQuery, requestOptions );\n}\n\nfunction executeASKQuery( askQuery:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ boolean, HTTP.Response.Class ]> {\n\treturn this._documents.executeASKQuery( this.id, askQuery, requestOptions );\n}\n\nfunction executeRawSELECTQuery( selectQuery:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ SPARQL.RawResults.Class, HTTP.Response.Class ]> {\n\treturn this._documents.executeRawSELECTQuery( this.id, selectQuery, requestOptions );\n}\n\nfunction executeSELECTQuery( selectQuery:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ SPARQL.SELECTResults.Class, HTTP.Response.Class ]> {\n\treturn this._documents.executeSELECTQuery( this.id, selectQuery, requestOptions );\n}\n\nfunction executeRawCONSTRUCTQuery( constructQuery:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ string, HTTP.Response.Class ]> {\n\treturn this._documents.executeRawCONSTRUCTQuery( this.id, constructQuery, requestOptions );\n}\n\nfunction executeRawDESCRIBEQuery( describeQuery:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ string, HTTP.Response.Class ]> {\n\treturn this._documents.executeRawDESCRIBEQuery( this.id, describeQuery, requestOptions );\n}\n\nfunction executeUPDATE( updateQuery:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ string, HTTP.Response.Class ]> {\n\treturn this._documents.executeUPDATE( this.id, updateQuery, requestOptions );\n}\n\nexport class Factory {\n\tstatic hasClassProperties( document:Document.Class ):boolean {\n\t\treturn (\n\t\t\tUtils.hasPropertyDefined( document, \"_documents\" ) &&\n\t\t\tUtils.hasPropertyDefined( document, \"_etag\" ) &&\n\t\t\tUtils.hasFunction( document, \"refresh\" ) &&\n\t\t\tUtils.hasFunction( document, \"save\" ) &&\n\t\t\tUtils.hasFunction( document, \"saveAndRefresh\" ) &&\n\t\t\tUtils.hasFunction( document, \"destroy\" ) &&\n\n\t\t\tUtils.hasFunction( document, \"getDownloadURL\" ) &&\n\n\t\t\tUtils.hasFunction( document, \"executeRawASKQuery\" ) &&\n\t\t\tUtils.hasFunction( document, \"executeASKQuery\" ) &&\n\t\t\tUtils.hasFunction( document, \"executeRawSELECTQuery\" ) &&\n\t\t\tUtils.hasFunction( document, \"executeSELECTQuery\" ) &&\n\t\t\tUtils.hasFunction( document, \"executeRawDESCRIBEQuery\" ) &&\n\t\t\tUtils.hasFunction( document, \"executeRawCONSTRUCTQuery\" ) &&\n\t\t\tUtils.hasFunction( document, \"executeUPDATE\" )\n\t\t);\n\t}\n\n\tstatic is( object:Object ):boolean {\n\t\treturn Utils.isObject( object )\n\t\t\t&& Document.Factory.hasClassProperties( object )\n\t\t\t&& Factory.hasClassProperties( <any> object );\n\t}\n\n\tstatic create( uri:string, documents:Documents, snapshot:Object = {} ):Class {\n\t\tlet document:Document.Class = Document.Factory.create();\n\t\tdocument.id = uri;\n\n\t\treturn Factory.decorate( document, documents, snapshot );\n\t}\n\n\tstatic createFrom<T extends Object>( object:T, uri:string, documents:Documents, snapshot:Object = {} ):Class {\n\t\tlet document:Document.Class = Document.Factory.createFrom( object );\n\t\tdocument.id = uri;\n\n\t\treturn Factory.decorate( document, documents, snapshot );\n\t}\n\n\tstatic decorate<T extends Document.Class>( document:T, documents:Documents, snapshot:Object = {} ):T & Class {\n\t\tPersistedResource.Factory.decorate( document, snapshot );\n\n\t\tif( Factory.hasClassProperties( document ) ) return <any> document;\n\n\t\tlet persistedDocument:Class = <any> document;\n\n\t\tObject.defineProperties( persistedDocument, {\n\t\t\t\"_documents\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: documents,\n\t\t\t},\n\t\t\t\"_etag\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: null,\n\t\t\t},\n\t\t\t\"_savedFragments\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: [],\n\t\t\t},\n\t\t\t\"_syncSavedFragments\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: syncSavedFragments,\n\t\t\t},\n\n\t\t\t\"hasPointer\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: (function():( id:string ) => boolean {\n\t\t\t\t\tlet superFunction:( id:string ) => boolean = persistedDocument.hasPointer;\n\t\t\t\t\treturn function( id:string ):boolean {\n\t\t\t\t\t\tif( superFunction.call( this, id ) ) return true;\n\n\t\t\t\t\t\treturn ! URI.Util.isBNodeID( id ) && (<Class> this)._documents.hasPointer( id );\n\t\t\t\t\t};\n\t\t\t\t})(),\n\t\t\t},\n\t\t\t\"getPointer\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: (function():( id:string ) => Pointer.Class {\n\t\t\t\t\tlet superFunction:( id:string ) => Pointer.Class = persistedDocument.getPointer;\n\t\t\t\t\tlet inScopeFunction:( id:string ) => boolean = persistedDocument.inScope;\n\t\t\t\t\treturn function( id:string ):Pointer.Class {\n\t\t\t\t\t\tif( inScopeFunction.call( this, id ) ) return superFunction.call( this, id );\n\n\t\t\t\t\t\treturn (<Class> this)._documents.getPointer( id );\n\t\t\t\t\t};\n\t\t\t\t})(),\n\t\t\t},\n\t\t\t\"inScope\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: (function():( idOrPointer:any ) => boolean {\n\t\t\t\t\tlet superFunction:( idOrPointer:any ) => boolean = persistedDocument.inScope;\n\t\t\t\t\treturn function( idOrPointer:any ):boolean {\n\t\t\t\t\t\tif( superFunction.call( this, idOrPointer ) ) return true;\n\n\t\t\t\t\t\treturn (<Class> this)._documents.inScope( idOrPointer );\n\t\t\t\t\t};\n\t\t\t\t})(),\n\t\t\t},\n\t\t\t\"refresh\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: refresh,\n\t\t\t},\n\t\t\t\"save\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: save,\n\t\t\t},\n\t\t\t\"saveAndRefresh\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: saveAndRefresh,\n\t\t\t},\n\t\t\t\"destroy\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: destroy,\n\t\t\t},\n\n\t\t\t\"getDownloadURL\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getDownloadURL,\n\t\t\t},\n\n\t\t\t\"executeRawASKQuery\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: executeRawASKQuery,\n\t\t\t},\n\t\t\t\"executeASKQuery\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: executeASKQuery,\n\t\t\t},\n\t\t\t\"executeRawSELECTQuery\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: executeRawSELECTQuery,\n\t\t\t},\n\t\t\t\"executeSELECTQuery\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: executeSELECTQuery,\n\t\t\t},\n\t\t\t\"executeRawCONSTRUCTQuery\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: executeRawCONSTRUCTQuery,\n\t\t\t},\n\t\t\t\"executeRawDESCRIBEQuery\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: executeRawDESCRIBEQuery,\n\t\t\t},\n\t\t\t\"executeUPDATE\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: executeUPDATE,\n\t\t\t},\n\n\t\t\t\"createFragment\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: extendCreateFragment( persistedDocument.createFragment ),\n\t\t\t},\n\t\t\t\"createNamedFragment\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: extendCreateNamedFragment( persistedDocument.createNamedFragment ),\n\t\t\t},\n\n\t\t\t// Overwrite PersistedResource.isDirty to take into account fragments state\n\t\t\t\"isDirty\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: extendIsDirty( persistedDocument.isDirty ),\n\t\t\t},\n\t\t} );\n\n\t\treturn <any> persistedDocument;\n\t}\n}\n\nexport default Class;\n"],"sourceRoot":"/source/"}