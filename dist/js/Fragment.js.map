{"version":3,"sources":["Fragment.ts"],"names":["externalAnonymousFragmentFilter","Factory","Factory.constructor","Factory.from","Factory.singleFrom","Factory.injectBehavior","Factory.hasClassProperties","Util","Util.constructor","Util.generateID"],"mappings":"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","file":"Fragment.js","sourcesContent":["import * as Document from \"./Document\";\nimport * as Errors from \"./Errors\";\nimport * as RDF from \"./RDF\";\nimport * as Utils from \"./Utils\";\n\nexport interface Class extends RDF.Resource.Class {\n\tdocument:Document.Class;\n}\n\nfunction externalAnonymousFragmentFilter( propertyURI:string, value:(RDF.Node.Class | RDF.Literal.Class) ):void {\n\tif( ! RDF.Node.Factory.is( value ) ) return;\n\tif( ! RDF.URI.Util.isBNodeID( value[ \"@id\" ] ) ) return;\n\n\tif( ! ( \"document\" in value ) ) throw new Errors.IllegalArgumentError( \"The resource provided doesn't belong to a document.\" );\n\n\tlet fragment:Class = <any> value;\n\n\tif( this.document !== fragment.document ) throw new Errors.IllegalArgumentError( \"The anonymous fragment provided belongs to another document. To reference it from another document it needs to be named.\" );\n}\n\nexport class Factory extends RDF.Resource.Factory {\n\tfrom( object:Array<Object & { document:Document.Class }> ):Class[];\n\tfrom( object:Object & { document:Document.Class } ):Class;\n\tfrom( objects:any ):any {\n\t\tif( ! Utils.isArray( objects ) ) return this.singleFrom( <Object & { document:Document.Class }>objects );\n\n\t\tfor ( let i:number = 0, length:number = objects.length; i < length; i ++ ) {\n\t\t\tlet object:(Object & { document:Document.Class }) = <(Object & { document:Document.Class })> objects[ i ];\n\n\t\t\tthis.singleFrom( object );\n\t\t}\n\n\t\treturn <Class[]> objects;\n\t}\n\n\tprotected singleFrom( object:Object & { document:Document.Class } ):Class {\n\t\treturn this.injectBehavior( object );\n\t}\n\n\tprotected injectBehavior( object:(Object & { document:Document.Class }) ):Class {\n\t\tlet fragment:Class = <Class> super.injectBehavior( object );\n\t\tif( this.hasClassProperties( fragment ) ) return fragment;\n\n\t\tfragment._propertyAddedCallbacks.push( externalAnonymousFragmentFilter );\n\n\t\tlet document:Document.Class = fragment.document;\n\t\tdelete fragment.document;\n\n\t\tObject.defineProperties( fragment, {\n\t\t\t\"document\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tvalue: document\n\t\t\t}\n\t\t} );\n\n\t\treturn fragment;\n\t}\n\n\tprotected hasClassProperties( resource:RDF.Resource.Class ):boolean {\n\t\treturn false;\n\t}\n}\n\nexport var factory:Factory = new Factory();\n\nexport class Util {\n\tstatic generateID():string {\n\t\treturn \"_:\" + Utils.UUID.generate();\n\t}\n}\n\nexport default Class;\n"],"sourceRoot":"/source/"}