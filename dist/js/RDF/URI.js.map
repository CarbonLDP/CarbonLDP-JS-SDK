{"version":3,"sources":["RDF/URI.ts"],"names":["prefixWithObjectSchema","Class","Class.constructor","Class.toString","Util","Util.constructor","Util.hasFragment","Util.hasProtocol","Util.isAbsolute","Util.isRelative","Util.isBNodeID","Util.isPrefixed","Util.isFragmentOf","Util.isBaseOf","Util.getRelativeURI","Util.getDocumentURI","Util.getFragment","Util.getSlug","Util.resolve","Util.removeProtocol","Util.prefix"],"mappings":"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","file":"RDF/URI.js","sourcesContent":["import * as Errors from \"./../Errors\";\nimport * as ObjectSchema from \"./../ObjectSchema\";\nimport * as Utils from \"./../Utils\";\n\nexport class Class {\n\tstringValue:string;\n\n\tconstructor( stringValue:string ) {\n\t\tthis.stringValue = stringValue;\n\t}\n\n\ttoString():string {\n\t\treturn this.stringValue;\n\t}\n}\n\nexport class Util {\n\tstatic hasFragment( uri:string ):boolean {\n\t\treturn uri.indexOf( \"#\" ) !== - 1;\n\t}\n\n\tstatic hasProtocol( uri:string ):boolean {\n\t\treturn Utils.S.startsWith( uri, \"https://\" ) || Utils.S.startsWith( uri, \"http://\" );\n\t}\n\n\tstatic isAbsolute( uri:string ):boolean {\n\t\treturn Utils.S.startsWith( uri, \"http://\" )\n\t\t\t|| Utils.S.startsWith( uri, \"https://\" )\n\t\t\t|| Utils.S.startsWith( uri, \"://\" );\n\t}\n\n\tstatic isRelative( uri:string ):boolean {\n\t\treturn ! Util.isAbsolute( uri );\n\t}\n\n\tstatic isBNodeID( uri:string ):boolean {\n\t\treturn Utils.S.startsWith( uri, \"_:\" );\n\t}\n\n\tstatic isPrefixed( uri:string ):boolean {\n\t\treturn ! Util.isAbsolute( uri ) && ! Util.isBNodeID( uri ) && Utils.S.contains( uri, \":\" );\n\t}\n\n\tstatic isFragmentOf( fragmentURI:string, uri:string ):boolean {\n\t\tif( ! Util.hasFragment( fragmentURI ) ) return false;\n\n\t\treturn Util.getDocumentURI( fragmentURI ) === uri;\n\t}\n\n\tstatic isBaseOf( baseURI:string, uri:string ):boolean {\n\t\tif( baseURI === uri ) return true;\n\t\tif( baseURI === \"\" ) return true;\n\n\t\tif( uri.startsWith( baseURI ) ) {\n\t\t\tif( Utils.S.endsWith( baseURI, \"/\" ) ) return true;\n\n\t\t\tlet relativeURI:string = uri.substring( baseURI.length );\n\t\t\tif( Utils.S.startsWith( relativeURI, \"/\" ) || Utils.S.startsWith( relativeURI, \"#\" ) ) return true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tstatic getRelativeURI( absoluteURI:string, base:string ):string {\n\t\tif ( ! absoluteURI.startsWith( base ) )\n\t\t\treturn absoluteURI;\n\t\treturn absoluteURI.substring( base.length );\n\t}\n\n\tstatic getDocumentURI( uri:string ):string {\n\t\tlet parts:string[] = uri.split( \"#\" );\n\t\tif ( parts.length > 2 ) throw new Error( \"IllegalArgument: The URI provided has more than one # sign.\" );\n\n\t\treturn parts[ 0 ];\n\t}\n\n\tstatic getFragment( uri:string ):string {\n\t\tlet parts:string[] = uri.split( \"#\" );\n\t\tif ( parts.length < 2 ) return null;\n\t\tif ( parts.length > 2 ) throw new Error( \"IllegalArgument: The URI provided has more than one # sign.\" );\n\n\t\treturn parts[ 1 ];\n\t}\n\n\tstatic getSlug( uri:string ):string {\n\t\tlet uriParts:string[] = uri.split( \"#\" );\n\t\tif( uriParts.length === 2 ) return Util.getSlug( uriParts[ 1 ] );\n\t\tif( uriParts.length > 2 ) throw new Errors.IllegalArgumentError( \"Invalid URI: The uri contains two '#' symbols.\" );\n\n\t\turi = uriParts[ 0 ];\n\n\t\tif( uri === \"\" ) return uri;\n\t\tif( uri === \"/\" ) return uri;\n\n\t\tlet parts:string[] = uri.split( \"/\" );\n\t\tif( parts[ parts.length - 1 ] === \"\" ) {\n\t\t\treturn parts[ parts.length - 2 ] + \"/\";\n\t\t} else {\n\t\t\treturn parts[ parts.length - 1 ];\n\t\t}\n\t}\n\n\tstatic resolve( parentURI:string, childURI:string ):string {\n\t\tif ( Util.isAbsolute( childURI ) || Util.isPrefixed( childURI ) )\n\t\t\treturn childURI;\n\n\t\tlet finalURI:string = parentURI;\n\t\tif ( ! Utils.S.endsWith( parentURI, \"/\" ) ) finalURI += \"/\";\n\n\t\tif ( Utils.S.startsWith( childURI, \"/\" ) ) {\n\t\t\tfinalURI = finalURI + childURI.substr( 1, childURI.length );\n\t\t} else finalURI += childURI;\n\n\t\treturn finalURI;\n\t}\n\n\tstatic removeProtocol( uri:string ):string {\n\t\tif ( Utils.S.startsWith( uri, \"https://\" ) ) return uri.substr( 5, uri.length );\n\t\tif ( Utils.S.startsWith( uri, \"http://\" ) ) return uri.substr( 4, uri.length );\n\t\treturn uri;\n\t}\n\n\tstatic prefix( uri:string, prefix:string, prefixURI:string ):string;\n\tstatic prefix( uri:string, objectSchema:ObjectSchema.DigestedObjectSchema ):string;\n\tstatic prefix( uri:string, prefixOrObjectSchema:any, prefixURI:string = null ):string {\n\t\tlet objectSchema:ObjectSchema.DigestedObjectSchema = ! Utils.isString( prefixOrObjectSchema ) ? prefixOrObjectSchema : null;\n\t\tlet prefix:string = Utils.isString( prefixOrObjectSchema ) ? prefixOrObjectSchema : null;\n\n\t\tif( objectSchema !== null ) return prefixWithObjectSchema( uri, objectSchema );\n\n\t\tif ( Util.isPrefixed( uri ) || ! uri.startsWith( prefixURI ) )\n\t\t\treturn uri;\n\n\t\treturn `${ prefix }:${ uri.substring( prefixURI.length ) }`;\n\t}\n}\n\nfunction prefixWithObjectSchema( uri:string, objectSchema:ObjectSchema.DigestedObjectSchema ):string {\n\tlet prefixEntries:IterableIterator<[ string, Class ]> = objectSchema.prefixes.entries();\n\twhile( true ) {\n\t\tlet result:IteratorResult<[ string, Class ]> = prefixEntries.next();\n\t\tif( result.done ) return uri;\n\n\t\tlet [ prefix, prefixURI ]:[ string, Class ] = result.value;\n\t\tif( ! Util.isAbsolute( prefixURI.toString() ) ) continue;\n\t\tif( ! uri.startsWith( prefixURI.toString() ) ) continue;\n\n\t\treturn Util.prefix( uri, prefix, prefixURI.toString() );\n\t}\n}\n\nexport default Class;\n"],"sourceRoot":"/source/"}