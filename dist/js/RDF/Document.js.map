{"version":3,"sources":["RDF/Document.ts"],"names":["Factory","Factory.constructor","Factory.is","Factory.create","Util","Util.constructor","Util.getDocuments","Util.getResources","Util.getDocumentResources","Util.getFragmentResources","Util.getBNodeResources"],"mappings":"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","file":"RDF/Document.js","sourcesContent":["import * as Value from \"./Value\";\nimport * as RDFNode from \"./RDFNode\";\nimport * as Utils from \"../Utils\";\nimport * as URI from \"./URI\";\n\nexport interface Class {\n\t\"@id\"?:string;\n\t\"@graph\":RDFNode.Class[];\n}\n\nexport class Factory {\n\tstatic is( object:Object ):boolean {\n\t\treturn (\n\t\t\tUtils.hasProperty( object, \"@graph\" )\n\t\t);\n\t}\n\n\tstatic create( resources:RDFNode.Class[] ):Class;\n\tstatic create( resources:RDFNode.Class[], uri?:string ):Class {\n\t\tlet document:any = uri ? RDFNode.Factory.create( uri ) : {};\n\t\tdocument[ \"@graph\" ] = resources;\n\n\t\treturn document;\n\t}\n}\n\nexport class Util {\n\tstatic getDocuments( object:Object[] ):Class[];\n\tstatic getDocuments( object:Object ):Class[];\n\tstatic getDocuments( value:any ):Class[] {\n\t\tif ( Utils.isArray( value ) ) {\n\t\t\tif ( value.length === 0 ) return value;\n\t\t\tif ( Factory.is( value[ 0 ] ) ) return value;\n\t\t\tif ( RDFNode.Factory.is( value[ 0 ] ) ) return [ Factory.create( value ) ];\n\t\t} else if ( Utils.isObject( value ) ) {\n\t\t\tif ( Factory.is( value ) ) return [ value ];\n\t\t\tif ( RDFNode.Factory.is( value ) ) return [ Factory.create( [ value ] ) ];\n\t\t} else throw new Error( \"IllegalArgument: The value structure isn't valid.\" );\n\t}\n\n\tstatic getResources( document:RDFNode.Class[] ):RDFNode.Class[];\n\tstatic getResources( document:Class ):RDFNode.Class[];\n\tstatic getResources( document:any ):RDFNode.Class[] {\n\t\tif ( Utils.isArray( document ) ) {\n\t\t\tif ( document.length === 0 ) return document;\n\t\t\tif ( document.length === 1 ) {\n\t\t\t\tif ( Utils.isArray( document[ 0 ] ) ) return Util.getResources( document[ 0 ] );\n\t\t\t\tif ( ! Utils.isObject( document[ 0 ] ) ) throw new Error( \"IllegalArgument: The document structure isn't valid.\" );\n\t\t\t\tif ( ! document[ 0 ].hasOwnProperty( \"@graph\" ) ) return document;\n\t\t\t\treturn Util.getResources( document[ 0 ][ \"@graph\" ] );\n\t\t\t}\n\t\t\treturn document;\n\t\t} else {\n\t\t\tif ( ! Utils.isObject( document ) ) throw new Error( \"IllegalArgument: The document structure isn't valid.\" );\n\t\t\tif ( ! document.hasOwnProperty( \"@graph\" ) ) throw new Error( \"IllegalArgument: The document structure isn't valid.\" );\n\t\t\treturn Util.getResources( document[ \"@graph\" ] );\n\t\t}\n\t}\n\n\tstatic getDocumentResources( document:RDFNode.Class[] ):RDFNode.Class[];\n\tstatic getDocumentResources( document:Class ):RDFNode.Class[];\n\tstatic getDocumentResources( document:any ):RDFNode.Class[] {\n\t\tlet resources:RDFNode.Class[] = Util.getResources( document );\n\t\tlet documentResources:RDFNode.Class[] = [];\n\n\t\tfor ( let i:number = 0, length:number = resources.length; i < length; i ++ ) {\n\t\t\tlet resource:RDFNode.Class = resources[ i ];\n\t\t\tlet uri:string = resource[ \"@id\" ];\n\t\t\tif ( ! uri ) continue;\n\n\t\t\tif ( ! URI.Util.hasFragment( uri ) && ! URI.Util.isBNodeID( uri ) ) documentResources.push( resource );\n\t\t}\n\n\t\treturn documentResources;\n\t}\n\n\tstatic getFragmentResources( document:RDFNode.Class[], documentResource?:RDFNode.Class ):RDFNode.Class[];\n\tstatic getFragmentResources( document:Class, documentResource?:RDFNode.Class ):RDFNode.Class[];\n\tstatic getFragmentResources( document:RDFNode.Class[], documentResource?:string ):RDFNode.Class[];\n\tstatic getFragmentResources( document:Class, documentResource?:string ):RDFNode.Class[];\n\tstatic getFragmentResources( document:any, documentResource?:any ):RDFNode.Class[] {\n\t\tlet resources:RDFNode.Class[] = Util.getResources( document );\n\n\t\tlet documentURIToMatch:string = null;\n\t\tif ( documentResource ) {\n\t\t\tif ( Utils.isString( documentResource ) ) {\n\t\t\t\tdocumentURIToMatch = documentResource;\n\t\t\t} else documentURIToMatch = documentResource[ \"@id\" ];\n\t\t}\n\n\t\tlet fragmentResources:RDFNode.Class[] = [];\n\n\t\tfor ( let i:number = 0, length:number = resources.length; i < length; i ++ ) {\n\t\t\tlet resource:RDFNode.Class = resources[ i ];\n\t\t\tlet uri:string = resource[ \"@id\" ];\n\n\t\t\tif ( ! uri ) continue;\n\t\t\tif ( ! URI.Util.hasFragment( uri ) ) continue;\n\n\t\t\tif ( ! documentURIToMatch ) {\n\t\t\t\tfragmentResources.push( resource );\n\t\t\t} else {\n\t\t\t\tlet documentURI:string = URI.Util.getDocumentURI( uri );\n\t\t\t\tif ( documentURI === documentURIToMatch ) fragmentResources.push( resource );\n\t\t\t}\n\t\t}\n\n\t\treturn fragmentResources;\n\t}\n\n\tstatic getBNodeResources( document:Class ):RDFNode.Class[] {\n\t\tlet resources:RDFNode.Class[] = Util.getResources( document );\n\n\t\tlet bnodes:RDFNode.Class[] = [];\n\t\tfor( let i:number = 0, length:number = resources.length; i < length; i++ ) {\n\t\t\tlet resource:RDFNode.Class = resources[i];\n\t\t\tif( ! ( \"@id\" in resource ) || URI.Util.isBNodeID( resource[\"@id\"] ) ) bnodes.push( resource );\n\t\t}\n\n\t\treturn bnodes;\n\t}\n}\n"],"sourceRoot":"/source/"}