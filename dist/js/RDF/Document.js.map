{"version":3,"sources":["RDF/Document.ts"],"names":["Factory","Factory.constructor","Factory.is","Factory.create","Util","Util.constructor","Util.getDocuments","Util.getResources","Util.getDocumentResources","Util.getFragmentResources","Util.getBNodeResources"],"mappings":"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","file":"RDF/Document.js","sourcesContent":["import * as Value from \"./Value\";\nimport * as RDFNode from \"./RDFNode\";\nimport * as Utils from \"../Utils\";\nimport * as URI from \"./URI\";\n\nexport interface Class {\n\t\"@id\"?:string;\n\t\"@graph\":RDFNode.Class[];\n}\n\nexport class Factory {\n\tstatic is( object:Object ):boolean {\n\t\treturn (\n\t\t\tUtils.hasProperty( object, \"@graph\" )\n\t\t);\n\t}\n\n\tstatic create( resources:RDFNode.Class[] ):Class;\n\tstatic create( resources:RDFNode.Class[], uri?:string ):Class {\n\t\tlet document:any = uri ? RDFNode.Factory.create( uri ) : {};\n\t\tdocument[ \"@graph\" ] = resources;\n\n\t\treturn document;\n\t}\n}\n\nexport class Util {\n\tstatic getDocuments( object:Object[] ):Class[];\n\tstatic getDocuments( object:Object ):Class[];\n\tstatic getDocuments( value:any ):Class[] {\n\t\tif ( Utils.isArray( value ) ) {\n\t\t\tif ( value.length === 0 ) return value;\n\t\t\tif ( Factory.is( value[ 0 ] ) ) return value;\n\t\t\tif ( RDFNode.Factory.is( value[ 0 ] ) ) return [ Factory.create( value ) ];\n\t\t} else if ( Utils.isObject( value ) ) {\n\t\t\tif ( Factory.is( value ) ) return [ value ];\n\t\t\tif ( RDFNode.Factory.is( value ) ) return [ Factory.create( [ value ] ) ];\n\t\t} else throw new Error( \"IllegalArgument: The value structure isn't valid.\" );\n\t}\n\n\tstatic getResources( objects:Object[] ):RDFNode.Class[];\n\tstatic getResources( object:Object ):RDFNode.Class[];\n\tstatic getResources( value:any ):RDFNode.Class[] {\n\t\tlet documents:Class[] = Util.getDocuments( value );\n\n\t\tlet resources:RDFNode.Class[] = [];\n\n\t\tfor( let document of documents ) {\n\t\t\tresources = resources.concat( document[ \"@graph\"] );\n\t\t}\n\n\t\treturn resources;\n\t}\n\n\tstatic getDocumentResources( document:RDFNode.Class[] ):RDFNode.Class[];\n\tstatic getDocumentResources( document:Class ):RDFNode.Class[];\n\tstatic getDocumentResources( document:any ):RDFNode.Class[] {\n\t\tlet resources:RDFNode.Class[] = Util.getResources( document );\n\t\tlet documentResources:RDFNode.Class[] = [];\n\n\t\tfor ( let i:number = 0, length:number = resources.length; i < length; i ++ ) {\n\t\t\tlet resource:RDFNode.Class = resources[ i ];\n\t\t\tlet uri:string = resource[ \"@id\" ];\n\t\t\tif ( ! uri ) continue;\n\n\t\t\tif ( ! URI.Util.hasFragment( uri ) && ! URI.Util.isBNodeID( uri ) ) documentResources.push( resource );\n\t\t}\n\n\t\treturn documentResources;\n\t}\n\n\tstatic getFragmentResources( document:RDFNode.Class[], documentResource?:RDFNode.Class ):RDFNode.Class[];\n\tstatic getFragmentResources( document:Class, documentResource?:RDFNode.Class ):RDFNode.Class[];\n\tstatic getFragmentResources( document:RDFNode.Class[], documentResource?:string ):RDFNode.Class[];\n\tstatic getFragmentResources( document:Class, documentResource?:string ):RDFNode.Class[];\n\tstatic getFragmentResources( document:any, documentResource?:any ):RDFNode.Class[] {\n\t\tlet resources:RDFNode.Class[] = Util.getResources( document );\n\n\t\tlet documentURIToMatch:string = null;\n\t\tif ( documentResource ) {\n\t\t\tif ( Utils.isString( documentResource ) ) {\n\t\t\t\tdocumentURIToMatch = documentResource;\n\t\t\t} else documentURIToMatch = documentResource[ \"@id\" ];\n\t\t}\n\n\t\tlet fragmentResources:RDFNode.Class[] = [];\n\n\t\tfor ( let i:number = 0, length:number = resources.length; i < length; i ++ ) {\n\t\t\tlet resource:RDFNode.Class = resources[ i ];\n\t\t\tlet uri:string = resource[ \"@id\" ];\n\n\t\t\tif ( ! uri ) continue;\n\t\t\tif ( ! URI.Util.hasFragment( uri ) ) continue;\n\n\t\t\tif ( ! documentURIToMatch ) {\n\t\t\t\tfragmentResources.push( resource );\n\t\t\t} else {\n\t\t\t\tlet documentURI:string = URI.Util.getDocumentURI( uri );\n\t\t\t\tif ( documentURI === documentURIToMatch ) fragmentResources.push( resource );\n\t\t\t}\n\t\t}\n\n\t\treturn fragmentResources;\n\t}\n\n\tstatic getBNodeResources( document:Class ):RDFNode.Class[] {\n\t\tlet resources:RDFNode.Class[] = Util.getResources( document );\n\n\t\tlet bnodes:RDFNode.Class[] = [];\n\t\tfor( let i:number = 0, length:number = resources.length; i < length; i++ ) {\n\t\t\tlet resource:RDFNode.Class = resources[i];\n\t\t\tif( ! ( \"@id\" in resource ) || URI.Util.isBNodeID( resource[\"@id\"] ) ) bnodes.push( resource );\n\t\t}\n\n\t\treturn bnodes;\n\t}\n}\n"],"sourceRoot":"/source/"}