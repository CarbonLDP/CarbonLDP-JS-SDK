{"version":3,"sources":["Document.ts"],"names":[],"mappings":"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","file":"Document.js","sourcesContent":["/// <reference path=\"./../typings/typings.d.ts\" />\n\nimport * as Errors from \"./Errors\";\nimport * as Fragment from \"./Fragment\";\nimport JSONLDConverter from \"./JSONLDConverter\";\nimport * as NamedFragment from \"./NamedFragment\";\nimport * as ObjectSchema from \"./ObjectSchema\";\nimport * as Pointer from \"./Pointer\";\nimport * as RDF from \"./RDF\";\nimport * as Resource from \"./Resource\";\nimport * as Utils from \"./Utils\";\n\nexport interface Class extends Resource.Class, Pointer.Library, Pointer.Validator {\n\t_fragmentsIndex:Map<string, Fragment.Class>;\n\n\thasFragment( slug:string ):boolean;\n\tgetFragment( slug:string ):Fragment.Class;\n\tgetNamedFragment( slug:string ):NamedFragment.Class;\n\tgetFragments():Fragment.Class[];\n\n\tcreateFragment():Fragment.Class;\n\tcreateFragment( slug:string ):NamedFragment.Class;\n\tcreateNamedFragment( slug:string ):NamedFragment.Class;\n\n\tremoveFragment( fragment:NamedFragment.Class ):void;\n\tremoveFragment( fragment:Fragment.Class ):void;\n\tremoveFragment( slug:string ):void;\n\tremoveFragment( fragmentOrSlug:any ):void;\n\n\ttoJSON( objectSchemaResolver:ObjectSchema.Resolver, jsonldConverter:JSONLDConverter ):string;\n\ttoJSON( objectSchemaResolver:ObjectSchema.Resolver ):string;\n\ttoJSON():string;\n}\n\nfunction hasPointer( id:string ):boolean {\n\tlet document:Class = <Class> this;\n\n\tif( id === document.id ) return true;\n\n\tif( ! document.inScope( id ) ) return false;\n\n\treturn document.hasFragment( id );\n}\n\nfunction getPointer( id:string ):Pointer.Class {\n\tlet document:Class = <Class> this;\n\n\tif( ! document.inScope( id ) ) return null;\n\n\tif( id === document.id ) return document;\n\n\tlet fragment:Fragment.Class = document.getFragment( id );\n\tfragment = ! fragment ? document.createFragment( id ) : fragment;\n\n\treturn fragment;\n}\n\nfunction inScope( pointer:Pointer.Class ):boolean;\nfunction inScope( id:string ):boolean;\nfunction inScope( idOrPointer:any ):boolean {\n\tlet document:Class = <Class> this;\n\n\tlet id:string = Pointer.Factory.is( idOrPointer ) ? idOrPointer.id : idOrPointer;\n\n\tif( id === document.id ) return true;\n\n\tif( RDF.URI.Util.isBNodeID( id ) ) return true;\n\n\tif( RDF.URI.Util.isFragmentOf( id, document.id ) ) return true;\n\n\treturn RDF.URI.Util.isRelative( id );\n}\n\nfunction hasFragment( id:string ):boolean {\n\tlet document:Class = <Class> this;\n\n\tif( ! document.inScope( id ) ) return false;\n\n\tif( RDF.URI.Util.hasFragment( id ) )\n\t\tid = RDF.URI.Util.getFragment( id );\n\n\treturn !! document._fragmentsIndex.has( id );\n}\nfunction getFragment( id:string ):Fragment.Class {\n\tlet document:Class = <Class> this;\n\n\tif( ! RDF.URI.Util.isBNodeID( id ) ) return document.getNamedFragment( id );\n\n\treturn document._fragmentsIndex.get( id ) || null;\n}\nfunction getNamedFragment( id:string ):NamedFragment.Class {\n\tlet document:Class = <Class> this;\n\n\tif( RDF.URI.Util.isBNodeID( id ) ) throw new Errors.IllegalArgumentError( \"Named fragments can't have a id that starts with '_:'.\" );\n\tif( RDF.URI.Util.isAbsolute( id ) ) {\n\t\tif( ! RDF.URI.Util.isFragmentOf( id, document.id ) ) throw new Errors.IllegalArgumentError( \"The id is out of scope.\" );\n\t\tid = RDF.URI.Util.hasFragment( id ) ? RDF.URI.Util.getFragment( id ) : id;\n\t} else if( Utils.S.startsWith( id, \"#\" ) ) id = id.substring( 1 );\n\n\treturn <NamedFragment.Class> document._fragmentsIndex.get( id ) || null;\n}\nfunction getFragments():Fragment.Class[] {\n\tlet document:Class = <Class> this;\n\treturn Utils.A.from( document._fragmentsIndex.values() );\n}\n\nfunction createFragment( slug:string ):Fragment.Class;\nfunction createFragment():Fragment.Class;\nfunction createFragment( slug?:string ):any {\n\tlet document:Class = <Class> this;\n\n\tlet id:string;\n\tif( slug ) {\n\t\tif( ! RDF.URI.Util.isBNodeID( slug ) ) return document.createNamedFragment( slug );\n\t\tid = slug;\n\t\tif( this._fragmentsIndex.has( id ) ) throw new Errors.IDAlreadyInUseError( \"The slug provided is already being used by a fragment.\" );\n\t} else {\n\t\tid = Fragment.Util.generateID();\n\t}\n\n\tlet fragment:Fragment.Class = Fragment.Factory.create( id, document );\n\n\tdocument._fragmentsIndex.set( id, fragment );\n\n\treturn fragment;\n}\nfunction createNamedFragment( slug:string ):NamedFragment.Class {\n\tlet document:Class = <Class> this;\n\n\tif( RDF.URI.Util.isBNodeID( slug ) ) throw new Errors.IllegalArgumentError( \"Named fragments can't have a slug that starts with '_:'.\" );\n\n\tif( RDF.URI.Util.isAbsolute( slug ) ) {\n\t\tif( ! RDF.URI.Util.isFragmentOf( slug, document.id ) ) throw new Errors.IllegalArgumentError( \"The slug is out of scope.\" );\n\t\tslug = RDF.URI.Util.hasFragment( slug ) ? RDF.URI.Util.getFragment( slug ) : slug;\n\t} else if( Utils.S.startsWith( slug, \"#\" ) ) slug = slug.substring( 1 );\n\n\tif( document._fragmentsIndex.has( slug ) ) throw new Errors.IDAlreadyInUseError( \"The slug provided is already being used by a fragment.\" );\n\n\tlet fragment:NamedFragment.Class = <NamedFragment.Class> NamedFragment.Factory.create( slug, document );\n\n\tdocument._fragmentsIndex.set( slug, fragment );\n\n\treturn fragment;\n}\n\nfunction removeFragment( fragment:NamedFragment.Class ):void;\nfunction removeFragment( fragment:Fragment.Class ):void;\nfunction removeFragment( slug:string ):void;\nfunction removeFragment( fragmentOrSlug:any ):void {\n\t// TODO: FT\n}\n\nfunction toJSON( objectSchemaResolver:ObjectSchema.Resolver, jsonLDConverter:JSONLDConverter ):string;\nfunction toJSON( objectSchemaResolver:ObjectSchema.Resolver ):string;\nfunction toJSON():string;\nfunction toJSON( objectSchemaResolver:ObjectSchema.Resolver = null, jsonldConverter:JSONLDConverter = null ):string {\n\tjsonldConverter = !! jsonldConverter ? jsonldConverter : new JSONLDConverter();\n\n\tlet resources:{ toJSON:() => string }[] = [];\n\tresources.push( this );\n\tresources = resources.concat( this.getFragments() );\n\n\tlet expandedResources:RDF.Node.Class[] = [];\n\tfor( let resource of resources ) {\n\t\tlet digestedContext:ObjectSchema.DigestedObjectSchema = objectSchemaResolver ? objectSchemaResolver.getSchemaFor( resource ) : new ObjectSchema.DigestedObjectSchema();\n\n\t\texpandedResources.push( jsonldConverter.expand( resource, digestedContext, this ) );\n\t}\n\n\tlet graph:RDF.Document.Class = {\n\t\t\"@id\": this.id,\n\t\t\"@graph\": expandedResources,\n\t};\n\n\treturn JSON.stringify( graph );\n}\n\nexport class Factory {\n\tstatic hasClassProperties( documentResource:Object ):boolean {\n\t\treturn (\n\t\t\tUtils.isObject( documentResource ) &&\n\n\t\t\tUtils.hasPropertyDefined( documentResource, \"_fragmentsIndex\" ) &&\n\n\t\t\tUtils.hasFunction( documentResource, \"hasFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"getFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"getNamedFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"getFragments\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"createFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"createNamedFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"removeFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"toJSON\" )\n\t\t);\n\t}\n\n\tstatic create( uri:string ):Class;\n\tstatic create():Class;\n\tstatic create( uri:string = null ):Class {\n\t\treturn this.createFrom( {}, uri );\n\t}\n\n\tstatic createFrom<T extends Object>( object:T, uri:string ):T & Class;\n\tstatic createFrom<T extends Object>( object:T ):T & Class;\n\tstatic createFrom<T extends Object>( object:T, uri:string = null ):T & Class {\n\t\tif( !! uri && RDF.URI.Util.isBNodeID( uri ) ) throw new Errors.IllegalArgumentError( \"Documents cannot have a BNodeID as a uri.\" );\n\n\t\tlet resource:Resource.Class = Resource.Factory.createFrom( object, uri );\n\n\t\tlet document:Class = this.decorate( resource );\n\n\t\treturn <any> document;\n\t}\n\n\tstatic decorate<T extends Object>( object:T ):T & Class {\n\t\tif( this.hasClassProperties( object ) ) return <any> object;\n\n\t\tObject.defineProperties( object, {\n\t\t\t\"_fragmentsIndex\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: new Map<string, Fragment.Class>(),\n\t\t\t},\n\t\t\t\"hasPointer\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: hasPointer,\n\t\t\t},\n\t\t\t\"getPointer\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getPointer,\n\t\t\t},\n\t\t\t\"inScope\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: inScope,\n\t\t\t},\n\t\t\t\"hasFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: hasFragment,\n\t\t\t},\n\t\t\t\"getFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getFragment,\n\t\t\t},\n\t\t\t\"getNamedFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getNamedFragment,\n\t\t\t},\n\t\t\t\"getFragments\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getFragments,\n\t\t\t},\n\t\t\t\"createFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: createFragment,\n\t\t\t},\n\t\t\t\"createNamedFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: createNamedFragment,\n\t\t\t},\n\t\t\t\"removeFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: removeFragment,\n\t\t\t},\n\t\t\t\"toJSON\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: toJSON,\n\t\t\t},\n\t\t} );\n\n\t\treturn <any> object;\n\t}\n}\n\nexport default Class;\n"],"sourceRoot":"/source/"}