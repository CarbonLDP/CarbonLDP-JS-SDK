{"version":3,"sources":["Document.ts"],"names":["hasPointer","getPointer","inScope","hasFragment","getFragment","getNamedFragment","getFragments","createFragment","createNamedFragment","removeFragment","toJSON","Factory","Factory.constructor","Factory.hasClassProperties","Factory.create","Factory.createFrom","Factory.decorate"],"mappings":"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","file":"Document.js","sourcesContent":["/// <reference path=\"./../typings/typings.d.ts\" />\n\nimport * as Errors from \"./Errors\";\nimport * as Fragment from \"./Fragment\";\nimport JSONLDConverter from \"./JSONLDConverter\";\nimport * as NamedFragment from \"./NamedFragment\";\nimport * as ObjectSchema from \"./ObjectSchema\";\nimport * as Pointer from \"./Pointer\";\nimport * as RDF from \"./RDF\";\nimport * as Resource from \"./Resource\";\nimport * as Utils from \"./Utils\";\n\nexport interface Class extends Resource.Class, Pointer.Library, Pointer.Validator {\n\t_fragmentsIndex:Map<string, Fragment.Class>;\n\n\thasFragment( slug:string ):boolean;\n\tgetFragment( slug:string ):Fragment.Class;\n\tgetNamedFragment( slug:string ):NamedFragment.Class;\n\tgetFragments():Fragment.Class[];\n\n\tcreateFragment():Fragment.Class;\n\tcreateFragment( slug:string ):NamedFragment.Class;\n\tcreateNamedFragment( slug:string ):NamedFragment.Class;\n\n\tremoveFragment( fragment:NamedFragment.Class ):void;\n\tremoveFragment( fragment:Fragment.Class ):void;\n\tremoveFragment( slug:string ):void;\n\tremoveFragment( fragmentOrSlug:any ):void;\n\n\ttoJSON( objectSchemaResolver:ObjectSchema.Resolver, jsonldConverter:JSONLDConverter ):string;\n\ttoJSON( objectSchemaResolver:ObjectSchema.Resolver ):string;\n\ttoJSON():string;\n}\n\nfunction hasPointer( id:string ):boolean {\n\tlet document:Class = <Class> this;\n\n\tif( id === document.id ) return true;\n\n\tif( ! document.inScope( id ) ) return false;\n\n\treturn !! document.getFragment( id );\n}\n\nfunction getPointer( id:string ):Pointer.Class {\n\tlet document:Class = <Class> this;\n\n\tif( ! document.inScope( id ) ) return null;\n\n\tif( id === document.id ) return document;\n\n\tlet fragment:Fragment.Class = document.getFragment( id );\n\tfragment = ! fragment ? document.createFragment( id ) : fragment;\n\n\treturn fragment;\n}\n\nfunction inScope( pointer:Pointer.Class ):boolean;\nfunction inScope( id:string ):boolean;\nfunction inScope( idOrPointer:any ):boolean {\n\tlet document:Class = <Class> this;\n\n\tlet id:string = Pointer.Factory.is( idOrPointer ) ? idOrPointer.id : idOrPointer;\n\n\tif( id === document.id ) return true;\n\n\tif( RDF.URI.Util.isBNodeID( id ) ) return true;\n\n\tif( RDF.URI.Util.isFragmentOf( id, document.id ) ) return true;\n\n\treturn Utils.S.startsWith( id, \"#\" );\n}\n\nfunction hasFragment( id:string ):boolean {\n\tlet document:Class = <Class> this;\n\n\tif( RDF.URI.Util.isRelative( id ) && ! Utils.S.startsWith( id, \"#\" ) )\n\t\tid = \"#\" + id;\n\n\tif( ! document.inScope( id ) && ! RDF.URI.Util.hasFragment( id ) ) return false;\n\n\tid = RDF.URI.Util.getFragment( id );\n\treturn !! document._fragmentsIndex.has( id );\n}\nfunction getFragment( id:string ):Fragment.Class {\n\tlet document:Class = <Class> this;\n\n\tif( ! RDF.URI.Util.isBNodeID( id ) ) return document.getNamedFragment( id );\n\n\treturn document._fragmentsIndex.get( id ) || null;\n}\nfunction getNamedFragment( id:string ):NamedFragment.Class {\n\tlet document:Class = <Class> this;\n\n\tif( RDF.URI.Util.isBNodeID( id ) ) throw new Errors.IllegalArgumentError( \"Named fragments can't have a id that starts with '_:'.\" );\n\tif( RDF.URI.Util.isAbsolute( id ) ) {\n\t\tif( ! RDF.URI.Util.isFragmentOf( id, document.id ) ) throw new Errors.IllegalArgumentError( \"The id is out of scope.\" );\n\t\tid = RDF.URI.Util.hasFragment( id ) ? RDF.URI.Util.getFragment( id ) : id;\n\t} else if( Utils.S.startsWith( id, \"#\" ) ) id = id.substring( 1 );\n\n\treturn <NamedFragment.Class> document._fragmentsIndex.get( id ) || null;\n}\nfunction getFragments():Fragment.Class[] {\n\tlet document:Class = <Class> this;\n\treturn Utils.A.from( document._fragmentsIndex.values() );\n}\n\nfunction createFragment( slug:string ):Fragment.Class;\nfunction createFragment():Fragment.Class;\nfunction createFragment( slug?:string ):any {\n\tlet document:Class = <Class> this;\n\n\tlet id:string;\n\tif( slug ) {\n\t\tif( ! RDF.URI.Util.isBNodeID( slug ) ) return document.createNamedFragment( slug );\n\t\tid = slug;\n\t\tif( this._fragmentsIndex.has( id ) ) throw new Errors.IDAlreadyInUseError( \"The slug provided is already being used by a fragment.\" );\n\t} else {\n\t\tid = Fragment.Util.generateID();\n\t}\n\n\tlet fragment:Fragment.Class = Fragment.Factory.create( id, document );\n\n\tdocument._fragmentsIndex.set( id, fragment );\n\n\treturn fragment;\n}\nfunction createNamedFragment( slug:string ):NamedFragment.Class {\n\tlet document:Class = <Class> this;\n\n\tif( RDF.URI.Util.isBNodeID( slug ) ) throw new Errors.IllegalArgumentError( \"Named fragments can't have a slug that starts with '_:'.\" );\n\n\tif( RDF.URI.Util.isAbsolute( slug ) ) {\n\t\tif( ! RDF.URI.Util.isFragmentOf( slug, document.id ) ) throw new Errors.IllegalArgumentError( \"The slug is out of scope.\" );\n\t\tslug = RDF.URI.Util.hasFragment( slug ) ? RDF.URI.Util.getFragment( slug ) : slug;\n\t} else if( Utils.S.startsWith( slug, \"#\" ) ) slug = slug.substring( 1 );\n\n\tif( document._fragmentsIndex.has( slug ) ) throw new Errors.IDAlreadyInUseError( \"The slug provided is already being used by a fragment.\" );\n\n\tlet fragment:NamedFragment.Class = <NamedFragment.Class> NamedFragment.Factory.create( slug, document );\n\n\tdocument._fragmentsIndex.set( slug, fragment );\n\n\treturn fragment;\n}\n\nfunction removeFragment( fragment:NamedFragment.Class ):void;\nfunction removeFragment( fragment:Fragment.Class ):void;\nfunction removeFragment( slug:string ):void;\nfunction removeFragment( fragmentOrSlug:any ):void {\n\t// TODO: FT\n}\n\nfunction toJSON( objectSchemaResolver:ObjectSchema.Resolver, jsonLDConverter:JSONLDConverter ):string;\nfunction toJSON( objectSchemaResolver:ObjectSchema.Resolver ):string;\nfunction toJSON():string;\nfunction toJSON( objectSchemaResolver:ObjectSchema.Resolver = null, jsonldConverter:JSONLDConverter = null ):string {\n\tjsonldConverter = !! jsonldConverter ? jsonldConverter : new JSONLDConverter();\n\n\tlet resources:{ toJSON:() => string }[] = [];\n\tresources.push( this );\n\tresources = resources.concat( this.getFragments() );\n\n\tlet expandedResources:RDF.Node.Class[] = [];\n\tfor( let resource of resources ) {\n\t\tlet digestedContext:ObjectSchema.DigestedObjectSchema = objectSchemaResolver ? objectSchemaResolver.getSchemaFor( resource ) : new ObjectSchema.DigestedObjectSchema();\n\n\t\texpandedResources.push( jsonldConverter.expand( resource, digestedContext, this ) );\n\t}\n\n\tlet graph:RDF.Document.Class = {\n\t\t\"@id\": this.id,\n\t\t\"@graph\": expandedResources,\n\t};\n\n\treturn JSON.stringify( graph );\n}\n\nexport class Factory {\n\tstatic hasClassProperties( documentResource:Object ):boolean {\n\t\treturn (\n\t\t\tUtils.isObject( documentResource ) &&\n\n\t\t\tUtils.hasPropertyDefined( documentResource, \"_fragmentsIndex\" ) &&\n\n\t\t\tUtils.hasFunction( documentResource, \"hasFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"getFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"getNamedFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"getFragments\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"createFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"createNamedFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"removeFragment\" ) &&\n\t\t\tUtils.hasFunction( documentResource, \"toJSON\" )\n\t\t);\n\t}\n\n\tstatic create( uri:string ):Class;\n\tstatic create():Class;\n\tstatic create( uri:string = null ):Class {\n\t\treturn this.createFrom( {}, uri );\n\t}\n\n\tstatic createFrom<T extends Object>( object:T, uri:string ):T & Class;\n\tstatic createFrom<T extends Object>( object:T ):T & Class;\n\tstatic createFrom<T extends Object>( object:T, uri:string = null ):T & Class {\n\t\tif( !! uri && RDF.URI.Util.isBNodeID( uri ) ) throw new Errors.IllegalArgumentError( \"Documents cannot have a BNodeID as a uri.\" );\n\n\t\tlet resource:Resource.Class = Resource.Factory.createFrom( object, uri );\n\n\t\tlet document:Class = this.decorate( resource );\n\n\t\treturn <any> document;\n\t}\n\n\tstatic decorate<T extends Object>( object:T ):T & Class {\n\t\tif( this.hasClassProperties( object ) ) return <any> object;\n\n\t\tObject.defineProperties( object, {\n\t\t\t\"_fragmentsIndex\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: new Map<string, Fragment.Class>(),\n\t\t\t},\n\t\t\t\"hasPointer\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: hasPointer,\n\t\t\t},\n\t\t\t\"getPointer\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getPointer,\n\t\t\t},\n\t\t\t\"inScope\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: inScope,\n\t\t\t},\n\t\t\t\"hasFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: hasFragment,\n\t\t\t},\n\t\t\t\"getFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getFragment,\n\t\t\t},\n\t\t\t\"getNamedFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getNamedFragment,\n\t\t\t},\n\t\t\t\"getFragments\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getFragments,\n\t\t\t},\n\t\t\t\"createFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: createFragment,\n\t\t\t},\n\t\t\t\"createNamedFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: createNamedFragment,\n\t\t\t},\n\t\t\t\"removeFragment\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: removeFragment,\n\t\t\t},\n\t\t\t\"toJSON\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: toJSON,\n\t\t\t},\n\t\t} );\n\n\t\treturn <any> object;\n\t}\n}\n\nexport default Class;\n"],"sourceRoot":"/source/"}