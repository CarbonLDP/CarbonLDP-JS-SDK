{"version":3,"sources":["Pointer.ts"],"names":["Factory","Factory.constructor","Factory.hasClassProperties","Factory.is","Factory.create","Factory.decorate","Util","Util.constructor","Util.getIDs","Util.resolveAll"],"mappings":"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","file":"Pointer.js","sourcesContent":["import * as HTTP from \"./HTTP\";\nimport * as Utils from \"./Utils\";\n\nexport interface Class {\n\t_id:string;\n\t_resolved:boolean;\n\n\tid:string;\n\tisResolved():boolean;\n\tresolve():Promise<[ Class, HTTP.Response.Class ]>;\n}\n\nexport interface Library {\n\thasPointer( id:string ):boolean;\n\tgetPointer( id:string ):Class;\n}\n\nexport class Factory {\n\tstatic hasClassProperties( object:Object ):boolean {\n\t\treturn !! (\n\t\t\tUtils.hasPropertyDefined( object, \"_id\" ) &&\n\t\t\tUtils.hasPropertyDefined( object, \"_resolved\" ) &&\n\n\t\t\tUtils.hasPropertyDefined( object, \"id\" ) &&\n\t\t\tUtils.hasFunction( object, \"isResolved\" ) &&\n\t\t\tUtils.hasPropertyDefined( object, \"resolve\" )\n\t\t);\n\t}\n\n\tstatic is( value:any ):boolean {\n\t\treturn !! (\n\t\t\tUtils.isObject( value ) &&\n\t\t\tFactory.hasClassProperties( value )\n\t\t);\n\t}\n\n\tstatic create( id:string ):Class {\n\t\tid = !! id ? id : \"\";\n\n\t\tlet pointer:Class = Factory.decorate( {} );\n\t\tpointer.id = id;\n\n\t\treturn pointer;\n\t}\n\n\tstatic decorate<T extends Object>( object:T ):Class {\n\t\tif( Factory.hasClassProperties( object ) ) return <any> object;\n\n\t\tObject.defineProperties( object, {\n\t\t\t\"_id\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: \"\",\n\t\t\t},\n\t\t\t\"_resolved\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: false,\n\t\t\t},\n\t\t\t\"id\": {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tget: function():string {\n\t\t\t\t\tif( ! this._id ) return \"\";\n\t\t\t\t\treturn this._id;\n\t\t\t\t},\n\t\t\t\tset: function( value:string ):void {\n\t\t\t\t\tthis._id = value;\n\t\t\t\t},\n\t\t\t},\n\t\t\t\"isResolved\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: function():boolean {\n\t\t\t\t\treturn this._resolved;\n\t\t\t\t},\n\t\t\t},\n\t\t\t\"resolve\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: function():Promise<void> {\n\t\t\t\t\treturn new Promise( ( resolve:( result:any ) => void, reject:( error:any ) => void ):any => {\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t} );\n\n\t\treturn <any> object;\n\t}\n}\n\nexport class Util {\n\tstatic getIDs( pointers:Class[] ):string[] {\n\t\tlet ids:string[] = [];\n\t\tfor( let pointer of pointers ) {\n\t\t\tids.push( pointer.id );\n\t\t}\n\t\treturn ids;\n\t}\n\n\tstatic resolveAll( pointers:Class[] ):Promise<[ Class[], HTTP.Response.Class[] ]> {\n\t\tlet promises:Promise<[ Class, HTTP.Response.Class ]>[] = pointers.map( ( pointer:Class ) => pointer.resolve() );\n\t\treturn Promise.all( promises ).then( ( results:Array<Array<any>> ) => {\n\t\t\tlet resolvedPointers:Class[] = results.map( ( result:Array<any> ) => result[0] );\n\t\t\tlet responses:HTTP.Response.Class[] = results.map( ( result:Array<any> ) => result[1] );\n\n\t\t\treturn [ resolvedPointers, responses ];\n\t\t});\n\t}\n}\n\nexport interface Validator {\n\tinScope( id:string ):boolean;\n\tinScope( pointer:Class ):boolean;\n}\n\nexport default Class;\n"],"sourceRoot":"/source/"}