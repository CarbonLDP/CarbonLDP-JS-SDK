{"version":3,"sources":["Pointer.ts"],"names":[],"mappings":";;;;;;;;;;;YAiBA;gBAAA;gBA6EA,CAAC;gBA5EO,0BAAkB,GAAzB,UAA2B,MAAa;oBACvC,MAAM,CAAC,CAAC,CAAE,CACT,KAAK,CAAC,kBAAkB,CAAE,MAAM,EAAE,KAAK,CAAE;wBACzC,KAAK,CAAC,kBAAkB,CAAE,MAAM,EAAE,WAAW,CAAE;wBAE/C,KAAK,CAAC,kBAAkB,CAAE,MAAM,EAAE,IAAI,CAAE;wBACxC,KAAK,CAAC,WAAW,CAAE,MAAM,EAAE,YAAY,CAAE;wBACzC,KAAK,CAAC,kBAAkB,CAAE,MAAM,EAAE,SAAS,CAAE,CAC7C,CAAC;gBACH,CAAC;gBAEM,UAAE,GAAT,UAAW,KAAS;oBACnB,MAAM,CAAC,CAAC,CAAE,CACT,KAAK,CAAC,QAAQ,CAAE,KAAK,CAAE;wBACvB,OAAO,CAAC,kBAAkB,CAAE,KAAK,CAAE,CACnC,CAAC;gBACH,CAAC;gBAEM,cAAM,GAAb,UAAe,EAAS;oBACvB,EAAE,GAAG,CAAC,CAAE,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;oBAErB,IAAI,OAAO,GAAS,OAAO,CAAC,QAAQ,CAAE,EAAE,CAAE,CAAC;oBAC3C,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC;oBAEhB,MAAM,CAAC,OAAO,CAAC;gBAChB,CAAC;gBAEM,gBAAQ,GAAf,UAAmC,MAAQ;oBAC1C,EAAE,CAAA,CAAE,OAAO,CAAC,kBAAkB,CAAE,MAAM,CAAG,CAAC;wBAAC,MAAM,CAAO,MAAM,CAAC;oBAE/D,MAAM,CAAC,gBAAgB,CAAE,MAAM,EAAE;wBAChC,KAAK,EAAE;4BACN,QAAQ,EAAE,IAAI;4BACd,UAAU,EAAE,KAAK;4BACjB,YAAY,EAAE,IAAI;4BAClB,KAAK,EAAE,EAAE;yBACT;wBACD,WAAW,EAAE;4BACZ,QAAQ,EAAE,IAAI;4BACd,UAAU,EAAE,KAAK;4BACjB,YAAY,EAAE,IAAI;4BAClB,KAAK,EAAE,KAAK;yBACZ;wBACD,IAAI,EAAE;4BACL,UAAU,EAAE,KAAK;4BACjB,YAAY,EAAE,IAAI;4BAClB,GAAG,EAAE;gCACJ,EAAE,CAAA,CAAE,CAAE,IAAI,CAAC,GAAI,CAAC;oCAAC,MAAM,CAAC,EAAE,CAAC;gCAC3B,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC;4BACjB,CAAC;4BACD,GAAG,EAAE,UAAU,KAAY;gCAC1B,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;4BAClB,CAAC;yBACD;wBACD,YAAY,EAAE;4BACb,QAAQ,EAAE,KAAK;4BACf,UAAU,EAAE,KAAK;4BACjB,YAAY,EAAE,IAAI;4BAClB,KAAK,EAAE;gCACN,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;4BACvB,CAAC;yBACD;wBACD,SAAS,EAAE;4BACV,QAAQ,EAAE,KAAK;4BACf,UAAU,EAAE,KAAK;4BACjB,YAAY,EAAE,IAAI;4BAClB,KAAK,EAAE;gCAAA,iBAIN;gCAHA,MAAM,CAAC,IAAI,OAAO,CAAE,UAAE,OAA8B,EAAE,MAA4B;oCACjF,MAAM,CAAC,KAAI,CAAC;gCACb,CAAC,CAAC,CAAC;4BACJ,CAAC;yBACD;qBACD,CAAE,CAAC;oBAEJ,MAAM,CAAO,MAAM,CAAC;gBACrB,CAAC;gBACF,cAAC;YAAD,CA7EA,AA6EC,IAAA;YA7ED,6BA6EC,CAAA;YAED;gBAAA;gBAkBA,CAAC;gBAjBO,WAAM,GAAb,UAAe,QAAgB;oBAC9B,IAAI,GAAG,GAAY,EAAE,CAAC;oBACtB,GAAG,CAAA,CAAiB,UAAQ,EAAR,qBAAQ,EAAR,sBAAQ,EAAR,IAAS,CAAC;wBAAzB,IAAI,OAAO,iBAAA;wBACf,GAAG,CAAC,IAAI,CAAE,OAAO,CAAC,EAAE,CAAE,CAAC;qBACvB;oBACD,MAAM,CAAC,GAAG,CAAC;gBACZ,CAAC;gBAEM,eAAU,GAAjB,UAAmB,QAAgB;oBAClC,IAAI,QAAQ,GAA6C,QAAQ,CAAC,GAAG,CAAE,UAAE,OAAa,IAAM,OAAA,OAAO,CAAC,OAAO,EAAE,EAAjB,CAAiB,CAAE,CAAC;oBAChH,MAAM,CAAC,OAAO,CAAC,GAAG,CAAE,QAAQ,CAAE,CAAC,IAAI,CAAE,UAAE,OAAyB;wBAC/D,IAAI,gBAAgB,GAAW,OAAO,CAAC,GAAG,CAAE,UAAE,MAAiB,IAAM,OAAA,MAAM,CAAC,CAAC,CAAC,EAAT,CAAS,CAAE,CAAC;wBACjF,IAAI,SAAS,GAAyB,OAAO,CAAC,GAAG,CAAE,UAAE,MAAiB,IAAM,OAAA,MAAM,CAAC,CAAC,CAAC,EAAT,CAAS,CAAE,CAAC;wBAExF,MAAM,CAAC,CAAE,gBAAgB,EAAE,SAAS,CAAE,CAAC;oBACxC,CAAC,CAAC,CAAC;gBACJ,CAAC;gBACF,WAAC;YAAD,CAlBA,AAkBC,IAAA;YAlBD,uBAkBC,CAAA","file":"Pointer.js","sourcesContent":["import * as HTTP from \"./HTTP\";\nimport * as Utils from \"./Utils\";\n\nexport interface Class {\n\t_id:string;\n\t_resolved:boolean;\n\n\tid:string;\n\tisResolved():boolean;\n\tresolve():Promise<[ Class, HTTP.Response.Class ]>;\n}\n\nexport interface Library {\n\thasPointer( id:string ):boolean;\n\tgetPointer( id:string ):Class;\n}\n\nexport class Factory {\n\tstatic hasClassProperties( object:Object ):boolean {\n\t\treturn !! (\n\t\t\tUtils.hasPropertyDefined( object, \"_id\" ) &&\n\t\t\tUtils.hasPropertyDefined( object, \"_resolved\" ) &&\n\n\t\t\tUtils.hasPropertyDefined( object, \"id\" ) &&\n\t\t\tUtils.hasFunction( object, \"isResolved\" ) &&\n\t\t\tUtils.hasPropertyDefined( object, \"resolve\" )\n\t\t);\n\t}\n\n\tstatic is( value:any ):boolean {\n\t\treturn !! (\n\t\t\tUtils.isObject( value ) &&\n\t\t\tFactory.hasClassProperties( value )\n\t\t);\n\t}\n\n\tstatic create( id:string ):Class {\n\t\tid = !! id ? id : \"\";\n\n\t\tlet pointer:Class = Factory.decorate( {} );\n\t\tpointer.id = id;\n\n\t\treturn pointer;\n\t}\n\n\tstatic decorate<T extends Object>( object:T ):Class {\n\t\tif( Factory.hasClassProperties( object ) ) return <any> object;\n\n\t\tObject.defineProperties( object, {\n\t\t\t\"_id\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: \"\",\n\t\t\t},\n\t\t\t\"_resolved\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: false,\n\t\t\t},\n\t\t\t\"id\": {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tget: function():string {\n\t\t\t\t\tif( ! this._id ) return \"\";\n\t\t\t\t\treturn this._id;\n\t\t\t\t},\n\t\t\t\tset: function( value:string ):void {\n\t\t\t\t\tthis._id = value;\n\t\t\t\t},\n\t\t\t},\n\t\t\t\"isResolved\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: function():boolean {\n\t\t\t\t\treturn this._resolved;\n\t\t\t\t},\n\t\t\t},\n\t\t\t\"resolve\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: function():Promise<void> {\n\t\t\t\t\treturn new Promise( ( resolve:( result:any ) => void, reject:( error:any ) => void ):any => {\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t} );\n\n\t\treturn <any> object;\n\t}\n}\n\nexport class Util {\n\tstatic getIDs( pointers:Class[] ):string[] {\n\t\tlet ids:string[] = [];\n\t\tfor( let pointer of pointers ) {\n\t\t\tids.push( pointer.id );\n\t\t}\n\t\treturn ids;\n\t}\n\n\tstatic resolveAll( pointers:Class[] ):Promise<[ Class[], HTTP.Response.Class[] ]> {\n\t\tlet promises:Promise<[ Class, HTTP.Response.Class ]>[] = pointers.map( ( pointer:Class ) => pointer.resolve() );\n\t\treturn Promise.all( promises ).then( ( results:Array<Array<any>> ) => {\n\t\t\tlet resolvedPointers:Class[] = results.map( ( result:Array<any> ) => result[0] );\n\t\t\tlet responses:HTTP.Response.Class[] = results.map( ( result:Array<any> ) => result[1] );\n\n\t\t\treturn [ resolvedPointers, responses ];\n\t\t});\n\t}\n}\n\nexport interface Validator {\n\tinScope( id:string ):boolean;\n\tinScope( pointer:Class ):boolean;\n}\n\nexport default Class;\n"],"sourceRoot":"/source/"}