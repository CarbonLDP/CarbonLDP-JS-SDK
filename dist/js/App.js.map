{"version":3,"sources":["App.ts"],"names":["Class","Class.constructor","Class.resolve","Class.getBase","Factory","Factory.constructor","Factory.is","Factory.from","Factory.hasRDFClass","Factory.hasClassProperties","Factory.injectBehaviour"],"mappings":"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","file":"App.js","sourcesContent":["/// <reference path=\"../typings/es6/es6.d.ts\" />\n\nimport * as NS from './NS';\nimport Documents from './Documents';\nimport Parent from './Parent';\nimport * as RDF from './RDF';\nimport * as LDP from './LDP';\nimport * as Utils from './Utils';\n\nexport interface Resource extends RDF.Resource.Class {\n\trootContainer:string;\n}\n\nexport const RDFClass:string = NS.CS.Class.Application;\n\nexport const Definition:Map<string, RDF.PropertyDescription> = <any> Utils.M.from( {\n\t\"rootContainer\": {\n\t\t\"uri\": NS.CS.Predicate.rootContainer,\n\t\t\"multi\": false,\n\t\t\"literal\": false\n\t}\n} );\n\nexport class Class extends Parent {\n\tprivate resource:Resource;\n\tprivate base:string;\n\n\tconstructor( parent:Parent, resource:Resource ) {\n\t\tsuper();\n\n\t\tthis.parent = parent;\n\t\tthis.resource = resource;\n\n\t\tthis.base = this.getBase( this.resource );\n\t}\n\n\tresolve( uri:string ):string {\n\t\tif ( RDF.URI.Util.isAbsolute( uri ) ) return uri;\n\n\t\tvar finalURI:string = this.parent.resolve( this.base );\n\t\treturn RDF.URI.Util.resolve( finalURI, uri );\n\t}\n\n\tprivate getBase( resource:Resource ):string {\n\t\tvar rootContainerURI = RDF.URI.Util.removeProtocol( resource.rootContainer );\n\t\tvar parentBase = RDF.URI.Util.removeProtocol( this.parent.resolve( \"\" ) );\n\t\tif ( Utils.S.startsWith( rootContainerURI, parentBase ) ) rootContainerURI = rootContainerURI.substr( parentBase.length, rootContainerURI.length );\n\t\treturn rootContainerURI;\n\t}\n}\n\nexport class Factory extends LDP.RDFSource.Factory {\n\tis( object:Object ):boolean {\n\t\t//@formatter:off\n\t\treturn (\n\t\t\tsuper.is( object ) &&\n\t\t\tUtils.hasPropertyDefined( object, \"rootContainer\" )\n\t\t);\n\t\t//@formatter:on\n\t}\n\n\tfrom( resource:RDF.Node.Class ):Resource;\n\tfrom( resources:RDF.Node.Class[] ):Resource[];\n\tfrom( resourceOrResources:any ):any {\n\t\tvar superResult:(RDF.Resource.Class | RDF.Resource.Class[]) = super.from( resourceOrResources );\n\t\tvar resources:RDF.Resource.Class[] = Utils.isArray( superResult ) ? <RDF.Resource.Class[]> superResult : <RDF.Resource.Class[]> [ superResult ];\n\n\t\tfor ( let i:number = 0, length:number = resources.length; i < length; i ++ ) {\n\t\t\tvar resource:RDF.Resource.Class = resources[ i ];\n\t\t\tif ( ! this.hasClassProperties( resource ) ) this.injectBehaviour( resource );\n\t\t}\n\n\t\tif ( Utils.isArray( resourceOrResources ) ) return <Resource[]> resources;\n\t\telse return <Resource> resources[ 0 ];\n\t}\n\n\tprotected hasRDFClass( resource:RDF.Resource.Class ):boolean {\n\t\treturn (\n\t\t\tresource.types.indexOf( RDFClass ) !== - 1\n\t\t);\n\t}\n\n\tprotected hasClassProperties( resource:RDF.Node.Class ):boolean {\n\t\treturn (\n\t\t\tUtils.hasPropertyDefined( resource, \"memberOfRelation\" ) &&\n\t\t\tUtils.hasPropertyDefined( resource, \"hasMemberRelation\" )\n\t\t);\n\t}\n\n\tprotected injectBehaviour( resource:RDF.Resource.Class ):Resource {\n\t\tRDF.Resource.Factory.injectDescriptions( resource, Definition );\n\n\t\treturn <Resource> resource;\n\t}\n}\n\nexport var factory = new Factory();\n\nexport default Class;"],"sourceRoot":"/source/"}