{"version":3,"sources":["App.ts"],"names":["Class","Class.constructor","Class.resolve","Class.getBase","Factory","Factory.constructor","Factory.hasClassProperties","Factory.is","Factory.injectBehavior"],"mappings":"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","file":"App.js","sourcesContent":["/// <reference path=\"../typings/es6/es6.d.ts\" />\n\nimport * as NS from \"./NS\";\nimport Documents from \"./Documents\";\nimport Context from \"./Context\";\nimport * as RDF from \"./RDF\";\nimport * as LDP from \"./LDP\";\nimport * as Utils from \"./Utils\";\n\nexport interface Resource extends RDF.Resource.Class {\n\trootContainer:string;\n}\n\nexport const RDF_CLASS:string = NS.CS.Class.Application;\n\nexport const DEFINITION:Map<string, RDF.PropertyDescription> = <any> Utils.M.from( {\n\t\"rootContainer\": {\n\t\t\"uri\": NS.CS.Predicate.rootContainer,\n\t\t\"multi\": false,\n\t\t\"literal\": false,\n\t},\n} );\n\nexport class Class extends Context {\n\tprivate resource:Resource;\n\tprivate base:string;\n\n\tconstructor( parentContext:Context, resource:Resource ) {\n\t\tsuper();\n\n\t\tthis.parentContext = parentContext;\n\t\tthis.resource = resource;\n\n\t\tthis.base = this.getBase( this.resource );\n\t}\n\n\tresolve( uri:string ):string {\n\t\tif ( RDF.URI.Util.isAbsolute( uri ) ) return uri;\n\n\t\tlet finalURI:string = this.parentContext.resolve( this.base );\n\t\treturn RDF.URI.Util.resolve( finalURI, uri );\n\t}\n\n\tprivate getBase( resource:Resource ):string {\n\t\tlet rootContainerURI:string = RDF.URI.Util.removeProtocol( resource.rootContainer );\n\t\tlet parentBase:string = RDF.URI.Util.removeProtocol( this.parentContext.resolve( \"\" ) );\n\t\tif ( Utils.S.startsWith( rootContainerURI, parentBase ) ) rootContainerURI = rootContainerURI.substr( parentBase.length, rootContainerURI.length );\n\t\treturn rootContainerURI;\n\t}\n}\n\nexport class Factory extends RDF.AbstractInjector<Resource> {\n\tconstructor() {\n\t\tsuper( RDF_CLASS, [ LDP.RDFSource.injector ] );\n\t}\n\n\thasClassProperties( resource:Object ):boolean {\n\t\treturn (\n\t\t\tUtils.hasPropertyDefined( resource, \"rootContainer\" )\n\t\t);\n\t}\n\n\tis( object:Object ):boolean {\n\t\treturn (\n\t\t\tsuper.is( object ) &&\n\t\t\tthis.hasClassProperties( object )\n\t\t);\n\t}\n\n\n\tprotected injectBehavior<T extends RDF.Resource.Class>( resource:T ):( T & Resource ) {\n\t\tRDF.Resource.Factory.injectDescriptions( resource, DEFINITION );\n\t\treturn <any> resource;\n\t}\n}\n\nexport let factory:Factory = new Factory();\n\nexport default Class;\n"],"sourceRoot":"/source/"}