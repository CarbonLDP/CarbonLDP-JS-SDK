{"version":3,"sources":["Auth/BasicAuthenticator.ts"],"names":["Class","Class.constructor","Class.isAuthenticated","Class.authenticate","Class.addAuthentication","Class.clearAuthentication","Class.addBasicAuthenticationHeader"],"mappings":"AAAA,IAAY,IAAI,WAAM,WAAW,CAAC,CAAA;AAElC,IAAY,MAAM,WAAM,aAAa,CAAC,CAAA;AAQtC;IAAAA;IAkDAC,CAACA;IA/CAD,+BAAeA,GAAfA;QACCE,MAAMA,CAACA,IAAIA,CAACA,WAAWA,KAAKA,IAAIA,CAACA;IAClCA,CAACA;IAEDF,4BAAYA,GAAZA,UAAcA,mBAA4CA;QAA1DG,iBAgBCA;QAfAA,EAAEA,CAAAA,CAAEA,mBAAmBA,KAAKA,IAAKA,CAACA;YAACA,MAAMA,IAAIA,MAAMA,CAACA,oBAAoBA,CAAEA,yCAAyCA,CAAEA,CAACA;QAEtHA,MAAMA,CAACA,IAAIA,OAAOA,CAAQA,UAAEA,OAAkBA,EAAEA,MAA4BA;YAC3EA,EAAEA,CAAAA,CAAEA,CAAEA,mBAAmBA,CAACA,QAASA,CAACA;gBAACA,MAAMA,IAAIA,MAAMA,CAACA,oBAAoBA,CAAEA,+BAA+BA,CAAEA,CAACA;YAC9GA,EAAEA,CAAAA,CAAEA,CAAEA,mBAAmBA,CAACA,QAASA,CAACA;gBAACA,MAAMA,IAAIA,MAAMA,CAACA,oBAAoBA,CAAEA,+BAA+BA,CAAEA,CAACA;YAE9GA,yDAAyDA;YAEzDA,KAAIA,CAACA,WAAWA,GAAGA;gBAClBA,QAAQA,EAAEA,mBAAmBA,CAACA,QAAQA;gBACtCA,QAAQA,EAAEA,mBAAmBA,CAACA,QAAQA;aACtCA,CAACA;YAEFA,OAAOA,EAAEA,CAACA;QACXA,CAACA,CAACA,CAACA;IACJA,CAACA;IAEDH,iCAAiBA,GAAjBA,UAAmBA,cAAmCA;QACrDI,IAAIA,OAAOA,GAAkCA,cAAcA,CAACA,OAAOA,GAAGA,cAAcA,CAACA,OAAOA,GAAGA,cAAcA,CAACA,OAAOA,GAAGA,IAAIA,GAAGA,EAA6BA,CAACA;QAE7JA,IAAIA,CAACA,4BAA4BA,CAAEA,OAAOA,CAAEA,CAACA;QAE7CA,MAAMA,CAACA,cAAcA,CAACA;IACvBA,CAACA;IAEDJ,mCAAmBA,GAAnBA;QACCK,IAAIA,CAACA,WAAWA,GAAGA,IAAIA,CAACA;IACzBA,CAACA;IAEOL,4CAA4BA,GAApCA,UAAsCA,OAAsCA;QAC3EM,IAAIA,MAAwBA,CAACA;QAC7BA,EAAEA,CAACA,CAAEA,OAAOA,CAACA,GAAGA,CAAEA,eAAeA,CAAGA,CAACA,CAACA,CAACA;YACtCA,MAAMA,GAAGA,OAAOA,CAACA,GAAGA,CAAEA,eAAeA,CAAEA,CAACA;QACzCA,CAACA;QAACA,IAAIA,CAACA,CAACA;YACPA,MAAMA,GAAGA,IAAIA,IAAIA,CAACA,MAAMA,CAACA,KAAKA,EAAEA,CAACA;YACjCA,OAAOA,CAACA,GAAGA,CAAEA,eAAeA,EAAEA,MAAMA,CAAEA,CAACA;QACxCA,CAACA;QACDA,IAAIA,aAAaA,GAAUA,QAAQA,GAAGA,IAAIA,CAAEA,IAAIA,CAACA,WAAWA,CAACA,QAAQA,GAAGA,GAAGA,GAAGA,IAAIA,CAACA,WAAWA,CAACA,QAAQA,CAAEA,CAACA;QAC1GA,MAAMA,CAACA,MAAMA,CAACA,IAAIA,CAAEA,IAAIA,IAAIA,CAACA,MAAMA,CAACA,KAAKA,CAAEA,aAAaA,CAAEA,CAAEA,CAACA;QAE7DA,MAAMA,CAACA,OAAOA,CAAAA;IACfA,CAACA;IACFN,YAACA;AAADA,CAlDA,AAkDCA,IAAA;AAlDY,aAAK,QAkDjB,CAAA;AAED;kBAAe,KAAK,CAAC","file":"Auth/BasicAuthenticator.js","sourcesContent":["import * as HTTP from \"./../HTTP\";\nimport Authenticator from \"./Authenticator\";\nimport * as Errors from \"./../Errors\";\nimport UsernameAndPasswordToken from \"./UsernameAndPasswordToken\";\n\nexport interface Credentials {\n\tusername:string;\n\tpassword:string;\n}\n\nexport class Class implements Authenticator<UsernameAndPasswordToken> {\n\tprivate credentials:Credentials;\n\n\tisAuthenticated():boolean {\n\t\treturn this.credentials !== null;\n\t}\n\n\tauthenticate( authenticationToken:UsernameAndPasswordToken ):Promise<void>  {\n\t\tif( authenticationToken === null ) throw new Errors.IllegalArgumentError( \"The authenticationToken cannot be null.\" );\n\n\t\treturn new Promise<void>( ( resolve:() => void, reject:( error:any ) => void ) => {\n\t\t\tif( ! authenticationToken.username ) throw new Errors.IllegalArgumentError( \"The username cannot be empty.\" );\n\t\t\tif( ! authenticationToken.password ) throw new Errors.IllegalArgumentError( \"The password cannot be empty.\" );\n\n\t\t\t// TODO: Check that the username and password are correct\n\n\t\t\tthis.credentials = {\n\t\t\t\tusername: authenticationToken.username,\n\t\t\t\tpassword: authenticationToken.password\n\t\t\t};\n\n\t\t\tresolve();\n\t\t});\n\t}\n\n\taddAuthentication( requestOptions:HTTP.Request.Options ):HTTP.Request.Options {\n\t\tlet headers:Map<string, HTTP.Header.Class> = requestOptions.headers ? requestOptions.headers : requestOptions.headers = new Map<string, HTTP.Header.Class>();\n\n\t\tthis.addBasicAuthenticationHeader( headers );\n\n\t\treturn requestOptions;\n\t}\n\n\tclearAuthentication():void {\n\t\tthis.credentials = null;\n\t}\n\n\tprivate addBasicAuthenticationHeader( headers:Map<string, HTTP.Header.Class> ):Map<string, HTTP.Header.Class> {\n\t\tlet header:HTTP.Header.Class;\n\t\tif ( headers.has( \"Authorization\" ) ) {\n\t\t\theader = headers.get( \"Authorization\" );\n\t\t} else {\n\t\t\theader = new HTTP.Header.Class();\n\t\t\theaders.set( \"Authorization\", header );\n\t\t}\n\t\tlet authorization:string = \"BASIC \" + btoa( this.credentials.username + \":\" + this.credentials.password );\n\t\theader.values.push( new HTTP.Header.Value( authorization ) );\n\n\t\treturn headers\n\t}\n}\n\nexport default Class;"],"sourceRoot":"/source/"}