{"version":3,"sources":["Apps.ts"],"names":["Apps","Apps.constructor","Apps.get","Apps.getAppsContainerURI"],"mappings":"AAAA,gEAAgE;AAChE,IAAY,GAAG,WAAM,OAAO,CAAC,CAAA;AAI7B,IAAY,GAAG,WAAM,OAAO,CAAC,CAAA;AAC7B,IAAY,KAAK,WAAM,SAAS,CAAC,CAAA;AACjC,IAAY,EAAE,WAAM,SAAS,CAAC,CAAA;AAE9B;IAGCA,cAAaA,OAAeA;QAC3BC,IAAIA,CAACA,OAAOA,GAAGA,OAAOA,CAACA;IACxBA,CAACA;IAEDD,kBAAGA,GAAHA,UAAKA,GAAUA;QAAfE,iBAiBCA;QAhBAA,IAAIA,gBAAgBA,GAAUA,IAAIA,CAACA,mBAAmBA,EAAEA,CAACA;QACzDA,EAAEA,CAACA,CAAEA,GAAGA,CAACA,GAAGA,CAACA,IAAIA,CAACA,UAAUA,CAAEA,GAAGA,CAAGA,CAACA,CAACA,CAACA;YACtCA,EAAEA,CAACA,CAAEA,CAAEA,KAAKA,CAACA,CAACA,CAACA,UAAUA,CAAEA,GAAGA,EAAEA,gBAAgBA,CAAGA,CAACA;gBAACA,GAAGA,GAAGA,GAAGA,CAACA,GAAGA,CAACA,IAAIA,CAACA,OAAOA,CAAEA,gBAAgBA,EAAEA,GAAGA,CAAEA,CAACA;YACzGA,IAAIA,CAACA,OAAOA,CAACA,OAAOA,CAAEA,GAAGA,CAAEA,CAACA;QAC7BA,CAACA;QAEDA,MAAMA,CAACA,IAAIA,CAACA,OAAOA,CAACA,SAASA,CAACA,GAAGA,CAAEA,GAAGA,CAAEA,CAACA,IAAIA,CAC5CA,UAAEA,iBAAwDA;YACzDA,IAAIA,QAAQA,GAAkBA,iBAAiBA,CAACA,MAAMA,CAACA;YAEvDA,EAAEA,CAACA,CAAEA,CAAEA,QAAQA,CAACA,KAAKA,CAACA,OAAOA,CAAEA,EAAEA,CAACA,KAAKA,CAACA,WAAWA,CAAGA,CAACA;gBAACA,MAAMA,IAAIA,KAAKA,CAAEA,+CAA+CA,CAAEA,CAACA;YAE3HA,IAAIA,WAAWA,GAAgBA,GAAGA,CAACA,OAAOA,CAACA,IAAIA,CAAEA,QAAQA,CAAEA,CAACA;YAC5DA,MAAMA,CAACA,IAAIA,GAAGA,CAACA,KAAKA,CAAEA,KAAIA,CAACA,OAAOA,EAAEA,WAAWA,CAAEA,CAACA;QACnDA,CAACA,CACDA,CAACA;IACHA,CAACA;IAEOF,kCAAmBA,GAA3BA;QACCG,EAAEA,CAACA,CAAEA,CAAEA,IAAIA,CAACA,OAAOA,CAACA,UAAUA,CAAEA,yBAAyBA,CAAGA,CAACA;YAACA,MAAMA,IAAIA,KAAKA,CAAEA,yCAAyCA,CAAEA,CAACA;QAC3HA,MAAMA,CAACA,IAAIA,CAACA,OAAOA,CAACA,UAAUA,CAAEA,yBAAyBA,CAAEA,CAACA;IAC7DA,CAACA;IACFH,WAACA;AAADA,CA9BA,AA8BCA,IAAA;AA9BY,YAAI,OA8BhB,CAAA;AAED;kBAAe,IAAI,CAAC","file":"Apps.js","sourcesContent":["/// <reference path=\"../typings/es6-promise/es6-promise.d.ts\" />\nimport * as App from \"./App\";\nimport * as Document from \"./Document\";\nimport Context from \"./Context\";\nimport * as HTTP from \"./HTTP\";\nimport * as RDF from \"./RDF\";\nimport * as Utils from \"./Utils\";\nimport * as CS from \"./NS/CS\";\n\nexport class Apps {\n\tprivate context:Context;\n\n\tconstructor( context:Context ) {\n\t\tthis.context = context;\n\t}\n\n\tget( uri:string ):Promise<App.Class> {\n\t\tlet appsContainerURI:string = this.getAppsContainerURI();\n\t\tif ( RDF.URI.Util.isRelative( uri ) ) {\n\t\t\tif ( ! Utils.S.startsWith( uri, appsContainerURI ) ) uri = RDF.URI.Util.resolve( appsContainerURI, uri );\n\t\t\tthis.context.resolve( uri );\n\t\t}\n\n\t\treturn this.context.Documents.get( uri ).then(\n\t\t\t( processedResponse:HTTP.ProcessedResponse<Document.Class> ) => {\n\t\t\t\tlet document:Document.Class = processedResponse.result;\n\n\t\t\t\tif ( ! document.types.indexOf( CS.Class.Application ) ) throw new Error( \"The resource fetched is not a cs:Application.\" );\n\n\t\t\t\tlet appResource:App.Resource = App.factory.from( document );\n\t\t\t\treturn new App.Class( this.context, appResource );\n\t\t\t}\n\t\t);\n\t}\n\n\tprivate getAppsContainerURI():string {\n\t\tif ( ! this.context.hasSetting( \"platform.apps.container\" ) ) throw new Error( \"The apps container URI hasn't been set.\" );\n\t\treturn this.context.getSetting( \"platform.apps.container\" );\n\t}\n}\n\nexport default Apps;\n"],"sourceRoot":"/source/"}