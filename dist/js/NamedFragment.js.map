{"version":3,"sources":["NamedFragment.ts"],"names":["Factory","Factory.constructor","Factory.from","Factory.singleFrom","Factory.injectBehavior","Factory.hasClassProperties"],"mappings":";;;;;AACA,IAAY,QAAQ,WAAM,YAAY,CAAC,CAAA;AACvC,IAAY,GAAG,WAAM,OAAO,CAAC,CAAA;AAC7B,IAAY,KAAK,WAAM,SAAS,CAAC,CAAA;AAMjC;IAA6BA,2BAAgBA;IAA7CA;QAA6BC,8BAAgBA;IA2C7CA,CAACA;IAxCAD,sBAAIA,GAAJA,UAAMA,OAAOA;QACZE,EAAEA,CAAAA,CAAEA,CAAEA,KAAKA,CAACA,OAAOA,CAAEA,OAAOA,CAAGA,CAACA;YAACA,MAAMA,CAACA,IAAIA,CAACA,UAAUA,CAAwCA,OAAOA,CAAEA,CAACA;QAEzGA,GAAGA,CAACA,CAAEA,GAAGA,CAACA,CAACA,GAAUA,CAACA,EAAEA,QAAMA,GAAUA,OAAOA,CAACA,MAAMA,EAAEA,CAACA,GAAGA,QAAMA,EAAEA,CAACA,EAAGA,EAAGA,CAACA;YAC3EA,IAAIA,MAAMA,GAAmFA,OAAOA,CAAEA,CAACA,CAAEA,CAACA;YAE1GA,IAAIA,CAACA,UAAUA,CAAEA,MAAMA,CAAEA,CAACA;QAC3BA,CAACA;QAEDA,MAAMA,CAAWA,OAAOA,CAACA;IAC1BA,CAACA;IAESF,4BAAUA,GAApBA,UAAsBA,MAA2CA;QAChEG,MAAMA,CAACA,IAAIA,CAACA,cAAcA,CAAEA,MAAMA,CAAEA,CAACA;IACtCA,CAACA;IAESH,gCAAcA,GAAxBA,UAA0BA,IAA2CA;QACpEI,IAAIA,QAAQA,GAAWA,gBAAKA,CAACA,cAAcA,YAAEA,IAAIA,CAAEA,CAACA;QACpDA,EAAEA,CAAAA,CAAEA,IAAIA,CAACA,kBAAkBA,CAAEA,QAAQA,CAAGA,CAACA;YAACA,MAAMA,CAACA,QAAQA,CAACA;QAE1DA,MAAMA,CAACA,gBAAgBA,CAAEA,QAAQA,EAAEA;YAClCA,MAAMA,EAAEA;gBACPA,GAAGA,EAAEA;oBACJ,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAE,QAAQ,CAAC,GAAG,CAAE,CAAA;gBAChD,CAAC;gBACDA,GAAGA,EAAEA,UAAWA,IAAIA;oBACnB,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC;gBAC3C,CAAC;gBACDA,UAAUA,EAAEA,KAAKA;aACjBA;SACDA,CAAEA,CAACA;QAEJA,MAAMA,CAACA,QAAQA,CAACA;IACjBA,CAACA;IAESJ,oCAAkBA,GAA5BA,UAA8BA,QAAuBA;QACpDK,MAAMA,CAACA,CACNA,KAAKA,CAACA,kBAAkBA,CAAEA,QAAQA,EAAEA,MAAMA,CAAEA,CAC5CA,CAACA;IACHA,CAACA;IACFL,cAACA;AAADA,CA3CA,AA2CCA,EA3C4B,QAAQ,CAAC,OAAO,EA2C5C;AA3CY,eAAO,UA2CnB,CAAA;AAEU,eAAO,GAAW,IAAI,OAAO,EAAE,CAAC","file":"NamedFragment.js","sourcesContent":["import * as Document from './Document';\nimport * as Fragment from './Fragment';\nimport * as RDF from './RDF';\nimport * as Utils from './Utils';\n\nexport interface Class extends Fragment.Class {\n\tslug:string\n}\n\nexport class Factory extends Fragment.Factory {\n\tfrom( object:Array<Object & { document:Document.Class }> ):Class[];\n\tfrom( object:Object & { document:Document.Class } ):Class;\n\tfrom( objects ):any {\n\t\tif( ! Utils.isArray( objects ) ) return this.singleFrom( <Object & { document:Document.Class }>objects );\n\n\t\tfor ( let i:number = 0, length:number = objects.length; i < length; i ++ ) {\n\t\t\tlet object:(Object & { document:Document.Class }) = <(Object & { document:Document.Class })> objects[ i ];\n\n\t\t\tthis.singleFrom( object );\n\t\t}\n\n\t\treturn <Class[]> objects;\n\t}\n\n\tprotected singleFrom( object:Object & { document:Document.Class } ):Class {\n\t\treturn this.injectBehavior( object );\n\t}\n\n\tprotected injectBehavior( node:(Object & { document:Document.Class }) ):Class {\n\t\tlet fragment = <Class> super.injectBehavior( node );\n\t\tif( this.hasClassProperties( fragment ) ) return fragment;\n\n\t\tObject.defineProperties( fragment, {\n\t\t\t'slug': {\n\t\t\t\tget: function () {\n\t\t\t\t\treturn RDF.URI.Util.getFragment( fragment.uri )\n\t\t\t\t},\n\t\t\t\tset: function ( slug ) {\n\t\t\t\t\tthis.uri = this.document.uri + '#' + slug;\n\t\t\t\t},\n\t\t\t\tenumerable: false\n\t\t\t}\n\t\t} );\n\n\t\treturn fragment;\n\t}\n\n\tprotected hasClassProperties( resource:Fragment.Class ):boolean {\n\t\treturn (\n\t\t\tUtils.hasPropertyDefined( resource, 'slug' )\n\t\t);\n\t}\n}\n\nexport var factory:Factory = new Factory();\n\nexport default Class;"],"sourceRoot":"/source/"}