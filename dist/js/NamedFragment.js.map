{"version":3,"sources":["NamedFragment.ts"],"names":["Factory","Factory.constructor","Factory.hasClassProperties","Factory.from","Factory.singleFrom","Factory.injectBehavior"],"mappings":";;;;;AACA,IAAY,QAAQ,WAAM,YAAY,CAAC,CAAA;AACvC,IAAY,GAAG,WAAM,OAAO,CAAC,CAAA;AAC7B,IAAY,KAAK,WAAM,SAAS,CAAC,CAAA;AAMjC;IAA6BA,2BAAgBA;IAA7CA;QAA6BC,8BAAgBA;IA4C7CA,CAACA;IA3CAD,oCAAkBA,GAAlBA,UAAoBA,QAAuBA;QAC1CE,MAAMA,CAACA,CACLA,KAAKA,CAACA,kBAAkBA,CAAEA,QAAQA,EAAEA,MAAMA,CAAEA,CAC7CA,CAACA;IACHA,CAACA;IAIDF,sBAAIA,GAAJA,UAAMA,WAAeA,EAAEA,QAAuBA;QAC7CG,EAAEA,CAAAA,CAAEA,CAAEA,KAAKA,CAACA,OAAOA,CAAEA,WAAWA,CAAGA,CAACA;YAACA,MAAMA,CAACA,IAAIA,CAACA,UAAUA,CAAEA,WAAWA,EAAEA,QAAQA,CAAEA,CAACA;QAErFA,GAAGA,CAAAA,CAAcA,UAAWA,EAAvBA,uBAAQA,EAARA,IAAwBA,CAACA;YAAzBA,IAAIA,IAAIA,GAAIA,WAAWA,IAAfA;YACZA,IAAIA,CAACA,UAAUA,CAAEA,IAAIA,EAAEA,QAAQA,CAAEA,CAACA;SAClCA;QAEDA,MAAMA,CAAOA,WAAWA,CAACA;IAC1BA,CAACA;IAESH,4BAAUA,GAApBA,UAAwCA,IAAMA,EAAEA,QAAuBA;QACtEI,IAAIA,QAAQA,GAA0BA,QAAQA,CAACA,OAAOA,CAACA,IAAIA,CAAEA,IAAIA,EAAEA,QAAQA,CAAEA,CAACA;QAE9EA,EAAEA,CAACA,CAAEA,CAAEA,IAAIA,CAACA,kBAAkBA,CAAEA,QAAQA,CAAGA,CAACA;YAACA,IAAIA,CAACA,cAAcA,CAAEA,QAAQA,EAAEA,QAAQA,CAAEA,CAACA;QAEvFA,MAAMA,CAAOA,QAAQA,CAACA;IACvBA,CAACA;IAESJ,gCAAcA,GAAxBA,UAAoDA,QAAUA,EAAEA,QAAuBA;QACtFK,EAAEA,CAAAA,CAAEA,IAAIA,CAACA,kBAAkBA,CAAEA,QAAQA,CAAGA,CAACA;YAACA,MAAMA,CAAOA,QAAQA,CAACA;QAEhEA,MAAMA,CAACA,gBAAgBA,CAAEA,QAAQA,EAAEA;YAClCA,MAAMA,EAAEA;gBACPA,GAAGA,EAAEA;oBACJ,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAE,QAAQ,CAAC,GAAG,CAAE,CAAC;gBACjD,CAAC;gBACDA,GAAGA,EAAEA,UAAWA,IAAWA;oBAC1B,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC;gBAC3C,CAAC;gBACDA,UAAUA,EAAEA,KAAKA;aACjBA;SACDA,CAAEA,CAACA;QAEJA,MAAMA,CAAMA,QAAQA,CAACA;IACtBA,CAACA;IACFL,cAACA;AAADA,CA5CA,AA4CCA,EA5C4B,QAAQ,CAAC,OAAO,EA4C5C;AA5CY,eAAO,UA4CnB,CAAA;AAEU,eAAO,GAAW,IAAI,OAAO,EAAE,CAAC","file":"NamedFragment.js","sourcesContent":["import * as Document from \"./Document\";\nimport * as Fragment from \"./Fragment\";\nimport * as RDF from \"./RDF\";\nimport * as Utils from \"./Utils\";\n\nexport interface Class extends Fragment.Class {\n\tslug:string;\n}\n\nexport class Factory extends Fragment.Factory {\n\thasClassProperties( resource:Fragment.Class ):boolean {\n\t\treturn (\n\t\t\t\tUtils.hasPropertyDefined( resource, \"slug\" )\n\t\t);\n\t}\n\n\tfrom<T extends Object>( nodes:T[], document:Document.Class ):( T & Class )[];\n\tfrom<T extends Object>( node:T, document:Document.Class ):( T & Class );\n\tfrom( nodeOrNodes:any, document:Document.Class ):any {\n\t\tif( ! Utils.isArray( nodeOrNodes ) ) return this.singleFrom( nodeOrNodes, document );\n\n\t\tfor( let node of nodeOrNodes ) {\n\t\t\tthis.singleFrom( node, document );\n\t\t}\n\n\t\treturn <any> nodeOrNodes;\n\t}\n\n\tprotected singleFrom<T extends Object>( node:T, document:Document.Class ):( T & Class ) {\n\t\tlet fragment:( T & Fragment.Class ) = Fragment.factory.from( node, document );\n\n\t\tif ( ! this.hasClassProperties( fragment ) ) this.injectBehavior( fragment, document );\n\n\t\treturn <any> fragment;\n\t}\n\n\tprotected injectBehavior<T extends Fragment.Class>( fragment:T, document:Document.Class ):( T & Class ) {\n\t\tif( this.hasClassProperties( fragment ) ) return <any> fragment;\n\n\t\tObject.defineProperties( fragment, {\n\t\t\t\"slug\": {\n\t\t\t\tget: function ():string {\n\t\t\t\t\treturn RDF.URI.Util.getFragment( fragment.uri );\n\t\t\t\t},\n\t\t\t\tset: function ( slug:string ):void {\n\t\t\t\t\tthis.uri = this.document.uri + \"#\" + slug;\n\t\t\t\t},\n\t\t\t\tenumerable: false,\n\t\t\t},\n\t\t} );\n\n\t\treturn <any>fragment;\n\t}\n}\n\nexport var factory:Factory = new Factory();\n\nexport default Class;\n"],"sourceRoot":"/source/"}