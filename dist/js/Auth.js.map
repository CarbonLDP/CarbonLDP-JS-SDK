{"version":3,"sources":["Auth.ts"],"names":["Method","Class","Class.constructor","Class.isAuthenticated","Class.login","Class.addAuthentication"],"mappings":"AAGA,mCAA+B,2BAA2B,CAAC,CAAA;AAC3D,mCAA+B,2BAA2B,CAAC,CAAA;AAC3D,yCAAqC,iCAAiC,CAAC,CAAA;AAGvE,IAAY,MAAM,WAAM,UAAU,CAAC,CAAA;AAInC,WAAY,MAAM;IACjBA,qCAAKA,CAAAA;IACLA,qCAAKA,CAAAA;AACNA,CAACA,EAHW,cAAM,KAAN,cAAM,QAGjB;AAHD,IAAY,MAAM,GAAN,cAGX,CAAA;AAED;IAMCC,eAAaA,MAAaA;QAHlBC,WAAMA,GAAUA,IAAIA,CAACA;QAI5BA,IAAIA,CAACA,MAAMA,GAAGA,MAAMA,CAACA;QAErBA,IAAIA,CAACA,cAAcA,GAAGA,IAAIA,GAAGA,EAA8CA,CAACA;QAC5EA,IAAIA,CAACA,cAAcA,CAACA,GAAGA,CAAEA,MAAMA,CAACA,KAAKA,EAAEA,IAAIA,4BAAkBA,EAAEA,CAAEA,CAACA;QAClEA,IAAIA,CAACA,cAAcA,CAACA,GAAGA,CAAEA,MAAMA,CAACA,KAAKA,EAAEA,IAAIA,4BAAkBA,CAAEA,IAAIA,CAACA,MAAMA,CAAEA,CAAEA,CAACA;IAChFA,CAACA;IAEDD,+BAAeA,GAAfA,UAAiBA,SAAwBA;QAAxBE,yBAAwBA,GAAxBA,gBAAwBA;QACxCA,IAAIA,aAAaA,GAAWA,KAAKA,CAACA;QAElCA,OAAOA;QAEPA,MAAMA,CAACA,CACNA,aAAaA;YACbA,CAACA,SAASA,IAAIA,CAAEA,CAAEA,IAAIA,CAACA,MAAMA,CAACA,MAAMA,IAAIA,IAAIA,CAACA,MAAMA,CAACA,MAAMA,CAACA,IAAIA,CAACA,eAAeA,EAAEA,CAACA,CAClFA,CAACA;IACHA,CAACA;IAEDF,qBAAKA,GAALA,UAAOA,QAAeA,EAAEA,QAAeA;QACtCG,IAAIA,mBAAmBA,GAAuBA,IAAIA,kCAAwBA,CAAEA,QAAQA,EAAEA,QAAQA,CAAEA,CAACA;QAEjGA,IAAIA,MAAMA,GAAgBA,IAAIA,CAACA,MAAMA,CAACA,UAAUA,CAAEA,aAAaA,CAAEA,CAACA;QAClEA,IAAIA,aAAaA,GAAsCA,IAAIA,CAACA,cAAcA,CAACA,GAAGA,CAAEA,MAAMA,CAAEA,CAACA;QAEzFA,EAAEA,CAAAA,CAAEA,aAAaA,KAAKA,IAAKA,CAACA;YAACA,MAAMA,CAACA,IAAIA,OAAOA,CAAQA;gBACtD,MAAM,IAAI,MAAM,CAAC,iBAAiB,CAAE,uDAAuD,CAAE,CAAC;YAC/F,CAAC,CAAEA,CAACA;QAEJA,MAAMA,CAACA,aAAaA,CAACA,YAAYA,CAAEA,mBAAmBA,CAAEA,CAACA;IAC1DA,CAACA;IAEDH,iCAAiBA,GAAjBA,UAAmBA,cAAmCA;QACrDI,EAAEA,CAAAA,CAAEA,CAAEA,IAAIA,CAACA,eAAeA,CAAEA,KAAKA,CAAGA,CAACA,CAACA,CAACA;YACtCA,EAAEA,CAAAA,CAAEA,IAAIA,CAACA,MAAMA,CAACA,MAAOA,CAACA,CAACA,CAACA;gBACzBA,IAAIA,CAACA,MAAMA,CAACA,MAAMA,CAACA,IAAIA,CAACA,iBAAiBA,CAAEA,cAAcA,CAACA,CAACA;gBAC3DA,MAAMA,CAACA;YACRA,CAACA;YAACA,IAAIA,CAACA,CAACA;gBACPA,OAAOA,CAACA,IAAIA,CAAEA,mDAAmDA,CAAEA,CAACA;YACrEA,CAACA;QACFA,CAACA;QAEDA,OAAOA;IACRA,CAACA;IACFJ,YAACA;AAADA,CAlDA,AAkDCA,IAAA;AAlDY,aAAK,QAkDjB,CAAA;AAED;kBAAe,KAAK,CAAC","file":"Auth.js","sourcesContent":["/// <reference path=\"../typings/es6-promise/es6-promise.d.ts\" />\nimport AuthenticationToken from \"./Auth/AuthenticationToken\";\nimport Authenticator from \"./Auth/Authenticator\";\nimport BasicAuthenticator from \"./Auth/BasicAuthenticator\";\nimport TokenAuthenticator from \"./Auth/TokenAuthenticator\";\nimport UsernameAndPasswordToken from \"./Auth/UsernameAndPasswordToken\";\n\nimport * as HTTP from \"./HTTP\";\nimport * as Errors from \"./Errors\";\nimport Parent from \"./Parent\";\nimport * as Utils from \"./Utils\";\n\nexport enum Method {\n\tBASIC,\n\tTOKEN\n}\n\nexport class Class {\n\tprivate parent:Parent;\n\n\tprivate method:Method = null;\n\tprivate authenticators:Map<Method, Authenticator<AuthenticationToken>>;\n\n\tconstructor( parent:Parent ) {\n\t\tthis.parent = parent;\n\n\t\tthis.authenticators = new Map<Method, Authenticator<AuthenticationToken>>();\n\t\tthis.authenticators.set( Method.BASIC, new BasicAuthenticator() );\n\t\tthis.authenticators.set( Method.TOKEN, new TokenAuthenticator( this.parent ) );\n\t}\n\n\tisAuthenticated( askParent:boolean = true ):boolean {\n\t\tlet authenticated:boolean = false;\n\n\t\t// TODO\n\n\t\treturn (\n\t\t\tauthenticated ||\n\t\t\t(askParent && ! ! this.parent.parent && this.parent.parent.Auth.isAuthenticated())\n\t\t);\n\t}\n\n\tlogin( username:string, password:string ):Promise<void> {\n\t\tlet authenticationToken:AuthenticationToken = new UsernameAndPasswordToken( username, password );\n\n\t\tlet method:Method = <any> this.parent.getSetting( \"auth.method\" );\n\t\tlet authenticator:Authenticator<AuthenticationToken> = this.authenticators.get( method );\n\n\t\tif( authenticator === null ) return new Promise<void>( function():void {\n\t\t\tthrow new Errors.IllegalStateError( \"The authentication method specified isn\\'t supported.\" );\n\t\t} );\n\n\t\treturn authenticator.authenticate( authenticationToken );\n\t}\n\n\taddAuthentication( requestOptions:HTTP.Request.Options ):void {\n\t\tif( ! this.isAuthenticated( false ) ) {\n\t\t\tif( this.parent.parent ) {\n\t\t\t\tthis.parent.parent.Auth.addAuthentication( requestOptions);\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tconsole.warn( \"There is no authentication to add to the request.\" );\n\t\t\t}\n\t\t}\n\n\t\t// TODO\n\t}\n}\n\nexport default Class;\n"],"sourceRoot":"/source/"}