{"version":3,"sources":["SDKContext.ts"],"names":[],"mappings":"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","file":"SDKContext.js","sourcesContent":["/// <reference path=\"./../typings/typings.d.ts\" />\n\nimport * as App from \"./App\";\nimport * as APIDescription from \"./APIDescription\";\nimport * as Auth from \"./Auth\";\nimport Context from \"./Context\";\nimport Documents from \"./Documents\";\nimport * as Errors from \"./Errors\";\nimport * as JSONLDConverter from \"./JSONLDConverter\";\nimport * as LDP from \"./LDP\";\nimport * as NS from \"./NS\";\nimport * as Pointer from \"./Pointer\";\nimport * as RDF from \"./RDF\";\nimport * as Utils from \"./Utils\";\nimport * as ObjectSchema from \"./ObjectSchema\";\n\nexport class Class implements Context {\n\tauth:Auth.Class;\n\tdocuments:Documents;\n\n\tget parentContext():Context { return null; }\n\n\tprotected settings:Map<string, any>;\n\n\tprotected generalObjectSchema:ObjectSchema.DigestedObjectSchema;\n\tprotected typeObjectSchemaMap:Map<string, ObjectSchema.DigestedObjectSchema>;\n\n\tconstructor() {\n\t\tthis.settings = new Map<string, any>();\n\n\t\tthis.generalObjectSchema = new ObjectSchema.DigestedObjectSchema();\n\t\tthis.typeObjectSchemaMap = new Map<string, ObjectSchema.DigestedObjectSchema>();\n\n\t\tthis.auth = new Auth.Class( this );\n\t\tthis.documents = new Documents( this );\n\n\t\tthis.registerDefaultObjectSchemas();\n\t}\n\n\tgetBaseURI():string {\n\t\treturn this.resolve( \"\" );\n\t}\n\n\tresolve( relativeURI:string ):string {\n\t\treturn relativeURI;\n\t}\n\n\thasSetting( name:string ):boolean {\n\t\treturn  ( this.settings.has( name ) )\n\t\t\t||  ( !! this.parentContext && this.parentContext.hasSetting( name ) );\n\t}\n\n\tgetSetting( name:string ):any {\n\t\tif( this.settings.has( name ) ) return this.settings.get( name );\n\t\tif( this.parentContext && this.parentContext.hasSetting( name ) ) return this.parentContext.getSetting( name );\n\t\treturn null;\n\t}\n\n\tsetSetting( name:string, value:any ):void {\n\t\tthis.settings.set( name, value );\n\t}\n\n\tdeleteSetting( name:string ):void {\n\t\tthis.settings.delete( name );\n\t}\n\n\thasObjectSchema( type:string ):boolean {\n\t\tif( this.typeObjectSchemaMap.has( type ) ) return true;\n\t\tif( !! this.parentContext && this.parentContext.hasObjectSchema( type ) ) return true;\n\n\t\treturn false;\n\t}\n\n\tgetObjectSchema( type:string = null ):ObjectSchema.DigestedObjectSchema {\n\t\tif( !! type ) {\n\t\t\t// Type specific schema\n\t\t\tif( this.typeObjectSchemaMap.has( type ) ) return this.typeObjectSchemaMap.get( type );\n\t\t\tif( !! this.parentContext && this.parentContext.hasObjectSchema( type ) ) return this.parentContext.getObjectSchema( type );\n\n\t\t\treturn null;\n\t\t} else {\n\t\t\t// General schema\n\t\t\tif( !! this.generalObjectSchema ) return this.generalObjectSchema;\n\t\t\tif( !! this.parentContext ) return this.parentContext.getObjectSchema();\n\n\t\t\tthrow new Errors.IllegalStateError();\n\t\t}\n\t}\n\n\textendObjectSchema( type:string, objectSchema:ObjectSchema.Class ):void;\n\textendObjectSchema( objectSchema:ObjectSchema.Class ):void;\n\textendObjectSchema( typeOrObjectSchema:any, objectSchema:ObjectSchema.Class = null ):void {\n\t\tlet type:string = objectSchema ? typeOrObjectSchema : null;\n\t\tobjectSchema = !! objectSchema ? objectSchema : typeOrObjectSchema;\n\t\tlet digestedSchema:ObjectSchema.DigestedObjectSchema = ObjectSchema.Digester.digestSchema( objectSchema );\n\n\t\tif( ! type ) {\n\t\t\tthis.extendGeneralObjectSchema( digestedSchema );\n\t\t} else {\n\t\t\tthis.extendTypeObjectSchema( digestedSchema, type );\n\t\t}\n\t}\n\n\tclearObjectSchema( type:string = null ):void {\n\t\tif( ! type ) {\n\t\t\tthis.generalObjectSchema = !! this.parentContext ? null : new ObjectSchema.DigestedObjectSchema();\n\t\t} else {\n\t\t\tthis.typeObjectSchemaMap.delete( type );\n\t\t}\n\t}\n\n\tprotected extendGeneralObjectSchema( digestedSchema:ObjectSchema.DigestedObjectSchema ):void {\n\t\tlet digestedSchemaToExtend:ObjectSchema.DigestedObjectSchema;\n\t\tif( !! this.generalObjectSchema ) {\n\t\t\tdigestedSchemaToExtend = this.generalObjectSchema;\n\t\t} else if( !! this.parentContext ) {\n\t\t\tdigestedSchemaToExtend = this.parentContext.getObjectSchema();\n\t\t} else {\n\t\t\tdigestedSchemaToExtend = new ObjectSchema.DigestedObjectSchema();\n\t\t}\n\n\t\tthis.generalObjectSchema = ObjectSchema.Digester.combineDigestedObjectSchemas( [\n\t\t\tnew ObjectSchema.DigestedObjectSchema(),\n\t\t\tdigestedSchemaToExtend,\n\t\t\tdigestedSchema,\n\t\t] );\n\t}\n\n\tprotected extendTypeObjectSchema( digestedSchema:ObjectSchema.DigestedObjectSchema, type:string ):void {\n\t\tlet digestedSchemaToExtend:ObjectSchema.DigestedObjectSchema;\n\t\tif( this.typeObjectSchemaMap.has( type ) ) {\n\t\t\tdigestedSchemaToExtend = this.typeObjectSchemaMap.get( type );\n\t\t} else if( !! this.parentContext && this.parentContext.hasObjectSchema( type ) ) {\n\t\t\tdigestedSchemaToExtend = this.parentContext.getObjectSchema( type );\n\t\t} else {\n\t\t\tdigestedSchemaToExtend = new ObjectSchema.DigestedObjectSchema();\n\t\t}\n\n\t\tlet extendedDigestedSchema:ObjectSchema.DigestedObjectSchema = ObjectSchema.Digester.combineDigestedObjectSchemas( [\n\t\t\tnew ObjectSchema.DigestedObjectSchema(),\n\t\t\tdigestedSchemaToExtend,\n\t\t\tdigestedSchema,\n\t\t] );\n\n\t\tthis.typeObjectSchemaMap.set( type, extendedDigestedSchema );\n\t}\n\n\tprivate registerDefaultObjectSchemas():void {\n\t\tthis.extendObjectSchema( LDP.RDFSource.RDF_CLASS, LDP.RDFSource.SCHEMA );\n\t\tthis.extendObjectSchema( LDP.Container.RDF_CLASS, LDP.Container.SCHEMA );\n\t\tthis.extendObjectSchema( LDP.BasicContainer.RDF_CLASS, LDP.Container.SCHEMA );\n\n\t\tthis.extendObjectSchema( APIDescription.RDF_CLASS, APIDescription.SCHEMA );\n\t\tthis.extendObjectSchema( App.RDF_CLASS, App.SCHEMA );\n\n\t\tthis.extendObjectSchema( Auth.Token.RDF_CLASS, Auth.Token.CONTEXT );\n\t}\n}\n\nexport const instance:Class = new Class();\n\nexport default instance;\n"],"sourceRoot":"/source/"}