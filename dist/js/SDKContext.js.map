{"version":3,"sources":["SDKContext.ts"],"names":["Class","Class.constructor","Class.parentContext","Class.getBaseURI","Class.resolve","Class.hasSetting","Class.getSetting","Class.setSetting","Class.deleteSetting","Class.hasObjectSchema","Class.getObjectSchema","Class.extendObjectSchema","Class.clearObjectSchema","Class.extendGeneralObjectSchema","Class.extendTypeObjectSchema","Class.registerDefaultObjectSchemas"],"mappings":"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","file":"SDKContext.js","sourcesContent":["/// <reference path=\"./../typings/tsd.d.ts\" />\n\nimport * as App from \"./App\";\nimport * as APIDescription from \"./APIDescription\";\nimport * as Auth from \"./Auth\";\nimport Context from \"./Context\";\nimport Documents from \"./Documents\";\nimport * as Errors from \"./Errors\";\nimport * as JSONLDConverter from \"./JSONLDConverter\";\nimport * as LDP from \"./LDP\";\nimport * as NS from \"./NS\";\nimport * as Pointer from \"./Pointer\";\nimport * as RDF from \"./RDF\";\nimport * as Utils from \"./Utils\";\nimport * as ObjectSchema from \"./ObjectSchema\";\n\nexport class Class implements Context {\n\t/* tslint:disable: variable-name */\n\tAuth:Auth.Class;\n\tDocuments:Documents;\n\t/* tslint:enable: variable-name */\n\n\tget parentContext():Context { return null; }\n\n\tprotected settings:Map<string, any>;\n\n\tprotected generalObjectSchema:ObjectSchema.DigestedObjectSchema;\n\tprotected typeObjectSchemaMap:Map<string, ObjectSchema.DigestedObjectSchema>;\n\n\tconstructor() {\n\t\tthis.settings = new Map<string, any>();\n\n\t\tthis.generalObjectSchema = new ObjectSchema.DigestedObjectSchema();\n\t\tthis.typeObjectSchemaMap = new Map<string, ObjectSchema.DigestedObjectSchema>();\n\n\t\tthis.Auth = new Auth.Class( this );\n\t\tthis.Documents = new Documents( this );\n\n\t\tthis.registerDefaultObjectSchemas();\n\t}\n\n\tgetBaseURI():string {\n\t\treturn this.resolve( \"\" );\n\t}\n\n\tresolve( relativeURI:string ):string {\n\t\treturn relativeURI;\n\t}\n\n\thasSetting( name:string ):boolean {\n\t\treturn (\n\t\t\t\tthis.settings.has( name ) ||\n\t\t\t\t( this.parentContext && this.parentContext.hasSetting( name ) )\n\t\t);\n\t}\n\n\tgetSetting( name:string ):any {\n\t\tif( this.settings.has( name ) ) return this.settings.get( name );\n\t\tif( this.parentContext && this.parentContext.hasSetting( name ) ) return this.parentContext.getSetting( name );\n\t\treturn null;\n\t}\n\n\tsetSetting( name:string, value:any ):any {\n\t\tthis.settings.set( name, value );\n\t}\n\n\tdeleteSetting( name:string ):any {\n\t\tthis.settings.delete( name );\n\t}\n\n\thasObjectSchema( type:string ):boolean {\n\t\tif( this.typeObjectSchemaMap.has( type ) ) return true;\n\t\tif( !! this.parentContext && this.parentContext.hasObjectSchema( type ) ) return true;\n\n\t\treturn false;\n\t}\n\n\tgetObjectSchema( type:string = null ):ObjectSchema.DigestedObjectSchema {\n\t\tif( !! type ) {\n\t\t\t// Type specific schema\n\t\t\tif( this.typeObjectSchemaMap.has( type ) ) return this.typeObjectSchemaMap.get( type );\n\t\t\tif( !! this.parentContext && this.parentContext.hasObjectSchema( type ) ) return this.parentContext.getObjectSchema( type );\n\n\t\t\treturn null;\n\t\t} else {\n\t\t\t// General schema\n\t\t\tif( !! this.generalObjectSchema ) return this.generalObjectSchema;\n\t\t\tif( !! this.parentContext ) return this.parentContext.getObjectSchema();\n\n\t\t\tthrow new Errors.IllegalStateError();\n\t\t}\n\t}\n\n\textendObjectSchema( type:string, objectSchema:ObjectSchema.Class ):void;\n\textendObjectSchema( objectSchema:ObjectSchema.Class ):void;\n\textendObjectSchema( typeOrObjectSchema:any, objectSchema:ObjectSchema.Class = null ):void {\n\t\tlet type:string = objectSchema ? typeOrObjectSchema : null;\n\t\tobjectSchema = !! objectSchema ? objectSchema : typeOrObjectSchema;\n\t\tlet digestedSchema:ObjectSchema.DigestedObjectSchema = ObjectSchema.Digester.digestSchema( objectSchema );\n\n\t\tif( ! type ) {\n\t\t\tthis.extendGeneralObjectSchema( digestedSchema );\n\t\t} else {\n\t\t\tthis.extendTypeObjectSchema( digestedSchema, type );\n\t\t}\n\t}\n\n\tclearObjectSchema( type:string = null ):void {\n\t\tif( ! type ) {\n\t\t\tthis.generalObjectSchema = !! this.parentContext ? null : new ObjectSchema.DigestedObjectSchema();\n\t\t} else {\n\t\t\tthis.typeObjectSchemaMap.delete( type );\n\t\t}\n\t}\n\n\tprotected extendGeneralObjectSchema( digestedSchema:ObjectSchema.DigestedObjectSchema ):void {\n\t\tlet digestedSchemaToExtend:ObjectSchema.DigestedObjectSchema;\n\t\tif( !! this.generalObjectSchema ) {\n\t\t\tdigestedSchemaToExtend = this.generalObjectSchema;\n\t\t} else if( !! this.parentContext ) {\n\t\t\tdigestedSchemaToExtend = this.parentContext.getObjectSchema();\n\t\t} else {\n\t\t\tdigestedSchemaToExtend = new ObjectSchema.DigestedObjectSchema();\n\t\t}\n\n\t\tthis.generalObjectSchema = ObjectSchema.Digester.combineDigestedObjectSchemas( [\n\t\t\tnew ObjectSchema.DigestedObjectSchema(),\n\t\t\tdigestedSchemaToExtend,\n\t\t\tdigestedSchema,\n\t\t] );\n\t}\n\n\tprotected extendTypeObjectSchema( digestedSchema:ObjectSchema.DigestedObjectSchema, type:string ):void {\n\t\tlet digestedSchemaToExtend:ObjectSchema.DigestedObjectSchema;\n\t\tif( this.typeObjectSchemaMap.has( type ) ) {\n\t\t\tdigestedSchemaToExtend = this.typeObjectSchemaMap.get( type );\n\t\t} else if( !! this.parentContext && this.parentContext.hasObjectSchema( type ) ) {\n\t\t\tdigestedSchemaToExtend = this.parentContext.getObjectSchema( type );\n\t\t} else {\n\t\t\tdigestedSchemaToExtend = new ObjectSchema.DigestedObjectSchema();\n\t\t}\n\n\t\tlet extendedDigestedSchema:ObjectSchema.DigestedObjectSchema = ObjectSchema.Digester.combineDigestedObjectSchemas( [\n\t\t\tnew ObjectSchema.DigestedObjectSchema(),\n\t\t\tdigestedSchemaToExtend,\n\t\t\tdigestedSchema,\n\t\t] );\n\n\t\tthis.typeObjectSchemaMap.set( type, extendedDigestedSchema );\n\t}\n\n\tprivate registerDefaultObjectSchemas():void {\n\t\tthis.extendObjectSchema( LDP.RDFSource.RDF_CLASS, LDP.RDFSource.SCHEMA );\n\t\tthis.extendObjectSchema( LDP.Container.RDF_CLASS, LDP.Container.SCHEMA );\n\t\tthis.extendObjectSchema( LDP.BasicContainer.RDF_CLASS, LDP.Container.SCHEMA );\n\n\t\tthis.extendObjectSchema( APIDescription.RDF_CLASS, APIDescription.SCHEMA );\n\t\tthis.extendObjectSchema( App.RDF_CLASS, App.SCHEMA );\n\n\t\tthis.extendObjectSchema( Auth.Token.RDF_CLASS, Auth.Token.CONTEXT );\n\t}\n}\n\n/* tslint:disable: variable-name */\nexport const instance:Class = new Class();\n/* tslint:enable: variable-name */\n\nexport default instance;\n"],"sourceRoot":"/source/"}