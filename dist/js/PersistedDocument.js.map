{"version":3,"sources":["PersistedDocument.ts"],"names":[],"mappings":"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","file":"PersistedDocument.js","sourcesContent":["import * as Document from \"./Document\";\nimport Documents from \"./Documents\";\nimport * as Errors from \"./Errors\";\nimport * as HTTP from \"./HTTP\";\nimport * as Fragment from \"./Fragment\";\nimport * as NamedFragment from \"./NamedFragment\";\nimport * as PersistedResource from \"./PersistedResource\";\nimport * as PersistedFragment from \"./PersistedFragment\";\nimport * as PersistedNamedFragment from \"./PersistedNamedFragment\";\nimport * as Pointer from \"./Pointer\";\nimport * as RDF from \"./RDF\";\nimport * as SPARQL from \"./SPARQL\";\nimport * as Utils from \"./Utils\";\nimport * as URI from \"./RDF/URI\";\n\nexport interface Class extends Pointer.Class, PersistedResource.Class, Document.Class {\n\t_documents:Documents;\n\t_etag:string;\n\t_fragmentsIndex:Map<string, PersistedFragment.Class>;\n\t_savedFragments:PersistedFragment.Class[];\n\t_syncSavedFragments():void;\n\n\tgetFragment( slug:string ):PersistedFragment.Class;\n\tgetNamedFragment( slug:string ):PersistedNamedFragment.Class;\n\tgetFragments():PersistedFragment.Class[];\n\tcreateFragment():PersistedFragment.Class;\n\tcreateFragment( slug:string ):PersistedNamedFragment.Class;\n\tcreateNamedFragment( slug:string ):PersistedNamedFragment.Class;\n\n\trefresh():Promise<void>;\n\tsave():Promise<[Class, HTTP.Response.Class]>;\n\tdestroy():Promise<HTTP.Response.Class>;\n\n\texecuteRawASKQuery( askQuery:string, requestOptions?:HTTP.Request.Options ):Promise<[ SPARQL.RawResults.Class, HTTP.Response.Class ]>;\n\texecuteASKQuery( askQuery:string, requestOptions?:HTTP.Request.Options ):Promise<[ boolean, HTTP.Response.Class ]>;\n\texecuteRawSELECTQuery( selectQuery:string, requestOptions?:HTTP.Request.Options ):Promise<[ SPARQL.RawResults.Class, HTTP.Response.Class ]>;\n\texecuteSELECTQuery( selectQuery:string, requestOptions?:HTTP.Request.Options ):Promise<[ SPARQL.SELECTResults.Class, HTTP.Response.Class ]>;\n\texecuteRawCONSTRUCTQuery( constructQuery:string, requestOptions?:HTTP.Request.Options ):Promise<[ string, HTTP.Response.Class ]>;\n\texecuteRawDESCRIBEQuery( describeQuery:string, requestOptions?:HTTP.Request.Options ):Promise<[ string, HTTP.Response.Class ]>;\n}\n\nfunction extendIsDirty( superFunction:() => boolean ):() => boolean {\n\treturn function():boolean {\n\t\tlet isDirty:boolean = superFunction.call( this );\n\t\tif( isDirty ) return true;\n\n\t\tlet document:Class = this;\n\n\t\tfor( let fragment of document.getFragments() ) {\n\t\t\tif( fragment.isDirty() ) return true;\n\t\t}\n\n\t\t// Check if an already saved fragment was removed\n\t\tfor( let fragment of document._savedFragments ) {\n\t\t\tif( ! document.hasFragment( fragment.id ) ) return true;\n\t\t}\n\n\t\treturn false;\n\t};\n}\n\nfunction syncSavedFragments():void {\n\tlet document:Class = this;\n\tdocument._savedFragments = Utils.A.from( document._fragmentsIndex.values() );\n}\n\nfunction extendCreateFragment( superFunction:( slug:string ) => NamedFragment.Class ):( slug:string ) => PersistedNamedFragment.Class;\nfunction extendCreateFragment( superFunction:( slug?:string ) => Fragment.Class ):( slug?:string ) => PersistedFragment.Class;\nfunction extendCreateFragment( superFunction:( slug:string ) => any ):any {\n\treturn function( slug:string = null ):any {\n\t\tlet fragment:Fragment.Class = superFunction.call( this, slug );\n\t\tif( slug !== null ) {\n\t\t\tif( RDF.URI.Util.isBNodeID( slug ) ) return PersistedFragment.Factory.decorate( fragment );\n\t\t\treturn PersistedNamedFragment.Factory.decorate( fragment );\n\t\t} else {\n\t\t\treturn PersistedFragment.Factory.decorate( fragment );\n\t\t}\n\t};\n}\nfunction extendCreateNamedFragment( superFunction:( slug:string ) => NamedFragment.Class ):( slug:string ) => PersistedNamedFragment.Class {\n\treturn function( slug:string ):PersistedNamedFragment.Class {\n\t\tlet fragment:NamedFragment.Class = superFunction.call( this, slug );\n\t\treturn PersistedFragment.Factory.decorate( fragment );\n\t};\n}\n\nfunction refresh():Promise<void> {\n\t// TODO\n\treturn null;\n}\nfunction save():Promise<void> {\n\treturn this._documents.save( this );\n}\nfunction destroy():Promise<HTTP.Response.Class> {\n\treturn this._documents.delete( this );\n}\n\nfunction executeRawASKQuery( askQuery:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ SPARQL.RawResults.Class, HTTP.Response.Class ]> {\n\treturn this._documents.executeRawASKQuery( this.id, askQuery, requestOptions );\n}\n\nfunction executeASKQuery( askQuery:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ boolean, HTTP.Response.Class ]> {\n\treturn this._documents.executeASKQuery( this.id, askQuery, requestOptions );\n}\n\nfunction executeRawSELECTQuery( selectQuery:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ SPARQL.RawResults.Class, HTTP.Response.Class ]> {\n\treturn this._documents.executeRawSELECTQuery( this.id, selectQuery, requestOptions );\n}\n\nfunction executeSELECTQuery( selectQuery:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ SPARQL.SELECTResults.Class, HTTP.Response.Class ]> {\n\treturn this._documents.executeSELECTQuery( this.id, selectQuery, requestOptions );\n}\n\nfunction executeRawCONSTRUCTQuery( constructQuery:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ string, HTTP.Response.Class ]> {\n\treturn this._documents.executeRawCONSTRUCTQuery( this.id, constructQuery, requestOptions );\n}\n\nfunction executeRawDESCRIBEQuery( describeQuery:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ string, HTTP.Response.Class ]> {\n\treturn this._documents.executeRawDESCRIBEQuery( this.id, describeQuery, requestOptions );\n}\n\nexport class Factory {\n\tstatic hasClassProperties( document:Document.Class ):boolean {\n\t\treturn (\n\t\t\tUtils.hasPropertyDefined( document, \"_documents\" ) &&\n\t\t\tUtils.hasPropertyDefined( document, \"_etag\" ) &&\n\t\t\tUtils.hasFunction( document, \"refresh\" ) &&\n\t\t\tUtils.hasFunction( document, \"save\" ) &&\n\t\t\tUtils.hasFunction( document, \"destroy\" ) &&\n\n\t\t\tUtils.hasFunction( document, \"executeRawASKQuery\" ) &&\n\t\t\tUtils.hasFunction( document, \"executeASKQuery\" ) &&\n\t\t\tUtils.hasFunction( document, \"executeRawSELECTQuery\" ) &&\n\t\t\tUtils.hasFunction( document, \"executeSELECTQuery\" ) &&\n\t\t\tUtils.hasFunction( document, \"executeRawDESCRIBEQuery\" ) &&\n\t\t\tUtils.hasFunction( document, \"executeRawCONSTRUCTQuery\" )\n\t\t);\n\t}\n\n\tstatic is( object:Object ):boolean {\n\t\treturn Utils.isObject( object )\n\t\t\t&& Document.Factory.hasClassProperties( object )\n\t\t\t&& Factory.hasClassProperties( <any> object );\n\t}\n\n\tstatic create( uri:string, documents:Documents, snapshot:Object = {} ):Class {\n\t\tlet document:Document.Class = Document.Factory.create( uri );\n\n\t\treturn Factory.decorate( document, documents, snapshot );\n\t}\n\n\tstatic createFrom<T extends Object>( object:T, uri:string, documents:Documents, snapshot:Object = {} ):Class {\n\t\tlet document:Document.Class = Document.Factory.createFrom( object, uri );\n\n\t\treturn Factory.decorate( document, documents, snapshot );\n\t}\n\n\tstatic decorate<T extends Document.Class>( document:T, documents:Documents, snapshot:Object = {} ):T & Class {\n\t\tPersistedResource.Factory.decorate( document, snapshot );\n\n\t\tif( Factory.hasClassProperties( document ) ) return <any> document;\n\n\t\tlet persistedDocument:Class = <any> document;\n\n\t\tObject.defineProperties( persistedDocument, {\n\t\t\t\"_documents\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: documents,\n\t\t\t},\n\t\t\t\"_etag\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: null,\n\t\t\t},\n\t\t\t\"_savedFragments\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: [],\n\t\t\t},\n\t\t\t\"_syncSavedFragments\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: syncSavedFragments,\n\t\t\t},\n\n\t\t\t\"hasPointer\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: ( function():( id:string ) => boolean {\n\t\t\t\t\tlet superFunction:( id:string ) => boolean = persistedDocument.hasPointer;\n\t\t\t\t\treturn function( id:string ):boolean {\n\t\t\t\t\t\tif( superFunction.call( this, id ) ) return true;\n\n\t\t\t\t\t\treturn ! URI.Util.isBNodeID( id ) && (<Class> this)._documents.hasPointer( id );\n\t\t\t\t\t};\n\t\t\t\t})(),\n\t\t\t},\n\t\t\t\"getPointer\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: ( function():( id:string ) => Pointer.Class {\n\t\t\t\t\tlet superFunction:( id:string ) => Pointer.Class = persistedDocument.getPointer;\n\t\t\t\t\tlet inScopeFunction:( id:string ) => boolean = persistedDocument.inScope;\n\t\t\t\t\treturn function( id:string ):Pointer.Class {\n\t\t\t\t\t\tif( inScopeFunction.call( this, id ) ) return superFunction.call( this, id );\n\n\t\t\t\t\t\treturn (<Class> this)._documents.getPointer( id );\n\t\t\t\t\t};\n\t\t\t\t})(),\n\t\t\t},\n\t\t\t\"inScope\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: ( function():( idOrPointer:any ) => boolean {\n\t\t\t\t\tlet superFunction:( idOrPointer:any ) => boolean = persistedDocument.inScope;\n\t\t\t\t\treturn function( idOrPointer:any ):boolean {\n\t\t\t\t\t\tif( superFunction.call( this, idOrPointer ) ) return true;\n\n\t\t\t\t\t\treturn (<Class> this)._documents.inScope( idOrPointer );\n\t\t\t\t\t};\n\t\t\t\t})(),\n\t\t\t},\n\n\t\t\t\"refresh\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: refresh,\n\t\t\t},\n\t\t\t\"save\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: save,\n\t\t\t},\n\t\t\t\"destroy\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: destroy,\n\t\t\t},\n\n\t\t\t\"executeRawASKQuery\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: executeRawASKQuery,\n\t\t\t},\n\t\t\t\"executeASKQuery\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: executeASKQuery,\n\t\t\t},\n\t\t\t\"executeRawSELECTQuery\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: executeRawSELECTQuery,\n\t\t\t},\n\t\t\t\"executeSELECTQuery\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: executeSELECTQuery,\n\t\t\t},\n\t\t\t\"executeRawCONSTRUCTQuery\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: executeRawCONSTRUCTQuery,\n\t\t\t},\n\t\t\t\"executeRawDESCRIBEQuery\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: executeRawDESCRIBEQuery,\n\t\t\t},\n\n\t\t\t\"createFragment\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: extendCreateFragment( persistedDocument.createFragment ),\n\t\t\t},\n\t\t\t\"createNamedFragment\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: extendCreateNamedFragment( persistedDocument.createNamedFragment ),\n\t\t\t},\n\n\t\t\t// Overwrite PersistedResource.isDirty to take into account fragments state\n\t\t\t\"isDirty\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: extendIsDirty( persistedDocument.isDirty ),\n\t\t\t},\n\t\t} );\n\n\t\treturn <any> persistedDocument;\n\t}\n}\n\nexport default Class;\n"],"sourceRoot":"/source/"}