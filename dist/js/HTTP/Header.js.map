{"version":3,"sources":["HTTP/Header.ts"],"names":["Class","Class.constructor","Class.setValues","Class.toString","Value","Value.constructor","Value.setValue","Value.setMain","Value.setSecondary","Value.cleanString","Value.toString","Util","Util.constructor","Util.parseHeaders"],"mappings":"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","file":"HTTP/Header.js","sourcesContent":["/// <reference path=\"../../typings/es6/es6.d.ts\" />\n\nimport * as Utils from './../Utils';\n\nexport class Class {\n\tconstructor();\n\tconstructor( values:Value[] );\n\tconstructor( value:string );\n\tconstructor( valueOrValues?:(string | Value[]) ) {\n\t\tif ( ! valueOrValues ) return;\n\t\telse if ( Array.isArray( valueOrValues ) ) this.values = <Value[]> valueOrValues;\n\t\telse this.setValues( <string> valueOrValues );\n\t}\n\n\tvalues:Value[] = [];\n\n\tprivate setValues( valuesString:string ):void {\n\t\tthis.values = [];\n\n\t\tvar valueStrings:string[] = valuesString.split( \",\" );\n\t\tfor ( var i = 0, length = valueStrings.length; i < length; i ++ ) {\n\t\t\tvar valueString:string = valueStrings[ i ];\n\t\t\tvar value:Value = new Value( valueString );\n\t\t\tthis.values.push( value );\n\t\t}\n\t}\n\n\n\ttoString():string {\n\t\treturn this.values.join( ', ' );\n\t}\n}\n\nexport class Value {\n\tconstructor( value:string );\n\tconstructor( mainKey:string, mainValue:string, secondaryKey:string, secondaryValue:string );\n\tconstructor( value:string, mainValue?:string, secondaryKey?:string, secondaryValue?:string ) {\n\t\tif ( mainValue ) {\n\t\t\tthis.mainKey = value;\n\t\t\tthis.mainValue = mainValue;\n\t\t\tthis.secondaryKey = secondaryKey;\n\t\t\tthis.secondaryValue = secondaryValue;\n\t\t} else this.setValue( value );\n\t}\n\n\tmainKey:string = null;\n\tmainValue:string = null;\n\tsecondaryKey:string = null;\n\tsecondaryValue:string = null;\n\n\tprivate setValue( value:string ):void {\n\t\tvar parts:string[] = value.split( \";\" );\n\t\tthis.setMain( parts[ 0 ] );\n\t\tif ( parts.length > 1 ) this.setSecondary( parts[ 1 ] );\n\t}\n\n\tprivate setMain( main:string ):void {\n\t\tvar parts:string[] = main.split( \"=\" );\n\t\tif ( parts.length === 1 ) this.mainValue = Value.cleanString( parts[ 0 ] );\n\t\telse if ( parts.length === 2 ) {\n\t\t\tthis.mainKey = Value.cleanString( parts[ 0 ] );\n\t\t\tthis.mainValue = Value.cleanString( parts[ 1 ] );\n\t\t} else this.mainValue = main;\n\t}\n\n\tprivate setSecondary( secondary:string ):void {\n\t\tvar parts:string[] = secondary.split( \"=\" );\n\t\tif ( parts.length === 1 ) this.secondaryValue = Value.cleanString( parts[ 0 ] );\n\t\telse if ( parts.length === 2 ) {\n\t\t\tthis.secondaryKey = Value.cleanString( parts[ 0 ] );\n\t\t\tthis.secondaryValue = Value.cleanString( parts[ 1 ] );\n\t\t} else this.secondaryValue = secondary;\n\t}\n\n\tprivate static cleanString( toClean:string ):string {\n\t\ttoClean = toClean.trim();\n\t\ttoClean = (Utils.S.startsWith( toClean, \"\\\"\" ) || Utils.S.startsWith( toClean, \"'\" )) ? toClean.substr( 1, toClean.length ) : toClean;\n\t\ttoClean = (Utils.S.endsWith( toClean, \"\\\"\" ) || Utils.S.endsWith( toClean, \"'\" )) ? toClean.substr( 0, toClean.length - 1 ) : toClean;\n\t\treturn toClean;\n\t}\n\n\ttoString():string {\n\t\tvar result:string = '';\n\t\tif ( this.mainKey ) result += this.mainKey + '=';\n\t\tresult += this.mainValue;\n\t\tif ( this.secondaryKey || this.secondaryValue ) result += '; ';\n\t\tif ( this.secondaryKey ) result += this.secondaryKey + '=';\n\t\tif ( this.secondaryValue ) result += this.secondaryValue;\n\t\treturn result;\n\t}\n}\n\nexport class Util {\n\tstatic parseHeaders( headersString:string ):Map<string, Class> {\n\t\tvar headers:Map<string, Class> = new Map<string, Class>();\n\n\t\tvar headerStrings:string[] = headersString.split( '\\r\\n' );\n\t\tfor ( var i:number = 0, length:number = headerStrings.length; i < length; i ++ ) {\n\t\t\tvar headerString:string = headerStrings[ i ];\n\t\t\tif ( ! headerString.trim() ) continue;\n\n\t\t\tvar parts:string[] = headerString.split( ':' );\n\t\t\tif ( parts.length != 2 ) throw new Error( \"ParseError: The header couldn't be parsed.\" );\n\n\t\t\tvar name = parts[ 0 ].trim();\n\t\t\tvar header = new Class( parts[ 1 ].trim() );\n\t\t\tif ( headers.has( name ) ) {\n\t\t\t\tvar existingHeader:Class = headers.get( name );\n\t\t\t\texistingHeader.values.concat( header.values );\n\t\t\t} else headers.set( name, header );\n\t\t}\n\n\t\treturn headers;\n\t}\n}"],"sourceRoot":"/source/"}