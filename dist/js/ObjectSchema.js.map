{"version":3,"sources":["ObjectSchema.ts"],"names":["ContainerType","DigestedObjectSchema","DigestedObjectSchema.constructor","DigestedPropertyDefinition","DigestedPropertyDefinition.constructor","Digester","Digester.constructor","Digester.digestSchema","Digester.combineDigestedObjectSchemas","Digester.digestSingleSchema","Digester.resolvePrefixedURIs","Digester.resolvePrefixedURI"],"mappings":"AAAA,8CAA8C;AAE9C,IAAY,MAAM,WAAM,UAAU,CAAC,CAAA;AAGnC,IAAY,GAAG,WAAM,OAAO,CAAC,CAAA;AAC7B,IAAY,KAAK,WAAM,SAAS,CAAC,CAAA;AAkBjC,WAAY,aAAa;IACxBA,+CAAGA,CAAAA;IACHA,iDAAIA,CAAAA;IACJA,yDAAQA,CAAAA;AACTA,CAACA,EAJW,qBAAa,KAAb,qBAAa,QAIxB;AAJD,IAAY,aAAa,GAAb,qBAIX,CAAA;AAED;IAMCC;QACCC,IAAIA,CAACA,IAAIA,GAAGA,EAAEA,CAACA;QACfA,IAAIA,CAACA,QAAQA,GAAGA,IAAIA,GAAGA,EAAyBA,CAACA;QACjDA,IAAIA,CAACA,UAAUA,GAAGA,IAAIA,GAAGA,EAAsCA,CAACA;QAChEA,IAAIA,CAACA,YAAYA,GAAGA,IAAIA,GAAGA,EAA2BA,CAACA;IACxDA,CAACA;IACFD,2BAACA;AAADA,CAZA,AAYCA,IAAA;AAZY,4BAAoB,uBAYhC,CAAA;AAED;IAAAE;QACCC,QAAGA,GAAiBA,IAAIA,CAACA;QACzBA,YAAOA,GAAWA,IAAIA,CAACA;QACvBA,gBAAWA,GAAiBA,IAAIA,CAACA;QACjCA,aAAQA,GAAUA,IAAIA,CAACA;QACvBA,kBAAaA,GAAiBA,IAAIA,CAACA;IACpCA,CAACA;IAADD,iCAACA;AAADA,CANA,AAMCA,IAAA;AANY,kCAA0B,6BAMtC,CAAA;AAMD;IAAAE;IA4IAC,CAACA;IAzIOD,qBAAYA,GAAnBA,UAAqBA,eAAmBA;QACvCE,EAAEA,CAAAA,CAAEA,CAAEA,KAAKA,CAACA,OAAOA,CAAEA,eAAeA,CAAGA,CAACA;YAACA,MAAMA,CAACA,QAAQA,CAACA,kBAAkBA,CAAEA,eAAeA,CAAEA,CAACA;QAE/FA,IAAIA,eAAeA,GAA0BA,EAAEA,CAACA;QAChDA,GAAGA,CAAAA,CAAgBA,UAAyBA,EAAzBA,KAAUA,eAAeA,EAAvCA,cAAUA,EAAVA,IAAwCA,CAACA;YAAzCA,IAAIA,MAAMA,SAAAA;YACdA,eAAeA,CAACA,IAAIA,CAAEA,QAAQA,CAACA,kBAAkBA,CAAEA,MAAMA,CAAEA,CAAEA,CAACA;SAC9DA;QAEDA,MAAMA,CAACA,QAAQA,CAACA,4BAA4BA,CAAEA,eAAeA,CAAEA,CAACA;IACjEA,CAACA;IAEMF,qCAA4BA,GAAnCA,UAAqCA,eAAsCA;QAC1EG,EAAEA,CAAAA,CAAEA,eAAeA,CAACA,MAAMA,KAAKA,CAAEA,CAACA;YAACA,MAAMA,IAAIA,MAAMA,CAACA,oBAAoBA,CAAEA,0DAA0DA,CAAEA,CAACA;QAEvIA,IAAIA,cAAcA,GAAwBA,eAAeA,CAACA,KAAKA,EAAEA,CAACA;QAElEA,GAAGA,CAAAA,CAAwBA,UAAeA,EAArCA,2BAAkBA,EAAlBA,IAAsCA,CAACA;YAAvCA,IAAIA,cAAcA,GAAIA,eAAeA,IAAnBA;YACtBA,KAAKA,CAACA,CAACA,CAACA,MAAMA,CAAEA,cAAcA,CAACA,QAAQA,EAAEA,cAAcA,CAACA,QAAQA,CAAEA,CAACA;YACnEA,KAAKA,CAACA,CAACA,CAACA,MAAMA,CAAEA,cAAcA,CAACA,YAAYA,EAAEA,cAAcA,CAACA,YAAYA,CAAEA,CAACA;YAC3EA,KAAKA,CAACA,CAACA,CAACA,MAAMA,CAAEA,cAAcA,CAACA,UAAUA,EAAEA,cAAcA,CAACA,UAAUA,CAAEA,CAACA;SACvEA;QAEDA,QAAQA,CAACA,mBAAmBA,CAAEA,cAAcA,CAAEA,CAACA;QAE/CA,MAAMA,CAACA,cAAcA,CAACA;IACvBA,CAACA;IAEcH,2BAAkBA,GAAjCA,UAAmCA,MAAYA;QAC9CI,IAAIA,cAAcA,GAAwBA,IAAIA,oBAAoBA,EAAEA,CAACA;QAErEA,GAAGA,CAAAA,CAAEA,GAAGA,CAACA,YAAYA,IAAIA,MAAOA,CAACA,CAACA,CAACA;YAClCA,EAAEA,CAAAA,CAAEA,CAAEA,MAAMA,CAACA,cAAcA,CAAEA,YAAYA,CAAGA,CAACA;gBAACA,QAAQA,CAACA;YAEvDA,EAAEA,CAAAA,CAAEA,YAAYA,KAAKA,UAAWA,CAACA;gBAACA,QAAQA,CAACA;YAC3CA,EAAEA,CAAAA,CAAEA,YAAYA,KAAKA,QAASA,CAACA;gBAACA,QAAQA,CAACA;YACzCA,EAAEA,CAAAA,CAAEA,YAAYA,KAAKA,OAAQA,CAACA;gBAACA,QAAQA,CAACA;YACxCA,EAAEA,CAAAA,CAAEA,YAAYA,KAAKA,QAASA,CAACA;gBAACA,QAAQA,CAACA;YAEzCA,IAAIA,aAAaA,GAAmCA,MAAMA,CAAEA,YAAYA,CAAEA,CAACA;YAE3EA,EAAEA,CAAAA,CAAEA,KAAKA,CAACA,QAAQA,CAAEA,aAAaA,CAAGA,CAACA,CAACA,CAACA;gBACtCA,EAAEA,CAAAA,CAAEA,GAAGA,CAACA,GAAGA,CAACA,IAAIA,CAACA,UAAUA,CAAEA,YAAYA,CAAGA,CAACA;oBAACA,MAAMA,IAAIA,MAAMA,CAACA,oBAAoBA,CAAEA,qDAAqDA,CAAEA,CAACA;gBAE7IA,IAAIA,GAAGA,GAAiBA,IAAIA,GAAGA,CAACA,GAAGA,CAACA,KAAKA,CAAWA,aAAaA,CAAEA,CAACA;gBACpEA,EAAEA,CAAAA,CAAEA,GAAGA,CAACA,GAAGA,CAACA,IAAIA,CAACA,UAAUA,CAAEA,GAAGA,CAACA,WAAWA,CAAGA,CAACA;oBAACA,GAAGA,GAAGA,QAAQA,CAACA,kBAAkBA,CAAEA,GAAGA,EAAEA,cAAcA,CAAEA,CAACA;gBAC1GA,cAAcA,CAACA,QAAQA,CAACA,GAAGA,CAAEA,YAAYA,EAAEA,GAAGA,CAAEA,CAACA;YAClDA,CAACA;YAACA,IAAIA,CAACA,EAAEA,CAAAA,CAAEA,CAACA,CAAEA,aAAaA,IAAIA,KAAKA,CAACA,QAAQA,CAAEA,aAAaA,CAAGA,CAACA,CAACA,CAACA;gBACjEA,IAAIA,gBAAgBA,GAA2CA,aAAaA,CAACA;gBAC7EA,IAAIA,kBAAkBA,GAA8BA,IAAIA,0BAA0BA,EAAEA,CAACA;gBAErFA,EAAEA,CAAAA,CAAEA,KAAKA,IAAIA,gBAAiBA,CAACA,CAACA,CAACA;oBAChCA,EAAEA,CAAAA,CAAEA,GAAGA,CAACA,GAAGA,CAACA,IAAIA,CAACA,UAAUA,CAAEA,YAAYA,CAAGA,CAACA;wBAACA,MAAMA,IAAIA,MAAMA,CAACA,oBAAoBA,CAAEA,uDAAuDA,CAAEA,CAACA;oBAE/IA,EAAEA,CAAAA,CAAEA,CAAEA,KAAKA,CAACA,QAAQA,CAAEA,gBAAgBA,CAAEA,KAAKA,CAAEA,CAAGA,CAACA;wBAACA,MAAMA,IAAIA,MAAMA,CAACA,oBAAoBA,CAAEA,gCAAgCA,CAAEA,CAACA;oBAC9HA,kBAAkBA,CAACA,GAAGA,GAAGA,QAAQA,CAACA,kBAAkBA,CAAEA,IAAIA,GAAGA,CAACA,GAAGA,CAACA,KAAKA,CAAEA,gBAAgBA,CAAEA,KAAKA,CAAEA,CAAEA,EAAEA,cAAcA,CAAEA,CAACA;gBACxHA,CAACA;gBAACA,IAAIA,CAACA,EAAEA,CAAAA,CAAEA,GAAGA,CAACA,GAAGA,CAACA,IAAIA,CAACA,UAAUA,CAAEA,YAAYA,CAAGA,CAACA,CAACA,CAACA;oBACrDA,kBAAkBA,CAACA,GAAGA,GAAGA,QAAQA,CAACA,kBAAkBA,CAAEA,IAAIA,GAAGA,CAACA,GAAGA,CAACA,KAAKA,CAAEA,YAAYA,CAAEA,EAAEA,cAAcA,CAAEA,CAACA;gBAC3GA,CAACA;gBAACA,IAAIA,CAACA,CAACA;oBACPA,oCAAoCA;oBACpCA,MAAMA,IAAIA,MAAMA,CAACA,oBAAoBA,CAAEA,wDAAwDA,CAAEA,CAACA;gBACnGA,CAACA;gBAEDA,EAAEA,CAAAA,CAAEA,OAAOA,IAAIA,gBAAiBA,CAACA,CAACA,CAACA;oBAClCA,EAAEA,CAAAA,CAAEA,CAAEA,KAAKA,CAACA,QAAQA,CAAEA,gBAAgBA,CAAEA,OAAOA,CAAEA,CAAGA,CAACA;wBAACA,MAAMA,IAAIA,MAAMA,CAACA,oBAAoBA,CAAEA,kCAAkCA,CAAEA,CAACA;oBAElIA,EAAEA,CAAAA,CAAEA,gBAAgBA,CAAEA,OAAOA,CAAEA,KAAKA,KAAMA,CAACA,CAACA,CAACA;wBAC5CA,kBAAkBA,CAACA,OAAOA,GAAGA,KAAKA,CAACA;oBACpCA,CAACA;oBAACA,IAAIA,CAACA,CAACA;wBACPA,kBAAkBA,CAACA,OAAOA,GAAGA,IAAIA,CAACA;wBAClCA,kBAAkBA,CAACA,WAAWA,GAAGA,QAAQA,CAACA,kBAAkBA,CAAEA,IAAIA,GAAGA,CAACA,GAAGA,CAACA,KAAKA,CAAEA,gBAAgBA,CAAEA,OAAOA,CAAEA,CAAEA,EAAEA,cAAcA,CAAEA,CAACA;oBAClIA,CAACA;gBACFA,CAACA;gBAEDA,EAAEA,CAAAA,CAAEA,WAAWA,IAAIA,gBAAiBA,CAACA,CAACA,CAACA;oBACtCA,EAAEA,CAAAA,CAAEA,CAAEA,KAAKA,CAACA,QAAQA,CAAEA,gBAAgBA,CAAEA,WAAWA,CAAEA,CAAGA,CAACA;wBAACA,MAAMA,IAAIA,MAAMA,CAACA,oBAAoBA,CAAEA,sCAAsCA,CAAEA,CAACA;oBAC1IA,kBAAkBA,CAACA,QAAQA,GAAGA,gBAAgBA,CAAEA,WAAWA,CAAEA,CAACA;gBAC/DA,CAACA;gBAEDA,EAAEA,CAAAA,CAAEA,YAAYA,IAAIA,gBAAiBA,CAACA,CAACA,CAACA;oBACvCA,MAAMA,CAAAA,CAAEA,gBAAgBA,CAAEA,YAAYA,CAAGA,CAACA,CAACA,CAACA;wBAC3CA,KAAKA,MAAMA;4BACVA,kBAAkBA,CAACA,aAAaA,GAAGA,aAAaA,CAACA,GAAGA,CAACA;4BACrDA,KAAKA,CAACA;wBACPA,KAAKA,OAAOA;4BACXA,kBAAkBA,CAACA,aAAaA,GAAGA,aAAaA,CAACA,IAAIA,CAACA;4BACtDA,KAAKA,CAACA;wBACPA,KAAKA,WAAWA;4BACfA,EAAEA,CAAAA,CAAEA,kBAAkBA,CAACA,QAAQA,KAAKA,IAAKA,CAACA;gCAACA,MAAMA,IAAIA,MAAMA,CAACA,oBAAoBA,CAAEA,uGAAuGA,CAAEA,CAACA;4BAC5LA,kBAAkBA,CAACA,aAAaA,GAAGA,aAAaA,CAACA,QAAQA,CAACA;4BAC1DA,KAAKA,CAACA;wBACPA;4BACCA,MAAMA,IAAIA,MAAMA,CAACA,oBAAoBA,CAAEA,iEAAiEA,CAAEA,CAACA;oBAC7GA,CAACA;gBACFA,CAACA;gBAEDA,cAAcA,CAACA,UAAUA,CAACA,GAAGA,CAAEA,YAAYA,EAAEA,kBAAkBA,CAAEA,CAACA;YACnEA,CAACA;YAACA,IAAIA,CAACA,CAACA;gBACPA,MAAMA,IAAIA,MAAMA,CAACA,oBAAoBA,CAAEA,uEAAuEA,CAAEA,CAACA;YAClHA,CAACA;QACFA,CAACA;QAEDA,QAAQA,CAACA,mBAAmBA,CAAEA,cAAcA,CAAEA,CAACA;QAE/CA,MAAMA,CAACA,cAAcA,CAACA;IACvBA,CAACA;IAEcJ,4BAAmBA,GAAlCA,UAAoCA,cAAmCA;QACtEK,cAAcA,CAACA,QAAQA,CAACA,OAAOA,CAAEA,UAAEA,WAAyBA,EAAEA,UAAiBA;YAC9EA,EAAEA,CAAAA,CAAEA,CAAEA,cAAcA,CAACA,YAAYA,CAACA,GAAGA,CAAEA,UAAUA,CAAGA,CAACA;gBAACA,MAAMA,CAACA;YAE7DA,IAAIA,YAAYA,GAAmBA,cAAcA,CAACA,YAAYA,CAACA,GAAGA,CAAEA,UAAUA,CAAEA,CAACA;YACjFA,GAAGA,CAAAA,CAAqBA,UAAYA,EAA/BA,wBAAeA,EAAfA,IAAgCA,CAACA;gBAAjCA,IAAIA,WAAWA,GAAIA,YAAYA,IAAhBA;gBACnBA,QAAQA,CAACA,kBAAkBA,CAAEA,WAAWA,EAAEA,cAAcA,CAAEA,CAACA;aAC3DA;YAEDA,cAAcA,CAACA,YAAYA,CAACA,MAAMA,CAAEA,UAAUA,CAAEA,CAACA;QAClDA,CAACA,CAAEA,CAACA;QAEJA,MAAMA,CAACA,cAAcA,CAACA;IACvBA,CAACA;IAEcL,2BAAkBA,GAAjCA,UAAmCA,GAAiBA,EAAEA,cAAmCA;QACxFM,EAAEA,CAAAA,CAAEA,CAAEA,GAAGA,CAACA,GAAGA,CAACA,IAAIA,CAACA,UAAUA,CAAEA,GAAGA,CAACA,WAAWA,CAAGA,CAACA;YAACA,MAAMA,CAACA,GAAGA,CAACA;QAE9DA,IAAIA,QAAQA,GAAYA,GAAGA,CAACA,WAAWA,CAACA,KAAKA,CAAEA,GAAGA,CAAEA,CAACA;QACrDA,IAAIA,MAAMA,GAAUA,QAAQA,CAAEA,CAACA,CAAEA,CAACA;QAClCA,IAAIA,IAAIA,GAAUA,QAAQA,CAAEA,CAACA,CAAEA,CAACA;QAEhCA,EAAEA,CAAAA,CAAEA,cAAcA,CAACA,QAAQA,CAACA,GAAGA,CAAEA,MAAMA,CAAGA,CAACA,CAACA,CAACA;YAC5CA,GAAGA,CAACA,WAAWA,GAAGA,cAAcA,CAACA,QAAQA,CAACA,GAAGA,CAAEA,MAAMA,CAAEA,GAAGA,IAAIA,CAACA;QAChEA,CAACA;QAACA,IAAIA,CAACA,CAACA;YACPA,EAAEA,CAAAA,CAAEA,CAAEA,cAAcA,CAACA,YAAYA,CAACA,GAAGA,CAAEA,MAAMA,CAAGA,CAACA;gBAACA,cAAcA,CAACA,YAAYA,CAACA,GAAGA,CAAEA,MAAMA,EAAEA,EAAEA,CAAEA,CAACA;YAChGA,cAAcA,CAACA,YAAYA,CAACA,GAAGA,CAAEA,MAAMA,CAAEA,CAACA,IAAIA,CAAEA,GAAGA,CAAEA,CAACA;QACvDA,CAACA;QAEDA,MAAMA,CAACA,GAAGA,CAACA;IACZA,CAACA;IACFN,eAACA;AAADA,CA5IA,AA4ICA,IAAA;AA5IY,gBAAQ,WA4IpB,CAAA","file":"ObjectSchema.js","sourcesContent":["/// <reference path=\"./../typings/tsd.d.ts\" />\n\nimport * as Errors from \"./Errors\";\nimport * as NS from \"./NS\";\nimport * as Pointer from \"./Pointer\";\nimport * as RDF from \"./RDF\";\nimport * as Utils from \"./Utils\";\n\nexport interface PropertyDefinition {\n\t\"@id\"?:string;\n\t\"@type\"?:string;\n\t\"@language\"?:string;\n\t\"@container\"?:string;\n}\n\nexport interface Class {\n\t\"@base\"?:string;\n\t\"@index\"?:Object;\n\t\"@language\"?:string;\n\t\"@reverse\"?:Object;\n\t\"@vocab\"?:string;\n\t[ name:string ]:(string | PropertyDefinition);\n}\n\nexport enum ContainerType {\n\tSET,\n\tLIST,\n\tLANGUAGE\n}\n\nexport class DigestedObjectSchema {\n\tbase:string;\n\tprefixes:Map<string, RDF.URI.Class>;\n\tproperties:Map<string, DigestedPropertyDefinition>;\n\tprefixedURIs:Map<string, RDF.URI.Class[]>;\n\n\tconstructor() {\n\t\tthis.base = \"\";\n\t\tthis.prefixes = new Map<string, RDF.URI.Class>();\n\t\tthis.properties = new Map<string, DigestedPropertyDefinition>();\n\t\tthis.prefixedURIs = new Map<string, RDF.URI.Class[]>();\n\t}\n}\n\nexport class DigestedPropertyDefinition {\n\turi:RDF.URI.Class = null;\n\tliteral:boolean = null;\n\tliteralType:RDF.URI.Class = null;\n\tlanguage:string = null;\n\tcontainerType:ContainerType = null;\n}\n\nexport interface Resolver {\n\tgetSchemaFor( object:Object ):DigestedObjectSchema;\n}\n\nexport class Digester {\n\tstatic digestSchema( schemas:Class[] ):DigestedObjectSchema;\n\tstatic digestSchema( schema:Class ):DigestedObjectSchema;\n\tstatic digestSchema( schemaOrSchemas:any ):DigestedObjectSchema {\n\t\tif( ! Utils.isArray( schemaOrSchemas ) ) return Digester.digestSingleSchema( schemaOrSchemas );\n\n\t\tlet digestedSchemas:DigestedObjectSchema[] = [];\n\t\tfor( let schema of <Class[]> schemaOrSchemas ) {\n\t\t\tdigestedSchemas.push( Digester.digestSingleSchema( schema ) );\n\t\t}\n\n\t\treturn Digester.combineDigestedObjectSchemas( digestedSchemas );\n\t}\n\n\tstatic combineDigestedObjectSchemas( digestedSchemas:DigestedObjectSchema[] ):DigestedObjectSchema {\n\t\tif( digestedSchemas.length === 0 ) throw new Errors.IllegalArgumentError( \"At least one DigestedObjectSchema needs to be specified.\" );\n\n\t\tlet combinedSchema:DigestedObjectSchema = digestedSchemas.shift();\n\n\t\tfor( let digestedSchema of digestedSchemas ) {\n\t\t\tUtils.M.extend( combinedSchema.prefixes, digestedSchema.prefixes );\n\t\t\tUtils.M.extend( combinedSchema.prefixedURIs, digestedSchema.prefixedURIs );\n\t\t\tUtils.M.extend( combinedSchema.properties, digestedSchema.properties );\n\t\t}\n\n\t\tDigester.resolvePrefixedURIs( combinedSchema );\n\n\t\treturn combinedSchema;\n\t}\n\n\tprivate static digestSingleSchema( schema:Class ):DigestedObjectSchema {\n\t\tlet digestedSchema:DigestedObjectSchema = new DigestedObjectSchema();\n\n\t\tfor( let propertyName in schema ) {\n\t\t\tif( ! schema.hasOwnProperty( propertyName ) ) continue;\n\n\t\t\tif( propertyName === \"@reverse\" ) continue;\n\t\t\tif( propertyName === \"@index\" ) continue;\n\t\t\tif( propertyName === \"@base\" ) continue;\n\t\t\tif( propertyName === \"@vocab\" ) continue;\n\n\t\t\tlet propertyValue:( string | PropertyDefinition ) = schema[ propertyName ];\n\n\t\t\tif( Utils.isString( propertyValue ) ) {\n\t\t\t\tif( RDF.URI.Util.isPrefixed( propertyName ) ) throw new Errors.IllegalArgumentError( \"A prefixed property cannot be equal to another URI.\" );\n\n\t\t\t\tlet uri:RDF.URI.Class = new RDF.URI.Class( <string> propertyValue );\n\t\t\t\tif( RDF.URI.Util.isPrefixed( uri.stringValue ) ) uri = Digester.resolvePrefixedURI( uri, digestedSchema );\n\t\t\t\tdigestedSchema.prefixes.set( propertyName, uri );\n\t\t\t} else if( !! propertyValue && Utils.isObject( propertyValue ) ) {\n\t\t\t\tlet schemaDefinition:PropertyDefinition = <PropertyDefinition> propertyValue;\n\t\t\t\tlet digestedDefinition:DigestedPropertyDefinition = new DigestedPropertyDefinition();\n\n\t\t\t\tif( \"@id\" in schemaDefinition ) {\n\t\t\t\t\tif( RDF.URI.Util.isPrefixed( propertyName ) ) throw new Errors.IllegalArgumentError( \"A prefixed property cannot have assigned another URI.\" );\n\n\t\t\t\t\tif( ! Utils.isString( schemaDefinition[ \"@id\" ] ) ) throw new Errors.IllegalArgumentError( \"@id needs to point to a string\" );\n\t\t\t\t\tdigestedDefinition.uri = Digester.resolvePrefixedURI( new RDF.URI.Class( schemaDefinition[ \"@id\" ] ), digestedSchema );\n\t\t\t\t} else if( RDF.URI.Util.isPrefixed( propertyName ) ) {\n\t\t\t\t\tdigestedDefinition.uri = Digester.resolvePrefixedURI( new RDF.URI.Class( propertyName ), digestedSchema );\n\t\t\t\t} else {\n\t\t\t\t\t// TODO: Handle @vocab or @base case\n\t\t\t\t\tthrow new Errors.IllegalArgumentError( \"Every property definition needs to have a uri defined.\" );\n\t\t\t\t}\n\n\t\t\t\tif( \"@type\" in schemaDefinition ) {\n\t\t\t\t\tif( ! Utils.isString( schemaDefinition[ \"@type\" ] ) ) throw new Errors.IllegalArgumentError( \"@type needs to point to a string\" );\n\n\t\t\t\t\tif( schemaDefinition[ \"@type\" ] === \"@id\" ) {\n\t\t\t\t\t\tdigestedDefinition.literal = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdigestedDefinition.literal = true;\n\t\t\t\t\t\tdigestedDefinition.literalType = Digester.resolvePrefixedURI( new RDF.URI.Class( schemaDefinition[ \"@type\" ] ), digestedSchema );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif( \"@language\" in schemaDefinition ) {\n\t\t\t\t\tif( ! Utils.isString( schemaDefinition[ \"@language\" ] ) ) throw new Errors.IllegalArgumentError( \"@language needs to point to a string\" );\n\t\t\t\t\tdigestedDefinition.language = schemaDefinition[ \"@language\" ];\n\t\t\t\t}\n\n\t\t\t\tif( \"@container\" in schemaDefinition ) {\n\t\t\t\t\tswitch( schemaDefinition[ \"@container\" ] ) {\n\t\t\t\t\t\tcase \"@set\":\n\t\t\t\t\t\t\tdigestedDefinition.containerType = ContainerType.SET;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"@list\":\n\t\t\t\t\t\t\tdigestedDefinition.containerType = ContainerType.LIST;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"@language\":\n\t\t\t\t\t\t\tif( digestedDefinition.language !== null ) throw new Errors.IllegalArgumentError( \"@container cannot be set to @language when the property definition already contains an @language tag.\" );\n\t\t\t\t\t\t\tdigestedDefinition.containerType = ContainerType.LANGUAGE;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tthrow new Errors.IllegalArgumentError( \"@container needs to be equal to '@list', '@set', or '@language'\" );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdigestedSchema.properties.set( propertyName, digestedDefinition );\n\t\t\t} else {\n\t\t\t\tthrow new Errors.IllegalArgumentError( \"ObjectSchema Properties can only have string values or object values.\" );\n\t\t\t}\n\t\t}\n\n\t\tDigester.resolvePrefixedURIs( digestedSchema );\n\n\t\treturn digestedSchema;\n\t}\n\n\tprivate static resolvePrefixedURIs( digestedSchema:DigestedObjectSchema ):DigestedObjectSchema {\n\t\tdigestedSchema.prefixes.forEach( ( prefixValue:RDF.URI.Class, prefixName:string ) => {\n\t\t\tif( ! digestedSchema.prefixedURIs.has( prefixName ) ) return;\n\n\t\t\tlet prefixedURIs:RDF.URI.Class[] = digestedSchema.prefixedURIs.get( prefixName );\n\t\t\tfor( let prefixedURI of prefixedURIs ) {\n\t\t\t\tDigester.resolvePrefixedURI( prefixedURI, digestedSchema );\n\t\t\t}\n\n\t\t\tdigestedSchema.prefixedURIs.delete( prefixName );\n\t\t} );\n\n\t\treturn digestedSchema;\n\t}\n\n\tprivate static resolvePrefixedURI( uri:RDF.URI.Class, digestedSchema:DigestedObjectSchema ):RDF.URI.Class {\n\t\tif( ! RDF.URI.Util.isPrefixed( uri.stringValue ) ) return uri;\n\n\t\tlet uriParts:string[] = uri.stringValue.split( \":\" );\n\t\tlet prefix:string = uriParts[ 0 ];\n\t\tlet slug:string = uriParts[ 1 ];\n\n\t\tif( digestedSchema.prefixes.has( prefix ) ) {\n\t\t\turi.stringValue = digestedSchema.prefixes.get( prefix ) + slug;\n\t\t} else {\n\t\t\tif( ! digestedSchema.prefixedURIs.has( prefix ) ) digestedSchema.prefixedURIs.set( prefix, [] );\n\t\t\tdigestedSchema.prefixedURIs.get( prefix ).push( uri );\n\t\t}\n\n\t\treturn uri;\n\t}\n}\n\n\nexport default Class;\n"],"sourceRoot":"/source/"}