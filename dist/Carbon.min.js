/**
 * CarbonLDP JavaScript SDK v0.8.1-ALPHA
 *
 * @license BSD-3-Clause
 * Copyright (c) 2015-present, Base22 Technology Group, LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * see: https://github.com/CarbonLDP/CarbonLDP-JS-SDK
 */

/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2014 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

// define URL parser
// parseUri 1.2.2
// (c) Steven Levithan <stevenlevithan.com>
// MIT License
// with local jsonld.js modifications

!function(e,t){if("function"==typeof define&&define.amd)define([],t);else{var r=t();e.Carbon=r["default"],e.C=r.Carbon}}(this,function(){var e,t,r;!function(n){function o(e,t){return x.call(e,t)}function a(e,t){var r,n,o,a,i,u,s,l,c,f,p,d=t&&t.split("/"),h=m.map,v=h&&h["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),i=e.length-1,m.nodeIdCompat&&w.test(e[i])&&(e[i]=e[i].replace(w,"")),e=d.slice(0,d.length-1).concat(e),c=0;c<e.length;c+=1)if(p=e[c],"."===p)e.splice(c,1),c-=1;else if(".."===p){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||v)&&h){for(r=e.split("/"),c=r.length;c>0;c-=1){if(n=r.slice(0,c).join("/"),d)for(f=d.length;f>0;f-=1)if(o=h[d.slice(0,f).join("/")],o&&(o=o[n])){a=o,u=c;break}if(a)break;!s&&v&&v[n]&&(s=v[n],l=c)}!a&&s&&(a=s,u=l),a&&(r.splice(0,u,a),e=r.join("/"))}return e}function i(e,t){return function(){var r=E.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),d.apply(n,r.concat([e,t]))}}function u(e){return function(t){return a(t,e)}}function s(e){return function(t){y[e]=t}}function l(e){if(o(g,e)){var t=g[e];delete g[e],b[e]=!0,p.apply(n,t)}if(!o(y,e)&&!o(b,e))throw new Error("No "+e);return y[e]}function c(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function f(e){return function(){return m&&m.config&&m.config[e]||{}}}var p,d,h,v,y={},g={},m={},b={},x=Object.prototype.hasOwnProperty,E=[].slice,w=/\.js$/;h=function(e,t){var r,n=c(e),o=n[0];return e=n[1],o&&(o=a(o,t),r=l(o)),o?e=r&&r.normalize?r.normalize(e,u(t)):a(e,t):(e=a(e,t),n=c(e),o=n[0],e=n[1],o&&(r=l(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:r}},v={require:function(e){return i(e)},exports:function(e){var t=y[e];return"undefined"!=typeof t?t:y[e]={}},module:function(e){return{id:e,uri:"",exports:y[e],config:f(e)}}},p=function(e,t,r,a){var u,c,f,p,d,m,x=[],E=typeof r;if(a=a||e,"undefined"===E||"function"===E){for(t=!t.length&&r.length?["require","exports","module"]:t,d=0;d<t.length;d+=1)if(p=h(t[d],a),c=p.f,"require"===c)x[d]=v.require(e);else if("exports"===c)x[d]=v.exports(e),m=!0;else if("module"===c)u=x[d]=v.module(e);else if(o(y,c)||o(g,c)||o(b,c))x[d]=l(c);else{if(!p.p)throw new Error(e+" missing "+c);p.p.load(p.n,i(a,!0),s(c),{}),x[d]=y[c]}f=r?r.apply(y[e],x):void 0,e&&(u&&u.exports!==n&&u.exports!==y[e]?y[e]=u.exports:f===n&&m||(y[e]=f))}else e&&(y[e]=r)},e=t=d=function(e,t,r,o,a){if("string"==typeof e)return v[e]?v[e](t):l(h(e,t).f);if(!e.splice){if(m=e,m.deps&&d(m.deps,m.callback),!t)return;t.splice?(e=t,t=r,r=null):e=n}return t=t||function(){},"function"==typeof r&&(r=o,o=a),o?p(n,e,t,r):setTimeout(function(){p(n,e,t,r)},4),d},d.config=function(e){return d(e)},e._defined=y,r=function(e,t,r){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(r=t,t=[]),o(y,e)||o(g,e)||(g[e]=[e,t,r])},r.amd={jQuery:!0}}(),r("bower_components/almond/almond.js",function(){}),r("Carbon/namespaces/C",["require","exports"],function(e,t){var r="http://carbonldp.com/ns/v1/platform#";t.namespace=r;var n=function(){function e(){}return Object.defineProperty(e,"AccessPoint",{get:function(){return r+"AccessPoint"},enumerable:!0,configurable:!0}),e}();t.Class=n;var o=function(){function e(){}return Object.defineProperty(e,"accessPoint",{get:function(){return r+"accessPoint"},enumerable:!0,configurable:!0}),e}();t.Predicate=o}),r("Carbon/namespaces/CP",["require","exports"],function(e,t){var r="http://carbonldp.com/ns/v1/patch#";t.namespace=r;var n=function(){function e(){}return e.ADD_ACTION=r+"addAction",e.SET_ACTION=r+"setAction",e.DELETE_ACTION=r+"deleteAction",e}();t.Predicate=n}),r("Carbon/namespaces/CS",["require","exports"],function(e,t){var r="http://carbonldp.com/ns/v1/security#";t.namespace=r;var n=function(){function e(){}return Object.defineProperty(e,"Application",{get:function(){return r+"Application"},enumerable:!0,configurable:!0}),e}();t.Class=n;var o=function(){function e(){}return Object.defineProperty(e,"contains",{get:function(){return r+"contains"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"rootContainer",{get:function(){return r+"rootContainer"},enumerable:!0,configurable:!0}),e}();t.Predicate=o}),r("Carbon/namespaces/LDP",["require","exports"],function(e,t){var r="http://www.w3.org/ns/ldp#";t.namespace=r;var n=function(){function e(){}return Object.defineProperty(e,"Resource",{get:function(){return r+"Resource"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RDFSource",{get:function(){return r+"RDFSource"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Container",{get:function(){return r+"Container"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BasicContainer",{get:function(){return r+"BasicContainer"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DirectContainer",{get:function(){return r+"DirectContainer"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IndirectContainer",{get:function(){return r+"IndirectContainer"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NonRDFSource",{get:function(){return r+"NonRDFSource"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MemberSubject",{get:function(){return r+"MemberSubject"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PreferContainment",{get:function(){return r+"PreferContainment"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PreferMembership",{get:function(){return r+"PreferMembership"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PreferEmptyContainer",{get:function(){return r+"PreferEmptyContainer"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PreferMinimalContainer",{get:function(){return r+"PreferMinimalContainer"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Page",{get:function(){return r+"Page"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PageSortCriterion",{get:function(){return r+"PageSortCriterion"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Ascending",{get:function(){return r+"Ascending"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Descending",{get:function(){return r+"Descending"},enumerable:!0,configurable:!0}),e}();t.Class=n;var o=function(){function e(){}return Object.defineProperty(e,"contains",{get:function(){return r+"contains"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"member",{get:function(){return r+"member"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"hasMemberRelation",{get:function(){return r+"hasMemberRelation"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"memberOfRelation",{get:function(){return r+"memberOfRelation"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"membershipResource",{get:function(){return r+"membershipResource"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"insertedContentRelation",{get:function(){return r+"insertedContentRelation"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"constrainedBy",{get:function(){return r+"constrainedBy"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pageSortCriteria",{get:function(){return r+"pageSortCriteria"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pageSortOrder",{get:function(){return r+"pageSortOrder"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pageSortCollation",{get:function(){return r+"pageSortCollation"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pageSequence",{get:function(){return r+"pageSequence"},enumerable:!0,configurable:!0}),e}();t.Predicate=o}),r("Carbon/namespaces/RDF",["require","exports"],function(e,t){var r="http://www.w3.org/1999/02/22-rdf-syntax-ns#";t.namespace=r;var n=function(){function e(){}return e.type=r+"type",e}();t.Predicate=n}),r("Carbon/namespaces/XSD",["require","exports"],function(e,t){t.namespace="http://www.w3.org/2001/XMLSchema#",function(e){e[e.date=t.namespace+"date"]="date",e[e.dateTime=t.namespace+"dateTime"]="dateTime",e[e.duration=t.namespace+"duration"]="duration",e[e.gDay=t.namespace+"gDay"]="gDay",e[e.gMonth=t.namespace+"gMonth"]="gMonth",e[e.gMonthDay=t.namespace+"gMonthDay"]="gMonthDay",e[e.gYear=t.namespace+"gYear"]="gYear",e[e.gYearMonth=t.namespace+"gYearMonth"]="gYearMonth",e[e.time=t.namespace+"time"]="time",e[e["byte"]=t.namespace+"byte"]="byte",e[e.decimal=t.namespace+"decimal"]="decimal",e[e["int"]=t.namespace+"int"]="int",e[e.integer=t.namespace+"integer"]="integer",e[e["long"]=t.namespace+"long"]="long",e[e.negativeInteger=t.namespace+"negativeInteger"]="negativeInteger",e[e.nonNegativeInteger=t.namespace+"nonNegativeInteger"]="nonNegativeInteger",e[e.nonPositiveInteger=t.namespace+"nonPositiveInteger"]="nonPositiveInteger",e[e.positiveInteger=t.namespace+"positiveInteger"]="positiveInteger",e[e["short"]=t.namespace+"short"]="short",e[e.unsignedLong=t.namespace+"unsignedLong"]="unsignedLong",e[e.unsignedInt=t.namespace+"unsignedInt"]="unsignedInt",e[e.unsignedShort=t.namespace+"unsignedShort"]="unsignedShort",e[e.unsignedByte=t.namespace+"unsignedByte"]="unsignedByte",e[e["double"]=t.namespace+"double"]="double",e[e["float"]=t.namespace+"float"]="float",e[e["boolean"]=t.namespace+"boolean"]="boolean",e[e.string=t.namespace+"string"]="string",e[e.object=t.namespace+"object"]="object"}(t.DataType||(t.DataType={}));t.DataType}),r("Carbon/NS",["require","exports","./namespaces/C","./namespaces/CP","./namespaces/CS","./namespaces/LDP","./namespaces/RDF","./namespaces/XSD"],function(e,t,r,n,o,a,i,u){t.C=r,t.CP=n,t.CS=o,t.LDP=a,t.RDF=i,t.XSD=u});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/Errors/AbstractError",["require","exports"],function(e,t){var r=function(e){function t(t){e.call(this,t),this.message=t}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"AbstractError"},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.name+":"+this.message},t}(Error);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/HTTPError",["require","exports","../../Errors/AbstractError"],function(e,t,r){var o=function(e){function t(t,r){e.call(this,t),this.response=r}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"HTTPError"},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/client/BadRequestError",["require","exports","./../HTTPError"],function(e,t,r){var o="BadRequestError",a=400,i=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/client/ConflictError",["require","exports","./../HTTPError"],function(e,t,r){var o="ConflictError",a=409,i=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/client/ForbiddenError",["require","exports","./../HTTPError"],function(e,t,r){var o="ForbiddenError",a=403,i=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/client/MethodNotAllowedError",["require","exports","./../HTTPError"],function(e,t,r){var o="MethodNotAllowedError",a=405,i=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/client/NotAcceptableError",["require","exports","./../HTTPError"],function(e,t,r){var o="MethodNotAcceptableError",a=406,i=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/client/NotFoundError",["require","exports","./../HTTPError"],function(e,t,r){var o="NotFoundError",a=404,i=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/client/PreconditionFailedError",["require","exports","./../HTTPError"],function(e,t,r){var o="PreconditionFailedError",a=412,i=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/client/PreconditionRequiredError",["require","exports","./../HTTPError"],function(e,t,r){var o="PreconditionRequiredError",a=428,i=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/client/RequestEntityTooLargeError",["require","exports","./../HTTPError"],function(e,t,r){var o="RequestEntityTooLargeError",a=413,i=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/client/RequestHeaderFieldsTooLargeError",["require","exports","./../HTTPError"],function(e,t,r){var o="RequestHeaderFieldsTooLargeError",a=431,i=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/client/RequestURITooLongError",["require","exports","./../HTTPError"],function(e,t,r){var o="RequestURITooLongError",a=414,i=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/client/TooManyRequestsError",["require","exports","./../HTTPError"],function(e,t,r){var o="TooManyRequestsError",a=429,i=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/client/UnauthorizedError",["require","exports","./../HTTPError"],function(e,t,r){var o="UnauthorizedError",a=401,i=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/client/UnsupportedMediaTypeError",["require","exports","./../HTTPError"],function(e,t,r){var o="UnsupportedMediaTypeError",a=415,i=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/server/BadGatewayError",["require","exports","./../HTTPError"],function(e,t,r){var o="BadGatewayError",a=502,i=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/server/GatewayTimeoutError",["require","exports","./../HTTPError"],function(e,t,r){var o="GatewayTimeoutError",a=504,i=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/server/HTTPVersionNotSupportedError",["require","exports","./../HTTPError"],function(e,t,r){var o="HTTPVersionNotSupportedError",a=505,i=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/server/InternalServerErrorError",["require","exports","./../HTTPError"],function(e,t,r){var o="InternalServerError",a=500,i=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/server/NotImplementedError",["require","exports","./../HTTPError"],function(e,t,r){var o="NotImplementedError",a=501,i=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/server/ServiceUnavailableError",["require","exports","./../HTTPError"],function(e,t,r){var o="ServiceUnavailableError",a=503,i=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t,"statusCode",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/HTTP/Errors/UnknownError",["require","exports","./HTTPError"],function(e,t,r){var o="UnknownError",a=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return o},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a}),r("Carbon/HTTP/Errors",["require","exports","./Errors/client/BadRequestError","./Errors/client/ConflictError","./Errors/client/ForbiddenError","./Errors/client/MethodNotAllowedError","./Errors/client/NotAcceptableError","./Errors/client/NotFoundError","./Errors/client/PreconditionFailedError","./Errors/client/PreconditionRequiredError","./Errors/client/RequestEntityTooLargeError","./Errors/client/RequestHeaderFieldsTooLargeError","./Errors/client/RequestURITooLongError","./Errors/client/TooManyRequestsError","./Errors/client/UnauthorizedError","./Errors/client/UnsupportedMediaTypeError","./Errors/server/BadGatewayError","./Errors/server/GatewayTimeoutError","./Errors/server/HTTPVersionNotSupportedError","./Errors/server/InternalServerErrorError","./Errors/server/NotImplementedError","./Errors/server/ServiceUnavailableError","./Errors/UnknownError"],function(e,t,r,n,o,a,i,u,s,l,c,f,p,d,h,v,y,g,m,b,x,E,w){t.BadRequestError=r["default"],t.ConflictError=n["default"],t.ForbiddenError=o["default"],t.MethodNotAllowedError=a["default"],t.NotAcceptableError=i["default"],t.NotFoundError=u["default"],t.PreconditionFailedError=s["default"],t.PreconditionRequiredError=l["default"],t.RequestEntityTooLargeError=c["default"],t.RequestHeaderFieldsTooLargeError=f["default"],t.RequestURITooLongError=p["default"],t.TooManyRequestsError=d["default"],t.UnauthorizedError=h["default"],t.UnsupportedMediaTypeError=v["default"],t.BadGatewayError=y["default"],t.GatewayTimeoutError=g["default"],t.HTTPVersionNotSupportedError=m["default"],t.InternalServerErrorError=b["default"],t.NotImplementedError=x["default"],t.ServiceUnavailableError=E["default"],t.UnknownError=w["default"];var O=[];t.client=O,O.push(r["default"]),O.push(n["default"]),O.push(o["default"]),O.push(a["default"]),O.push(i["default"]),O.push(u["default"]),O.push(s["default"]),O.push(l["default"]),O.push(c["default"]),O.push(f["default"]),O.push(p["default"]),O.push(d["default"]),O.push(h["default"]),O.push(v["default"]);var P=[];t.server=P,P.push(y["default"]),P.push(g["default"]),P.push(m["default"]),P.push(b["default"]),P.push(x["default"]),P.push(E["default"]);var j=new Map;t.statusCodeMap=j;for(var T=0,C=O.length;C>T;T++)j.set(O[T].statusCode,O[T]);for(var T=0,D=P.length;D>T;T++)j.set(P[T].statusCode,P[T])}),r("Carbon/Utils",["require","exports"],function(e,t){function r(e,t){return"function"==typeof e[t]}function n(e,t){return e?"undefined"!=typeof e[t]:!1}function o(e,t){return!!Object.getOwnPropertyDescriptor(e,t)}function a(e){return null===e}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function u(e){return"string"==typeof e||e instanceof String}function s(e){return"boolean"==typeof e}function l(e){return"number"==typeof e||e instanceof Number}function c(e){return l(e)?e%1==0:!1}function f(e){return l(e)?e%1!=0:!1}function p(e){return"date"==typeof e||e instanceof Date}function d(e){return"object"==typeof e&&!!e}function h(e){return"function"==typeof e}function v(e){return d(e)&&r(e,"get")&&r(e,"has")&&n(e,"size")&&r(e,"clear")&&r(e,"delete")&&r(e,"entries")&&r(e,"forEach")&&r(e,"get")&&r(e,"has")&&r(e,"keys")&&r(e,"set")&&r(e,"values")}function y(e){if(!u(e))return!1;switch(e.toLowerCase()){case"true":case"yes":case"y":case"1":return!0;case"false":case"no":case"n":case"0":default:return!1}}function g(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!(arguments.length<=1)){for(var n=1,o=arguments.length;o>n;n++){var a=t[n];for(var i in a)a.hasOwnProperty(i)&&(e[i]=a[i])}return e}}function m(e,t){if(!d(e))throw new Error("IllegalArgument");for(var r in e)e.hasOwnProperty(r)&&t(r,e[r])}t.hasFunction=r,t.hasProperty=n,t.hasPropertyDefined=o,t.isNull=a,t.isArray=i,t.isString=u,t.isBoolean=s,t.isNumber=l,t.isInteger=c,t.isDouble=f,t.isDate=p,t.isObject=d,t.isFunction=h,t.isMap=v,t.parseBoolean=y,t.extend=g,t.forEachOwnProperty=m;var b=function(){function e(){}return e.startsWith=function(e,t){return 0===e.lastIndexOf(t,0)},e.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},e.contains=function(e,t){return-1!==e.indexOf(t)},e}();t.S=b;var x=function(){function e(){}return e.from=function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r},e.joinWithoutDuplicates=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var r=e[0].slice(),n=1,o=e.length;o>n;n++)r=r.concat(e[n].filter(function(e){return r.indexOf(e)<0}));return r},e}();t.A=x;var E=function(){function e(){}return e.from=function(e){var t=new Map;return m(e,function(e,r){t.set(e,r)}),t},e.extend=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0,o=t.length;o>n;n++)for(var a,i=t[n],u=i.entries();!(a=u.next()).done;){var s=a.value,l=s[0],c=s[1];e.has(l)||e.set(l,c)}return e},e}();t.M=E;var w=function(){function e(){}return e.is=function(t){return e.regExp.test(t)},e.generate=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,r="x"==e?t:3&t|8;return r.toString(16)})},e.regExp=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,e}();t.UUID=w}),r("Carbon/HTTP/Header",["require","exports","./../Utils"],function(e,t,r){var n=function(){function e(){}return e.parseHeaders=function(e){for(var t=new Map,r=e.split("\r\n"),n=0,a=r.length;a>n;n++){var i=r[n];if(i.trim()){var u=i.split(":");if(2!=u.length)throw new Error("ParseError: The header couldn't be parsed.");var s=u[0].trim(),l=new o(u[1].trim());if(t.has(s)){var c=t.get(s);c.values.concat(l.values)}else t.set(s,l)}}return t},e}();t.Util=n;var o=function(){function e(e){this.values=[],e&&(Array.isArray(e)?this.values=e:this.setValues(e))}return e.prototype.setValues=function(e){this.values=[];for(var t=e.split(","),r=0,n=t.length;n>r;r++){var o=t[r],i=new a(o);this.values.push(i)}},e.prototype.toString=function(){return this.values.join(", ")},e}();t.Class=o;var a=function(){function e(e,t,r,n){this.mainKey=null,this.mainValue=null,this.secondaryKey=null,this.secondaryValue=null,t?(this.mainKey=e,this.mainValue=t,this.secondaryKey=r,this.secondaryValue=n):this.setValue(e)}return e.prototype.setValue=function(e){var t=e.split(";");this.setMain(t[0]),t.length>1&&this.setSecondary(t[1])},e.prototype.setMain=function(t){var r=t.split("=");1===r.length?this.mainValue=e.cleanString(r[0]):2===r.length?(this.mainKey=e.cleanString(r[0]),this.mainValue=e.cleanString(r[1])):this.mainValue=t},e.prototype.setSecondary=function(t){var r=t.split("=");1===r.length?this.secondaryValue=e.cleanString(r[0]):2===r.length?(this.secondaryKey=e.cleanString(r[0]),this.secondaryValue=e.cleanString(r[1])):this.secondaryValue=t},e.cleanString=function(e){return e=e.trim(),e=r.S.startsWith(e,'"')||r.S.startsWith(e,"'")?e.substr(1,e.length):e,e=r.S.endsWith(e,'"')||r.S.endsWith(e,"'")?e.substr(0,e.length-1):e},e.prototype.toString=function(){var e="";return this.mainKey&&(e+=this.mainKey+"="),e+=this.mainValue,(this.secondaryKey||this.secondaryValue)&&(e+="; "),this.secondaryKey&&(e+=this.secondaryKey+"="),this.secondaryValue&&(e+=this.secondaryValue),e},e}();t.Value=a}),r("Carbon/HTTP/Method",["require","exports"],function(e,t){
var r;!function(e){e[e.OPTIONS=0]="OPTIONS",e[e.HEAD=1]="HEAD",e[e.GET=2]="GET",e[e.POST=3]="POST",e[e.PUT=4]="PUT",e[e.PATCH=5]="PATCH",e[e.DELETE=6]="DELETE"}(r||(r={})),Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r}),r("Carbon/HTTP/Response",["require","exports","./Header"],function(e,t,r){var n=function(){function e(e){this.status=e.status,this.data=e.responseText,this.setHeaders(e),this.request=e}return e.prototype.setHeaders=function(e){var t=e.getAllResponseHeaders();t?this.headers=r.Util.parseHeaders(t):this.headers=new Map},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n}),r("Carbon/HTTP/Request",["require","exports","./Method","./Response","./Errors","./../Utils"],function(e,t,r,n,o,a){function i(e,t){for(var r=t.keys(),n=r.next();!n.done;){var o=n.value,a=t.get(o);e.setRequestHeader(o,a.toString()),n=r.next()}}function u(e,t,r){return function(){var o=new n["default"](r);r.status>=200&&r.status<=299?e(o):l(t,r)}}function s(e,t){return function(){l(e,t)}}function l(e,t){var r=new n["default"](t);if(r.status>=400&&r.status<600&&o.statusCodeMap.has(r.status)){var a=o.statusCodeMap.get(r.status);e(new a("",r))}e(new o.UnknownError("",r))}var c=function(){function e(){}return e.send=function(t,n,o,l){void 0===o&&(o=e.defaultOptions),void 0===l&&(l=e.defaultOptions);var c=a.isString(o)?o:null;return l=a.isString(o)?l:o,a.isNumber(t)&&(t=r["default"][t]),new Promise(function(e,r){var o=l.request?l.request:new XMLHttpRequest;o.open(t,n,!0),l.headers&&i(o,l.headers),o.withCredentials=l.sendCredentialsOnCORS,l.timeout&&(o.timeout=l.timeout),o.onload=u(e,r,o),o.onerror=s(r,o),c?o.send(c):o.send()})},e.options=function(t,n){return void 0===n&&(n=e.defaultOptions),e.send(r["default"].OPTIONS,t,n)},e.head=function(t,n){return void 0===n&&(n=e.defaultOptions),e.send(r["default"].HEAD,t,n)},e.get=function(t,n){return void 0===n&&(n=e.defaultOptions),e.send(r["default"].GET,t,n)},e.post=function(t,n,o){return void 0===o&&(o=e.defaultOptions),e.send(r["default"].POST,t,n,o)},e.put=function(t,n,o){return void 0===o&&(o=e.defaultOptions),e.send(r["default"].PUT,t,n,o)},e.patch=function(t,n,o){return void 0===o&&(o=e.defaultOptions),e.send(r["default"].PATCH,t,n,o)},e["delete"]=function(t,n,o){return void 0===o&&(o=e.defaultOptions),e.send(r["default"].DELETE,t,n,o)},e.defaultOptions={sendCredentialsOnCORS:!0},e}();t.Service=c}),r("Carbon/HTTP/StatusCode",["require","exports"],function(e,t){var r;!function(e){e[e.CONTINUE=100]="CONTINUE",e[e.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",e[e.OK=200]="OK",e[e.CREATED=201]="CREATED",e[e.ACCEPTED=202]="ACCEPTED",e[e.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",e[e.NO_CONTENT=204]="NO_CONTENT",e[e.RESET_CONTENT=205]="RESET_CONTENT",e[e.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",e[e.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",e[e.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",e[e.FOUND=302]="FOUND",e[e.SEE_OTHER=303]="SEE_OTHER",e[e.NOT_MODIFIED=304]="NOT_MODIFIED",e[e.USE_PROXY=305]="USE_PROXY",e[e.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",e[e.FORBIDDEN=403]="FORBIDDEN",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",e[e.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",e[e.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",e[e.REQUEST_TIME_OUT=408]="REQUEST_TIME_OUT",e[e.CONFLICT=409]="CONFLICT",e[e.GONE=410]="GONE",e[e.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",e[e.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",e[e.REQUEST_ENTITY_TOO_LARGE=413]="REQUEST_ENTITY_TOO_LARGE",e[e.REQUEST_URI_TOO_LARGE=414]="REQUEST_URI_TOO_LARGE",e[e.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",e[e.REQUESTED_RANGE_NOT_SATISFIABLE=416]="REQUESTED_RANGE_NOT_SATISFIABLE",e[e.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",e[e.BAD_GATEWAY=502]="BAD_GATEWAY",e[e.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",e[e.GATEWAY_TIME_OUT=504]="GATEWAY_TIME_OUT",e[e.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED"}(r||(r={})),Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r}),r("Carbon/HTTP",["require","exports","./HTTP/Errors","./HTTP/Header","./HTTP/Method","./HTTP/Request","./HTTP/Response","./HTTP/StatusCode"],function(e,t,r,n,o,a,i,u){t.Errors=r,t.Header=n,t.Method=o["default"],t.Request=a,t.Response=i["default"],t.StatusCode=u["default"]});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/Errors/IllegalStateError",["require","exports","./AbstractError"],function(e,t,r){var o=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"IllegalStateError"},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/Errors/IllegalArgumentError",["require","exports","./AbstractError"],function(e,t,r){var o=function(e){function t(){e.apply(this,arguments)}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"IllegalArgumentError"},enumerable:!0,configurable:!0}),t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o}),r("Carbon/Errors",["require","exports","./Errors/IllegalStateError","./Errors/IllegalArgumentError"],function(e,t,r,n){t.IllegalStateError=r["default"],t.IllegalArgumentError=n["default"]}),r("Carbon/Auth",["require","exports","./HTTP","./Errors"],function(e,t,r,n){var o;!function(e){e[e.Basic=0]="Basic"}(o||(o={})),t.Method=o;var a=function(){function e(e){this.authenticated=!1,this.method=null,this.parent=e}return e.prototype.isAuthenticated=function(e){return void 0===e&&(e=!0),this.authenticated||e&&!!this.parent.parent&&this.parent.parent.Auth.isAuthenticated()},e.prototype.login=function(e,t){var r=this.parent.getSetting("auth.method");switch(r){case o.Basic:return this.basicAuthentication(e,t);default:return new Promise(function(){throw new n.IllegalStateError("The authentication method specified isn't supported.")})}},e.prototype.addAuthentication=function(e){if(!this.isAuthenticated(!1)){if(this.parent.parent)return void this.parent.parent.Auth.addAuthentication(e);console.warn("There is no authentication to add to the request.")}var t=e.headers?e.headers:e.headers=new Map;switch(this.method){case o.Basic:this.addBasicAuthHeader(t),e.sendCredentialsOnCORS=!0}},e.prototype.basicAuthentication=function(e,t){var r=this;return new Promise(function(n,a){r.credentials={username:e,password:t},r.method=o.Basic,r.authenticated=!0,n()})},e.prototype.addBasicAuthHeader=function(e){var t;e.has("Authorization")?t=e.get("Authorization"):(t=new r.Header.Class,e.set("Authorization",t));var n="Basic "+btoa(this.credentials.username+":"+this.credentials.password);t.values.push(new r.Header.Value(n))},e}();t.Class=a,Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a}),function(){var e="undefined"!=typeof process&&process.versions&&process.versions.node,n=!e&&("undefined"!=typeof window||"undefined"!=typeof self);n&&"undefined"==typeof global&&("undefined"!=typeof window?global=window:"undefined"!=typeof self?global=self:"undefined"!=typeof $&&(global=$));var o=function(r){function o(){}function a(e){for(var t=[],r=Object.keys(e).sort(),n=0;n<r.length;++n){var o=r[n],a=e[o];q(a)||(a=[a]);for(var i=0;i<a.length;++i){var u=a[i];if(!V(u))throw new Se("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:e});t.push({"@value":u,"@language":o.toLowerCase()})}}return t}function i(e,t){if(q(t))for(var r=0;r<t.length;++r)t[r]=i(e,t[r]);else if(K(t))t["@list"]=i(e,t["@list"]);else if(k(t)){$(t)&&(t["@id"]=e.getName(t["@id"]));for(var n=Object.keys(t).sort(),o=0;o<n.length;++o){var a=n[o];"@id"!==a&&(t[a]=i(e,t[a]))}}return t}function u(e,t,n){if(null===n||void 0===n)return null;var o=N(e,t,{vocab:!0});if("@id"===o)return N(e,n,{base:!0});if("@type"===o)return N(e,n,{vocab:!0,base:!0});var a=r.getContextValue(e,t,"@type");if("@id"===a||"@graph"===o&&V(n))return{"@id":N(e,n,{base:!0})};if("@vocab"===a)return{"@id":N(e,n,{vocab:!0,base:!0})};if(F(o))return n;var i={};if(null!==a)i["@type"]=a;else if(V(n)){var u=r.getContextValue(e,t,"@language");null!==u&&(i["@language"]=u)}return-1===["boolean","number","string"].indexOf(typeof n)&&(n=n.toString()),i["@value"]=n,i}function s(e,t,r){for(var n=[],o=Object.keys(e).sort(),a=0;a<o.length;++a)for(var i=o[a],u=e[i],s=Object.keys(u).sort(),f=0;f<s.length;++f){var p=s[f],d=u[p];if("@type"===p)p=je;else if(F(p))continue;for(var h=0;h<d.length;++h){var v=d[h],y={};if(y.type=0===i.indexOf("_:")?"blank node":"IRI",y.value=i,Z(i)){var g={};if(g.type=0===p.indexOf("_:")?"blank node":"IRI",g.value=p,Z(p)&&("blank node"!==g.type||r.produceGeneralizedRdf))if(K(v))l(v["@list"],t,y,g,n);else{var m=c(v);m&&n.push({subject:y,predicate:g,object:m})}}}}return n}function l(e,t,r,n,o){for(var a={type:"IRI",value:we},i={type:"IRI",value:Oe},u={type:"IRI",value:Pe},s=0;s<e.length;++s){var l=e[s],f={type:"blank node",value:t.getName()};o.push({subject:r,predicate:n,object:f}),r=f,n=a;var p=c(l);p&&o.push({subject:r,predicate:n,object:p}),n=i}o.push({subject:r,predicate:n,object:u})}function c(e){var t={};if(X(e)){t.type="literal";var r=e["@value"],n=e["@type"]||null;z(r)?(t.value=r.toString(),t.datatype=n||ye):J(r)||n===ge?(J(r)||(r=parseFloat(r)),t.value=r.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),t.datatype=n||ge):B(r)?(t.value=r.toFixed(0),t.datatype=n||me):"@language"in e?(t.value=r,t.datatype=n||Re,t.language=e["@language"]):(t.value=r,t.datatype=n||be)}else{var o=k(e)?e["@id"]:e;t.type=0===o.indexOf("_:")?"blank node":"IRI",t.value=o}return"IRI"!==t.type||Z(t.value)?t:null}function f(e,t){if("IRI"===e.type||"blank node"===e.type)return{"@id":e.value};var r={"@value":e.value};if(e.language)r["@language"]=e.language;else{var n=e.datatype;if(n||(n=be),t){if(n===ye)"true"===r["@value"]?r["@value"]=!0:"false"===r["@value"]&&(r["@value"]=!1);else if(G(r["@value"]))if(n===me){var o=parseInt(r["@value"],10);o.toFixed(0)===r["@value"]&&(r["@value"]=o)}else n===ge&&(r["@value"]=parseFloat(r["@value"]));-1===[ye,me,ge,be].indexOf(n)&&(r["@type"]=n)}else n!==be&&(r["@type"]=n)}return r}function p(e,t){for(var r=["subject","predicate","object"],n=0;n<r.length;++n){var o=r[n];if(e[o].type!==t[o].type||e[o].value!==t[o].value)return!1}return e.object.language!==t.object.language?!1:e.object.datatype!==t.object.datatype?!1:!0}function d(e,t){if("hash"in t[e])return t[e].hash;for(var r=t[e].quads,n=[],o=0;o<r.length;++o)n.push(ae(r[o],r[o].name?r[o].name.value:null,e));n.sort();var a=t[e].hash=Le.hash(n);return a}function h(e,t,n,o,a){function i(a){if(a===f.length)return s=Object.keys(c).sort(),u(0);var l=f[a],p=v(l.subject,e),h=null;if(null!==p?h="p":(p=v(l.object,e),null!==p&&(h="r")),null!==p){var y;y=n.isNamed(p)?n.getName(p):o.isNamed(p)?o.getName(p):d(p,t);var g=Le.create();g.update(h),g.update(l.predicate.value),g.update(y);var m=g.digest();m in c?c[m].push(p):c[m]=[p]}r.setImmediate(function(){i(a+1)})}function u(e){function i(){function s(e){if(e===m.length)return c(!1);var r=m[e];h(r,t,n,y,function(t,n){return t?a(t):(g+=y.getName(r)+"<"+n.hash+">",y=n.pathNamer,null!==p&&g.length>=p.length&&g>p?c(!0):void s(e+1))})}function c(t){!t&&(null===p||p>g)&&(p=g,d=y),v.hasNext()?r.setImmediate(function(){i()}):(l.update(p),o=d,u(e+1))}var f=v.next(),y=o.clone(),g="",m=[];for(var b in f){var x=f[b];if(n.isNamed(x)?g+=n.getName(x):(y.isNamed(x)||m.push(x),g+=y.getName(x)),null!==p&&g.length>=p.length&&g>p)return c(!0)}s(0)}if(e===s.length)return a(null,{hash:l.digest(),pathNamer:o});var f=s[e];l.update(f);var p=null,d=null,v=new Ae(c[f]);r.setImmediate(function(){i()})}var s,l=Le.create(),c={},f=t[e].quads;r.setImmediate(function(){i(0)})}function v(e,t){return"blank node"===e.type&&e.value!==t?e.value:null}function y(e,t,n,o,a,i){if(q(e))for(var u=0;u<e.length;++u)y(e[u],t,n,o,void 0,i);else{if(!k(e))return void(i&&i.push(e));if(X(e)){if("@type"in e){var s=e["@type"];0===s.indexOf("_:")&&(e["@type"]=s=o.getName(s))}return void(i&&i.push(e))}if("@type"in e)for(var l=e["@type"],u=0;u<l.length;++u){var s=l[u];0===s.indexOf("_:")&&o.getName(s)}Y(a)&&(a=$(e)?o.getName(e["@id"]):e["@id"]),i&&i.push({"@id":a});var c=t[n],f=c[a]=c[a]||{};f["@id"]=a;for(var p=Object.keys(e).sort(),d=0;d<p.length;++d){var h=p[d];if("@id"!==h)if("@reverse"!==h)if("@graph"!==h)if("@type"!==h&&F(h)){if("@index"===h&&h in f&&(e[h]!==f[h]||e[h]["@id"]!==f[h]["@id"]))throw new Se("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:f});f[h]=e[h]}else{var v=e[h];if(0===h.indexOf("_:")&&(h=o.getName(h)),0!==v.length)for(var g=0;g<v.length;++g){var m=v[g];if("@type"===h&&(m=0===m.indexOf("_:")?o.getName(m):m),W(m)||Q(m)){var b=$(m)?o.getName(m["@id"]):m["@id"];r.addValue(f,h,{"@id":b},{propertyIsArray:!0,allowDuplicate:!1}),y(m,t,n,o,b)}else if(K(m)){var x=[];y(m["@list"],t,n,o,a,x),m={"@list":x},r.addValue(f,h,m,{propertyIsArray:!0,allowDuplicate:!1})}else y(m,t,n,o,a),r.addValue(f,h,m,{propertyIsArray:!0,allowDuplicate:!1})}else r.addValue(f,h,[],{propertyIsArray:!0})}else{a in t||(t[a]={});var E="@merged"===n?n:a;y(e[h],t,E,o)}else{var w={"@id":a},O=e["@reverse"];for(var P in O)for(var j=O[P],T=0;T<j.length;++T){var C=j[T],D=C["@id"];$(C)&&(D=o.getName(D)),y(C,t,n,o,D),r.addValue(c[D],P,w,{propertyIsArray:!0,allowDuplicate:!1})}}}}}function g(e){for(var t=e["@default"],r=Object.keys(e).sort(),n=0;n<r.length;++n){var o=r[n];if("@default"!==o){var a=e[o],i=t[o];i?"@graph"in i||(i["@graph"]=[]):t[o]=i={"@id":o,"@graph":[]};for(var u=i["@graph"],s=Object.keys(a).sort(),l=0;l<s.length;++l){var c=a[s[l]];Q(c)||u.push(c)}}}return t}function m(e,t,r,n,o){w(r),r=r[0];for(var a=e.options,i={embed:E(r,a,"embed"),explicit:E(r,a,"explicit"),requireAll:E(r,a,"requireAll")},u=O(e,t,r,i),s=Object.keys(u).sort(),l=0;l<s.length;++l){var c=s[l],f=u[c];if("@link"===i.embed&&c in e.link)T(n,o,e.link[c]);else{null===o&&(e.uniqueEmbeds={});var p={};if(p["@id"]=c,e.link[c]=p,"@never"===i.embed||x(f,e.subjectStack))T(n,o,p);else{"@last"===i.embed&&(c in e.uniqueEmbeds&&j(e,c),e.uniqueEmbeds[c]={parent:n,property:o}),e.subjectStack.push(f);for(var d=Object.keys(f).sort(),h=0;h<d.length;h++){var v=d[h];if(F(v))p[v]=ee(f[v]);else if(!i.explicit||v in r)for(var y=f[v],g=0;g<y.length;++g){var P=y[g];if(K(P)){var C={"@list":[]};T(p,v,C);var D=P["@list"];for(var R in D)if(P=D[R],Q(P)){var I=v in r?r[v][0]["@list"]:b(i);m(e,[P["@id"]],I,C,"@list")}else T(C,"@list",ee(P))}else if(Q(P)){var I=v in r?r[v]:b(i);m(e,[P["@id"]],I,p,v)}else T(p,v,ee(P))}}for(var d=Object.keys(r).sort(),h=0;h<d.length;++h){var v=d[h];if(!F(v)){var _=r[v][0],S=E(_,a,"omitDefault");if(!(S||v in p)){var N="@null";"@default"in _&&(N=ee(_["@default"])),q(N)||(N=[N]),p[v]=[{"@preserve":N}]}}}T(n,o,p),e.subjectStack.pop()}}}}function b(e){var t={};for(var r in e)void 0!==e[r]&&(t["@"+r]=[e[r]]);return[t]}function x(e,t){for(var r=t.length-1;r>=0;--r)if(t[r]["@id"]===e["@id"])return!0;return!1}function E(e,t,r){var n="@"+r,o=n in e?e[n][0]:t[r];return"embed"===r&&(o===!0?o="@last":o===!1?o="@never":"@always"!==o&&"@never"!==o&&"@link"!==o&&(o="@last")),o}function w(e){if(!q(e)||1!==e.length||!k(e[0]))throw new Se("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e})}function O(e,t,r,n){for(var o={},a=0;a<t.length;++a){var i=t[a],u=e.subjects[i];P(u,r,n)&&(o[i]=u)}return o}function P(e,t,n){if("@type"in t&&(1!==t["@type"].length||!k(t["@type"][0]))){for(var o=t["@type"],a=0;a<o.length;++a)if(r.hasValue(e,"@type",o[a]))return!0;return!1}var i=!0,u=!1;for(var s in t){if(F(s)){if("@id"!==s&&"@type"!==s)continue;if(i=!1,"@id"===s&&V(t[s])){if(e[s]!==t[s])return!1;u=!0;continue}}if(i=!1,s in e){if(q(t[s])&&0===t[s].length&&void 0!==e[s])return!1;u=!0}else{var l=q(t[s])&&k(t[s][0])&&"@default"in t[s][0];if(n.requireAll&&!l)return!1}}return i||u}function j(e,t){var n=e.uniqueEmbeds,o=n[t],a=o.parent,i=o.property,u={"@id":t};if(q(a)){for(var s=0;s<a.length;++s)if(r.compareValues(a[s],u)){a[s]=u;break}}else{var l=q(a[i]);r.removeValue(a,i,u,{propertyIsArray:l}),r.addValue(a,i,u,{propertyIsArray:l})}var c=function(e){for(var t=Object.keys(n),r=0;r<t.length;++r){var o=t[r];o in n&&k(n[o].parent)&&n[o].parent["@id"]===e&&(delete n[o],c(o))}};c(t)}function T(e,t,n){k(e)?r.addValue(e,t,n,{propertyIsArray:!0}):e.push(n)}function C(e,t,n){if(q(t)){for(var o=[],a=0;a<t.length;++a){var i=C(e,t[a],n);null!==i&&o.push(i)}t=o}else if(k(t)){if("@preserve"in t)return"@null"===t["@preserve"]?null:t["@preserve"];if(X(t))return t;if(K(t))return t["@list"]=C(e,t["@list"],n),t;var u=I(e,"@id");if(u in t){var s=t[u];if(s in n.link){var l=n.link[s].indexOf(t);if(-1!==l)return n.link[s][l];n.link[s].push(t)}else n.link[s]=[t]}for(var c in t){var i=C(e,t[c],n),f=r.getContextValue(e,c,"@container");n.compactArrays&&q(i)&&1===i.length&&null===f&&(i=i[0]),t[c]=i}}return t}function D(e,t){return e.length<t.length?-1:t.length<e.length?1:e===t?0:t>e?-1:1}function R(e,t,r,n,o,a){null===a&&(a="@null");var i=[];if("@id"!==a&&"@reverse"!==a||!Q(r))i.push(a);else{"@reverse"===a&&i.push("@reverse");var u=I(e,r["@id"],null,{vocab:!0});u in e.mappings&&e.mappings[u]&&e.mappings[u]["@id"]===r["@id"]?i.push.apply(i,["@vocab","@id"]):i.push.apply(i,["@id","@vocab"])}i.push("@none");for(var s=e.inverse[t],l=0;l<n.length;++l){var c=n[l];if(c in s)for(var f=s[c][o],p=0;p<i.length;++p){var d=i[p];if(d in f)return f[d]}}return null}function I(e,t,r,n,o){if(null===t)return t;if(Y(r)&&(r=null),Y(o)&&(o=!1),n=n||{},F(t)&&(n.vocab=!0),n.vocab&&t in e.getInverse()){var a=e["@language"]||"@none",i=[];k(r)&&"@index"in r&&i.push("@index");var u="@language",s="@null";if(o)u="@type",s="@reverse",i.push("@set");else if(K(r)){"@index"in r||i.push("@list");for(var l=r["@list"],c=0===l.length?a:null,f=null,p=0;p<l.length;++p){var d=l[p],h="@none",v="@none";if(X(d)?"@language"in d?h=d["@language"]:"@type"in d?v=d["@type"]:h="@null":v="@id",null===c?c=h:h!==c&&X(d)&&(c="@none"),null===f?f=v:v!==f&&(f="@none"),"@none"===c&&"@none"===f)break}c=c||"@none",f=f||"@none","@none"!==f?(u="@type",s=f):s=c}else X(r)?"@language"in r&&!("@index"in r)?(i.push("@language"),s=r["@language"]):"@type"in r&&(u="@type",s=r["@type"]):(u="@type",s="@id"),i.push("@set");i.push("@none");var y=R(e,t,r,i,u,s);if(null!==y)return y}if(n.vocab&&"@vocab"in e){var g=e["@vocab"];if(0===t.indexOf(g)&&t!==g){var m=t.substr(g.length);if(!(m in e.mappings))return m}}var b=null;for(var y in e.mappings)if(-1===y.indexOf(":")){var x=e.mappings[y];if(x&&x["@id"]!==t&&0===t.indexOf(x["@id"])){var E=y+":"+t.substr(x["@id"].length),w=!(E in e.mappings)||null===r&&e.mappings[E]&&e.mappings[E]["@id"]===t;w&&(null===b||D(E,b)<0)&&(b=E)}}return null!==b?b:n.vocab?t:L(e["@base"],t)}function _(e,t,n){if(X(n)){var o=r.getContextValue(e,t,"@type"),a=r.getContextValue(e,t,"@language"),i=r.getContextValue(e,t,"@container"),u="@index"in n&&"@index"!==i;if(!u&&(n["@type"]===o||n["@language"]===a))return n["@value"];var s=Object.keys(n).length,l=1===s||2===s&&"@index"in n&&!u,c="@language"in e,f=V(n["@value"]),p=e.mappings[t]&&null===e.mappings[t]["@language"];if(l&&(!c||!f||p))return n["@value"];var d={};return u&&(d[I(e,"@index")]=n["@index"]),"@type"in n?d[I(e,"@type")]=I(e,n["@type"],null,{vocab:!0}):"@language"in n&&(d[I(e,"@language")]=n["@language"]),d[I(e,"@value")]=n["@value"],d}var h=N(e,t,{vocab:!0}),o=r.getContextValue(e,t,"@type"),v=I(e,n["@id"],null,{vocab:"@vocab"===o});if("@id"===o||"@vocab"===o||"@graph"===h)return v;var d={};return d[I(e,"@id")]=v,d}function S(e,t,r,n){if(r in n){if(n[r])return;throw new Se("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:r})}if(n[r]=!1,F(r))throw new Se("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:r});if(""===r)throw new Se("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t});e.mappings[r]&&delete e.mappings[r];var o=t[r];if(null===o||k(o)&&null===o["@id"])return e.mappings[r]=null,void(n[r]=!0);if(V(o)&&(o={"@id":o}),!k(o))throw new Se("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});var a=e.mappings[r]={};if(a.reverse=!1,"@reverse"in o){if("@id"in o)throw new Se("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});var i=o["@reverse"];if(!V(i))throw new Se("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});var u=N(e,i,{vocab:!0,base:!1},t,n);if(!Z(u))throw new Se("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});a["@id"]=u,a.reverse=!0}else if("@id"in o){var u=o["@id"];if(!V(u))throw new Se("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(u!==r){if(u=N(e,u,{vocab:!0,base:!1},t,n),!Z(u)&&!F(u))throw new Se("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});a["@id"]=u}}if(!("@id"in a)){var s=r.indexOf(":");if(-1!==s){var l=r.substr(0,s);if(l in t&&S(e,t,l,n),e.mappings[l]){var c=r.substr(s+1);a["@id"]=e.mappings[l]["@id"]+c}else a["@id"]=r}else{if(!("@vocab"in e))throw new Se("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:r});a["@id"]=e["@vocab"]+r}}if(n[r]=!0,"@type"in o){var f=o["@type"];if(!V(f))throw new Se("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@id"!==f&&"@vocab"!==f){if(f=N(e,f,{vocab:!0,base:!1},t,n),!Z(f))throw new Se("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===f.indexOf("_:"))throw new Se("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}a["@type"]=f}if("@container"in o){var p=o["@container"];if("@list"!==p&&"@set"!==p&&"@index"!==p&&"@language"!==p)throw new Se("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(a.reverse&&"@index"!==p&&"@set"!==p&&null!==p)throw new Se("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});a["@container"]=p}if("@language"in o&&!("@type"in o)){var d=o["@language"];if(null!==d&&!V(d))throw new Se("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==d&&(d=d.toLowerCase()),a["@language"]=d}var u=a["@id"];if("@context"===u||"@preserve"===u)throw new Se("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t})}function N(e,t,n,o,a){if(null===t||F(t))return t;if(t=String(t),o&&t in o&&a[t]!==!0&&S(e,o,t,a),n=n||{},n.vocab){var i=e.mappings[t];if(null===i)return null;if(i)return i["@id"]}var u=t.indexOf(":");if(-1!==u){var s=t.substr(0,u),l=t.substr(u+1);if("_"===s||0===l.indexOf("//"))return t;o&&s in o&&S(e,o,s,a);var i=e.mappings[s];return i?i["@id"]+l:t}if(n.vocab&&"@vocab"in e)return e["@vocab"]+t;var c=t;return n.base&&(c=r.prependBase(e["@base"],c)),c}function A(e,t){if(null===e)return t;if(-1!==t.indexOf(":"))return t;V(e)&&(e=r.url.parse(e||""));var n=r.url.parse(t),o={protocol:e.protocol||""};if(null!==n.authority)o.authority=n.authority,o.path=n.path,o.query=n.query;else if(o.authority=e.authority,""===n.path)o.path=e.path,null!==n.query?o.query=n.query:o.query=e.query;else{if(0===n.path.indexOf("/"))o.path=n.path;else{var a=e.path;""!==n.path&&(a=a.substr(0,a.lastIndexOf("/")+1),a.length>0&&"/"!==a.substr(-1)&&(a+="/"),a+=n.path),o.path=a}o.query=n.query}o.path=se(o.path,!!o.authority);var i=o.protocol;return null!==o.authority&&(i+="//"+o.authority),i+=o.path,null!==o.query&&(i+="?"+o.query),null!==n.fragment&&(i+="#"+n.fragment),""===i&&(i="./"),i}function L(e,t){if(null===e)return t;V(e)&&(e=r.url.parse(e||""));var n="";if(""!==e.href?n+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(n+="//"),0!==t.indexOf(n))return t;for(var o=r.url.parse(t.substr(n.length)),a=e.normalizedPath.split("/"),i=o.normalizedPath.split("/"),u=o.fragment||o.query?0:1;a.length>0&&i.length>u&&a[0]===i[0];)a.shift(),i.shift();var s="";if(a.length>0){a.pop();for(var l=0;l<a.length;++l)s+="../"}return s+=i.join("/"),null!==o.query&&(s+="?"+o.query),null!==o.fragment&&(s+="#"+o.fragment),""===s&&(s="./"),s}function U(e){function t(){var e=this;if(e.inverse)return e.inverse;for(var t=e.inverse={},r=e["@language"]||"@none",o=e.mappings,a=Object.keys(o).sort(D),i=0;i<a.length;++i){var u=a[i],s=o[u];if(null!==s){var l=s["@container"]||"@none",c=s["@id"];q(c)||(c=[c]);for(var f=0;f<c.length;++f){var p=c[f],d=t[p];if(d||(t[p]=d={}),d[l]||(d[l]={"@language":{},"@type":{}}),d=d[l],s.reverse)n(s,u,d["@type"],"@reverse");else if("@type"in s)n(s,u,d["@type"],s["@type"]);else if("@language"in s){var h=s["@language"]||"@null";n(s,u,d["@language"],h)}else n(s,u,d["@language"],r),n(s,u,d["@type"],"@none"),n(s,u,d["@language"],"@none")}}}return t}function n(e,t,r,n){n in r||(r[n]=t)}function o(){var e={};return e["@base"]=this["@base"],e.mappings=ee(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e}var a=r.url.parse(e.base||"");return{"@base":a,mappings:{},inverse:null,getInverse:t,clone:o}}function F(e){if(!V(e))return!1;switch(e){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return!0}return!1}function k(e){return"[object Object]"===Object.prototype.toString.call(e)}function M(e){return k(e)&&0===Object.keys(e).length}function q(e){return Array.isArray(e)}function H(e){if(!V(e)&&!M(e)){var t=!1;if(q(e)){t=!0;for(var r=0;r<e.length;++r)if(!V(e[r])){t=!1;break}}if(!t)throw new Se('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}}function V(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)}function B(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function J(e){return B(e)&&-1!==String(e).indexOf(".")}function G(e){return!isNaN(parseFloat(e))&&isFinite(e)}function z(e){return"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e)}function Y(e){return"undefined"==typeof e}function W(e){var t=!1;if(k(e)&&!("@value"in e||"@set"in e||"@list"in e)){var r=Object.keys(e).length;t=r>1||!("@id"in e)}return t}function Q(e){return k(e)&&1===Object.keys(e).length&&"@id"in e}function X(e){return k(e)&&"@value"in e}function K(e){return k(e)&&"@list"in e}function $(e){var t=!1;return k(e)&&(t="@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e)),t}function Z(e){return V(e)&&-1!==e.indexOf(":")}function ee(e){if(e&&"object"==typeof e){var t;if(q(e)){t=[];for(var r=0;r<e.length;++r)t[r]=ee(e[r])}else if(k(e)){t={};for(var n in e)t[n]=ee(e[n])}else t=e.toString();return t}return e}function te(e,t,n,o){var a=Object.keys(t).length;if(q(e)){for(var i=0;i<e.length;++i)te(e[i],t,n,o);return a<Object.keys(t).length}if(k(e)){for(var u in e)if("@context"===u){var s=e[u];if(q(s))for(var l=s.length,i=0;l>i;++i){var c=s[i];V(c)&&(c=r.prependBase(o,c),n?(c=t[c],q(c)?(Array.prototype.splice.apply(s,[i,1].concat(c)),i+=c.length-1,l=s.length):s[i]=c):c in t||(t[c]=!1))}else V(s)&&(s=r.prependBase(o,s),n?e[u]=t[s]:s in t||(t[s]=!1))}else te(e[u],t,n,o);return a<Object.keys(t).length}return!1}function re(e,t,r){var n=null,o=t.documentLoader,a=function(e,t,r,o,i){if(Object.keys(t).length>_e)return n=new Se("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:_e}),i(n);var u={},s=function(){te(e,u,!0,o),i(null,e)};te(e,u,!1,o)||s();var l=[];for(var c in u)u[c]===!1&&l.push(c);for(var f=l.length,p=0;p<l.length;++p)!function(e){if(e in t)return n=new Se("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:e}),i(n);var o=ee(t);o[e]=!0;var l=function(t,l){if(!n){var c=l?l.document:null;if(!t&&V(c))try{c=JSON.parse(c)}catch(p){t=p}if(t?t=new Se("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:e,cause:t}):k(c)||(t=new Se("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:e,cause:t})),t)return n=t,i(n);c="@context"in c?{"@context":c["@context"]}:{"@context":{}},l.contextUrl&&(q(c["@context"])||(c["@context"]=[c["@context"]]),c["@context"].push(l.contextUrl)),a(c,o,r,e,function(t,r){return t?i(t):(u[e]=r["@context"],f-=1,void(0===f&&s()))})}},c=r(e,l);c&&"then"in c&&c.then(l.bind(null,null),l)}(l[p])};a(e,{},o,t.base,r)}function ne(e){for(var t="(?:<([^:]+:[^>]*)>)",r="(_:(?:[A-Za-z0-9]+))",n='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',o="(?:\\^\\^"+t+")",a="(?:@([a-z]+(?:-[a-z0-9]+)*))",i="(?:"+n+"(?:"+o+"|"+a+")?)",u="[ \\t]+",s="[ \\t]*",l=/(?:\r\n)|(?:\n)|(?:\r)/g,c=new RegExp("^"+s+"$"),f="(?:"+t+"|"+r+")"+u,d=t+u,h="(?:"+t+"|"+r+"|"+i+")"+s,v="(?:\\.|(?:(?:"+t+"|"+r+")"+s+"\\.))",y=new RegExp("^"+s+f+d+h+v+s+"$"),g={},m=e.split(l),b=0,x=0;x<m.length;++x){var E=m[x];if(b++,!c.test(E)){var w=E.match(y);if(null===w)throw new Se("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:b});var O={};if(Y(w[1])?O.subject={type:"blank node",value:w[2]}:O.subject={type:"IRI",value:w[1]},O.predicate={type:"IRI",value:w[3]},Y(w[4]))if(Y(w[5])){O.object={type:"literal"},Y(w[7])?Y(w[8])?O.object.datatype=be:(O.object.datatype=Re,O.object.language=w[8]):O.object.datatype=w[7];var P=w[6].replace(/\\"/g,'"').replace(/\\t/g,"	").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");O.object.value=P}else O.object={type:"blank node",value:w[5]};else O.object={type:"IRI",value:w[4]};var j="@default";if(Y(w[9])?Y(w[10])||(j=w[10]):j=w[9],j in g){for(var T=!0,C=g[j],D=0;T&&D<C.length;++D)p(C[D],O)&&(T=!1);T&&C.push(O);
}else g[j]=[O]}}return g}function oe(e){var t=[];for(var r in e)for(var n=e[r],o=0;o<n.length;++o){var a=n[o];"@default"===r&&(r=null),t.push(ae(a,r))}return t.sort(),t.join("")}function ae(e,t,r){var n=e.subject,o=e.predicate,a=e.object,i=t,u="";if(u+="IRI"===n.type?"<"+n.value+">":r?n.value===r?"_:a":"_:z":n.value,u+=" ",u+="IRI"===o.type?"<"+o.value+">":r?"_:p":o.value,u+=" ","IRI"===a.type)u+="<"+a.value+">";else if("blank node"===a.type)u+=r?a.value===r?"_:a":"_:z":a.value;else{var s=a.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"');u+='"'+s+'"',a.datatype===Re?a.language&&(u+="@"+a.language):a.datatype!==be&&(u+="^^<"+a.datatype+">")}return null!==i&&(u+=0!==i.indexOf("_:")?" <"+i+">":r?" _:g":" "+i),u+=" .\n"}function ie(e){var t={};t["@default"]=[];for(var r=e.getSubjects(),n=0;n<r.length;++n){var o=r[n];if(null!==o){var a=e.getSubjectTriples(o);if(null!==a){var i=a.predicates;for(var u in i)for(var s=i[u].objects,l=0;l<s.length;++l){var c=s[l],f={};0===o.indexOf("_:")?f.subject={type:"blank node",value:o}:f.subject={type:"IRI",value:o},0===u.indexOf("_:")?f.predicate={type:"blank node",value:u}:f.predicate={type:"IRI",value:u};var p=c.value;if(c.type===Ce){he||ke();var d=new he;p="";for(var h=0;h<c.value.length;h++)c.value[h].nodeType===ve.ELEMENT_NODE?p+=d.serializeToString(c.value[h]):c.value[h].nodeType===ve.TEXT_NODE&&(p+=c.value[h].nodeValue)}f.object={},c.type===De?0===c.value.indexOf("_:")?f.object.type="blank node":f.object.type="IRI":(f.object.type="literal",c.type===Te?c.language?(f.object.datatype=Re,f.object.language=c.language):f.object.datatype=be:f.object.datatype=c.type),f.object.value=p,t["@default"].push(f)}}}}return t}function ue(e){this.prefix=e,this.counter=0,this.existing={}}function se(e,t){var r="";0===e.indexOf("/")&&(r="/");for(var n=e.split("/"),o=[];n.length>0;)"."===n[0]||""===n[0]&&n.length>1?n.shift():".."!==n[0]?o.push(n.shift()):(n.shift(),t||o.length>0&&".."!==o[o.length-1]?o.pop():o.push(".."));return r+o.join("/")}r.compact=function(e,t,n,o){function a(e,r,n,a){if(e)return o(e);a.compactArrays&&!a.graph&&q(r)?1===r.length?r=r[0]:0===r.length&&(r={}):a.graph&&k(r)&&(r=[r]),k(t)&&"@context"in t&&(t=t["@context"]),t=ee(t),q(t)||(t=[t]);var i=t;t=[];for(var u=0;u<i.length;++u)(!k(i[u])||Object.keys(i[u]).length>0)&&t.push(i[u]);var s=t.length>0;if(1===t.length&&(t=t[0]),q(r)){var l=I(n,"@graph"),c=r;r={},s&&(r["@context"]=t),r[l]=c}else if(k(r)&&s){var c=r;r={"@context":t};for(var f in c)r[f]=c[f]}o(null,r,n)}if(arguments.length<2)return r.nextTick(function(){o(new TypeError("Could not compact, too few arguments."))});if("function"==typeof n&&(o=n,n={}),n=n||{},null===t)return r.nextTick(function(){o(new Se("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))});if(null===e)return r.nextTick(function(){o(null,null)});"base"in n||(n.base="string"==typeof e?e:""),"compactArrays"in n||(n.compactArrays=!0),"graph"in n||(n.graph=!1),"skipExpansion"in n||(n.skipExpansion=!1),"documentLoader"in n||(n.documentLoader=r.loadDocument),"link"in n||(n.link=!1),n.link&&(n.skipExpansion=!0);var i=function(e,t,n){r.nextTick(function(){return t.skipExpansion?n(null,e):void r.expand(e,t,n)})};i(e,n,function(e,i){if(e)return o(new Se("Could not expand input before compaction.","jsonld.CompactError",{cause:e}));var u=U(n);r.processContext(u,t,n,function(e,t){if(e)return o(new Se("Could not process context before compaction.","jsonld.CompactError",{cause:e}));var r;try{r=(new Ne).compact(t,null,i,n)}catch(u){return o(u)}a(null,r,t,n)})})},r.expand=function(e,t,n){function o(e){"base"in t||(t.base=e.documentUrl||"");var r={document:ee(e.document),remoteContext:{"@context":e.contextUrl}};if("expandContext"in t){var o=ee(t.expandContext);"object"==typeof o&&"@context"in o?r.expandContext=o:r.expandContext={"@context":o}}re(r,t,function(e,r){if(e)return n(e);var o;try{var a=new Ne,i=U(t),u=r.document,s=r.remoteContext["@context"];r.expandContext&&(i=a.processContext(i,r.expandContext["@context"],t)),s&&(i=a.processContext(i,s,t)),o=a.expand(i,null,u,t,!1),k(o)&&"@graph"in o&&1===Object.keys(o).length?o=o["@graph"]:null===o&&(o=[]),q(o)||(o=[o])}catch(l){return n(l)}n(null,o)})}return arguments.length<1?r.nextTick(function(){n(new TypeError("Could not expand, too few arguments."))}):("function"==typeof t&&(n=t,t={}),t=t||{},"documentLoader"in t||(t.documentLoader=r.loadDocument),"keepFreeFloatingNodes"in t||(t.keepFreeFloatingNodes=!1),void r.nextTick(function(){if("string"==typeof e){var r=function(e,t){if(e)return n(e);try{if(!t.document)throw new Se("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof t.document&&(t.document=JSON.parse(t.document))}catch(r){return n(new Se("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:r,remoteDoc:t}))}o(t)},a=t.documentLoader(e,r);return void(a&&"then"in a&&a.then(r.bind(null,null),r))}o({contextUrl:null,documentUrl:null,document:e})}))},r.flatten=function(e,t,n,o){return arguments.length<1?r.nextTick(function(){o(new TypeError("Could not flatten, too few arguments."))}):("function"==typeof n?(o=n,n={}):"function"==typeof t&&(o=t,t=null,n={}),n=n||{},"base"in n||(n.base="string"==typeof e?e:""),"documentLoader"in n||(n.documentLoader=r.loadDocument),void r.expand(e,n,function(e,a){if(e)return o(new Se("Could not expand input before flattening.","jsonld.FlattenError",{cause:e}));var i;try{i=(new Ne).flatten(a)}catch(u){return o(u)}return null===t?o(null,i):(n.graph=!0,n.skipExpansion=!0,void r.compact(i,t,n,function(e,t){return e?o(new Se("Could not compact flattened output.","jsonld.FlattenError",{cause:e})):void o(null,t)}))}))},r.frame=function(e,t,n,o){function a(t){var a,i=t.document;i?(a=i["@context"],t.contextUrl?(a?q(a)?a.push(t.contextUrl):a=[a,t.contextUrl]:a=t.contextUrl,i["@context"]=a):a=a||{}):a={},r.expand(e,n,function(e,t){if(e)return o(new Se("Could not expand input before framing.","jsonld.FrameError",{cause:e}));var u=ee(n);u.isFrame=!0,u.keepFreeFloatingNodes=!0,r.expand(i,u,function(e,n){if(e)return o(new Se("Could not expand frame before framing.","jsonld.FrameError",{cause:e}));var i;try{i=(new Ne).frame(t,n,u)}catch(s){return o(s)}u.graph=!0,u.skipExpansion=!0,u.link={},r.compact(i,a,u,function(e,t,r){if(e)return o(new Se("Could not compact framed output.","jsonld.FrameError",{cause:e}));var n=I(r,"@graph");u.link={},t[n]=C(r,t[n],u),o(null,t)})})})}return arguments.length<2?r.nextTick(function(){o(new TypeError("Could not frame, too few arguments."))}):("function"==typeof n&&(o=n,n={}),n=n||{},"base"in n||(n.base="string"==typeof e?e:""),"documentLoader"in n||(n.documentLoader=r.loadDocument),"embed"in n||(n.embed="@last"),n.explicit=n.explicit||!1,"requireAll"in n||(n.requireAll=!0),n.omitDefault=n.omitDefault||!1,void r.nextTick(function(){if("string"==typeof t){var e=function(e,t){if(e)return o(e);try{if(!t.document)throw new Se("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof t.document&&(t.document=JSON.parse(t.document))}catch(r){return o(new Se("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:r,remoteDoc:t}))}a(t)},r=n.documentLoader(t,e);return void(r&&"then"in r&&r.then(e.bind(null,null),e))}a({contextUrl:null,documentUrl:null,document:t})}))},r.link=function(e,t,n,o){var a={};t&&(a["@context"]=t),a["@embed"]="@link",r.frame(e,a,n,o)},r.objectify=function(e,t,n,o){"function"==typeof n&&(o=n,n={}),n=n||{},"base"in n||(n.base="string"==typeof e?e:""),"documentLoader"in n||(n.documentLoader=r.loadDocument),r.expand(e,n,function(e,a){if(e)return o(new Se("Could not expand input before linking.","jsonld.LinkError",{cause:e}));var i;try{i=(new Ne).flatten(a)}catch(u){return o(u)}n.graph=!0,n.skipExpansion=!0,r.compact(i,t,n,function(e,t,n){if(e)return o(new Se("Could not compact flattened output before linking.","jsonld.LinkError",{cause:e}));var a=I(n,"@graph"),i=t[a][0],u=function(e){if(k(e)||q(e)){if(k(e)){if(u.visited[e["@id"]])return;u.visited[e["@id"]]=!0}for(var t in e){var o=e[t],a="@id"===r.getContextValue(n,t,"@type");if(q(o)||k(o)||a)if(V(o)&&a)e[t]=o=i[o],u(o);else if(q(o))for(var s=0;s<o.length;++s)V(o[s])&&a?o[s]=i[o[s]]:k(o[s])&&"@id"in o[s]&&(o[s]=i[o[s]["@id"]]),u(o[s]);else if(k(o)){var l=o["@id"];e[t]=o=i[l],u(o)}}}};u.visited={},u(i),t.of_type={};for(var s in i)if("@type"in i[s]){var l=i[s]["@type"];q(l)||(l=[l]);for(var c=0;c<l.length;++c)l[c]in t.of_type||(t.of_type[l[c]]=[]),t.of_type[l[c]].push(i[s])}o(null,t)})})},r.normalize=function(e,t,n){if(arguments.length<1)return r.nextTick(function(){n(new TypeError("Could not normalize, too few arguments."))});"function"==typeof t&&(n=t,t={}),t=t||{},"base"in t||(t.base="string"==typeof e?e:""),"documentLoader"in t||(t.documentLoader=r.loadDocument);var o=ee(t);delete o.format,o.produceGeneralizedRdf=!1,r.toRDF(e,o,function(e,r){return e?n(new Se("Could not convert input to RDF dataset before normalization.","jsonld.NormalizeError",{cause:e})):void(new Ne).normalize(r,t,n)})},r.fromRDF=function(e,t,n){return arguments.length<1?r.nextTick(function(){n(new TypeError("Could not convert from RDF, too few arguments."))}):("function"==typeof t&&(n=t,t={}),t=t||{},"useRdfType"in t||(t.useRdfType=!1),"useNativeTypes"in t||(t.useNativeTypes=!1),"format"in t||!V(e)||"format"in t||(t.format="application/nquads"),void r.nextTick(function(){function r(e,t,r){(new Ne).fromRDF(e,t,r)}var o;if(t.format){if(o=t.rdfParser||de[t.format],!o)return n(new Se("Unknown input format.","jsonld.UnknownFormat",{format:t.format}))}else o=function(){return e};var a=!1;try{e=o(e,function(e,o){return a=!0,e?n(e):void r(o,t,n)})}catch(i){if(!a)return n(i);throw i}if(e){if("then"in e)return e.then(function(e){r(e,t,n)},n);r(e,t,n)}}))},r.toRDF=function(e,t,n){return arguments.length<1?r.nextTick(function(){n(new TypeError("Could not convert to RDF, too few arguments."))}):("function"==typeof t&&(n=t,t={}),t=t||{},"base"in t||(t.base="string"==typeof e?e:""),"documentLoader"in t||(t.documentLoader=r.loadDocument),void r.expand(e,t,function(e,r){if(e)return n(new Se("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:e}));var o;try{if(o=Ne.prototype.toRDF(r,t),t.format){if("application/nquads"===t.format)return n(null,oe(o));throw new Se("Unknown output format.","jsonld.UnknownFormat",{format:t.format})}}catch(a){return n(a)}n(null,o)}))},r.createNodeMap=function(e,t,n){return arguments.length<1?r.nextTick(function(){n(new TypeError("Could not create node map, too few arguments."))}):("function"==typeof t&&(n=t,t={}),t=t||{},"base"in t||(t.base="string"==typeof e?e:""),"documentLoader"in t||(t.documentLoader=r.loadDocument),void r.expand(e,t,function(e,r){if(e)return n(new Se("Could not expand input before creating node map.","jsonld.CreateNodeMapError",{cause:e}));var o;try{o=(new Ne).createNodeMap(r,t)}catch(a){return n(a)}n(null,o)}))},r.merge=function(e,t,n,o){function a(e,t){if(!s){if(e)return s=e,o(new Se("Could not expand input before flattening.","jsonld.FlattenError",{cause:e}));u.push(t),0===--l&&i(u)}}function i(e){var a=!0;"mergeNodes"in n&&(a=n.mergeNodes);var i,u=n.namer||new ue("_:b"),s={"@default":{}};try{for(var l=0;l<e.length;++l){var c=e[l];c=r.relabelBlankNodes(c,{namer:new ue("_:b"+l+"-")});var f=a||0===l?s:{"@default":{}};if(y(c,f,"@default",u),f!==s)for(var p in f){var d=f[p];if(p in s){var h=s[p];for(var v in d)v in h||(h[v]=d[v])}else s[p]=d}}i=g(s)}catch(m){return o(m)}for(var b=[],x=Object.keys(i).sort(),E=0;E<x.length;++E){var w=i[x[E]];Q(w)||b.push(w)}return null===t?o(null,b):(n.graph=!0,n.skipExpansion=!0,void r.compact(b,t,n,function(e,t){return e?o(new Se("Could not compact merged output.","jsonld.MergeError",{cause:e})):void o(null,t)}))}if(arguments.length<1)return r.nextTick(function(){o(new TypeError("Could not merge, too few arguments."))});if(!q(e))return r.nextTick(function(){o(new TypeError('Could not merge, "docs" must be an array.'))});"function"==typeof n?(o=n,n={}):"function"==typeof t&&(o=t,t=null,n={}),n=n||{};for(var u=[],s=null,l=e.length,c=0;c<e.length;++c){var f={};for(var p in n)f[p]=n[p];r.expand(e[c],f,a)}},r.relabelBlankNodes=function(e,t){t=t||{};var r=t.namer||new ue("_:b");return i(r,e)},r.prependBase=function(e,t){return A(e,t)},r.documentLoader=function(t,n){var o=new Se("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed"});return e?n(o,{contextUrl:null,documentUrl:t,document:null}):r.promisify(function(e){e(o)})},r.loadDocument=function(e,t){var n=r.documentLoader(e,t);n&&"then"in n&&n.then(t.bind(null,null),t)},r.promises=function(e){e=e||{};var n=Array.prototype.slice,o=r.promisify,a=e.api||{},i=e.version||"jsonld.js";"string"==typeof e.api&&(e.version||(i=e.api),a={}),a.expand=function(e){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");return o.apply(null,[r.expand].concat(n.call(arguments)))},a.compact=function(e,t){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");var a=function(e,t,n,o){r.compact(e,t,n,function(e,t){o(e,t)})};return o.apply(null,[a].concat(n.call(arguments)))},a.flatten=function(e){if(arguments.length<1)throw new TypeError("Could not flatten, too few arguments.");return o.apply(null,[r.flatten].concat(n.call(arguments)))},a.frame=function(e,t){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");return o.apply(null,[r.frame].concat(n.call(arguments)))},a.fromRDF=function(e){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");return o.apply(null,[r.fromRDF].concat(n.call(arguments)))},a.toRDF=function(e){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");return o.apply(null,[r.toRDF].concat(n.call(arguments)))},a.normalize=function(e){if(arguments.length<1)throw new TypeError("Could not normalize, too few arguments.");return o.apply(null,[r.normalize].concat(n.call(arguments)))},"jsonld.js"===i&&(a.link=function(e,t){if(arguments.length<2)throw new TypeError("Could not link, too few arguments.");return o.apply(null,[r.link].concat(n.call(arguments)))},a.objectify=function(e){return o.apply(null,[r.objectify].concat(n.call(arguments)))},a.createNodeMap=function(e){return o.apply(null,[r.createNodeMap].concat(n.call(arguments)))},a.merge=function(e){return o.apply(null,[r.merge].concat(n.call(arguments)))});try{r.Promise=global.Promise||t("es6-promise").Promise}catch(u){var s=function(){throw new Error("Unable to find a Promise implementation.")};for(var l in a)a[l]=s}return a},r.promisify=function(e){if(!r.Promise)try{r.Promise=global.Promise||t("es6-promise").Promise}catch(n){throw new Error("Unable to find a Promise implementation.")}var o=Array.prototype.slice.call(arguments,1);return new r.Promise(function(t,r){e.apply(null,o.concat(function(e,n){e?r(e):t(n)}))})},r.promises({api:r.promises}),o.prototype=r.promises({version:"json-ld-1.0"}),o.prototype.toString=function(){return this instanceof o?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"},r.JsonLdProcessor=o;var le=!!Object.defineProperty;if(le)try{Object.defineProperty({},"x",{})}catch(ce){le=!1}le&&(Object.defineProperty(o,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(o.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:o})),n&&"undefined"==typeof global.JsonLdProcessor&&(le?Object.defineProperty(global,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:o}):global.JsonLdProcessor=o);var fe="function"==typeof setImmediate&&setImmediate,pe=fe?function(e){fe(e)}:function(e){setTimeout(e,0)};"object"==typeof process&&"function"==typeof process.nextTick?r.nextTick=process.nextTick:r.nextTick=pe,r.setImmediate=fe?pe:r.nextTick,r.parseLinkHeader=function(e){for(var t={},r=e.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g),n=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,o=0;o<r.length;++o){var a=r[o].match(n);if(a){for(var i={target:a[1]},u=a[2],s=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;a=s.exec(u);)i[a[1]]=void 0===a[2]?a[3]:a[2];var l=i.rel||"";q(t[l])?t[l].push(i):l in t?t[l]=[t[l],i]:t[l]=i}}return t},r.RequestQueue=function(){this._requests={}},r.RequestQueue.prototype.wrapLoader=function(e){return this._loader=e,this._usePromise=1===e.length,this.add.bind(this)},r.RequestQueue.prototype.add=function(e,t){var n=this;if(!t&&!n._usePromise)throw new Error("callback must be specified.");return n._usePromise?new r.Promise(function(t,r){var o=n._requests[e];o||(o=n._requests[e]=n._loader(e).then(function(t){return delete n._requests[e],t})["catch"](function(t){throw delete n._requests[e],t})),o.then(function(e){t(e)})["catch"](function(e){r(e)})}):void(e in n._requests?n._requests[e].push(t):(n._requests[e]=[t],n._loader(e,function(t,r){var o=n._requests[e];delete n._requests[e];for(var a=0;a<o.length;++a)o[a](t,r)})))},r.DocumentCache=function(e){this.order=[],this.cache={},this.size=e||50,this.expires=3e4},r.DocumentCache.prototype.get=function(e){if(e in this.cache){var t=this.cache[e];if(t.expires>=+new Date)return t.ctx;delete this.cache[e],this.order.splice(this.order.indexOf(e),1)}return null},r.DocumentCache.prototype.set=function(e,t){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(e),this.cache[e]={ctx:t,expires:+new Date+this.expires}},r.ActiveContextCache=function(e){this.order=[],this.cache={},this.size=e||100},r.ActiveContextCache.prototype.get=function(e,t){var r=JSON.stringify(e),n=JSON.stringify(t),o=this.cache[r];return o&&n in o?o[n]:null},r.ActiveContextCache.prototype.set=function(e,t,r){if(this.order.length===this.size){var n=this.order.shift();delete this.cache[n.activeCtx][n.localCtx]}var o=JSON.stringify(e),a=JSON.stringify(t);this.order.push({activeCtx:o,localCtx:a}),o in this.cache||(this.cache[o]={}),this.cache[o][a]=ee(r)},r.cache={activeCtx:new r.ActiveContextCache},r.documentLoaders={},r.documentLoaders.jquery=function(e,t){function n(n,o){return 0!==n.indexOf("http:")&&0!==n.indexOf("https:")?o(new Se('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null}):t.secure&&0!==n.indexOf("https")?o(new Se('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null}):void e.ajax({url:n,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",crossDomain:!0,success:function(e,t,a){var i={contextUrl:null,documentUrl:n,document:e},u=a.getResponseHeader("Content-Type"),s=a.getResponseHeader("Link");if(s&&"application/ld+json"!==u){if(s=r.parseLinkHeader(s)[Ie],q(s))return o(new Se("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:n}),i);s&&(i.contextUrl=s.target)}o(null,i)},error:function(e,t,r){o(new Se("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:n,cause:r}),{contextUrl:null,documentUrl:n,document:null})}})}t=t||{};var o=new r.RequestQueue,a="usePromise"in t?t.usePromise:"undefined"!=typeof Promise;return a?o.wrapLoader(function(e){return r.promisify(n,e)}):o.wrapLoader(n)},r.documentLoaders.node=function(e){function n(t,l,c){function f(e,o,i){if(p={contextUrl:null,documentUrl:t,document:i||null},e)return c(new Se("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:t,cause:e}),p);var f=u.STATUS_CODES[o.statusCode];if(o.statusCode>=400)return c(new Se("URL could not be dereferenced: "+f,"jsonld.InvalidUrl",{code:"loading document failed",url:t,httpStatusCode:o.statusCode}),p);if(o.headers.link&&"application/ld+json"!==o.headers["content-type"]){var d=r.parseLinkHeader(o.headers.link)[Ie];if(q(d))return c(new Se("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:t}),p);d&&(p.contextUrl=d.target)}if(o.statusCode>=300&&o.statusCode<400&&o.headers.location)return l.length===a?c(new Se("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:t,httpStatusCode:o.statusCode,redirects:l}),p):-1!==l.indexOf(t)?c(new Se("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:t,httpStatusCode:o.statusCode,redirects:l}),p):(l.push(t),n(o.headers.location,l,c));l.push(t);for(var h=0;h<l.length;++h)s.set(l[h],{contextUrl:null,documentUrl:l[h],document:i});c(e,p)}if(0!==t.indexOf("http:")&&0!==t.indexOf("https:"))return c(new Se('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:t}),{contextUrl:null,documentUrl:t,document:null});if(e.secure&&0!==t.indexOf("https"))return c(new Se('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:t}),{contextUrl:null,documentUrl:t,document:null});var p=s.get(t);return null!==p?c(null,p):void i({url:t,headers:{Accept:"application/ld+json, application/json"},strictSSL:o,followRedirect:!1},f)}e=e||{};var o="strictSSL"in e?e.strictSSL:!0,a="maxRedirects"in e?e.maxRedirects:-1,i=t("request"),u=t("http"),s=new r.DocumentCache,l=new r.RequestQueue;return e.usePromise?l.wrapLoader(function(e){return r.promisify(n,e,[])}):l.wrapLoader(function(e,t){n(e,[],t)})},r.documentLoaders.xhr=function(e){function t(t,o){if(0!==t.indexOf("http:")&&0!==t.indexOf("https:"))return o(new Se('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:t}),{contextUrl:null,documentUrl:t,document:null});if(e.secure&&0!==t.indexOf("https"))return o(new Se('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:t}),{contextUrl:null,documentUrl:t,document:null});var a=e.xhr||XMLHttpRequest,i=new a;i.onload=function(){if(i.status>=400)return o(new Se("URL could not be dereferenced: "+i.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:t,httpStatusCode:i.status}),{contextUrl:null,documentUrl:t,document:null});var e,a={contextUrl:null,documentUrl:t,document:i.response},u=i.getResponseHeader("Content-Type");if(n.test(i.getAllResponseHeaders())&&(e=i.getResponseHeader("Link")),e&&"application/ld+json"!==u){if(e=r.parseLinkHeader(e)[Ie],q(e))return o(new Se("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:t}),a);e&&(a.contextUrl=e.target)}o(null,a)},i.onerror=function(){o(new Se("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:t}),{contextUrl:null,documentUrl:t,document:null})},i.open("GET",t,!0),i.setRequestHeader("Accept","application/ld+json, application/json"),i.send()}e=e||{};var n=/(^|(\r\n))link:/i,o=new r.RequestQueue,a="usePromise"in e?e.usePromise:"undefined"!=typeof Promise;return a?o.wrapLoader(function(e){return r.promisify(t,e)}):o.wrapLoader(t)},r.useDocumentLoader=function(e){if(!(e in r.documentLoaders))throw new Se('Unknown document loader type: "'+e+'"',"jsonld.UnknownDocumentLoader",{type:e});r.documentLoader=r.documentLoaders[e].apply(r,Array.prototype.slice.call(arguments,1))},r.processContext=function(e,t){var n={},o=2;arguments.length>3&&(n=arguments[2]||{},o+=1);var a=arguments[o];return"base"in n||(n.base=""),"documentLoader"in n||(n.documentLoader=r.loadDocument),null===t?a(null,U(n)):(t=ee(t),k(t)&&"@context"in t||(t={"@context":t}),void re(t,n,function(t,r){if(t)return a(t);try{r=(new Ne).processContext(e,r,n)}catch(o){return a(o)}a(null,r)}))},r.hasProperty=function(e,t){var r=!1;if(t in e){var n=e[t];r=!q(n)||n.length>0}return r},r.hasValue=function(e,t,n){var o=!1;if(r.hasProperty(e,t)){var a=e[t],i=K(a);if(q(a)||i){i&&(a=a["@list"]);for(var u=0;u<a.length;++u)if(r.compareValues(n,a[u])){o=!0;break}}else q(n)||(o=r.compareValues(n,a))}return o},r.addValue=function(e,t,n,o){if(o=o||{},"propertyIsArray"in o||(o.propertyIsArray=!1),"allowDuplicate"in o||(o.allowDuplicate=!0),q(n)){0!==n.length||!o.propertyIsArray||t in e||(e[t]=[]);for(var a=0;a<n.length;++a)r.addValue(e,t,n[a],o)}else if(t in e){var i=!o.allowDuplicate&&r.hasValue(e,t,n);q(e[t])||i&&!o.propertyIsArray||(e[t]=[e[t]]),i||e[t].push(n)}else e[t]=o.propertyIsArray?[n]:n},r.getValues=function(e,t){var r=e[t]||[];return q(r)||(r=[r]),r},r.removeProperty=function(e,t){delete e[t]},r.removeValue=function(e,t,n,o){o=o||{},"propertyIsArray"in o||(o.propertyIsArray=!1);var a=r.getValues(e,t).filter(function(e){return!r.compareValues(e,n)});0===a.length?r.removeProperty(e,t):1!==a.length||o.propertyIsArray?e[t]=a:e[t]=a[0]},r.compareValues=function(e,t){return e===t?!0:X(e)&&X(t)&&e["@value"]===t["@value"]&&e["@type"]===t["@type"]&&e["@language"]===t["@language"]&&e["@index"]===t["@index"]?!0:k(e)&&"@id"in e&&k(t)&&"@id"in t?e["@id"]===t["@id"]:!1},r.getContextValue=function(e,t,r){var n=null;if(null===t)return n;if("@language"===r&&r in e&&(n=e[r]),e.mappings[t]){var o=e.mappings[t];Y(r)?n=o:r in o&&(n=o[r])}return n};var de={};if(r.registerRDFParser=function(e,t){de[e]=t},r.unregisterRDFParser=function(e){delete de[e]},e){if("undefined"==typeof he)var he=null;if("undefined"==typeof ve)var ve={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var ye="http://www.w3.org/2001/XMLSchema#boolean",ge="http://www.w3.org/2001/XMLSchema#double",me="http://www.w3.org/2001/XMLSchema#integer",be="http://www.w3.org/2001/XMLSchema#string",xe="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Ee=xe+"List",we=xe+"first",Oe=xe+"rest",Pe=xe+"nil",je=xe+"type",Te=xe+"PlainLiteral",Ce=xe+"XMLLiteral",De=xe+"object",Re=xe+"langString",Ie="http://www.w3.org/ns/json-ld#context",_e=10,Se=function(t,r,n){e?(Error.call(this),Error.captureStackTrace(this,this.constructor)):"undefined"!=typeof Error&&(this.stack=(new Error).stack),this.name=r||"jsonld.Error",this.message=t||"An unspecified JSON-LD error occurred.",this.details=n||{}};e?t("util").inherits(Se,Error):"undefined"!=typeof Error&&(Se.prototype=new Error);var Ne=function(){};Ne.prototype.compact=function(e,t,n,o){if(q(n)){for(var a=[],i=0;i<n.length;++i){var u=this.compact(e,t,n[i],o);null!==u&&a.push(u)}if(o.compactArrays&&1===a.length){var s=r.getContextValue(e,t,"@container");null===s&&(a=a[0])}return a}if(k(n)){if(o.link&&"@id"in n&&n["@id"]in o.link)for(var l=o.link[n["@id"]],i=0;i<l.length;++i)if(l[i].expanded===n)return l[i].compacted;if(X(n)||Q(n)){var a=_(e,t,n);return o.link&&Q(n)&&(n["@id"]in o.link||(o.link[n["@id"]]=[]),o.link[n["@id"]].push({expanded:n,compacted:a})),a}var c="@reverse"===t,a={};o.link&&"@id"in n&&(n["@id"]in o.link||(o.link[n["@id"]]=[]),o.link[n["@id"]].push({expanded:n,compacted:a}));for(var f=Object.keys(n).sort(),p=0;p<f.length;++p){var d=f[p],h=n[d];if("@id"!==d&&"@type"!==d)if("@reverse"!==d)if("@index"!==d)if("@graph"!==d&&"@list"!==d&&F(d)){var v=I(e,d);r.addValue(a,v,h)}else{if(0===h.length){var y=I(e,d,h,{vocab:!0},c);r.addValue(a,y,h,{propertyIsArray:!0})}for(var g=0;g<h.length;++g){var m=h[g],y=I(e,d,m,{vocab:!0},c),s=r.getContextValue(e,y,"@container"),b=K(m),x=null;b&&(x=m["@list"]);var E=this.compact(e,y,b?x:m,o);if(b)if(q(E)||(E=[E]),"@list"!==s){var w={};w[I(e,"@list")]=E,E=w,"@index"in m&&(E[I(e,"@index")]=m["@index"])}else if(y in a)throw new Se('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"});if("@language"===s||"@index"===s){var O;y in a?O=a[y]:a[y]=O={},"@language"===s&&X(E)&&(E=E["@value"]),r.addValue(O,m[s],E)}else{var P=!o.compactArrays||"@set"===s||"@list"===s||q(E)&&0===E.length||"@list"===d||"@graph"===d;r.addValue(a,y,E,{propertyIsArray:P})}}}else{var s=r.getContextValue(e,t,"@container");if("@index"===s)continue;var v=I(e,d);r.addValue(a,v,h)}else{var j=this.compact(e,"@reverse",h,o);for(var T in j)if(e.mappings[T]&&e.mappings[T].reverse){var C=j[T],s=r.getContextValue(e,T,"@container"),D="@set"===s||!o.compactArrays;r.addValue(a,T,C,{propertyIsArray:D}),delete j[T]}if(Object.keys(j).length>0){var v=I(e,d);r.addValue(a,v,j)}}else{var j;if(V(h))j=I(e,h,null,{vocab:"@type"===d});else{j=[];for(var g=0;g<h.length;++g)j.push(I(e,h[g],null,{vocab:!0}))}var v=I(e,d),P=q(j)&&0===h.length;r.addValue(a,v,j,{propertyIsArray:P})}}return a}return n},Ne.prototype.expand=function(e,t,n,o,i){var s=this;if(null===n||void 0===n)return null;if(!q(n)&&!k(n))return i||null!==t&&"@graph"!==N(e,t,{vocab:!0})?u(e,t,n):null;if(q(n)){var l=[],c=r.getContextValue(e,t,"@container");i=i||"@list"===c;for(var f=0;f<n.length;++f){var p=s.expand(e,t,n[f],o);if(i&&(q(p)||K(p)))throw new Se("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});null!==p&&(q(p)?l=l.concat(p):l.push(p))}return l}"@context"in n&&(e=s.processContext(e,n["@context"],o));for(var d=N(e,t,{vocab:!0}),l={},h=Object.keys(n).sort(),v=0;v<h.length;++v){var y,g=h[v],m=n[g];if("@context"!==g){var b=N(e,g,{vocab:!0});if(null!==b&&(Z(b)||F(b))){if(F(b)){if("@reverse"===d)throw new Se("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:m});if(b in l)throw new Se("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:b})}if("@id"===b&&!V(m)){if(!o.isFrame)throw new Se('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:m});if(!k(m))throw new Se('Invalid JSON-LD syntax; "@id" value must be a string or an object.',"jsonld.SyntaxError",{code:"invalid @id value",value:m})}if("@type"===b&&H(m),"@graph"===b&&!k(m)&&!q(m))throw new Se('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:m});if("@value"===b&&(k(m)||q(m)))throw new Se('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:m});if("@language"===b){if(null===m)continue;if(!V(m))throw new Se('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:m});m=m.toLowerCase()}if("@index"===b&&!V(m))throw new Se('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:m});if("@reverse"!==b){var c=r.getContextValue(e,g,"@container");if("@language"===c&&k(m))y=a(m);else if("@index"===c&&k(m))y=function(t){for(var r=[],n=Object.keys(m).sort(),a=0;a<n.length;++a){var i=n[a],u=m[i];q(u)||(u=[u]),u=s.expand(e,t,u,o,!1);for(var l=0;l<u.length;++l){var c=u[l];"@index"in c||(c["@index"]=i),r.push(c)}}return r}(g);else{var x="@list"===b;if(x||"@set"===b){var E=t;if(x&&"@graph"===d&&(E=null),
y=s.expand(e,E,m,o,x),x&&K(y))throw new Se("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}else y=s.expand(e,g,m,o,!1)}if(null!==y||"@value"===b)if("@list"===b||K(y)||"@list"!==c||(y=q(y)?y:[y],y={"@list":y}),e.mappings[g]&&e.mappings[g].reverse){var w=l["@reverse"]=l["@reverse"]||{};q(y)||(y=[y]);for(var O=0;O<y.length;++O){var P=y[O];if(X(P)||K(P))throw new Se('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:y});r.addValue(w,b,P,{propertyIsArray:!0})}}else{var j=-1===["@index","@id","@type","@value","@language"].indexOf(b);r.addValue(l,b,y,{propertyIsArray:j})}}else{if(!k(m))throw new Se('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:m});if(y=s.expand(e,"@reverse",m,o),"@reverse"in y)for(var T in y["@reverse"])r.addValue(l,T,y["@reverse"][T],{propertyIsArray:!0});var w=l["@reverse"]||null;for(var T in y)if("@reverse"!==T){null===w&&(w=l["@reverse"]={}),r.addValue(w,T,[],{propertyIsArray:!0});for(var C=y[T],O=0;O<C.length;++O){var P=C[O];if(X(P)||K(P))throw new Se('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:y});r.addValue(w,T,P,{propertyIsArray:!0})}}}}}}h=Object.keys(l);var D=h.length;if("@value"in l){if("@type"in l&&"@language"in l)throw new Se('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:l});var R=D-1;if("@type"in l&&(R-=1),"@index"in l&&(R-=1),"@language"in l&&(R-=1),0!==R)throw new Se('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:l});if(null===l["@value"])l=null;else{if("@language"in l&&!V(l["@value"]))throw new Se("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:l});if("@type"in l&&(!Z(l["@type"])||0===l["@type"].indexOf("_:")))throw new Se('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:l})}}else if("@type"in l&&!q(l["@type"]))l["@type"]=[l["@type"]];else if("@set"in l||"@list"in l){if(D>1&&!(2===D&&"@index"in l))throw new Se('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:l});"@set"in l&&(l=l["@set"],h=Object.keys(l),D=h.length)}else 1===D&&"@language"in l&&(l=null);return!k(l)||o.keepFreeFloatingNodes||i||null!==t&&"@graph"!==d||(0===D||"@value"in l||"@list"in l||1===D&&"@id"in l)&&(l=null),l},Ne.prototype.createNodeMap=function(e,t){t=t||{};var r=t.namer||new ue("_:b"),n={"@default":{}};return y(e,n,"@default",r),g(n)},Ne.prototype.flatten=function(e){for(var t=this.createNodeMap(e),r=[],n=Object.keys(t).sort(),o=0;o<n.length;++o){var a=t[n[o]];Q(a)||r.push(a)}return r},Ne.prototype.frame=function(e,t,r){var n={options:r,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}},o=new ue("_:b");y(e,n.graphs,"@merged",o),n.subjects=n.graphs["@merged"];var a=[];return m(n,Object.keys(n.subjects).sort(),t,a,null),a},Ne.prototype.normalize=function(e,t,n){function o(e){function t(u){if(u===e.length)return a(i,o,n);var s=e[u],c=d(s,l);c in o?(o[c].push(s),n.push(s)):c in i?(o[c]=[i[c],s],n.push(i[c]),n.push(s),delete i[c]):i[c]=s,r.setImmediate(function(){t(u+1)})}var n=[],o={},i={};r.setImmediate(function(){t(0)})}function a(e,t,r){for(var n=!1,a=Object.keys(e).sort(),u=0;u<a.length;++u){var s=e[a[u]];x.getName(s),n=!0}n?o(r):i(t)}function i(e){function t(o){function a(e,r){if(r===e.length){s.sort(function(e,t){return e=e.hash,t=t.hash,t>e?-1:e>t?1:0});for(var i=0;i<s.length;++i)for(var u in s[i].pathNamer.existing)x.getName(u);return t(o+1)}var c=e[r];if(x.isNamed(c))return a(e,r+1);var f=new ue("_:b");f.getName(c),h(c,l,x,f,function(t,o){return t?n(t):(s.push(o),void a(e,r+1))})}if(o===r.length)return u();var i=e[r[o]],s=[];a(i,0)}var r=Object.keys(e).sort();t(0)}function u(){for(var e=[],r=0;r<s.length;++r){for(var o=s[r],a=["subject","object","name"],i=0;i<a.length;++i){var u=a[i];o[u]&&"blank node"===o[u].type&&0!==o[u].value.indexOf("_:c14n")&&(o[u].value=x.getName(o[u].value))}e.push(ae(o,o.name?o.name.value:null))}return e.sort(),t.format?"application/nquads"===t.format?n(null,e.join("")):n(new Se("Unknown output format.","jsonld.UnknownFormat",{format:t.format})):void n(null,ne(e.join("")))}var s=[],l={};for(var c in e){var f=e[c];"@default"===c&&(c=null);for(var p=0;p<f.length;++p){var v=f[p];null!==c&&(0===c.indexOf("_:")?v.name={type:"blank node",value:c}:v.name={type:"IRI",value:c}),s.push(v);for(var y=["subject","object","name"],g=0;g<y.length;++g){var m=y[g];if(v[m]&&"blank node"===v[m].type){var b=v[m].value;b in l?l[b].quads.push(v):l[b]={quads:[v]}}}}}var x=new ue("_:c14n");return o(Object.keys(l))},Ne.prototype.fromRDF=function(e,t,n){var o={},a={"@default":o},i={};for(var u in e){var s=e[u];u in a||(a[u]={}),"@default"===u||u in o||(o[u]={"@id":u});for(var l=a[u],c=0;c<s.length;++c){var p=s[c],d=p.subject.value,h=p.predicate.value,v=p.object;d in l||(l[d]={"@id":d});var y=l[d],g="IRI"===v.type||"blank node"===v.type;if(!g||v.value in l||(l[v.value]={"@id":v.value}),h!==je||t.useRdfType||!g){var m=f(v,t.useNativeTypes);if(r.addValue(y,h,m,{propertyIsArray:!0}),g)if(v.value===Pe){var b=l[v.value];"usages"in b||(b.usages=[]),b.usages.push({node:y,property:h,value:m})}else v.value in i?i[v.value]=!1:i[v.value]={node:y,property:h,value:m}}else r.addValue(y,"@type",v.value,{propertyIsArray:!0})}}for(var u in a){var x=a[u];if(Pe in x){for(var E=x[Pe],w=0;w<E.usages.length;++w){for(var O=E.usages[w],y=O.node,P=O.property,j=O.value,T=[],C=[],D=Object.keys(y).length;P===Oe&&k(i[y["@id"]])&&q(y[we])&&1===y[we].length&&q(y[Oe])&&1===y[Oe].length&&(3===D||4===D&&q(y["@type"])&&1===y["@type"].length&&y["@type"][0]===Ee)&&(T.push(y[we][0]),C.push(y["@id"]),O=i[y["@id"]],y=O.node,P=O.property,j=O.value,D=Object.keys(y).length,0===y["@id"].indexOf("_:")););if(P===we){if(y["@id"]===Pe)continue;j=x[j["@id"]][Oe][0],T.pop(),C.pop()}delete j["@id"],j["@list"]=T.reverse();for(var R=0;R<C.length;++R)delete x[C[R]]}delete E.usages}}for(var I=[],_=Object.keys(o).sort(),w=0;w<_.length;++w){var S=_[w],y=o[S];if(S in a)for(var s=y["@graph"]=[],x=a[S],N=Object.keys(x).sort(),A=0;A<N.length;++A){var L=x[N[A]];Q(L)||s.push(L)}Q(y)||I.push(y)}n(null,I)},Ne.prototype.toRDF=function(e,t){var r=new ue("_:b"),n={"@default":{}};y(e,n,"@default",r);for(var o={},a=Object.keys(n).sort(),i=0;i<a.length;++i){var u=a[i];("@default"===u||Z(u))&&(o[u]=s(n[u],r,t))}return o},Ne.prototype.processContext=function(e,t,n){k(t)&&"@context"in t&&q(t["@context"])&&(t=t["@context"]);var o=q(t)?t:[t];if(0===o.length)return e.clone();for(var a=e,i=0;i<o.length;++i){var u=o[i];if(null!==u){if(k(u)&&"@context"in u&&(u=u["@context"]),!k(u))throw new Se("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:u});if(r.cache.activeCtx){var s=r.cache.activeCtx.get(e,u);if(s){a=e=s;continue}}e=a,a=a.clone();var l={};if("@base"in u){var c=u["@base"];if(null===c)c=null;else{if(!V(c))throw new Se('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:u});if(""!==c&&!Z(c))throw new Se('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',"jsonld.SyntaxError",{code:"invalid base IRI",context:u})}null!==c&&(c=r.url.parse(c||"")),a["@base"]=c,l["@base"]=!0}if("@vocab"in u){var f=u["@vocab"];if(null===f)delete a["@vocab"];else{if(!V(f))throw new Se('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:u});if(!Z(f))throw new Se('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:u});a["@vocab"]=f}l["@vocab"]=!0}if("@language"in u){var f=u["@language"];if(null===f)delete a["@language"];else{if(!V(f))throw new Se('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:u});a["@language"]=f.toLowerCase()}l["@language"]=!0}for(var p in u)S(a,u,p,l);r.cache.activeCtx&&r.cache.activeCtx.set(e,u,a)}else a=e=U(n)}return a},Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}),r.registerRDFParser("application/nquads",ne),r.registerRDFParser("rdfa-api",ie),r.UniqueNamer=ue,ue.prototype.clone=function(){var e=new ue(this.prefix);return e.counter=this.counter,e.existing=ee(this.existing),e},ue.prototype.getName=function(e){if(e&&e in this.existing)return this.existing[e];var t=this.prefix+this.counter;return this.counter+=1,e&&(this.existing[e]=t),t},ue.prototype.isNamed=function(e){return e in this.existing};var Ae=function(e){this.list=e.sort(),this.done=!1,this.left={};for(var t=0;t<e.length;++t)this.left[e[t]]=!0};Ae.prototype.hasNext=function(){return!this.done},Ae.prototype.next=function(){for(var e=this.list.slice(),t=null,r=0,n=this.list.length,o=0;n>o;++o){var a=this.list[o],i=this.left[a];(null===t||a>t)&&(i&&o>0&&a>this.list[o-1]||!i&&n-1>o&&a>this.list[o+1])&&(t=a,r=o)}if(null===t)this.done=!0;else{var u=this.left[t]?r-1:r+1;this.list[r]=this.list[u],this.list[u]=t;for(var o=0;n>o;++o)this.list[o]>t&&(this.left[this.list[o]]=!this.left[this.list[o]])}return e};var Le=r.sha1={};if(e){var Ue=t("crypto");Le.create=function(){var e=Ue.createHash("sha1");return{update:function(t){e.update(t,"utf8")},digest:function(){return e.digest("hex")}}}}else Le.create=function(){return new Le.MessageDigest};if(Le.hash=function(e){for(var t=Le.create(),r=0;r<e.length;++r)t.update(e[r]);return t.digest()},!e){Le.Buffer=function(){this.data="",this.read=0},Le.Buffer.prototype.putInt32=function(e){this.data+=String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)},Le.Buffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},Le.Buffer.prototype.bytes=function(){return this.data.slice(this.read)},Le.Buffer.prototype.length=function(){return this.data.length-this.read},Le.Buffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},Le.Buffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);16>r&&(e+="0"),e+=r.toString(16)}return e},Le.MessageDigest=function(){Fe.initialized||Fe.init(),this.blockLength=64,this.digestLength=20,this.messageLength=0,this.input=new Le.Buffer,this.words=new Array(80),this.state={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520}},Le.MessageDigest.prototype.update=function(e){e=unescape(encodeURIComponent(e)),this.messageLength+=e.length,this.input.data+=e,Fe.update(this.state,this.words,this.input),(this.input.read>2048||0===this.input.length())&&this.input.compact()},Le.MessageDigest.prototype.digest=function(){var e=this.messageLength,t=new Le.Buffer;t.data+=this.input.bytes(),t.data+=Fe.padding.substr(0,64-(e+8)%64),t.putInt32(e>>>29&255),t.putInt32(e<<3&4294967295),Fe.update(this.state,this.words,t);var r=new Le.Buffer;return r.putInt32(this.state.h0),r.putInt32(this.state.h1),r.putInt32(this.state.h2),r.putInt32(this.state.h3),r.putInt32(this.state.h4),r.toHex()};var Fe={padding:null,initialized:!1};Fe.init=function(){Fe.padding=String.fromCharCode(128);for(var e=String.fromCharCode(0),t=64;t>0;)1&t&&(Fe.padding+=e),t>>>=1,t>0&&(e+=e);Fe.initialized=!0},Fe.update=function(e,t,r){for(var n,o,a,i,u,s,l,c,f=r.length();f>=64;){for(o=e.h0,a=e.h1,i=e.h2,u=e.h3,s=e.h4,c=0;16>c;++c)n=r.getInt32(),t[c]=n,l=u^a&(i^u),n=(o<<5|o>>>27)+l+s+1518500249+n,s=u,u=i,i=a<<30|a>>>2,a=o,o=n;for(;20>c;++c)n=t[c-3]^t[c-8]^t[c-14]^t[c-16],n=n<<1|n>>>31,t[c]=n,l=u^a&(i^u),n=(o<<5|o>>>27)+l+s+1518500249+n,s=u,u=i,i=a<<30|a>>>2,a=o,o=n;for(;32>c;++c)n=t[c-3]^t[c-8]^t[c-14]^t[c-16],n=n<<1|n>>>31,t[c]=n,l=a^i^u,n=(o<<5|o>>>27)+l+s+1859775393+n,s=u,u=i,i=a<<30|a>>>2,a=o,o=n;for(;40>c;++c)n=t[c-6]^t[c-16]^t[c-28]^t[c-32],n=n<<2|n>>>30,t[c]=n,l=a^i^u,n=(o<<5|o>>>27)+l+s+1859775393+n,s=u,u=i,i=a<<30|a>>>2,a=o,o=n;for(;60>c;++c)n=t[c-6]^t[c-16]^t[c-28]^t[c-32],n=n<<2|n>>>30,t[c]=n,l=a&i|u&(a^i),n=(o<<5|o>>>27)+l+s+2400959708+n,s=u,u=i,i=a<<30|a>>>2,a=o,o=n;for(;80>c;++c)n=t[c-6]^t[c-16]^t[c-28]^t[c-32],n=n<<2|n>>>30,t[c]=n,l=a^i^u,n=(o<<5|o>>>27)+l+s+3395469782+n,s=u,u=i,i=a<<30|a>>>2,a=o,o=n;e.h0+=o,e.h1+=a,e.h2+=i,e.h3+=u,e.h4+=s,f-=64}}}if(!he)var ke=function(){he=t("xmldom").XMLSerializer};if(r.url={},r.url.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},r.url.parse=function(e,t){for(var n={},o=r.url.parsers[t||"full"],a=o.regex.exec(e),i=o.keys.length;i--;)n[o.keys[i]]=void 0===a[i]?null:a[i];return n.normalizedPath=se(n.path,!!n.authority),n},e?r.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&r.useDocumentLoader("xhr"),e){r.use=function(e){switch(e){case"request":r.request=t("./request");break;default:throw new Se("Unknown extension.","jsonld.UnknownExtension",{extension:e})}};var Me={exports:{},filename:__dirname};t("pkginfo")(Me,"version"),r.version=Me.exports.version}return r},a=function(){return o(function(){return a()})};return!e&&"function"==typeof r&&r.amd?r("jsonld/jsonld",[],function(){return o(a),a}):(o(a),"function"==typeof t&&"undefined"!=typeof module&&module.exports&&(module.exports=a),n&&("undefined"==typeof jsonld?jsonld=jsonldjs=a:jsonldjs=a)),a}(),r("jsonld",["jsonld/jsonld"],function(e){return e}),r("Carbon/rdf/Persisted",["require","exports","../Utils"],function(e,t,r){function n(){return this._dirty}var o=function(){function e(){this.add=new Map,this.set=new Map,this["delete"]=new Map}return e}();t.Modifications=o;var a;!function(e){e[e.ADD=0]="ADD",e[e.SET=1]="SET",e[e.DELETE=2]="DELETE"}(a||(a={})),t.ModificationType=a;var i=function(){function e(){}return e.is=function(e){return r.hasPropertyDefined(e,"_dirty")&&r.hasPropertyDefined(e,"_modifications")&&r.hasFunction(e,"isDirty")},e.from=function(t){for(var n=r.isArray(t)?t:[t],o=[],a=0,i=n.length;i>a;a++){var u=n[a];e.is(u)||e.injectBehaviour(u),o.push(u)}return r.isArray(t)?o:o[0]},e.injectBehaviour=function(e){return Object.defineProperties(e,{_dirty:{writable:!0,enumerable:!1,value:!1},_modifications:{writable:!1,enumerable:!1,value:new o}}),e.isDirty=n,e},e}();t.Factory=i}),r("Carbon/rdf/Literal",["require","exports","../Utils","../namespaces/XSD"],function(e,t,r,n){var o=function(){function e(){}return e.from=function(e){if(r.isNull(e))throw new Error("IllegalArgument: null cannot be converted into a Literal");var t;switch(!0){case r.isDate(e):t=n.DataType.dateTime,e=e.toISOString();break;case r.isNumber(e):t=r.isInteger(e)?n.DataType.integer:n.DataType["double"];break;case r.isString(e):t=n.DataType.string;break;case r.isBoolean(e):t=n.DataType["boolean"];break;default:t=n.DataType.object,e=JSON.stringify(e)}var o={"@value":e};return t&&(o["@type"]=t),o},e.parse=function(e){if(!e)return null;if(!r.hasProperty(e,"@value"))return null;if(!r.hasProperty(e,"@type"))return e["@value"];var t=e["@type"];if(!r.hasProperty(n.DataType,t))return e["@value"];var o,a=e["@value"];switch(t){case n.DataType.date:case n.DataType.dateTime:case n.DataType.time:o=new Date(a);break;case n.DataType.duration:break;case n.DataType.gDay:case n.DataType.gMonth:case n.DataType.gMonthDay:case n.DataType.gYear:case n.DataType.gYearMonth:break;case n.DataType["byte"]:case n.DataType.decimal:case n.DataType["int"]:case n.DataType.integer:case n.DataType["long"]:case n.DataType.negativeInteger:case n.DataType.nonNegativeInteger:case n.DataType.nonPositiveInteger:case n.DataType.positiveInteger:case n.DataType["short"]:case n.DataType.unsignedLong:case n.DataType.unsignedInt:case n.DataType.unsignedShort:case n.DataType.unsignedByte:case n.DataType["double"]:case n.DataType["float"]:o=parseFloat(a);break;case n.DataType["boolean"]:o=r.parseBoolean(a);break;case n.DataType.string:o=a;break;case n.DataType.object:o=JSON.parse(a)}return o},e.is=function(e){return e&&r.isObject(e)?r.hasProperty(e,"@value"):!1},e}();t.Factory=o;var a=function(){function e(){}return e.areEqual=function(e,t){return!1},e}();t.Util=a}),r("Carbon/rdf/RDFNode",["require","exports","../Utils"],function(e,t,r){var n=function(){function e(){}return e.is=function(e){return!r.isNull(e)&&r.isObject(e)&&r.hasProperty(e,"@id")},e.create=function(e){return{"@id":e}},e}();t.Factory=n;var o=function(){function e(){}return e.areEqual=function(e,t){return e["@id"]===t["@id"]},e}();t.Util=o}),r("Carbon/rdf/Resource",["require","exports","./Literal","../Utils","./RDFNode"],function(e,t,r,n,o){function a(e){return n.hasProperty(this,e)}function i(e){var t=this.getProperties(e);return t[0]}function u(e){var t=this.getProperty(e);return n.isNull(t)?null:r.Factory.is(t)?r.Factory.parse(t):null}function s(e){var t=this.getProperty(e);return n.isNull(t)?null:n.hasProperty(t,"@id")?t["@id"]:null}function l(e){return this.hasProperty(e)?n.isArray(this[e])?this[e]:[this[e]]:[]}function c(e){var t=[];if(this.hasProperty(e))for(var n=this.getProperties(e),o=0,a=n.length;a>o;o++){var i=n[o];r.Factory.is(i)&&t.push(r.Factory.parse(i))}return t=v(this,e,t)}function f(e){var t=[];if(this.hasProperty(e))for(var r=this.getProperties(e),o=0,a=r.length;a>o;o++){var i=r[o];n.hasProperty(i,"@id")&&t.push(i["@id"])}return t=v(this,e,t)}function p(e,t){var n,a=this.getProperties(e);n=o.Factory.is(t)?{"@id":t["@id"]}:r.Factory.from(t);for(var i=this._propertyAddedCallbacks,u=0,s=i.length;s>u;u++){var l=i[u];l.call(this,e,n)}a.push(n),this[e]=a}function d(e,t){this.deleteProperty(e),n.isNull(t)||this.addProperty(e,t)}function h(e){for(var t=this._propertyDeletedCallbacks,r=0,n=t.length;n>r;r++){var o=t[r];o.call(this,e)}delete this[e]}function v(e,t,r){return r.push=function(){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o-0]=arguments[o];for(var a=0,i=n.length;i>a;a++)e.addProperty(t,n[a]);return Array.prototype.push.call(r,n)}}(),r}var y=function(){function e(){}return e.prototype.is=function(e){return!n.isNull(e)&&n.isObject(e)&&this.hasClassProperties(e)},e.prototype.create=function(){var e={};return this.from(e)},e.prototype.from=function(e){for(var t=n.isArray(e)?e:[e],r=0,o=t.length;o>r;r++){var a=t[r];this.hasClassProperties(a)||this.injectBehaviour(a)}return n.isArray(e)?t:t[0]},e.prototype.hasRDFClass=function(e){return!0},e.prototype.hasClassProperties=function(e){return n.hasPropertyDefined(e,"_propertyAddedCallbacks")&&n.hasPropertyDefined(e,"_propertyDeletedCallbacks")&&n.hasPropertyDefined(e,"uri")&&n.hasPropertyDefined(e,"types")&&n.hasFunction(e,"hasProperty")&&n.hasFunction(e,"getProperty")&&n.hasFunction(e,"getPropertyValue")&&n.hasFunction(e,"getPropertyURI")&&n.hasFunction(e,"getProperties")&&n.hasFunction(e,"getPropertyValues")&&n.hasFunction(e,"getPropertyURIs")&&n.hasFunction(e,"addProperty")&&n.hasFunction(e,"setProperty")&&n.hasFunction(e,"deleteProperty")},e.prototype.injectBehaviour=function(e){return Object.defineProperties(e,{_propertyAddedCallbacks:{writable:!1,enumerable:!1,value:[]},_propertyDeletedCallbacks:{writable:!1,enumerable:!1,value:[]},types:{get:function(){return this["@type"]||(this["@type"]=[]),this["@type"]},set:function(e){},enumerable:!1},uri:{get:function(){return this["@id"]},set:function(e){this["@id"]=e},enumerable:!1},hasProperty:{writable:!1,enumerable:!1,value:a},getProperty:{writable:!1,enumerable:!1,value:i},getPropertyValue:{writable:!1,enumerable:!1,value:u},getPropertyURI:{writable:!1,enumerable:!1,value:s},getProperties:{writable:!1,enumerable:!1,value:l},getPropertyValues:{writable:!1,enumerable:!1,value:c},getPropertyURIs:{writable:!1,enumerable:!1,value:f},addProperty:{writable:!1,enumerable:!1,value:p},setProperty:{writable:!1,enumerable:!1,value:d},deleteProperty:{writable:!1,enumerable:!1,value:h}}),e},e.injectDefinitions=function(t,r){for(var o=n.isArray(t)?t:[t],a=0,i=o.length;i>a;a++)for(var u=o[a],s=0,l=u.types.length;l>a;s++){var c=u.types[a],f=new Map;r.has(c)&&n.M.extend(f,r.get(c)),0!==f.size()&&e.injectDescriptions(u,f)}return n.isArray(t)?o:o[0]},e.injectDescriptions=function(t,r){var o,a=n.isArray(t)?t:[t];if(n.isMap(r))o=r;else{if(!n.isObject(r))throw new Error("IllegalArgument");o=n.M.from(r)}for(var i=0,u=a.length;u>i;i++)for(var s,l=a[i],c=o.keys();!(s=c.next()).done;){var f,p,d=s.value,h=o.get(d);f=n.isNull(h.literal)?h.multi?e.genericMultipleGetter(h):e.genericGetter(h):h.literal?h.multi?e.literalsGetter(h):e.literalGetter(h):h.multi?e.urisGetter(h):e.uriGetter(h),p=e.setter(h),Object.defineProperty(l,d,{enumerable:!1,get:f,set:p})}return n.isArray(t)?a:a[0]},e.genericGetter=function(e){var t=e.uri;return function(){return this.getProperty(t)}},e.genericMultipleGetter=function(e){var t=e.uri;return function(){return this.getProperties(t)}},e.uriGetter=function(e){var t=e.uri;return function(){return this.getPropertyURI(t)}},e.urisGetter=function(e){var t=e.uri;return function(){return this.getPropertyURIs(t)}},e.literalGetter=function(e){var t=e.uri;return function(){return this.getPropertyValue(t)}},e.literalsGetter=function(e){var t=e.uri;return function(){return this.getPropertyValues(t)}},e.setter=function(e){var t=e.uri;return function(e){this.setProperty(t,e)}},e}();t.Factory=y;var g=new y;t.factory=g}),r("Carbon/rdf/URI",["require","exports","../Utils"],function(e,t,r){var n=function(){function e(){}return e.hasFragment=function(e){return-1!=e.indexOf("#")},e.hasProtocol=function(e){return r.S.startsWith(e,"https://")||r.S.startsWith(e,"http://")},e.isAbsolute=function(e){return r.S.startsWith(e,"http://")?!0:r.S.startsWith(e,"https://")?!0:r.S.startsWith(e,"://")?!0:void 0},e.isRelative=function(t){return!e.isAbsolute(t)},e.getDocumentURI=function(e){var t=e.split("#");if(t.length>2)throw new Error("IllegalArgument: The URI provided has more than one # sign.");return t[0]},e.getFragment=function(e){var t=e.split("#");if(t.length<2)return null;if(t.length>2)throw new Error("IllegalArgument: The URI provided has more than one # sign.");return t[1]},e.resolve=function(e,t){var n=e;return r.S.endsWith(e,"/")||(n+="/"),n+=r.S.startsWith(t,"/")?t.substr(1,t.length):t},e.removeProtocol=function(e){return r.S.startsWith(e,"https://")?e.substr(5,e.length):r.S.startsWith(e,"http://")?e.substr(4,e.length):e},e}();t.Util=n}),r("Carbon/rdf/FragmentResource",["require","exports","./Resource","./URI","../Utils"],function(e,t,r,n,o){var a=function(){function e(){}return e.prototype.is=function(e){return r.factory.is(e)&&this.hasClassProperties(e)},e.prototype.create=function(e){e=n.Util.hasFragment(e)?n.Util.getFragment(e):e,e="#"+e;var t=r.factory.create(),o=this.from(t);return o.slug=e,o},e.prototype.from=function(e){for(var t=o.isArray(e)?e:[e],n=[],a=0,i=t.length;i>a;a++){var u=t[a];u=r.factory.is(u)?u:r.factory.from(u);var s=u;this.is(s)||this.injectBehaviour(s),n.push(s)}return o.isArray(e)?n:n[0]},e.prototype.hasClassProperties=function(e){return o.hasProperty(e,"slug")},e.prototype.injectBehaviour=function(e){return Object.defineProperty(e,"slug",{writable:!0,enumerable:!1}),e.uri?e.slug="#"+n.Util.getFragment(e.uri):e.slug=null,e},e}();t.Factory=a;var i=new a;t.factory=i}),r("Carbon/rdf/DocumentResource",["require","exports","./Resource","./FragmentResource","./URI","../Utils"],function(e,t,r,n,o,a){function i(e){var t;if(o.Util.isAbsolute(e))throw new Error("IllegalArgument: Absolute URIs are not currently supported.");return t=o.Util.hasFragment(e)?o.Util.getFragment(e):e,"#"+t}function u(e){return!a.isNull(this.getFragment(e))}function s(e){for(var t=i(e),r=this,n=r._fragments,o=0,a=n.length;a>o;o++){var u=n[o];if(u.slug===t)return u}return null}function l(){var e=this;return e._fragments.slice()}function c(e){var t=i(e),r=this;if(r.hasFragment(t))throw new Error("Conflict: A fragment already exists with that slug.");var o=n.factory.create(t);return r._fragments.push(o),o}function f(e){for(var t=i(e),r=this,n=0,o=r._fragments.length;o>n;n++){var a=r._fragments[n];if(a.slug===t)return r._fragments.splice(n,1),!0}return!1}function p(){var e=[this];return e=e.concat(this._fragments),JSON.stringify(e)}var d=function(){function e(){}return e.prototype.is=function(e){return r.factory.is(e)&&this.hasClassProperties(e)},e.prototype.from=function(e,t){void 0===t&&(t=[]),e=r.factory.is(e)?e:r.factory.from(e);var n=e;return this.is(n)||this.injectBehaviour(n),this.addFragments(n,t),n},e.prototype.hasClassProperties=function(e){return a.hasProperty(e,"_fragments")&&a.hasFunction(e,"hasFragment")&&a.hasFunction(e,"getFragment")&&a.hasFunction(e,"getFragments")&&a.hasFunction(e,"createFragment")&&a.hasFunction(e,"deleteFragment")},e.prototype.injectBehaviour=function(e){return Object.defineProperties(e,{_fragments:{writable:!1,enumerable:!1,configurable:!1,value:[]},hasFragment:{writable:!1,enumerable:!1,configurable:!0,value:u},getFragment:{writable:!1,enumerable:!1,configurable:!0,value:s},getFragments:{writable:!1,enumerable:!1,configurable:!0,value:l},createFragment:{writable:!1,enumerable:!1,configurable:!0,value:c},deleteFragment:{writable:!1,enumerable:!1,configurable:!0,value:f},toJsonLD:{writable:!1,enumerable:!1,configurable:!0,value:p}}),e},e.prototype.addFragments=function(e,t){for(var r=0,o=t.length;o>r;r++){var a=t[r],i=n.factory.from(a);e._fragments.push(i)}},e}();t.Factory=d;var h=new d;t.factory=h}),r("Carbon/rdf/Value",["require","exports","./Literal","./RDFNode"],function(e,t,r,n){var o=function(){function e(){}return e.areEqual=function(e,t){return r.Factory.is(e)&&r.Factory.is(t)?r.Util.areEqual(e,t):n.Factory.is(e)&&n.Factory.is(t)?n.Util.areEqual(e,t):!1},e}();t.Util=o}),r("Carbon/rdf/PersistedDocumentResource",["require","exports","./DocumentResource","./Persisted","../Utils","./Value"],function(e,t,r,n,o,a){function i(e){return 1===e.length&&e[0]===v.ALL_VALUES}function u(e){var t;switch(e){case n.ModificationType.ADD:t=this._modifications.add;break;case n.ModificationType.SET:t=this._modifications.set;break;case n.ModificationType.DELETE:t=this._modifications["delete"]}return t}function s(e,t,r){var n,o=u.call(this,e,t);if(o.has(t)){n=o.get(t);for(var i=0,s=n.length;s>i;i++)if(a.Util.areEqual(n[i],r))return}else n=[],o.set(t,n);n.push(r)}function l(e,t,r){for(var n=u.call(this,e,t),o=n.get(t),i=0,s=o.length;s>i;i++)if(a.Util.areEqual(o[i],r)){o.splice(i,1);break}}function c(e,t){if(this._dirty=!0,this._modifications["delete"].has(e)){var r=this._modifications["delete"].get(e);if(i(r))return this._modifications["delete"]["delete"](e),void s.call(this,n.ModificationType.SET,e,t);l.call(this,n.ModificationType.DELETE,e,t);for(var o=0,u=r.length;u>o;o++)if(a.Util.areEqual(r[o],t)){r.splice(o,1);break}}else this._modifications.set.has(e)?s.call(this,n.ModificationType.SET,e,t):s.call(this,n.ModificationType.ADD,e,t)}function f(e,t){void 0===t&&(t=null),this._dirty=!0,o.isNull(t)&&(t=v.ALL_VALUES),t===v.ALL_VALUES?(this._modifications.add.has(e)&&this._modifications.add["delete"](e),this._modifications.set.has(e)&&this._modifications.set["delete"](e),this._modifications["delete"].has(e)&&this._modifications["delete"]["delete"](e)):(this._modifications.add.has(e)&&l.call(this,n.ModificationType.ADD,e,t),this._modifications.set.has(e)&&l.call(this,n.ModificationType.SET,e,t)),s.call(this,n.ModificationType.DELETE,e,t)}function p(){this._modifications=new n.Modifications,this._dirty=!0}function d(){return this._committer.commit(this)}function h(){}var v;!function(e){e[e.ALL_VALUES=0]="ALL_VALUES"}(v||(v={}));var y=function(){function e(){}return e.is=function(e){return r.factory.is(e)&&n.Factory.is(e)&&o.hasProperty(e,"_parent")&&o.hasFunction(e,"_clean")&&o.hasFunction(e,"commit")&&o.hasFunction(e,"delete")},e.from=function(t,r){var o=t;return n.Factory.from(o),e.is(o)||(Object.defineProperties(o,{_committer:{writable:!1,enumerable:!1,value:r}}),o._propertyAddedCallbacks.push(c),o._propertyDeletedCallbacks.push(f),o._clean=p,o.commit=d,o["delete"]=h),o},e}();t.Factory=y}),r("Carbon/rdf/PersistedFragmentResource",["require","exports"],function(e,t){}),r("Carbon/rdf/PropertyDescription",["require","exports"],function(e,t){var r=function(){function e(){this.multi=!0,this.literal=null}return e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r}),r("Carbon/rdf/RDFDocument",["require","exports","./RDFNode","../Utils","./URI"],function(e,t,r,n,o){var a=function(){function e(){}return e.is=function(e){return n.hasProperty(e,"@graph")},e.create=function(e,t){var n=t?r.Factory.create(t):{};return n["@graph"]=e,n},e}();t.Factory=a;var i=function(){function e(){}return e.getDocuments=function(e){if(n.isArray(e)){if(0===e.length)return e;if(a.is(e[0]))return e;if(r.Factory.is(e[0]))return[a.create(e)]}else{if(!n.isObject(e))throw new Error("IllegalArgument: The value structure isn't valid.");if(a.is(e))return[e];if(r.Factory.is(e))return[a.create([e])]}},e.getResources=function(t){if(n.isArray(t)){if(0===t.length)return t;if(1===t.length){if(n.isArray(t[0]))return e.getResources(t[0]);if(!n.isObject(t[0]))throw new Error("IllegalArgument: The document structure isn't valid.");return t[0].hasOwnProperty("@graph")?e.getResources(t[0]["@graph"]):t}return t}if(!n.isObject(t))throw new Error("IllegalArgument: The document structure isn't valid.");if(!t.hasOwnProperty("@graph"))throw new Error("IllegalArgument: The document structure isn't valid.");return e.getResources(t["@graph"])},e.getDocumentResources=function(t){for(var r=e.getResources(t),n=[],a=0,i=r.length;i>a;a++){var u=r[a],s=u["@id"];s&&(o.Util.hasFragment(s)||n.push(u))}return n},e.getFragmentResources=function(t,r){var a=e.getResources(t),i=null;r&&(i=n.isString(r)?r:r["@id"]);for(var u=[],s=0,l=a.length;l>s;s++){var c=a[s],f=c["@id"];if(f&&o.Util.hasFragment(f))if(i){var p=o.Util.getDocumentURI(f);p===i&&u.push(c)}else u.push(c)}return u},e}();t.Util=i}),r("Carbon/RDF",["require","exports","./rdf/Persisted","./rdf/DocumentResource","./rdf/PersistedDocumentResource","./rdf/FragmentResource","./rdf/PersistedFragmentResource","./rdf/Literal","./rdf/PropertyDescription","./rdf/RDFDocument","./rdf/RDFNode","./rdf/Resource","./rdf/URI","./rdf/Value"],function(e,t,r,n,o,a,i,u,s,l,c,f,p,d){t.Persisted=r,t.DocumentResource=n,t.PersistedDocumentResource=o,t.FragmentResource=a,t.PersistedFragmentResource=i,t.Literal=u,t.PropertyDescription=s["default"],t.Document=l,t.Node=c,t.Resource=f,t.URI=p,t.Value=d}),r("Carbon/Documents",["require","exports","jsonld","./HTTP","./Errors","./RDF"],function(e,t,r,n,o,a){function i(e){try{return JSON.parse(e)}catch(t){throw t}}function u(e,t){return new Promise(function(n,o){r.expand(e.result,t,function(t,r){if(t)throw t;e.result=r,n(e)})})}var s=function(){function e(e){void 0===e&&(e=null),
this.parent=e}return e.prototype.get=function(e,t){if(void 0===t&&(t={}),a.URI.Util.isRelative(e)){if(!this.parent)throw new o.IllegalArgumentError("IllegalArgument: This module doesn't support relative URIs.");e=this.parent.resolve(e)}var r=t.headers?t.headers:t.headers=new Map;return r.set("Accept",new n.Header.Class("application/ld+json")),n.Request.Service.get(e,t).then(function(e){var t=i(e.data);return u({result:t,response:e})}).then(function(e){var t=e.result,r=a.Document.Util.getDocuments(t);return{result:r,response:e.response}})},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s}),r("Carbon/Resources",["require","exports","jsonld","./HTTP","./RDF","./namespaces/LDP"],function(e,t,r,n,o,a){function i(e,t){var r=t.headers?t.headers:t.headers=new Map;r.has("Prefer")||r.set("Prefer",new n.Header.Class);var o=r.get("Prefer");o.values.push(new n.Header.Value(a.Class.RDFSource+"; rel=interaction-model"))}var u;!function(e){e[e.RDFSource=0]="RDFSource",e[e.Container=1]="Container"}(u||(u={}));var s=function(){function e(e){this.parent=e}return e.prototype.get=function(t){var r=this,n={};return this.parent&&this.parent.Auth.isAuthenticated()&&this.parent.Auth.addAuthentication(n),i(u.RDFSource,n),this.parent.Documents.get(t,n).then(function(t){var n=e.getDocument(t),a=o.Document.Util.getResources(n),i=o.Resource.factory.from(a);return r.injectDefinitions(i),{result:n,response:t.response}}).then(function(t){var n=t.result,a=e.getDocumentResourceNode(n),i=o.Document.Util.getFragmentResources(n,a),u=o.DocumentResource.factory.from(a,i),s=o.PersistedDocumentResource.Factory.from(u,r);return{result:s,response:t.response}})},e.prototype.commit=function(e){return void 0===e&&(e=null),null},e.getDocument=function(e){var t=e.result;if(0===t.length)throw new Error("BadResponse: No document was returned.");if(t.length>1)throw new Error("Unsupported: Multiple graphs are currently not supported.");return t[0]},e.getDocumentResourceNode=function(e){var t=o.Document.Util.getDocumentResources(e);if(0===t.length)throw new Error("BadResponse: No document resource was returned.");if(t.length>1)throw new Error("NotSupported: Multiple document resources were returned.");return t[0]},e.prototype.injectDefinitions=function(e){for(var t=this.parent.getDefinitionURIs(),r=0,n=t.length;n>r;r++){for(var a=t[r],i=[],u=0,s=e.length;s>u;u++){var l=e[u];-1!==l.types.indexOf(a)&&i.push(l)}i.length>0&&o.Resource.Factory.injectDescriptions(i,this.parent.getDefinition(a))}return e},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s}),r("Carbon/Parent",["require","exports","./Auth","./Documents","./Resources","./Utils"],function(e,t,r,n,o,a){var i=function(){function e(){this.settings=new Map,this.definitions=new Map,this.Auth=new r["default"](this),this.Documents=new n["default"](this),this.Resources=new o["default"](this)}return e.prototype.resolve=function(e){throw new Error("Method needs to be implemented by child.")},e.prototype.hasSetting=function(e){return this.settings.has(e)||this.parent&&this.parent.hasSetting(e)},e.prototype.getSetting=function(e){return this.settings.has(e)?this.settings.get(e):this.parent&&this.parent.hasSetting(e)?this.parent.getSetting(e):null},e.prototype.setSetting=function(e,t){this.settings.set(e,t)},e.prototype.deleteSetting=function(e){this.settings["delete"](e)},e.prototype.hasDefinition=function(e){return this.definitions.has(e)?!0:this.parent&&this.parent.hasDefinition(e)?!0:!1},e.prototype.getDefinition=function(e){var t=new Map;return this.definitions.has(e)&&(a.M.extend(t,this.definitions.get(e)),this.parent&&this.parent.hasDefinition(e)&&a.M.extend(t,this.parent.getDefinition(e))),t},e.prototype.getDefinitionURIs=function(){var e=a.A.from(this.definitions.keys());return this.parent&&(e=a.A.joinWithoutDuplicates(e,this.parent.getDefinitionURIs())),e},e.prototype.addDefinition=function(e,t){var r;if(a.isMap(t))r=t;else{if(!a.isObject(t))throw new Error("IllegalArgument");r=a.M.from(t)}this.definitions.has(e)?a.M.extend(this.definitions.get(e),r):this.definitions.set(e,r)},e.prototype.setDefinition=function(e,t){var r;if(a.isMap(t))r=t;else{if(!a.isObject(t))throw new Error("IllegalArgument");r=a.M.from(t)}this.definitions.set(e,r)},e.prototype.deleteDefinition=function(e){this.definitions["delete"](e)},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/ldp/RDFSource",["require","exports","./../NS","./../RDF","./../Utils"],function(e,t,r,o,a){var i=r.LDP.Class.RDFSource,u=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.is=function(t){return e.prototype.is.call(this,t)&&-1!==t.types.indexOf(i)},t.prototype.from=function(t){for(var r=e.prototype.from.call(this,t),n=a.isArray(r)?r:[r],o=0,i=n.length;i>o;o++){var u=n[o];this.hasClassProperties(u)||this.injectBehaviour(u)}return a.isArray(t)?n:n[0]},t.prototype.hasRDFClass=function(e){return-1!==e.types.indexOf(i)},t.prototype.hasClassProperties=function(e){return a.hasPropertyDefined(e,"memberOfRelation")&&a.hasPropertyDefined(e,"hasMemberRelation")},t.prototype.injectBehaviour=function(e){return e},t}(o.Resource.Factory);t.Factory=u;var s=new u;t.factory=s});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/ldp/Container",["require","exports","./../NS","./../RDF","./RDFSource","./../Utils"],function(e,t,r,o,a,i){var u=r.LDP.Class.Container,s=i.M.from({memberOfRelation:{uri:r.LDP.Predicate.memberOfRelation,multi:!1,literal:!1},hasMemberRelation:{uri:r.LDP.Predicate.hasMemberRelation,multi:!1,literal:!1}}),l=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.is=function(t){return e.prototype.is.call(this,t)&&this.hasRDFClass(t)&&this.hasClassProperties(t)},t.prototype.from=function(t){for(var r=e.prototype.from.call(this,t),n=i.isArray(r)?r:[r],o=0,a=n.length;a>o;o++){var u=n[o];this.hasClassProperties(u)||this.injectBehaviour(u)}return i.isArray(t)?n:n[0]},t.prototype.hasRDFClass=function(e){return-1!==e.types.indexOf(u)||-1!==e.types.indexOf(r.LDP.Class.BasicContainer)||-1!==e.types.indexOf(r.LDP.Class.DirectContainer)||-1!==e.types.indexOf(r.LDP.Class.IndirectContainer)},t.prototype.hasClassProperties=function(e){return i.hasPropertyDefined(e,"memberOfRelation")&&i.hasPropertyDefined(e,"hasMemberRelation")},t.prototype.injectBehaviour=function(e){return o.Resource.Factory.injectDescriptions(e,s),e},t}(a.Factory);t.Factory=l;var c=new l;t.factory=c});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/ldp/AccessPoint",["require","exports","./../NS","./../RDF","./Container","./../Utils"],function(e,t,r,o,a,i){var u=r.C.Class.AccessPoint,s=i.M.from({membershipResource:{uri:r.LDP.Predicate.membershipResource,multi:!1,literal:!1}}),l=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.is=function(t){return e.prototype.is.call(this,t)&&this.hasRDFClass(t)&&this.hasClassProperties(t)},t.prototype.from=function(t){for(var r=e.prototype.from.call(this,t),n=i.isArray(r)?r:[r],o=0,a=n.length;a>o;o++){var u=n[o];this.hasClassProperties(u)||this.injectBehaviour(u)}return i.isArray(t)?n:n[0]},t.prototype.hasRDFClass=function(e){return-1!==e.types.indexOf(u)},t.prototype.hasClassProperties=function(e){return i.hasPropertyDefined(e,"membershipResource")},t.prototype.injectBehaviour=function(e){return o.Resource.Factory.injectDescriptions(e,s),e},t}(a.Factory);t.Factory=l;var c=new l;t.factory=c});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/ldp/BasicContainer",["require","exports","./../NS","./Container","./../Utils"],function(e,t,r,o,a){t.Class=o;var i=(r.LDP.Class.BasicContainer,function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.is=function(t){return e.prototype.is.call(this,t)&&this.hasRDFClass(t)&&this.hasClassProperties(t)},t.prototype.from=function(t){for(var r=e.prototype.from.call(this,t),n=a.isArray(r)?r:[r],o=0,i=n.length;i>o;o++){var u=n[o];this.hasClassProperties(u)||this.injectBehaviour(u)}return a.isArray(t)?n:n[0]},t.prototype.hasRDFClass=function(e){return-1!==e.types.indexOf(r.LDP.Class.BasicContainer)},t.prototype.hasClassProperties=function(e){return!0},t.prototype.injectBehaviour=function(e){return e},t}(o.Factory));t.Factory=i;var u=new i;t.factory=u});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/ldp/DirectContainer",["require","exports","./../NS","./AccessPoint","./../Utils"],function(e,t,r,o,a){var i=r.LDP.Class.DirectContainer,u=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.is=function(t){return e.prototype.is.call(this,t)&&this.hasRDFClass(t)&&this.hasClassProperties(t)},t.prototype.from=function(t){for(var r=e.prototype.from.call(this,t),n=a.isArray(r)?r:[r],o=0,i=n.length;i>o;o++){var u=n[o];this.hasClassProperties(u)||this.injectBehaviour(u)}return a.isArray(t)?n:n[0]},t.prototype.hasRDFClass=function(e){return-1!==e.types.indexOf(i)},t.prototype.hasClassProperties=function(e){return!0},t.prototype.injectBehaviour=function(e){return e},t}(o.Factory);t.Factory=u;var s=new u;t.factory=s});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/ldp/IndirectContainer",["require","exports","./../NS","./../RDF","./AccessPoint","./../Utils"],function(e,t,r,o,a,i){var u=r.LDP.Class.IndirectContainer,s=i.M.from({insertedContentRelation:{uri:r.LDP.Predicate.insertedContentRelation,multi:!1,literal:!1}}),l=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.is=function(t){return e.prototype.is.call(this,t)&&this.hasRDFClass(t)&&this.hasClassProperties(t)},t.prototype.from=function(t){for(var r=e.prototype.from.call(this,t),n=i.isArray(r)?r:[r],o=0,a=n.length;a>o;o++){var u=n[o];this.hasClassProperties(u)||this.injectBehaviour(u)}return i.isArray(t)?n:n[0]},t.prototype.hasRDFClass=function(e){return-1!==e.types.indexOf(u)},t.prototype.hasClassProperties=function(e){return i.hasPropertyDefined(e,"insertedContentRelation")},t.prototype.injectBehaviour=function(e){return o.Resource.Factory.injectDescriptions(e,s),e},t}(a.Factory);t.Factory=l;var c=new l;t.factory=c}),r("Carbon/ldp/PersistedRDFSource",["require","exports"],function(e,t){(function(){function e(){}return e})()}),r("Carbon/LDP",["require","exports","./ldp/AccessPoint","./ldp/BasicContainer","./ldp/Container","./ldp/DirectContainer","./ldp/IndirectContainer","./ldp/PersistedRDFSource","./ldp/RDFSource"],function(e,t,r,n,o,a,i,u,s){t.AccessPoint=r,t.BasicContainer=n,t.Container=o,t.DirectContainer=a,t.IndirectContainer=i,t.PersistedRDFSource=u,t.RDFSource=s});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};r("Carbon/App",["require","exports","./NS","./Parent","./RDF","./LDP","./Utils"],function(e,t,r,o,a,i,u){var s=r.CS.Class.Application,l=u.M.from({rootContainer:{uri:r.CS.Predicate.rootContainer,multi:!1,literal:!1}}),c=function(e){function t(t,r){e.call(this),this.parent=t,this.resource=r,this.base=this.getBase(this.resource)}return n(t,e),t.prototype.resolve=function(e){if(a.URI.Util.isAbsolute(e))return e;var t=this.parent.resolve(this.base);return a.URI.Util.resolve(t,e)},t.prototype.getBase=function(e){var t=a.URI.Util.removeProtocol(e.rootContainer),r=a.URI.Util.removeProtocol(this.parent.resolve(""));return u.S.startsWith(t,r)&&(t=t.substr(r.length,t.length)),t},t}(o["default"]);t.Class=c;var f=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.is=function(t){return e.prototype.is.call(this,t)&&u.hasPropertyDefined(t,"rootContainer")},t.prototype.from=function(t){for(var r=e.prototype.from.call(this,t),n=u.isArray(r)?r:[r],o=0,a=n.length;a>o;o++){var i=n[o];this.hasClassProperties(i)||this.injectBehaviour(i)}return u.isArray(t)?n:n[0]},t.prototype.hasRDFClass=function(e){return-1!==e.types.indexOf(s)},t.prototype.hasClassProperties=function(e){return u.hasPropertyDefined(e,"memberOfRelation")&&u.hasPropertyDefined(e,"hasMemberRelation")},t.prototype.injectBehaviour=function(e){return a.Resource.Factory.injectDescriptions(e,l),e},t}(i.RDFSource.Factory);t.Factory=f;var p=new f;t.factory=p,Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=c}),r("Carbon/Apps",["require","exports","./App","./RDF","./Utils","./namespaces/CS"],function(e,t,r,n,o,a){var i=function(){function e(e){this.parent=e}return e.prototype.get=function(e){var t=this,i=this.getAppsContainerURI();return n.URI.Util.isRelative(e)&&(o.S.startsWith(e,i)||(e=n.URI.Util.resolve(i,e)),this.parent.resolve(e)),this.parent.Resources.get(e).then(function(e){var n=e.result;if(!n.types.indexOf(a.Class.Application))throw new Error("The resource fetched is not a cs:Application.");var o=r.factory.from(n),i=new r.Class(t.parent,o);return i})},e.prototype.getAppsContainerURI=function(){if(!this.parent.hasSetting("platform.apps.container"))throw new Error("The apps container URI hasn't been set.");return this.parent.getSetting("platform.apps.container")},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i}),r("Carbon/settings",["require","exports","./Auth"],function(e,t,r){var n={};n.domain="carbonldp.com",n["http.ssl"]=!0,n["auth.method"]=r.Method.Basic,n["platform.container"]="platform/",n["platform.apps.container"]=n["platform.container"]+"apps/",Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n});var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};return r("Carbon/Carbon",["require","exports","./Apps","./Auth","./Documents","./HTTP","./Parent","./RDF","./Resources","./settings","./Utils"],function(e,t,r,o,a,i,u,s,l,c,f){var p=function(e){function t(t){e.call(this),f.M.extend(this.settings,f.M.from(t)),this.Apps=new r["default"](this)}return n(t,e),t.prototype.resolve=function(e){if(s.URI.Util.isAbsolute(e))return e;var t=this.settings.get("http.ssl")?"https://":"http://";return t+=this.settings.get("domain"),s.URI.Util.resolve(t,e)},t.Apps=r["default"],t.Auth=o["default"],t.Documents=a["default"],t.HTTP=i,t.RDF=s,t.Resources=l["default"],t.Utils=f,t.version="0.8.1-ALPHA",t}(u["default"]);t.Carbon=p,Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=new p(c["default"])}),r("Carbon",["Carbon/Carbon"],function(e){return e}),t("Carbon")});