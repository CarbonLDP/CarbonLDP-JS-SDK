{"version":3,"sources":["Documents.ts"],"names":[],"mappings":"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","file":"Documents.js","sourcesContent":["import * as Errors from \"./Errors\";\nimport * as HTTP from \"./HTTP\";\nimport Context from \"./Context\";\nimport * as RDF from \"./RDF\";\nimport * as Utils from \"./Utils\";\n\nimport * as AccessPoint from \"./AccessPoint\";\nimport * as Document from \"./Document\";\nimport * as JSONLDConverter from \"./JSONLDConverter\";\nimport * as PersistedResource from \"./PersistedResource\";\nimport * as PersistedDocument from \"./PersistedDocument\";\nimport * as PersistedFragment from \"./PersistedFragment\";\nimport * as PersistedNamedFragment from \"./PersistedNamedFragment\";\nimport * as Pointer from \"./Pointer\";\nimport * as NS from \"./NS\";\nimport * as ObjectSchema from \"./ObjectSchema\";\nimport * as LDP from \"./LDP\";\nimport * as SPARQL from \"./SPARQL\";\n\nclass Documents implements Pointer.Library, Pointer.Validator, ObjectSchema.Resolver {\n\t_jsonldConverter:JSONLDConverter.Class;\n\n\tget jsonldConverter():JSONLDConverter.Class { return this._jsonldConverter; }\n\n\tprivate context:Context;\n\tprivate pointers:Map<string, Pointer.Class>;\n\n\tconstructor( context:Context = null ) {\n\t\tthis.context = context;\n\n\t\tthis.pointers = new Map<string, Pointer.Class>();\n\n\t\tif( !! this.context && !! this.context.parentContext ) {\n\t\t\tlet contextJSONLDConverter:JSONLDConverter.Class = this.context.parentContext.documents.jsonldConverter;\n\t\t\tthis._jsonldConverter = new JSONLDConverter.Class( contextJSONLDConverter.literalSerializers );\n\t\t} else {\n\t\t\tthis._jsonldConverter = new JSONLDConverter.Class();\n\t\t}\n\t}\n\n\tinScope( pointer:Pointer.Class ):boolean;\n\tinScope( id:string ):boolean;\n\tinScope( idOrPointer:any ):boolean {\n\t\tlet id:string = Pointer.Factory.is( idOrPointer ) ? idOrPointer.id : idOrPointer;\n\n\t\tif( RDF.URI.Util.isBNodeID( id ) ) return false;\n\n\t\tif( !! this.context ) {\n\t\t\tlet baseURI:string = this.context.getBaseURI();\n\t\t\tif( RDF.URI.Util.isAbsolute( id ) && RDF.URI.Util.isBaseOf( baseURI, id ) ) return true;\n\t\t} else {\n\t\t\tif( RDF.URI.Util.isAbsolute( id ) ) return true;\n\t\t}\n\n\t\tif( !! this.context && !! this.context.parentContext ) return this.context.parentContext.documents.inScope( id );\n\n\t\treturn false;\n\t}\n\n\thasPointer( id:string ):boolean {\n\t\tid = this.getPointerID( id );\n\n\t\tif( this.pointers.has( id ) ) return true;\n\n\t\tif( !! this.context && !! this.context.parentContext ) return this.context.parentContext.documents.hasPointer( id );\n\n\t\treturn false;\n\t}\n\n\tgetPointer( id:string ):Pointer.Class {\n\t\tlet localID:string = this.getPointerID( id );\n\n\t\tif( Utils.isNull( localID ) ) {\n\t\t\tif( !! this.context && !! this.context.parentContext ) return this.context.parentContext.documents.getPointer( id );\n\t\t\tthrow new Errors.IllegalArgumentError( \"The pointer id is not supported by this module.\" );\n\t\t}\n\n\t\tlet pointer:Pointer.Class;\n\t\tif( ! this.pointers.has( localID ) ) {\n\t\t\tpointer = this.createPointer( localID );\n\t\t\tthis.pointers.set( localID, pointer );\n\t\t}\n\n\t\treturn this.pointers.get( localID );\n\t}\n\n\tget( uri:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ PersistedDocument.Class, HTTP.Response.Class ]> {\n\t\tlet pointerID:string = this.getPointerID( uri );\n\t\tif( !! this.context ) uri = this.context.resolve( uri );\n\n\t\tif( this.pointers.has( pointerID ) ) {\n\t\t\tlet pointer:Pointer.Class = this.getPointer( uri );\n\t\t\tif( pointer.isResolved() ) {\n\t\t\t\treturn new Promise( ( resolve:( result:[ PersistedDocument.Class, HTTP.Response.Class ]) => void, reject:( error:Error ) => void ) => {\n\t\t\t\t\tresolve( [ <any> pointer, null ] );\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\tif ( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\tHTTP.Request.Util.setAcceptHeader( \"application/ld+json\", requestOptions );\n\t\tHTTP.Request.Util.setPreferredInteractionModel( NS.LDP.Class.RDFSource, requestOptions );\n\n\t\treturn HTTP.Request.Service.get( uri, requestOptions, new RDF.Document.Parser() ).then( ( [ rdfDocuments, response ]:[ RDF.Document.Class[], HTTP.Response.Class ] ) => {\n\t\t\tlet etag:string = HTTP.Response.Util.getETag( response );\n\t\t\tif( etag === null ) throw new HTTP.Errors.BadResponseError( \"The response doesn't contain an ETag\", response );\n\n\t\t\tlet rdfDocument:RDF.Document.Class = this.getRDFDocument( uri, rdfDocuments, response );\n\t\t\tif ( rdfDocument === null ) throw new HTTP.Errors.BadResponseError( \"No document was returned.\", response );\n\n\t\t\tlet documentResources:RDF.Node.Class[] = RDF.Document.Util.getDocumentResources( rdfDocument );\n\t\t\tif( documentResources.length > 1 ) throw new HTTP.Errors.BadResponseError( \"The RDFDocument contains more than one document resource.\", response );\n\t\t\tif( documentResources.length === 0 ) throw new HTTP.Errors.BadResponseError( \"The RDFDocument doesn\\'t contain a document resource.\", response );\n\n\t\t\tlet documentResource:RDF.Node.Class = documentResources[ 0 ];\n\t\t\tlet fragmentResources:RDF.Node.Class[] = RDF.Document.Util.getBNodeResources( rdfDocument );\n\t\t\tlet namedFragmentResources:RDF.Node.Class[] = RDF.Document.Util.getFragmentResources( rdfDocument );\n\n\t\t\tlet documentPointer:Pointer.Class = this.getPointer( uri );\n\t\t\tdocumentPointer._resolved = true;\n\n\t\t\tlet document:PersistedDocument.Class = PersistedDocument.Factory.createFrom( documentPointer, uri, this );\n\t\t\tdocument._etag = etag;\n\n\t\t\tlet fragments:PersistedFragment.Class[] = [];\n\t\t\tfor( let fragmentResource of fragmentResources ) {\n\t\t\t\tfragments.push( document.createFragment( fragmentResource[ \"@id\" ] ) );\n\t\t\t}\n\n\t\t\tlet namedFragments:PersistedNamedFragment.Class[] = [];\n\t\t\tfor( let namedFragmentResource of namedFragmentResources ) {\n\t\t\t\tnamedFragments.push( document.createNamedFragment( namedFragmentResource[ \"@id\" ] ) );\n\t\t\t}\n\n\t\t\tthis.compact( documentResource, document, document );\n\t\t\tthis.compact( fragmentResources, fragments, document );\n\t\t\tthis.compact( namedFragmentResources, namedFragments, document );\n\n\t\t\t// TODO: Move this to a more appropriate place. See also refresh() method\n\t\t\tdocument._syncSnapshot();\n\t\t\tfragments.forEach( ( fragment:PersistedFragment.Class ) => fragment._syncSnapshot() );\n\t\t\tnamedFragments.forEach( ( fragment:PersistedNamedFragment.Class ) => fragment._syncSnapshot() );\n\t\t\tdocument._syncSavedFragments();\n\n\t\t\t// TODO: Decorate additional behavior (app, etc.). See also refresh() method\n\t\t\t// TODO: Make it dynamic. See also refresh() method\n\t\t\tif( LDP.Container.Factory.hasRDFClass( document ) ) LDP.PersistedContainer.Factory.decorate( document );\n\n\t\t\treturn [ document, response ];\n\t\t} );\n\t}\n\n\texists( documentURI:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ boolean, HTTP.Response.Class ]> {\n\t\tif( !! this.context ) {\n\t\t\tdocumentURI = this.context.resolve( documentURI );\n\t\t\tif ( this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\t\t}\n\n\t\tHTTP.Request.Util.setAcceptHeader( \"application/ld+json\", requestOptions );\n\t\tHTTP.Request.Util.setPreferredInteractionModel( NS.LDP.Class.RDFSource, requestOptions );\n\n\t\treturn HTTP.Request.Service.head( documentURI, requestOptions ).then( ( response:HTTP.Response.Class ) => [ true, response ], ( error:HTTP.Errors.Error ) => {\n\t\t\tif ( error.response.status === 404 )\n\t\t\t\treturn [ false, error.response ];\n\n\t\t\treturn Promise.reject<any>( error );\n\t\t});\n\t}\n\n\tcreateChild( parentURI:string, slug:string, childDocument:Document.Class, requestOptions?:HTTP.Request.Options ):Promise<[ Pointer.Class, HTTP.Response.Class ]>;\n\tcreateChild( parentURI:string, childDocument:Document.Class, requestOptions?:HTTP.Request.Options ):Promise<[ Pointer.Class, HTTP.Response.Class ]>;\n\n\tcreateChild( parentURI:string, slug:string, childObject:Object, requestOptions?:HTTP.Request.Options ):Promise<[ Pointer.Class, HTTP.Response.Class ]>;\n\tcreateChild( parentURI:string, childObject:Object, requestOptions?:HTTP.Request.Options ):Promise<[ Pointer.Class, HTTP.Response.Class ]>;\n\n\tcreateChild( parentURI:string, slugOrChildDocument:any, childDocumentOrRequestOptions:any = {}, requestOptions:HTTP.Request.Options = {} ):Promise<[ Pointer.Class, HTTP.Response.Class ]> {\n\t\tlet slug:string = Utils.isString( slugOrChildDocument ) ? slugOrChildDocument : null;\n\t\tlet childDocument:Document.Class = ! Utils.isString( slugOrChildDocument ) ? slugOrChildDocument : childDocumentOrRequestOptions;\n\t\trequestOptions = ! Utils.isString( slugOrChildDocument ) ? childDocumentOrRequestOptions : requestOptions;\n\n\t\tif ( ! Document.Factory.is( childDocument ) ) childDocument = Document.Factory.createFrom( childDocument );\n\n\t\tif( !! this.context ) parentURI = this.context.resolve( parentURI );\n\n\t\tif( PersistedDocument.Factory.is( childDocument ) ) return Promise.reject<any>( new Errors.IllegalArgumentError( \"The childDocument provided has been already persisted.\" ) );\n\n\t\tif( childDocument.id ) {\n\t\t\tlet childURI:string = childDocument.id;\n\t\t\tif( !! this.context ) childURI = this.context.resolve( childURI );\n\t\t\tif ( ! RDF.URI.Util.isBaseOf( parentURI, childURI ) ) {\n\t\t\t\treturn Promise.reject<any>( new Errors.IllegalArgumentError( \"The childDocument's URI is not relative to the parentURI specified\" ) );\n\t\t\t}\n\t\t}\n\n\t\tif ( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\tHTTP.Request.Util.setContentTypeHeader( \"application/ld+json\", requestOptions );\n\t\tHTTP.Request.Util.setAcceptHeader( \"application/ld+json\", requestOptions );\n\t\tHTTP.Request.Util.setPreferredInteractionModel( NS.LDP.Class.Container, requestOptions );\n\n\t\tlet body:string = childDocument.toJSON( this, this.jsonldConverter );\n\n\t\tif( slug !== null ) HTTP.Request.Util.setSlug( slug, requestOptions );\n\n\t\treturn HTTP.Request.Service.post( parentURI, body, requestOptions ).then( ( response:HTTP.Response.Class ) => {\n\t\t\tlet locationHeader:HTTP.Header.Class = response.getHeader( \"Location\" );\n\t\t\tif( locationHeader === null || locationHeader.values.length < 1 ) throw new HTTP.Errors.BadResponseError( \"The response is missing a Location header.\", response );\n\t\t\tif( locationHeader.values.length !== 1 ) throw new HTTP.Errors.BadResponseError( \"The response contains more than one Location header.\", response );\n\n\t\t\tlet locationURI:string = locationHeader.values[0].toString();\n\n\t\t\t// TODO: If a Document was supplied, use it to create the pointer instead of creating a new one\n\t\t\tlet pointer:Pointer.Class = this.getPointer( locationURI );\n\n\t\t\treturn [\n\t\t\t\tpointer,\n\t\t\t\tresponse,\n\t\t\t];\n\t\t});\n\t}\n\n\tcreateAccessPoint( documentURI:string, accessPoint:AccessPoint.Class, slug?:string, requestOptions?:HTTP.Request.Options ):Promise<[ Pointer.Class, HTTP.Response.Class ]>;\n\tcreateAccessPoint( accessPoint:AccessPoint.Class, slug?:string, requestOptions?:HTTP.Request.Options ):Promise<[ Pointer.Class, HTTP.Response.Class ]>;\n\tcreateAccessPoint( documentURIOrAccessPoint:any, accessPointOrSlug:any, slugOrRequestOptions:any = null, requestOptions:HTTP.Request.Options = {} ):Promise<[ Pointer.Class, HTTP.Response.Class ]> {\n\t\tlet documentURI:string = Utils.isString( documentURIOrAccessPoint ) ? documentURIOrAccessPoint : null;\n\t\tlet accessPoint:AccessPoint.Class = ! Utils.isString( documentURIOrAccessPoint ) ? documentURIOrAccessPoint : accessPointOrSlug;\n\t\tlet slug:string = Utils.isString( accessPointOrSlug ) ? accessPointOrSlug : slugOrRequestOptions;\n\t\trequestOptions = ! Utils.isString( slugOrRequestOptions ) && slugOrRequestOptions !== null ? slugOrRequestOptions : requestOptions;\n\n\t\tif( documentURI === null ) documentURI = accessPoint.membershipResource.id;\n\n\t\tif( !! this.context ) documentURI = this.context.resolve( documentURI );\n\n\t\tif( accessPoint.membershipResource.id !== documentURI ) return Promise.reject<any>( new Errors.IllegalArgumentError( \"The documentURI must be the same as the accessPoint's membershipResource\" ) );\n\t\tif( PersistedDocument.Factory.is( accessPoint ) ) return Promise.reject<any>( new Errors.IllegalArgumentError( \"The accessPoint provided has been already persisted.\" ) );\n\n\t\t// TODO: Reuse logic with createChild\n\t\tif( accessPoint.id ) {\n\t\t\tlet childURI:string = accessPoint.id;\n\t\t\tif( !! this.context ) childURI = this.context.resolve( childURI );\n\t\t\tif ( ! RDF.URI.Util.isBaseOf( documentURI, childURI ) ) {\n\t\t\t\treturn Promise.reject<any>( new Errors.IllegalArgumentError( \"The accessPoint's URI is not relative to the parentURI specified\" ) );\n\t\t\t}\n\t\t}\n\n\t\tif ( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\tHTTP.Request.Util.setContentTypeHeader( \"application/ld+json\", requestOptions );\n\t\tHTTP.Request.Util.setAcceptHeader( \"application/ld+json\", requestOptions );\n\t\tHTTP.Request.Util.setPreferredInteractionModel( NS.LDP.Class.RDFSource, requestOptions );\n\n\t\tlet body:string = accessPoint.toJSON( this, this.jsonldConverter );\n\n\t\tif( slug !== null ) HTTP.Request.Util.setSlug( slug, requestOptions );\n\n\t\treturn HTTP.Request.Service.post( documentURI, body, requestOptions ).then( ( response:HTTP.Response.Class ) => {\n\t\t\tlet locationHeader:HTTP.Header.Class = response.getHeader( \"Location\" );\n\t\t\tif( locationHeader === null || locationHeader.values.length < 1 ) throw new HTTP.Errors.BadResponseError( \"The response is missing a Location header.\", response );\n\t\t\tif( locationHeader.values.length !== 1 ) throw new HTTP.Errors.BadResponseError( \"The response contains more than one Location header.\", response );\n\n\t\t\tlet locationURI:string = locationHeader.values[0].toString();\n\n\t\t\t// TODO: If a Document was supplied, use it to create the pointer instead of creating a new one\n\t\t\tlet pointer:Pointer.Class = this.getPointer( locationURI );\n\n\t\t\treturn [\n\t\t\t\tpointer,\n\t\t\t\tresponse,\n\t\t\t];\n\t\t});\n\t}\n\n\tupload( parentURI:string, slug:string, file:Blob, requestOptions?:HTTP.Request.Options ):Promise<[ Pointer.Class, HTTP.Response.Class ]>;\n\tupload( parentURI:string, file:Blob, requestOptions?:HTTP.Request.Options ):Promise<[ Pointer.Class, HTTP.Response.Class ]>;\n\tupload( parentURI:string, slugOrBlob:any, blobOrRequestOptions:any = {}, requestOptions:HTTP.Request.Options = {} ):Promise<[ Pointer.Class, HTTP.Response.Class ]> {\n\t\tlet slug:string = Utils.isString( slugOrBlob ) ? slugOrBlob : null;\n\t\tlet blob:Blob = ! Utils.isString(slugOrBlob) ? slugOrBlob : blobOrRequestOptions;\n\t\trequestOptions = ! Utils.isString(slugOrBlob) ? blobOrRequestOptions : requestOptions;\n\n\t\tif( ! ( blob instanceof Blob ) ) return Promise.reject<any>( new Errors.IllegalArgumentError( \"The file is not a valid Blob object.\" ) );\n\n\t\tif( !! this.context ) parentURI = this.context.resolve( parentURI );\n\t\tif ( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\tHTTP.Request.Util.setContentTypeHeader( blob.type, requestOptions );\n\t\tHTTP.Request.Util.setAcceptHeader( \"application/ld+json\", requestOptions );\n\t\tHTTP.Request.Util.setPreferredInteractionModel( NS.LDP.Class.Container, requestOptions );\n\n\t\tif( slug !== null ) HTTP.Request.Util.setSlug( slug, requestOptions );\n\n\t\treturn HTTP.Request.Service.post( parentURI, blob, requestOptions ).then( ( response:HTTP.Response.Class ) => {\n\t\t\tlet locationHeader:HTTP.Header.Class = response.getHeader( \"Location\" );\n\t\t\tif( locationHeader === null || locationHeader.values.length < 1 ) throw new HTTP.Errors.BadResponseError( \"The response is missing a Location header.\", response );\n\t\t\tif( locationHeader.values.length !== 1 ) throw new HTTP.Errors.BadResponseError( \"The response contains more than one Location header.\", response );\n\n\t\t\tlet locationURI:string = locationHeader.values[0].toString();\n\n\t\t\tlet pointer:Pointer.Class = this.getPointer( locationURI );\n\n\t\t\treturn [\n\t\t\t\tpointer,\n\t\t\t\tresponse,\n\t\t\t];\n\t\t});\n\t}\n\n\tgetMembers( uri:string, includeNonReadable:boolean, requestOptions:HTTP.Request.Options ):Promise<[ Pointer.Class[], HTTP.Response.Class ]>;\n\tgetMembers( uri:string, includeNonReadable:boolean ):Promise<[ Pointer.Class[], HTTP.Response.Class ]>;\n\tgetMembers( uri:string, requestOptions:HTTP.Request.Options ):Promise<[ Pointer.Class[], HTTP.Response.Class ]>;\n\tgetMembers( uri:string ):Promise<[ Pointer.Class[], HTTP.Response.Class ]>;\n\tgetMembers( uri:string, includeNonReadableOrRequestOptions:any = null, requestOptions:HTTP.Request.Options = {} ):Promise<[ Pointer.Class[], HTTP.Response.Class ]> {\n\t\tlet includeNonReadable:boolean = Utils.isBoolean( includeNonReadableOrRequestOptions ) ? includeNonReadableOrRequestOptions : true;\n\t\trequestOptions = Utils.isObject( includeNonReadableOrRequestOptions ) && includeNonReadableOrRequestOptions !== null ? includeNonReadableOrRequestOptions : requestOptions;\n\n\t\tif( ! RDF.URI.Util.isAbsolute( uri ) ) {\n\t\t\tif( ! this.context ) throw new Errors.IllegalArgumentError( \"This Documents instance doesn't support relative URIs.\" );\n\t\t\turi = this.context.resolve( uri );\n\t\t}\n\n\t\tif ( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\tHTTP.Request.Util.setAcceptHeader( \"application/ld+json\", requestOptions );\n\t\tHTTP.Request.Util.setPreferredInteractionModel( NS.LDP.Class.Container, requestOptions );\n\n\t\tlet containerRetrievalPreferences:HTTP.Request.ContainerRetrievalPreferences = {\n\t\t\tinclude: [\n\t\t\t\tNS.LDP.Class.PreferMinimalContainer,\n\t\t\t\tNS.LDP.Class.PreferMembership,\n\t\t\t],\n\t\t\tomit: [\n\t\t\t\tNS.LDP.Class.PreferContainment,\n\t\t\t\tNS.C.Class.PreferContainmentResources,\n\t\t\t\tNS.C.Class.PreferMembershipResources,\n\t\t\t],\n\t\t};\n\n\t\tif( includeNonReadable ) {\n\t\t\tcontainerRetrievalPreferences.include.push( NS.C.Class.NonReadableMembershipResourceTriples );\n\t\t} else {\n\t\t\tcontainerRetrievalPreferences.omit.push( NS.C.Class.NonReadableMembershipResourceTriples );\n\t\t}\n\t\tHTTP.Request.Util.setContainerRetrievalPreferences( containerRetrievalPreferences, requestOptions );\n\n\t\treturn HTTP.Request.Service.get( uri, requestOptions, new RDF.Document.Parser() ).then( ( [ rdfDocuments, response ]:[ RDF.Document.Class[], HTTP.Response.Class ] ) => {\n\t\t\tlet rdfDocument:RDF.Document.Class = this.getRDFDocument( uri, rdfDocuments, response );\n\t\t\tif ( rdfDocument === null ) throw new HTTP.Errors.BadResponseError( \"No document was returned.\", response );\n\n\t\t\tlet documentResource:RDF.Node.Class = this.getDocumentResource( rdfDocument, response );\n\t\t\tlet membershipResourceURI:string = RDF.Node.Util.getPropertyURI( documentResource, NS.LDP.Predicate.membershipResource );\n\n\t\t\tlet membershipResource:RDF.Node.Class;\n\t\t\tif( documentResource[ \"@id\" ] === membershipResourceURI ) {\n\t\t\t\tmembershipResource = documentResource;\n\t\t\t} else if( membershipResourceURI === null ) {\n\t\t\t\tif( documentResource[ \"@type\" ].indexOf( NS.LDP.Class.BasicContainer ) !== -1 ) {\n\t\t\t\t\tmembershipResource = documentResource;\n\t\t\t\t} else {\n\t\t\t\t\tthrow new HTTP.Errors.BadResponseError( \"The document is not an ldp:BasicContainer and it doesn't contain an ldp:membershipResource triple.\", response );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet membershipResourceDocument:RDF.Document.Class = this.getRDFDocument( membershipResourceURI, rdfDocuments, response );\n\t\t\t\tif ( membershipResourceDocument === null ) throw new HTTP.Errors.BadResponseError( \"The membershipResource document was not included in the response.\", response );\n\t\t\t\tmembershipResource = this.getDocumentResource( membershipResourceDocument, response );\n\t\t\t}\n\n\t\t\tlet hasMemberRelation:string = RDF.Node.Util.getPropertyURI( documentResource, NS.LDP.Predicate.hasMemberRelation );\n\n\t\t\tlet memberPointers:Pointer.Class[] = RDF.Value.Util.getPropertyPointers( membershipResource, hasMemberRelation, this );\n\n\t\t\treturn [ memberPointers, response ];\n\t\t});\n\t}\n\n\taddMember( documentURI:string, member:Pointer.Class, requestOptions?:HTTP.Request.Options ): Promise<HTTP.Response.Class>;\n\taddMember( documentURI:string, memberURI:string, requestOptions?:HTTP.Request.Options ): Promise<HTTP.Response.Class>;\n\taddMember( documentURI:string, memberORUri:Pointer.Class | string, requestOptions:HTTP.Request.Options = {} ): Promise<HTTP.Response.Class> {\n\t\treturn this.addMembers( documentURI, [ memberORUri ], requestOptions );\n\t}\n\n\taddMembers( documentURI:string, members:(Pointer.Class | string)[], requestOptions?:HTTP.Request.Options ): Promise<HTTP.Response.Class>;\n\taddMembers( documentURI:string, members:(Pointer.Class | string)[], requestOptions:HTTP.Request.Options = {} ): Promise<HTTP.Response.Class> {\n\t\tlet pointers:Pointer.Class[] = [];\n\t\tfor ( let member  of members ) {\n\t\t\tmember = Utils.isString( member ) ? this.getPointer( <string> member ) : member;\n\t\t\tif ( ! Pointer.Factory.is( member ) ) return Promise.reject<any>( new Errors.IllegalArgumentError( \"No Carbon.Pointer or string URI provided.\") );\n\n\t\t\tpointers.push( <Pointer.Class> member );\n\t\t}\n\n\t\tif( !! this.context ) documentURI = this.context.resolve( documentURI );\n\n\t\tlet document:Document.Class = LDP.AddMemberAction.Factory.createDocument( pointers );\n\n\t\tif ( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\t\tHTTP.Request.Util.setAcceptHeader( \"application/ld+json\", requestOptions );\n\t\tHTTP.Request.Util.setContentTypeHeader( \"application/ld+json\", requestOptions );\n\t\tHTTP.Request.Util.setPreferredInteractionModel( NS.LDP.Class.Container, requestOptions );\n\n\t\tlet body:string = document.toJSON( this, this.jsonldConverter );\n\n\t\treturn HTTP.Request.Service.put( documentURI, body, requestOptions );\n\t}\n\n\tremoveMember( documentURI:string, member:Pointer.Class, requestOptions?:HTTP.Request.Options ): Promise<HTTP.Response.Class>;\n\tremoveMember( documentURI:string, memberURI:string, requestOptions?:HTTP.Request.Options ): Promise<HTTP.Response.Class>;\n\tremoveMember( documentURI:string, memberORUri:Pointer.Class | string, requestOptions:HTTP.Request.Options = {} ): Promise<HTTP.Response.Class> {\n\t\treturn this.removeMembers( documentURI, [ memberORUri ], requestOptions );\n\t}\n\n\tremoveMembers( documentURI:string, members:(Pointer.Class | string)[], requestOptions:HTTP.Request.Options = {} ):Promise<HTTP.Response.Class> {\n\t\tlet pointers:Pointer.Class[] = [];\n\t\tfor ( let member of members ) {\n\t\t\tmember = Utils.isString( member ) ? this.getPointer( <string> member ) : member;\n\t\t\tif ( ! Pointer.Factory.is( member ) ) return Promise.reject<any>( new Errors.IllegalArgumentError( \"No Carbon.Pointer or string URI provided.\") );\n\n\t\t\tpointers.push( <Pointer.Class> member );\n\t\t}\n\n\t\tif( !! this.context ) documentURI = this.context.resolve( documentURI );\n\n\t\tlet document:Document.Class = LDP.RemoveMemberAction.Factory.createDocument( pointers );\n\t\tlet containerRetrievalPreferences:HTTP.Request.ContainerRetrievalPreferences = {\n\t\t\tinclude: [ NS.C.Class.PreferSelectedMembershipTriples ],\n\t\t\tomit: [ NS.C.Class.PreferMembershipTriples ],\n\t\t};\n\n\t\tif ( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\t\tHTTP.Request.Util.setAcceptHeader( \"application/ld+json\", requestOptions );\n\t\tHTTP.Request.Util.setContentTypeHeader( \"application/ld+json\", requestOptions );\n\t\tHTTP.Request.Util.setPreferredInteractionModel( NS.LDP.Class.Container, requestOptions );\n\t\tHTTP.Request.Util.setContainerRetrievalPreferences( containerRetrievalPreferences, requestOptions, false );\n\n\t\tlet body:string = document.toJSON( this, this.jsonldConverter );\n\n\t\treturn HTTP.Request.Service.delete( documentURI, body, requestOptions );\n\t}\n\n\tsave( persistedDocument:PersistedDocument.Class, requestOptions:HTTP.Request.Options = {} ):Promise<[ PersistedDocument.Class, HTTP.Response.Class ]> {\n\t\t// TODO: Check if the document isDirty\n\t\t/*\n\t\tif( ! persistedDocument.isDirty() ) return new Promise<HTTP.Response.Class>( ( resolve:( result:HTTP.Response.Class ) => void ) => {\n\t\t\tresolve( null );\n\t\t});\n\t\t*/\n\n\t\tif ( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\tHTTP.Request.Util.setAcceptHeader( \"application/ld+json\", requestOptions );\n\t\tHTTP.Request.Util.setContentTypeHeader( \"application/ld+json\", requestOptions );\n\t\tHTTP.Request.Util.setPreferredInteractionModel( NS.LDP.Class.RDFSource, requestOptions );\n\t\tHTTP.Request.Util.setIfMatchHeader( persistedDocument._etag, requestOptions );\n\n\t\tlet body:string = persistedDocument.toJSON( this, this.jsonldConverter );\n\n\t\treturn HTTP.Request.Service.put( persistedDocument.id, body, requestOptions ).then( ( response:HTTP.Response.Class ) => {\n\t\t\treturn [ persistedDocument, response ];\n\t\t});\n\t}\n\n\trefresh( persistedDocument:PersistedDocument.Class, requestOptions:HTTP.Request.Options = {} ):Promise<[ PersistedDocument.Class, HTTP.Response.Class ]> {\n\t\tif ( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\tHTTP.Request.Util.setAcceptHeader( \"application/ld+json\", requestOptions );\n\t\tHTTP.Request.Util.setContentTypeHeader( \"application/ld+json\", requestOptions );\n\t\tHTTP.Request.Util.setPreferredInteractionModel( NS.LDP.Class.RDFSource, requestOptions );\n\n\t\treturn HTTP.Request.Service.head( persistedDocument.id, requestOptions ).then( ( headerResponse:HTTP.Response.Class ) => {\n\t\t\tlet eTag:string = HTTP.Response.Util.getETag( headerResponse );\n\t\t\tif ( eTag === persistedDocument._etag ) return [ persistedDocument, headerResponse ];\n\n\t\t\treturn HTTP.Request.Service.get( persistedDocument.id, requestOptions, new RDF.Document.Parser() ).then( ( [ rdfDocuments, response ]:[ RDF.Document.Class[], HTTP.Response.Class ] ) => {\n\t\t\t\teTag = HTTP.Response.Util.getETag( response );\n\t\t\t\tif( eTag === null ) throw new HTTP.Errors.BadResponseError( \"The response doesn't contain an ETag\", response );\n\n\t\t\t\tlet rdfDocument:RDF.Document.Class = this.getRDFDocument( persistedDocument.id, rdfDocuments, response );\n\t\t\t\tif ( rdfDocument === null ) throw new HTTP.Errors.BadResponseError( \"No document was returned.\", response );\n\t\t\t\tpersistedDocument._etag = eTag;\n\n\t\t\t\tlet documentResources:RDF.Node.Class[] = RDF.Document.Util.getDocumentResources( rdfDocument );\n\t\t\t\tif( documentResources.length > 1 ) throw new HTTP.Errors.BadResponseError( \"The RDFDocument contains more than one document resource.\", response );\n\t\t\t\tif( documentResources.length === 0 ) throw new HTTP.Errors.BadResponseError( \"The RDFDocument doesn\\'t contain a document resource.\", response );\n\n\t\t\t\tlet documentResource:RDF.Node.Class = documentResources[ 0 ];\n\t\t\t\tlet fragmentResources:RDF.Node.Class[] = RDF.Document.Util.getBNodeResources( rdfDocument );\n\t\t\t\tfragmentResources.concat( RDF.Document.Util.getFragmentResources( rdfDocument ) );\n\n\t\t\t\tlet updatedData:Object = {};\n\t\t\t\tthis.compact( documentResource, updatedData, persistedDocument );\n\t\t\t\tthis.mix( persistedDocument, updatedData );\n\t\t\t\tpersistedDocument._syncSnapshot();\n\n\t\t\t\tlet id:string;\n\t\t\t\tlet fragment:PersistedFragment.Class;\n\t\t\t\tfor( let fragmentResource of fragmentResources ) {\n\t\t\t\t\tupdatedData = this.compact( fragmentResource, {}, persistedDocument );\n\n\t\t\t\t\tid = updatedData[ \"id\" ] || \"\";\n\t\t\t\t\tif ( persistedDocument.hasFragment( id ) ) {\n\t\t\t\t\t\tfragment = this.mix( persistedDocument.getFragment( id ), updatedData );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfragment = persistedDocument.createFragment( id, updatedData );\n\t\t\t\t\t}\n\n\t\t\t\t\tfragment._syncSnapshot();\n\t\t\t\t}\n\n\t\t\t\tpersistedDocument._syncSavedFragments();\n\n\t\t\t\treturn [ persistedDocument, response ];\n\t\t\t});\n\t\t});\n\t}\n\n\tdelete( documentURI:string, requestOptions:HTTP.Request.Options = {} ):Promise<HTTP.Response.Class> {\n\t\tif ( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\tif( !! this.context ) documentURI = this.context.resolve( documentURI );\n\n\t\tHTTP.Request.Util.setAcceptHeader( \"application/ld+json\", requestOptions );\n\t\tHTTP.Request.Util.setPreferredInteractionModel( NS.LDP.Class.RDFSource, requestOptions );\n\n\t\treturn HTTP.Request.Service.delete( documentURI, requestOptions );\n\t}\n\n\tgetSchemaFor( object:Object ):ObjectSchema.DigestedObjectSchema {\n\t\tif( \"@id\" in object ) {\n\t\t\treturn this.getDigestedObjectSchemaForExpandedObject( object );\n\t\t} else {\n\t\t\treturn this.getDigestedObjectSchemaForDocument( <any> object );\n\t\t}\n\t}\n\n\texecuteRawASKQuery( documentURI:string, askQuery:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ SPARQL.RawResults.Class, HTTP.Response.Class ]> {\n\t\tif( ! RDF.URI.Util.isAbsolute( documentURI ) ) {\n\t\t\tif( ! this.context ) throw new Errors.IllegalArgumentError( \"This Documents instance doesn't support relative URIs.\" );\n\t\t\tdocumentURI = this.context.resolve( documentURI );\n\t\t}\n\n\t\tif ( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\treturn SPARQL.Service.executeRawASKQuery( documentURI, askQuery, requestOptions );\n\t}\n\n\texecuteASKQuery( documentURI:string, askQuery:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ boolean, HTTP.Response.Class ]> {\n\t\tif( ! RDF.URI.Util.isAbsolute( documentURI ) ) {\n\t\t\tif( ! this.context ) throw new Errors.IllegalArgumentError( \"This Documents instance doesn't support relative URIs.\" );\n\t\t\tdocumentURI = this.context.resolve( documentURI );\n\t\t}\n\n\t\tif ( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\treturn SPARQL.Service.executeASKQuery( documentURI, askQuery, requestOptions );\n\t}\n\n\texecuteRawSELECTQuery( documentURI:string, selectQuery:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ SPARQL.RawResults.Class, HTTP.Response.Class ]> {\n\t\tif( ! RDF.URI.Util.isAbsolute( documentURI ) ) {\n\t\t\tif( ! this.context ) throw new Errors.IllegalArgumentError( \"This Documents instance doesn't support relative URIs.\" );\n\t\t\tdocumentURI = this.context.resolve( documentURI );\n\t\t}\n\n\t\tif ( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\treturn SPARQL.Service.executeRawSELECTQuery( documentURI, selectQuery, requestOptions );\n\t}\n\n\texecuteSELECTQuery( documentURI:string, selectQuery:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ SPARQL.SELECTResults.Class, HTTP.Response.Class ]> {\n\t\tif( ! RDF.URI.Util.isAbsolute( documentURI ) ) {\n\t\t\tif( ! this.context ) throw new Errors.IllegalArgumentError( \"This Documents instance doesn't support relative URIs.\" );\n\t\t\tdocumentURI = this.context.resolve( documentURI );\n\t\t}\n\n\t\tif ( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\treturn SPARQL.Service.executeSELECTQuery( documentURI, selectQuery, this, requestOptions );\n\t}\n\n\texecuteRawCONSTRUCTQuery( documentURI:string, constructQuery:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ string, HTTP.Response.Class ]> {\n\t\tif( ! RDF.URI.Util.isAbsolute( documentURI ) ) {\n\t\t\tif( ! this.context ) throw new Errors.IllegalArgumentError( \"This Documents instance doesn't support relative URIs.\" );\n\t\t\tdocumentURI = this.context.resolve( documentURI );\n\t\t}\n\n\t\tif ( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\treturn SPARQL.Service.executeRawCONSTRUCTQuery( documentURI, constructQuery, requestOptions );\n\t}\n\n\texecuteRawDESCRIBEQuery( documentURI:string, constructQuery:string, requestOptions:HTTP.Request.Options = {} ):Promise<[ string, HTTP.Response.Class ]> {\n\t\tif( ! RDF.URI.Util.isAbsolute( documentURI ) ) {\n\t\t\tif( ! this.context ) throw new Errors.IllegalArgumentError( \"This Documents instance doesn't support relative URIs.\" );\n\t\t\tdocumentURI = this.context.resolve( documentURI );\n\t\t}\n\n\t\tif ( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\treturn SPARQL.Service.executeRawDESCRIBEQuery( documentURI, constructQuery, requestOptions );\n\t}\n\n\tprivate getRDFDocument( requestURL:string, rdfDocuments:RDF.Document.Class[], response:HTTP.Response.Class ):RDF.Document.Class {\n\t\trdfDocuments = rdfDocuments.filter( ( rdfDocument:RDF.Document.Class ) => rdfDocument[ \"@id\" ] === requestURL );\n\n\t\tif ( rdfDocuments.length > 1 ) throw new HTTP.Errors.BadResponseError( \"Several documents share the same id.\", response );\n\n\t\treturn rdfDocuments.length > 0 ? rdfDocuments[ 0 ] : null;\n\t}\n\n\tprivate getDocumentResource( rdfDocument:RDF.Document.Class, response:HTTP.Response.Class ):RDF.Node.Class {\n\t\tlet documentResources:RDF.Node.Class[] = RDF.Document.Util.getDocumentResources( rdfDocument );\n\t\tif ( documentResources.length === 0 ) throw new HTTP.Errors.BadResponseError( `The RDFDocument: ${ rdfDocument[ \"@id\" ] }, doesn't contain a document resource.`, response );\n\t\tif ( documentResources.length > 1 ) throw new HTTP.Errors.BadResponseError( `The RDFDocument: ${ rdfDocument[ \"@id\" ] }, contains more than one document resource.`, response );\n\n\t\treturn documentResources[ 0 ];\n\t}\n\n\tprivate getPointerID( uri:string ):string {\n\t\tif( RDF.URI.Util.isBNodeID( uri ) ) throw new Errors.IllegalArgumentError( \"BNodes cannot be fetched directly.\" );\n\t\t// TODO: Make named fragments independently resolvable\n\t\t/*\n\t\t\tif( RDF.URI.Util.hasFragment( uri ) ) throw new Errors.IllegalArgumentError( \"Fragment URI's cannot be fetched directly.\" );\n\t\t*/\n\n\t\tif( !! this.context ) {\n\t\t\tif( ! RDF.URI.Util.isRelative( uri ) ) {\n\t\t\t\tlet baseURI:string = this.context.getBaseURI();\n\t\t\t\tif( ! RDF.URI.Util.isBaseOf( baseURI, uri ) ) return null;\n\n\t\t\t\treturn uri.substring( baseURI.length );\n\t\t\t} else {\n\t\t\t\treturn uri;\n\t\t\t}\n\t\t} else {\n\t\t\tif( RDF.URI.Util.isRelative( uri ) ) throw new Errors.IllegalArgumentError( \"This Documents instance doesn't support relative URIs.\" );\n\t\t\treturn uri;\n\t\t}\n\t}\n\n\tprivate createPointer( localID:string ):Pointer.Class {\n\t\tlet id:string = !! this.context ? this.context.resolve( localID ) : localID;\n\t\tlet pointer:Pointer.Class = Pointer.Factory.create( id );\n\t\tObject.defineProperty( pointer, \"resolve\", {\n\t\t\twritable: false,\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: ():Promise<[ PersistedDocument.Class, HTTP.Response.Class ]> => {\n\t\t\t\treturn this.get( id );\n\t\t\t},\n\t\t});\n\n\t\treturn pointer;\n\t}\n\n\tprivate compact( expandedObjects:Object[], targetObjects:Object[], pointerLibrary:Pointer.Library ):Object[];\n\tprivate compact( expandedObject:Object, targetObject:Object, pointerLibrary:Pointer.Library ):Object;\n\tprivate compact( expandedObjectOrObjects:any, targetObjectOrObjects:any, pointerLibrary:Pointer.Library ):any {\n\t\tif( ! Utils.isArray( expandedObjectOrObjects ) ) return this.compactSingle( expandedObjectOrObjects, targetObjectOrObjects, pointerLibrary );\n\n\t\tlet expandedObjects:Object[] = expandedObjectOrObjects;\n\t\tlet targetObjects:Object[] = !! targetObjectOrObjects ? targetObjectOrObjects : [];\n\t\tfor( let i:number = 0, length:number = expandedObjects.length; i < length; i++ ) {\n\t\t\tlet expandedObject:Object = expandedObjects[ i ];\n\t\t\tlet targetObject:Object = targetObjects[ i ] = !! targetObjects[ i ] ? targetObjects[ i ] : {};\n\n\t\t\tthis.compactSingle( expandedObject, targetObject, pointerLibrary );\n\t\t}\n\n\t\treturn targetObjects;\n\t}\n\n\tprivate compactSingle( expandedObject:Object, targetObject:Object, pointerLibrary:Pointer.Library ):Object {\n\t\tlet digestedSchema:ObjectSchema.DigestedObjectSchema = this.getDigestedObjectSchemaForExpandedObject( expandedObject );\n\n\t\treturn this.jsonldConverter.compact( expandedObject, targetObject, digestedSchema, pointerLibrary );\n\t}\n\n\tprivate getDigestedObjectSchemaForExpandedObject( expandedObject:Object ):ObjectSchema.DigestedObjectSchema {\n\t\tlet types:string[] = this.getExpandedObjectTypes( expandedObject );\n\n\t\treturn this.getDigestedObjectSchema( types );\n\t}\n\n\tprivate getDigestedObjectSchemaForDocument( document:Document.Class ):ObjectSchema.DigestedObjectSchema {\n\t\tlet types:string[] = this.getDocumentTypes( document );\n\n\t\treturn this.getDigestedObjectSchema( types );\n\t}\n\n\tprivate getDigestedObjectSchema( objectTypes:string[] ):ObjectSchema.DigestedObjectSchema {\n\t\tlet digestedSchema:ObjectSchema.DigestedObjectSchema;\n\t\tif( !! this.context ) {\n\t\t\tlet typesDigestedObjectSchemas:ObjectSchema.DigestedObjectSchema[] = [ this.context.getObjectSchema() ];\n\t\t\tfor( let type of objectTypes ) {\n\t\t\t\tif( this.context.getObjectSchema( type ) ) typesDigestedObjectSchemas.push( this.context.getObjectSchema( type ) );\n\t\t\t}\n\n\t\t\tif( typesDigestedObjectSchemas.length > 1 ) {\n\t\t\t\tdigestedSchema = ObjectSchema.Digester.combineDigestedObjectSchemas( typesDigestedObjectSchemas );\n\t\t\t} else {\n\t\t\t\tdigestedSchema = typesDigestedObjectSchemas[ 0 ];\n\t\t\t}\n\t\t} else {\n\t\t\tdigestedSchema = new ObjectSchema.DigestedObjectSchema();\n\t\t}\n\n\t\treturn digestedSchema;\n\t}\n\n\tprivate getExpandedObjectTypes( expandedObject:Object ):string[] {\n\t\tif( ! expandedObject[ \"@type\" ] ) return [];\n\n\t\treturn expandedObject[ \"@type\" ];\n\t}\n\n\tprivate getDocumentTypes( document:Document.Class ):string[] {\n\t\tif( ! document.types ) return [];\n\t\treturn document.types;\n\t}\n\n\tprivate mix( target:any, source:any ):any {\n\t\tif ( ! isPlainObject( target ) || ! isPlainObject( source ) ) return;\n\n\t\tlet keys:Set<string> = new Set( Object.keys( source ).concat(  Object.keys( target ) ) );\n\n\t\tfor ( let key of Array.from( keys ) ) {\n\t\t\tif ( Utils.hasProperty( source, key ) ) {\n\t\t\t\tif ( PersistedResource.Factory.hasClassProperties( target[ key ] ) ) continue;\n\n\t\t\t\tthis.mix( target[ key ], source[ key ] );\n\t\t\t\ttarget[ key ] = source[ key ];\n\t\t\t} else {\n\t\t\t\tif ( Utils.isArray( target ) ) {\n\t\t\t\t\t(< Array<any> > target).splice( parseFloat( key ), 1 );\n\t\t\t\t} else {\n\t\t\t\t\tdelete target[ key ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn target;\n\t}\n\n}\n\nfunction isPlainObject( element:any ):boolean {\n\treturn Utils.isObject( element )\n\t\t&& ! Utils.isMap( element )\n\t\t&& ! Utils.isDate( element );\n}\n\nexport default Documents;\n"],"sourceRoot":"/source/"}