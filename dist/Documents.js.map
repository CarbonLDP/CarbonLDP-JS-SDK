{"version":3,"sources":["Documents.ts"],"names":[],"mappings":"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","file":"Documents.js","sourcesContent":["import { QueryClause } from \"sparqler/clauses\";\nimport {\n\tBindToken,\n\tConstructToken,\n\tIRIToken,\n\tOptionalToken,\n\tPatternToken,\n\tPredicateToken,\n\tQueryToken,\n\tSelectToken,\n\tSubjectToken,\n\tValuesToken,\n\tVariableToken,\n} from \"sparqler/tokens\";\n\nimport {\n\tAccessPoint,\n\tAccessPointBase,\n} from \"./AccessPoint\";\nimport * as Auth from \"./Auth\";\nimport { Carbon } from \"./Carbon\";\nimport { Context } from \"./Context\";\nimport { Document } from \"./Document\";\nimport * as Errors from \"./Errors\";\nimport { FreeResources } from \"./FreeResources\";\nimport { statusCodeMap } from \"./HTTP/Errors\";\nimport { HTTPError } from \"./HTTP/Errors/HTTPError\";\nimport { BadResponseError } from \"./HTTP/Errors/ServerErrors/BadResponseError\";\nimport { UnknownError } from \"./HTTP/Errors/UnknownError\";\nimport { Header } from \"./HTTP/Header\";\nimport { HTTPMethod } from \"./HTTP/HTTPMethod\";\nimport { Parser } from \"./HTTP/Parser\";\nimport {\n\tGETOptions,\n\tRequestOptions,\n\tRequestService,\n\tRequestUtils,\n\tRetrievalPreferences,\n} from \"./HTTP/Request\";\nimport { Response } from \"./HTTP/Response\";\nimport { JSONLDCompacter } from \"./JSONLD/Compacter\";\nimport { JSONLDConverter } from \"./JSONLD/Converter\";\nimport { JSONLDParser } from \"./JSONLD/Parser\";\nimport {\n\tAddMemberAction,\n\tDocumentMetadata,\n\tErrorResponse,\n\tRemoveMemberAction,\n\tResponseMetadata,\n} from \"./LDP\";\nimport * as LDPatch from \"./LDPatch\";\nimport * as Messaging from \"./Messaging\";\nimport {\n\tcreateDestination,\n\tvalidateEventContext,\n} from \"./Messaging/Utils\";\nimport {\n\tDigestedObjectSchema,\n\tObjectSchemaDigester,\n\tObjectSchemaResolver,\n\tObjectSchemaUtils,\n} from \"./ObjectSchema\";\nimport * as PersistedAccessPoint from \"./PersistedAccessPoint\";\nimport * as PersistedBlankNode from \"./PersistedBlankNode\";\nimport * as PersistedDocument from \"./PersistedDocument\";\nimport * as PersistedFragment from \"./PersistedFragment\";\nimport * as PersistedProtectedDocument from \"./PersistedProtectedDocument\";\nimport { PersistedResource } from \"./PersistedResource\";\nimport {\n\tPointer,\n\tPointerLibrary,\n\tPointerValidator,\n} from \"./Pointer\";\nimport * as ProtectedDocument from \"./ProtectedDocument\";\nimport * as RDF from \"./RDF\";\nimport { RDFDocumentParser } from \"./RDF/Document\";\nimport { Resource } from \"./Resource\";\nimport {\n\tFinishSPARQLSelect,\n\tSPARQLBuilder,\n} from \"./SPARQL/Builder\";\nimport { QueryMetadata, } from \"./SPARQL/QueryDocument\";\nimport { PartialMetadata } from \"./SPARQL/QueryDocument/PartialMetadata\";\nimport { QueryContext } from \"./SPARQL/QueryDocument/QueryContext\";\nimport { QueryContextBuilder } from \"./SPARQL/QueryDocument/QueryContextBuilder\";\nimport { QueryContextPartial } from \"./SPARQL/QueryDocument/QueryContextPartial\";\nimport { QueryDocumentBuilder } from \"./SPARQL/QueryDocument/QueryDocumentBuilder\";\nimport { QueryDocumentsBuilder } from \"./SPARQL/QueryDocument/QueryDocumentsBuilder\";\nimport {\n\tQueryProperty,\n\tQueryPropertyType,\n} from \"./SPARQL/QueryDocument/QueryProperty\";\nimport {\n\tareDifferentType,\n\tcreateAllPattern,\n\tcreatePropertyPatterns,\n\tcreateTypesPattern,\n\tgetAllTriples,\n\tgetPathProperty,\n} from \"./SPARQL/QueryDocument/Utils\";\nimport { SPARQLRawResults } from \"./SPARQL/RawResults\";\nimport { SPARQLSelectResults } from \"./SPARQL/SELECTResults\";\nimport { SPARQLService } from \"./SPARQL/Service\";\nimport * as Utils from \"./Utils\";\nimport {\n\tmapTupleArray,\n\tpromiseMethod\n} from \"./Utils\";\nimport { C } from \"./Vocabularies/C\";\nimport { LDP } from \"./Vocabularies/LDP\";\n\nexport class Documents implements PointerLibrary, PointerValidator, ObjectSchemaResolver {\n\n\tprivate _jsonldConverter:JSONLDConverter;\n\tget jsonldConverter():JSONLDConverter { return this._jsonldConverter; }\n\n\tprivate _documentDecorators:Map<string, ( object:object, documents?:Documents ) => object>;\n\tget documentDecorators():Map<string, ( object:object, documents?:Documents ) => object> { return this._documentDecorators; }\n\n\tprivate context:Context;\n\tprivate pointers:Map<string, Pointer>;\n\n\t// Tracks the documents that are being resolved to avoid triggering repeated requests\n\tprivate documentsBeingResolved:Map<string, Promise<[ PersistedDocument.Class, Response ]>>;\n\n\tconstructor( context?:Context ) {\n\t\tthis.context = context;\n\n\t\tthis.pointers = new Map<string, Pointer>();\n\t\tthis.documentsBeingResolved = new Map<string, Promise<[ PersistedDocument.Class, Response ]>>();\n\n\t\tif( ! ! this.context && ! ! this.context.parentContext ) {\n\t\t\tlet contextJSONLDConverter:JSONLDConverter = this.context.parentContext.documents.jsonldConverter;\n\t\t\tthis._jsonldConverter = new JSONLDConverter( contextJSONLDConverter.literalSerializers );\n\t\t} else {\n\t\t\tthis._jsonldConverter = new JSONLDConverter();\n\t\t}\n\n\t\tlet decorators:Documents[ \"documentDecorators\" ] = new Map();\n\t\tif( this.context && this.context.parentContext ) {\n\t\t\tlet parentDecorators:Documents[ \"documentDecorators\" ] = this.context.parentContext.documents.documentDecorators;\n\t\t\tif( parentDecorators ) decorators = this._documentDecorators = Utils.MapUtils.extend( decorators, parentDecorators );\n\t\t} else {\n\t\t\tdecorators.set( ProtectedDocument.RDF_CLASS, PersistedProtectedDocument.Factory.decorate );\n\t\t\tdecorators.set( Auth.ACL.RDF_CLASS, Auth.PersistedACL.Factory.decorate );\n\t\t\tdecorators.set( Auth.User.RDF_CLASS, Auth.PersistedUser.Factory.decorate );\n\t\t\tdecorators.set( Auth.Role.RDF_CLASS, Auth.PersistedRole.Factory.decorate );\n\t\t\tdecorators.set( Auth.Credentials.RDF_CLASS, Auth.PersistedCredentials.Factory.decorate );\n\t\t}\n\n\t\tthis._documentDecorators = decorators;\n\t}\n\n\tinScope( pointer:Pointer ):boolean;\n\tinScope( id:string ):boolean;\n\tinScope( idOrPointer:any ):boolean {\n\t\tlet id:string = Pointer.is( idOrPointer ) ? idOrPointer.id : idOrPointer;\n\n\t\tif( RDF.URI.Util.isBNodeID( id ) ) return false;\n\n\t\tif( ! ! this.context ) {\n\t\t\tid = ObjectSchemaUtils.resolveURI( id, this.context.getObjectSchema() );\n\n\t\t\tif( RDF.URI.Util.isRelative( id ) ) return true;\n\t\t\tif( RDF.URI.Util.isBaseOf( this.context.baseURI, id ) ) return true;\n\t\t} else {\n\t\t\tif( RDF.URI.Util.isAbsolute( id ) ) return true;\n\t\t}\n\n\t\tif( ! ! this.context && ! ! this.context.parentContext ) return this.context.parentContext.documents.inScope( id );\n\n\t\treturn RDF.URI.Util.isRelative( id );\n\t}\n\n\thasPointer( id:string ):boolean {\n\t\tid = this.getPointerID( id );\n\n\t\tif( this.pointers.has( id ) ) return true;\n\n\t\tif( ! ! this.context && ! ! this.context.parentContext ) return this.context.parentContext.documents.hasPointer( id );\n\n\t\treturn false;\n\t}\n\n\tgetPointer( id:string ):Pointer {\n\t\tlet localID:string = this.getPointerID( id );\n\n\t\tif( localID === null ) {\n\t\t\tif( ! ! this.context && ! ! this.context.parentContext ) return this.context.parentContext.documents.getPointer( id );\n\t\t\tthrow new Errors.IllegalArgumentError( \"The pointer id is not supported by this module.\" );\n\t\t}\n\n\t\tlet pointer:Pointer;\n\t\tif( ! this.pointers.has( localID ) ) {\n\t\t\tpointer = this.createPointer( localID );\n\t\t\tthis.pointers.set( localID, pointer );\n\t\t}\n\n\t\treturn this.pointers.get( localID );\n\t}\n\n\tremovePointer( idOrPointer:string | Pointer ):boolean {\n\t\tlet id:string = Utils.isString( idOrPointer ) ? idOrPointer : idOrPointer.id;\n\t\tlet localID:string = this.getPointerID( id );\n\n\t\tif( localID === null ) {\n\t\t\tif( ! ! this.context && ! ! this.context.parentContext ) return this.context.parentContext.documents.removePointer( id );\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.pointers.delete( localID );\n\t}\n\n\tget<T extends object>( uri:string, requestOptions?:GETOptions, queryBuilderFn?:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<[ T & PersistedDocument.Class, Response ]>;\n\tget<T extends object>( uri:string, queryBuilderFn?:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<[ T & PersistedDocument.Class, Response ]>;\n\tget<T extends object>( uri:string, optionsOrQueryBuilderFn:any, queryBuilderFn?:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<[ T & PersistedDocument.Class, Response ]> {\n\t\tconst requestOptions:RequestOptions = RequestUtils.isOptions( optionsOrQueryBuilderFn ) ? optionsOrQueryBuilderFn : {};\n\t\tif( Utils.isFunction( optionsOrQueryBuilderFn ) ) queryBuilderFn = optionsOrQueryBuilderFn;\n\n\t\treturn promiseMethod( () => {\n\t\t\turi = this.getRequestURI( uri );\n\n\t\t\treturn queryBuilderFn ?\n\t\t\t\tthis.getPartialDocument( uri, requestOptions, queryBuilderFn ) :\n\t\t\t\tthis.getFullDocument( uri, requestOptions );\n\t\t} );\n\t}\n\n\texists( documentURI:string, requestOptions:RequestOptions = {} ):Promise<[ boolean, Response ]> {\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this.getRequestURI( documentURI );\n\t\t\tthis.setDefaultRequestOptions( requestOptions, LDP.RDFSource );\n\n\t\t\treturn this.sendRequest( HTTPMethod.HEAD, documentURI, requestOptions );\n\t\t} ).then<[ boolean, Response ]>( ( response:Response ) => {\n\t\t\treturn [ true, response ];\n\t\t} ).catch<[ boolean, Response ]>( ( error:HTTPError ) => {\n\t\t\tif( error.statusCode === 404 ) return [ false, error.response ];\n\t\t\treturn Promise.reject( error );\n\t\t} );\n\t}\n\n\tcreateChild<T extends object>( parentURI:string, childObject:T, slug?:string, requestOptions?:RequestOptions ):Promise<[ T & PersistedProtectedDocument.Class, Response ]>;\n\tcreateChild<T extends object>( parentURI:string, childObject:T, requestOptions?:RequestOptions ):Promise<[ T & PersistedProtectedDocument.Class, Response ]>;\n\tcreateChild<T extends object>( parentURI:string, childObject:T, slugOrRequestOptions?:any, requestOptions:RequestOptions = {} ):Promise<[ T & PersistedProtectedDocument.Class, Response ]> {\n\t\tconst slug:string = Utils.isString( slugOrRequestOptions ) ? slugOrRequestOptions : null;\n\t\trequestOptions = ! Utils.isString( slugOrRequestOptions ) && ! ! slugOrRequestOptions ? slugOrRequestOptions : requestOptions;\n\n\t\treturn promiseMethod( () => {\n\t\t\tparentURI = this.getRequestURI( parentURI );\n\t\t\tRequestUtils.setPreferredRetrieval( \"minimal\", requestOptions );\n\n\t\t\treturn this.persistChildDocument<T>( parentURI, childObject, slug, requestOptions );\n\t\t} );\n\t}\n\n\tcreateChildren<T extends object>( parentURI:string, childrenObjects:T[], slugs?:string[], requestOptions?:RequestOptions ):Promise<[ (T & PersistedProtectedDocument.Class)[], Response[] ]>;\n\tcreateChildren<T extends object>( parentURI:string, childrenObjects:T[], requestOptions?:RequestOptions ):Promise<[ (T & PersistedProtectedDocument.Class)[], Response[] ]>;\n\tcreateChildren<T extends object>( parentURI:string, childrenObjects:T[], slugsOrRequestOptions?:any, requestOptions:RequestOptions = {} ):Promise<[ (T & PersistedProtectedDocument.Class)[], Response[] ]> {\n\t\tconst slugs:string[] = Utils.isArray( slugsOrRequestOptions ) ? slugsOrRequestOptions : [];\n\t\trequestOptions = ! Utils.isArray( slugsOrRequestOptions ) && ! ! slugsOrRequestOptions ? slugsOrRequestOptions : requestOptions;\n\n\t\treturn promiseMethod( () => {\n\t\t\tparentURI = this.getRequestURI( parentURI );\n\t\t\tRequestUtils.setPreferredRetrieval( \"minimal\", requestOptions );\n\n\t\t\treturn Promise.all<[ T & PersistedProtectedDocument.Class, Response ]>( childrenObjects.map( ( childObject:T, index:number ) => {\n\t\t\t\tconst cloneOptions:RequestOptions = RequestUtils.cloneOptions( requestOptions );\n\t\t\t\treturn this.persistChildDocument<T>( parentURI, childObject, slugs[ index ], cloneOptions );\n\t\t\t} ) );\n\t\t} ).then( mapTupleArray );\n\t}\n\n\tcreateChildAndRetrieve<T extends object>( parentURI:string, childObject:T, slug?:string, requestOptions?:RequestOptions ):Promise<[ T & PersistedProtectedDocument.Class, Response ]>;\n\tcreateChildAndRetrieve<T extends object>( parentURI:string, childObject:T, requestOptions?:RequestOptions ):Promise<[ T & PersistedProtectedDocument.Class, Response ]>;\n\tcreateChildAndRetrieve<T extends object>( parentURI:string, childObject:T, slugOrRequestOptions?:any, requestOptions:RequestOptions = {} ):Promise<[ T & PersistedProtectedDocument.Class, Response ]> {\n\t\trequestOptions = RequestUtils.isOptions( slugOrRequestOptions ) ? slugOrRequestOptions : requestOptions;\n\t\tconst slug:string = Utils.isString( slugOrRequestOptions ) ? slugOrRequestOptions : null;\n\n\t\treturn promiseMethod( () => {\n\t\t\tparentURI = this.getRequestURI( parentURI );\n\t\t\tRequestUtils.setPreferredRetrieval( \"representation\", requestOptions );\n\n\t\t\treturn this.persistChildDocument<T>( parentURI, childObject, slug, requestOptions );\n\t\t} );\n\t}\n\n\tcreateChildrenAndRetrieve<T extends object>( parentURI:string, childrenObjects:T[], slugs?:string[], requestOptions?:RequestOptions ):Promise<[ (T & PersistedProtectedDocument.Class)[], Response[] ]>;\n\tcreateChildrenAndRetrieve<T extends object>( parentURI:string, childrenObjects:T[], requestOptions?:RequestOptions ):Promise<[ (T & PersistedProtectedDocument.Class)[], Response[] ]>;\n\tcreateChildrenAndRetrieve<T extends object>( parentURI:string, childrenObjects:T[], slugsOrRequestOptions?:any, requestOptions:RequestOptions = {} ):Promise<[ (T & PersistedProtectedDocument.Class)[], Response[] ]> {\n\t\tconst slugs:string[] = Utils.isArray( slugsOrRequestOptions ) ? slugsOrRequestOptions : [];\n\t\trequestOptions = ! Utils.isArray( slugsOrRequestOptions ) && ! ! slugsOrRequestOptions ? slugsOrRequestOptions : requestOptions;\n\n\t\treturn promiseMethod( () => {\n\t\t\tparentURI = this.getRequestURI( parentURI );\n\t\t\tRequestUtils.setPreferredRetrieval( \"representation\", requestOptions );\n\n\t\t\treturn Promise.all<[ T & PersistedProtectedDocument.Class, Response ]>( childrenObjects.map( ( childObject:T, index:number ) => {\n\t\t\t\tconst cloneOptions:RequestOptions = RequestUtils.cloneOptions( requestOptions );\n\t\t\t\treturn this.persistChildDocument<T>( parentURI, childObject, slugs[ index ], cloneOptions );\n\t\t\t} ) );\n\t\t} ).then( mapTupleArray );\n\t}\n\n\n\tlistChildren( parentURI:string, requestOptions?:RequestOptions ):Promise<[ PersistedDocument.Class[], Response ]> {\n\t\treturn promiseMethod( () => {\n\t\t\tparentURI = this.getRequestURI( parentURI );\n\n\t\t\tconst queryContext:QueryContextBuilder = new QueryContextBuilder( this.context );\n\t\t\tconst childrenVar:VariableToken = queryContext.getVariable( \"child\" );\n\n\t\t\tconst pattens:PatternToken[] = [\n\t\t\t\tnew SubjectToken( queryContext.compactIRI( parentURI ) )\n\t\t\t\t\t.addPredicate( new PredicateToken( queryContext.compactIRI( LDP.contains ) )\n\t\t\t\t\t\t.addObject( childrenVar )\n\t\t\t\t\t),\n\t\t\t];\n\n\t\t\treturn this.executeSelectPatterns( parentURI, requestOptions, queryContext, \"child\", pattens );\n\t\t} );\n\t}\n\n\tgetChildren<T extends object>( parentURI:string, requestOptions:RequestOptions, queryBuilderFn?:( queryBuilder:QueryDocumentsBuilder ) => QueryDocumentsBuilder ):Promise<[ (T & PersistedDocument.Class)[], Response ]>;\n\tgetChildren<T extends object>( parentURI:string, queryBuilderFn?:( queryBuilder:QueryDocumentsBuilder ) => QueryDocumentsBuilder ):Promise<[ (T & PersistedDocument.Class)[], Response ]>;\n\tgetChildren<T extends object>( parentURI:string, requestOptionsOrQueryBuilderFn?:any, queryBuilderFn?:( queryBuilder:QueryDocumentsBuilder ) => QueryDocumentsBuilder ):Promise<[ (T & PersistedDocument.Class)[], Response ]> {\n\t\tconst requestOptions:RequestOptions = RequestUtils.isOptions( requestOptionsOrQueryBuilderFn ) ? requestOptionsOrQueryBuilderFn : {};\n\t\tqueryBuilderFn = Utils.isFunction( requestOptionsOrQueryBuilderFn ) ? requestOptionsOrQueryBuilderFn : queryBuilderFn;\n\n\t\treturn promiseMethod( () => {\n\t\t\tparentURI = this.getRequestURI( parentURI );\n\n\t\t\tconst queryContext:QueryContextBuilder = new QueryContextBuilder( this.context );\n\t\t\tconst childrenProperty:QueryProperty = queryContext\n\t\t\t\t.addProperty( \"child\" )\n\t\t\t\t.setOptional( false );\n\n\t\t\tconst selectChildren:SelectToken = new SelectToken()\n\t\t\t\t.addVariable( childrenProperty.variable )\n\t\t\t\t.addPattern( new SubjectToken( queryContext.compactIRI( parentURI ) )\n\t\t\t\t\t.addPredicate( new PredicateToken( queryContext.compactIRI( LDP.contains ) )\n\t\t\t\t\t\t.addObject( childrenProperty.variable )\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t;\n\t\t\tchildrenProperty.addPattern( selectChildren );\n\n\t\t\treturn this.executeQueryBuilder<T>( parentURI, requestOptions, queryContext, childrenProperty, queryBuilderFn );\n\t\t} );\n\t}\n\n\tcreateAccessPoint<T extends object>( documentURI:string, accessPoint:T & AccessPointBase, slug?:string, requestOptions?:RequestOptions ):Promise<[ T & PersistedAccessPoint.Class, Response ]>;\n\tcreateAccessPoint<T extends object>( documentURI:string, accessPoint:T & AccessPointBase, requestOptions?:RequestOptions ):Promise<[ T & PersistedAccessPoint.Class, Response ]>;\n\tcreateAccessPoint<T extends object>( documentURI:string, accessPoint:T & AccessPointBase, slugOrRequestOptions:any, requestOptions:RequestOptions = {} ):Promise<[ T & PersistedAccessPoint.Class, Response ]> {\n\t\tconst slug:string = Utils.isString( slugOrRequestOptions ) ? slugOrRequestOptions : null;\n\t\trequestOptions = ! Utils.isString( slugOrRequestOptions ) && ! ! slugOrRequestOptions ? slugOrRequestOptions : requestOptions;\n\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this.getRequestURI( documentURI );\n\t\t\tRequestUtils.setPreferredRetrieval( \"minimal\", requestOptions );\n\n\t\t\treturn this.persistAccessPoint( documentURI, accessPoint, slug, requestOptions );\n\t\t} );\n\t}\n\n\tcreateAccessPoints<T extends object>( documentURI:string, accessPoints:(T & AccessPointBase)[], slugs?:string[], requestOptions?:RequestOptions ):Promise<[ (T & PersistedAccessPoint.Class)[], Response[] ]>;\n\tcreateAccessPoints<T extends object>( documentURI:string, accessPoints:(T & AccessPointBase)[], requestOptions?:RequestOptions ):Promise<[ (T & PersistedAccessPoint.Class)[], Response[] ]>;\n\tcreateAccessPoints<T extends object>( documentURI:string, accessPoints:(T & AccessPointBase)[], slugsOrRequestOptions:any, requestOptions:RequestOptions = {} ):Promise<[ (T & PersistedAccessPoint.Class)[], Response[] ]> {\n\t\tconst slugs:string[] = Utils.isArray( slugsOrRequestOptions ) ? slugsOrRequestOptions : [];\n\t\trequestOptions = ! Utils.isArray( slugsOrRequestOptions ) && ! ! slugsOrRequestOptions ? slugsOrRequestOptions : requestOptions;\n\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this.getRequestURI( documentURI );\n\t\t\tRequestUtils.setPreferredRetrieval( \"minimal\", requestOptions );\n\n\t\t\treturn Promise.all<[ T & PersistedAccessPoint.Class, Response ]>( accessPoints.map( ( accessPoint:T & AccessPointBase, index:number ) => {\n\t\t\t\tconst cloneOptions:RequestOptions = RequestUtils.cloneOptions( requestOptions );\n\t\t\t\treturn this.persistAccessPoint<T>( documentURI, accessPoint, slugs[ index ], cloneOptions );\n\t\t\t} ) );\n\t\t} ).then( mapTupleArray );\n\t}\n\n\tlistMembers( uri:string, requestOptions?:RequestOptions ):Promise<[ PersistedDocument.Class[], Response ]> {\n\t\treturn promiseMethod( () => {\n\t\t\turi = this.getRequestURI( uri );\n\n\t\t\tconst queryContext:QueryContextBuilder = new QueryContextBuilder( this.context );\n\t\t\tconst memberVar:VariableToken = queryContext.getVariable( \"member\" );\n\n\t\t\tconst membershipResource:VariableToken = queryContext.getVariable( \"membershipResource\" );\n\t\t\tconst hasMemberRelation:VariableToken = queryContext.getVariable( \"hasMemberRelation\" );\n\t\t\tconst pattens:PatternToken[] = [\n\t\t\t\tnew SubjectToken( queryContext.compactIRI( uri ) )\n\t\t\t\t\t.addPredicate( new PredicateToken( queryContext.compactIRI( LDP.membershipResource ) )\n\t\t\t\t\t\t.addObject( membershipResource )\n\t\t\t\t\t)\n\t\t\t\t\t.addPredicate( new PredicateToken( queryContext.compactIRI( LDP.hasMemberRelation ) )\n\t\t\t\t\t\t.addObject( hasMemberRelation )\n\t\t\t\t\t)\n\t\t\t\t,\n\t\t\t\tnew SubjectToken( membershipResource )\n\t\t\t\t\t.addPredicate( new PredicateToken( hasMemberRelation )\n\t\t\t\t\t\t.addObject( memberVar )\n\t\t\t\t\t)\n\t\t\t\t,\n\t\t\t];\n\n\t\t\treturn this.executeSelectPatterns( uri, requestOptions, queryContext, \"member\", pattens );\n\t\t} );\n\t}\n\n\tgetMembers<T extends object>( uri:string, requestOptions:RequestOptions, queryBuilderFn?:( queryBuilder:QueryDocumentsBuilder ) => QueryDocumentsBuilder ):Promise<[ (T & PersistedDocument.Class)[], Response ]>;\n\tgetMembers<T extends object>( uri:string, queryBuilderFn?:( queryBuilder:QueryDocumentsBuilder ) => QueryDocumentsBuilder ):Promise<[ (T & PersistedDocument.Class)[], Response ]>;\n\tgetMembers<T extends object>( uri:string, requestOptionsOrQueryBuilderFn?:any, queryBuilderFn?:( queryBuilder:QueryDocumentsBuilder ) => QueryDocumentsBuilder ):Promise<[ (T & PersistedDocument.Class)[], Response ]> {\n\t\tconst requestOptions:RequestOptions = RequestUtils.isOptions( requestOptionsOrQueryBuilderFn ) ? requestOptionsOrQueryBuilderFn : {};\n\t\tqueryBuilderFn = Utils.isFunction( requestOptionsOrQueryBuilderFn ) ? requestOptionsOrQueryBuilderFn : queryBuilderFn;\n\n\t\treturn promiseMethod( () => {\n\t\t\turi = this.getRequestURI( uri );\n\n\t\t\tconst queryContext:QueryContextBuilder = new QueryContextBuilder( this.context );\n\t\t\tconst membersProperty:QueryProperty = queryContext\n\t\t\t\t.addProperty( \"member\" )\n\t\t\t\t.setOptional( false );\n\n\t\t\tconst membershipResource:VariableToken = queryContext.getVariable( \"membershipResource\" );\n\t\t\tconst hasMemberRelation:VariableToken = queryContext.getVariable( \"hasMemberRelation\" );\n\t\t\tconst selectMembers:SelectToken = new SelectToken()\n\t\t\t\t.addVariable( membersProperty.variable )\n\t\t\t\t.addPattern( new SubjectToken( queryContext.compactIRI( uri ) )\n\t\t\t\t\t.addPredicate( new PredicateToken( queryContext.compactIRI( LDP.membershipResource ) )\n\t\t\t\t\t\t.addObject( membershipResource )\n\t\t\t\t\t)\n\t\t\t\t\t.addPredicate( new PredicateToken( queryContext.compactIRI( LDP.hasMemberRelation ) )\n\t\t\t\t\t\t.addObject( hasMemberRelation )\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t.addPattern( new SubjectToken( membershipResource )\n\t\t\t\t\t.addPredicate( new PredicateToken( hasMemberRelation )\n\t\t\t\t\t\t.addObject( membersProperty.variable )\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t;\n\t\t\tmembersProperty.addPattern( selectMembers );\n\n\t\t\treturn this.executeQueryBuilder<T>( uri, requestOptions, queryContext, membersProperty, queryBuilderFn );\n\t\t} );\n\t}\n\n\taddMember( documentURI:string, member:Pointer, requestOptions?:RequestOptions ):Promise<Response>;\n\taddMember( documentURI:string, memberURI:string, requestOptions?:RequestOptions ):Promise<Response>;\n\taddMember( documentURI:string, memberORUri:Pointer | string, requestOptions:RequestOptions = {} ):Promise<Response> {\n\t\treturn this.addMembers( documentURI, [ memberORUri ], requestOptions );\n\t}\n\n\taddMembers( documentURI:string, members:(Pointer | string)[], requestOptions?:RequestOptions ):Promise<Response>;\n\taddMembers( documentURI:string, members:(Pointer | string)[], requestOptions:RequestOptions = {} ):Promise<Response> {\n\t\treturn promiseMethod( () => {\n\t\t\tconst pointers:Pointer[] = this._parseMembers( members );\n\n\t\t\tdocumentURI = this.getRequestURI( documentURI );\n\t\t\tthis.setDefaultRequestOptions( requestOptions, LDP.Container );\n\t\t\tRequestUtils.setContentTypeHeader( \"application/ld+json\", requestOptions );\n\n\t\t\tconst freeResources:FreeResources = FreeResources.create( this );\n\t\t\tfreeResources.createResourceFrom( AddMemberAction.Factory.create( pointers ) );\n\n\t\t\tconst body:string = JSON.stringify( freeResources );\n\n\t\t\treturn this.sendRequest( HTTPMethod.PUT, documentURI, requestOptions, body );\n\t\t} );\n\t}\n\n\tremoveMember( documentURI:string, member:Pointer, requestOptions?:RequestOptions ):Promise<Response>;\n\tremoveMember( documentURI:string, memberURI:string, requestOptions?:RequestOptions ):Promise<Response>;\n\tremoveMember( documentURI:string, memberORUri:Pointer | string, requestOptions:RequestOptions = {} ):Promise<Response> {\n\t\treturn this.removeMembers( documentURI, [ memberORUri ], requestOptions );\n\t}\n\n\tremoveMembers( documentURI:string, members:(Pointer | string)[], requestOptions:RequestOptions = {} ):Promise<Response> {\n\t\treturn promiseMethod( () => {\n\t\t\tconst pointers:Pointer[] = this._parseMembers( members );\n\n\t\t\tdocumentURI = this.getRequestURI( documentURI );\n\t\t\tthis.setDefaultRequestOptions( requestOptions, LDP.Container );\n\t\t\tRequestUtils.setContentTypeHeader( \"application/ld+json\", requestOptions );\n\n\t\t\tlet containerRetrievalPreferences:RetrievalPreferences = {\n\t\t\t\tinclude: [ C.PreferSelectedMembershipTriples ],\n\t\t\t\tomit: [ C.PreferMembershipTriples ],\n\t\t\t};\n\t\t\tRequestUtils.setRetrievalPreferences( containerRetrievalPreferences, requestOptions, false );\n\n\t\t\tconst freeResources:FreeResources = FreeResources.create( this );\n\t\t\tfreeResources.createResourceFrom( RemoveMemberAction.Factory.create( pointers ) );\n\n\t\t\tconst body:string = JSON.stringify( freeResources );\n\n\t\t\treturn this.sendRequest( HTTPMethod.DELETE, documentURI, requestOptions, body );\n\t\t} );\n\t}\n\n\tremoveAllMembers( documentURI:string, requestOptions:RequestOptions = {} ):Promise<Response> {\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this.getRequestURI( documentURI );\n\t\t\tthis.setDefaultRequestOptions( requestOptions, LDP.Container );\n\n\t\t\tlet containerRetrievalPreferences:RetrievalPreferences = {\n\t\t\t\tinclude: [\n\t\t\t\t\tC.PreferMembershipTriples,\n\t\t\t\t],\n\t\t\t\tomit: [\n\t\t\t\t\tC.PreferMembershipResources,\n\t\t\t\t\tC.PreferContainmentTriples,\n\t\t\t\t\tC.PreferContainmentResources,\n\t\t\t\t\tC.PreferContainer,\n\t\t\t\t],\n\t\t\t};\n\t\t\tRequestUtils.setRetrievalPreferences( containerRetrievalPreferences, requestOptions, false );\n\n\t\t\treturn this.sendRequest( HTTPMethod.DELETE, documentURI, requestOptions );\n\t\t} );\n\t}\n\n\n\tsave<T extends object>( persistedDocument:T & PersistedDocument.Class, requestOptions:RequestOptions = {} ):Promise<[ T & PersistedDocument.Class, Response ]> {\n\t\treturn promiseMethod( () => {\n\t\t\tif( ! PersistedDocument.Factory.is( persistedDocument ) ) throw new Errors.IllegalArgumentError( \"Provided element is not a valid persisted document.\" );\n\n\t\t\tRequestUtils.setPreferredRetrieval( \"minimal\", requestOptions );\n\t\t\treturn this.patchDocument<T>( persistedDocument, requestOptions );\n\t\t} );\n\t}\n\n\trefresh<T extends object>( persistedDocument:T & PersistedDocument.Class, requestOptions:RequestOptions = {} ):Promise<[ T & PersistedDocument.Class, Response ]> {\n\t\treturn Utils.promiseMethod( () => {\n\t\t\tif( ! PersistedDocument.Factory.is( persistedDocument ) ) throw new Errors.IllegalArgumentError( \"Provided element is not a valid persisted document.\" );\n\n\t\t\treturn persistedDocument.isPartial() ?\n\t\t\t\tthis.refreshPartialDocument<T>( persistedDocument, requestOptions ) :\n\t\t\t\tthis.refreshFullDocument<T>( persistedDocument, requestOptions );\n\t\t} );\n\t}\n\n\tsaveAndRefresh<T extends object>( persistedDocument:T & PersistedDocument.Class, requestOptions:RequestOptions = {} ):Promise<[ T & PersistedDocument.Class, Response[] ]> {\n\t\tconst responses:Response[] = [];\n\t\treturn promiseMethod( () => {\n\t\t\tif( ! PersistedDocument.Factory.is( persistedDocument ) ) throw new Errors.IllegalArgumentError( \"Provided element is not a valid persisted document.\" );\n\n\t\t\tconst cloneOptions:RequestOptions = RequestUtils.cloneOptions( requestOptions );\n\t\t\tRequestUtils.setPreferredRetrieval( persistedDocument.isPartial() ? \"minimal\" : \"representation\", cloneOptions );\n\n\t\t\treturn this.patchDocument<T>( persistedDocument, cloneOptions );\n\t\t} ).then<[ T & PersistedDocument.Class, Response ]>( ( [ , response ] ) => {\n\t\t\tif( ! persistedDocument.isPartial() ) return [ persistedDocument, response ];\n\n\t\t\tresponses.push( response );\n\t\t\treturn this.refreshPartialDocument<T>( persistedDocument, requestOptions );\n\t\t} ).then<[ T & PersistedDocument.Class, Response[] ]>( ( [ , response ] ) => {\n\t\t\tresponses.push( response );\n\t\t\treturn [ persistedDocument, responses ];\n\t\t} );\n\t}\n\n\n\tdelete( documentURI:string, requestOptions:RequestOptions = {} ):Promise<Response> {\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this.getRequestURI( documentURI );\n\t\t\tthis.setDefaultRequestOptions( requestOptions, LDP.RDFSource );\n\n\t\t\treturn this.sendRequest( HTTPMethod.DELETE, documentURI, requestOptions );\n\t\t} ).then( ( response:Response ) => {\n\t\t\tlet pointerID:string = this.getPointerID( documentURI );\n\t\t\tthis.pointers.delete( pointerID );\n\n\t\t\treturn response;\n\t\t} );\n\t}\n\n\tgetDownloadURL( documentURI:string, requestOptions?:RequestOptions ):Promise<string> {\n\t\tif( ! this.context ) return Promise.reject( new Errors.IllegalStateError( \"This instance doesn't support Authenticated request.\" ) );\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this.getRequestURI( documentURI );\n\t\t\treturn this.context.auth.getAuthenticatedURL( documentURI, requestOptions );\n\t\t} );\n\t}\n\n\n\tgetGeneralSchema():DigestedObjectSchema {\n\t\tif( ! this.context ) return new DigestedObjectSchema();\n\t\treturn this.context.getObjectSchema();\n\t}\n\n\thasSchemaFor( object:object, path?:string ):boolean {\n\t\tif( path !== void 0 ) return false;\n\t\treturn \"@id\" in object || \"id\" in object;\n\t}\n\n\tgetSchemaFor( object:object ):DigestedObjectSchema {\n\t\treturn (\"@id\" in object) ?\n\t\t\tthis.getDigestedObjectSchemaForExpandedObject( object ) :\n\t\t\tthis.getDigestedObjectSchemaForDocument( <any> object );\n\t}\n\n\n\texecuteRawASKQuery( documentURI:string, askQuery:string, requestOptions:RequestOptions = {} ):Promise<[ SPARQLRawResults, Response ]> {\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this.getRequestURI( documentURI );\n\n\t\t\tif( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\t\treturn SPARQLService.executeRawASKQuery( documentURI, askQuery, requestOptions )\n\t\t\t\t.catch( this._parseErrorResponse.bind( this ) );\n\t\t} );\n\t}\n\n\texecuteASKQuery( documentURI:string, askQuery:string, requestOptions:RequestOptions = {} ):Promise<[ boolean, Response ]> {\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this.getRequestURI( documentURI );\n\n\t\t\tif( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\t\treturn SPARQLService.executeASKQuery( documentURI, askQuery, requestOptions )\n\t\t\t\t.catch( this._parseErrorResponse.bind( this ) );\n\t\t} );\n\t}\n\n\texecuteRawSELECTQuery( documentURI:string, selectQuery:string, requestOptions:RequestOptions = {} ):Promise<[ SPARQLRawResults, Response ]> {\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this.getRequestURI( documentURI );\n\n\t\t\tif( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\t\treturn SPARQLService.executeRawSELECTQuery( documentURI, selectQuery, requestOptions )\n\t\t\t\t.catch( this._parseErrorResponse.bind( this ) );\n\t\t} );\n\t}\n\n\texecuteSELECTQuery<T extends object>( documentURI:string, selectQuery:string, requestOptions:RequestOptions = {} ):Promise<[ SPARQLSelectResults<T>, Response ]> {\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this.getRequestURI( documentURI );\n\n\t\t\tif( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\t\treturn SPARQLService.executeSELECTQuery<T>( documentURI, selectQuery, this, requestOptions )\n\t\t\t\t.catch( this._parseErrorResponse.bind( this ) );\n\t\t} );\n\t}\n\n\texecuteRawCONSTRUCTQuery( documentURI:string, constructQuery:string, requestOptions:RequestOptions = {} ):Promise<[ string, Response ]> {\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this.getRequestURI( documentURI );\n\n\t\t\tif( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\t\treturn SPARQLService.executeRawCONSTRUCTQuery( documentURI, constructQuery, requestOptions )\n\t\t\t\t.catch( this._parseErrorResponse.bind( this ) );\n\t\t} );\n\t}\n\n\texecuteRawDESCRIBEQuery( documentURI:string, describeQuery:string, requestOptions:RequestOptions = {} ):Promise<[ string, Response ]> {\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this.getRequestURI( documentURI );\n\n\t\t\tif( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\t\treturn SPARQLService.executeRawDESCRIBEQuery( documentURI, describeQuery, requestOptions )\n\t\t\t\t.catch( this._parseErrorResponse.bind( this ) );\n\t\t} );\n\t}\n\n\texecuteUPDATE( documentURI:string, update:string, requestOptions:RequestOptions = {} ):Promise<Response> {\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this.getRequestURI( documentURI );\n\n\t\t\tif( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\t\treturn SPARQLService.executeUPDATE( documentURI, update, requestOptions )\n\t\t\t\t.catch( this._parseErrorResponse.bind( this ) );\n\t\t} );\n\t}\n\n\n\tsparql( documentURI:string ):QueryClause<FinishSPARQLSelect> {\n\t\tlet builder:QueryClause<FinishSPARQLSelect> = new SPARQLBuilder( this, this.getRequestURI( documentURI ) );\n\n\t\tif( this.context ) {\n\t\t\tconst schema:DigestedObjectSchema = this.getProcessedSchema();\n\n\t\t\tbuilder = builder\n\t\t\t\t.base( schema.base )\n\t\t\t\t.vocab( schema.vocab );\n\n\t\t\tschema.prefixes.forEach( ( uri:string, prefix:string ) => {\n\t\t\t\tbuilder = builder.prefix( prefix, uri );\n\t\t\t} );\n\t\t}\n\n\t\treturn builder;\n\t}\n\n\ton( event:Messaging.Event.CHILD_CREATED, uriPattern:string, onEvent:( message:Messaging.ChildCreated.Class ) => void, onError:( error:Error ) => void ):void;\n\ton( event:Messaging.Event.ACCESS_POINT_CREATED, uriPattern:string, onEvent:( message:Messaging.AccessPointCreated.Class ) => void, onError:( error:Error ) => void ):void;\n\ton( event:Messaging.Event.DOCUMENT_CREATED, uriPattern:string, onEvent:( message:Messaging.DocumentCreated.Class ) => void, onError:( error:Error ) => void ):void;\n\ton( event:Messaging.Event.DOCUMENT_MODIFIED, uriPattern:string, onEvent:( message:Messaging.DocumentModified.Class ) => void, onError:( error:Error ) => void ):void;\n\ton( event:Messaging.Event.DOCUMENT_DELETED, uriPattern:string, onEvent:( message:Messaging.DocumentDeleted.Class ) => void, onError:( error:Error ) => void ):void;\n\ton( event:Messaging.Event.MEMBER_ADDED, uriPattern:string, onEvent:( message:Messaging.MemberAdded.Class ) => void, onError:( error:Error ) => void ):void;\n\ton( event:Messaging.Event.MEMBER_REMOVED, uriPattern:string, onEvent:( message:Messaging.MemberRemoved.Class ) => void, onError:( error:Error ) => void ):void;\n\ton( event:Messaging.Event | string, uriPattern:string, onEvent:( message:Messaging.Message.Class ) => void, onError:( error:Error ) => void ):void;\n\ton<T extends Messaging.Message.Class>( event:Messaging.Event | string, uriPattern:string, onEvent:( message:T ) => void, onError:( error:Error ) => void ):void {\n\t\ttry {\n\t\t\tvalidateEventContext( this.context );\n\t\t\tconst destination:string = createDestination( event, uriPattern, this.context.baseURI );\n\t\t\t(this.context as Carbon).messaging.subscribe( destination, onEvent, onError );\n\t\t} catch( error ) {\n\t\t\tif( ! onError ) throw error;\n\t\t\tonError( error );\n\t\t}\n\t}\n\n\toff( event:Messaging.Event.CHILD_CREATED, uriPattern:string, onEvent:( message:Messaging.ChildCreated.Class ) => void, onError:( error:Error ) => void ):void;\n\toff( event:Messaging.Event.ACCESS_POINT_CREATED, uriPattern:string, onEvent:( message:Messaging.AccessPointCreated.Class ) => void, onError:( error:Error ) => void ):void;\n\toff( event:Messaging.Event.DOCUMENT_CREATED, uriPattern:string, onEvent:( message:Messaging.DocumentCreated.Class ) => void, onError:( error:Error ) => void ):void;\n\toff( event:Messaging.Event.DOCUMENT_MODIFIED, uriPattern:string, onEvent:( message:Messaging.DocumentModified.Class ) => void, onError:( error:Error ) => void ):void;\n\toff( event:Messaging.Event.DOCUMENT_DELETED, uriPattern:string, onEvent:( message:Messaging.DocumentDeleted.Class ) => void, onError:( error:Error ) => void ):void;\n\toff( event:Messaging.Event.MEMBER_ADDED, uriPattern:string, onEvent:( message:Messaging.MemberAdded.Class ) => void, onError:( error:Error ) => void ):void;\n\toff( event:Messaging.Event.MEMBER_REMOVED, uriPattern:string, onEvent:( message:Messaging.MemberRemoved.Class ) => void, onError:( error:Error ) => void ):void;\n\toff( event:Messaging.Event | string, uriPattern:string, onEvent:( message:Messaging.Message.Class ) => void, onError:( error:Error ) => void ):void;\n\toff<T extends Messaging.Message.Class>( event:Messaging.Event | string, uriPattern:string, onEvent:( message:T ) => void, onError:( error:Error ) => void ):void {\n\t\ttry {\n\t\t\tvalidateEventContext( this.context );\n\t\t\tconst destination:string = createDestination( event, uriPattern, this.context.baseURI );\n\t\t\t(this.context as Carbon).messaging.unsubscribe( destination, onEvent );\n\t\t} catch( error ) {\n\t\t\tif( ! onError ) throw error;\n\t\t\tonError( error );\n\t\t}\n\t}\n\n\tone( event:Messaging.Event.CHILD_CREATED, uriPattern:string, onEvent:( message:Messaging.ChildCreated.Class ) => void, onError:( error:Error ) => void ):void;\n\tone( event:Messaging.Event.ACCESS_POINT_CREATED, uriPattern:string, onEvent:( message:Messaging.AccessPointCreated.Class ) => void, onError:( error:Error ) => void ):void;\n\tone( event:Messaging.Event.DOCUMENT_CREATED, uriPattern:string, onEvent:( message:Messaging.DocumentCreated.Class ) => void, onError:( error:Error ) => void ):void;\n\tone( event:Messaging.Event.DOCUMENT_MODIFIED, uriPattern:string, onEvent:( message:Messaging.DocumentModified.Class ) => void, onError:( error:Error ) => void ):void;\n\tone( event:Messaging.Event.DOCUMENT_DELETED, uriPattern:string, onEvent:( message:Messaging.DocumentDeleted.Class ) => void, onError:( error:Error ) => void ):void;\n\tone( event:Messaging.Event.MEMBER_ADDED, uriPattern:string, onEvent:( message:Messaging.MemberAdded.Class ) => void, onError:( error:Error ) => void ):void;\n\tone( event:Messaging.Event.MEMBER_REMOVED, uriPattern:string, onEvent:( message:Messaging.MemberRemoved.Class ) => void, onError:( error:Error ) => void ):void;\n\tone( event:Messaging.Event | string, uriPattern:string, onEvent:( message:Messaging.Message.Class ) => void, onError:( error:Error ) => void ):void;\n\tone<T extends Messaging.Message.Class>( event:Messaging.Event | string, uriPattern:string, onEvent:( message:T ) => void, onError:( error:Error ) => void ):void {\n\t\tconst self:Documents = this;\n\t\tthis.on( event, uriPattern, function onEventWrapper( message:T ):void {\n\t\t\tonEvent( message );\n\t\t\tself.off( event, uriPattern, onEventWrapper, onError );\n\t\t}, onError );\n\t}\n\n\tonDocumentCreated( uriPattern:string, onEvent:( message:Messaging.DocumentCreated.Class ) => void, onError:( error:Error ) => void ):void {\n\t\treturn this.on( Messaging.Event.DOCUMENT_CREATED, uriPattern, onEvent, onError );\n\t}\n\n\tonChildCreated( uriPattern:string, onEvent:( message:Messaging.ChildCreated.Class ) => void, onError:( error:Error ) => void ):void {\n\t\treturn this.on( Messaging.Event.CHILD_CREATED, uriPattern, onEvent, onError );\n\t}\n\n\tonAccessPointCreated( uriPattern:string, onEvent:( message:Messaging.AccessPointCreated.Class ) => void, onError:( error:Error ) => void ):void {\n\t\treturn this.on( Messaging.Event.ACCESS_POINT_CREATED, uriPattern, onEvent, onError );\n\t}\n\n\tonDocumentModified( uriPattern:string, onEvent:( message:Messaging.DocumentModified.Class ) => void, onError:( error:Error ) => void ):void {\n\t\treturn this.on( Messaging.Event.DOCUMENT_MODIFIED, uriPattern, onEvent, onError );\n\t}\n\n\tonDocumentDeleted( uriPattern:string, onEvent:( message:Messaging.DocumentDeleted.Class ) => void, onError:( error:Error ) => void ):void {\n\t\treturn this.on( Messaging.Event.DOCUMENT_DELETED, uriPattern, onEvent, onError );\n\t}\n\n\tonMemberAdded( uriPattern:string, onEvent:( message:Messaging.MemberAdded.Class ) => void, onError:( error:Error ) => void ):void {\n\t\treturn this.on( Messaging.Event.MEMBER_ADDED, uriPattern, onEvent, onError );\n\t}\n\n\tonMemberRemoved( uriPattern:string, onEvent:( message:Messaging.MemberRemoved.Class ) => void, onError:( error:Error ) => void ):void {\n\t\treturn this.on( Messaging.Event.MEMBER_REMOVED, uriPattern, onEvent, onError );\n\t}\n\n\n\t_getPersistedDocument<T extends object>( rdfDocument:RDF.Document.Class, response:Response ):T & PersistedDocument.Class {\n\t\tconst [ documentResources ] = RDF.Document.Util.getNodes( rdfDocument );\n\t\tif( documentResources.length === 0 ) throw new BadResponseError( `The RDFDocument: ${ rdfDocument[ \"@id\" ] }, doesn't contain a document resource.`, response );\n\t\tif( documentResources.length > 1 ) throw new BadResponseError( `The RDFDocument: ${ rdfDocument[ \"@id\" ] }, contains more than one document resource.`, response );\n\n\t\treturn new JSONLDCompacter( this ).compactDocument( rdfDocument );\n\t}\n\n\t_getFreeResources( nodes:RDF.Node.Class[] ):FreeResources {\n\t\tlet freeResourcesDocument:FreeResources = FreeResources.create( this );\n\n\t\tlet resources:Resource[] = nodes.map( node => freeResourcesDocument.createResource( node[ \"@id\" ] ) );\n\t\tthis.compact( nodes, resources, freeResourcesDocument );\n\n\t\treturn freeResourcesDocument;\n\t}\n\n\t_parseErrorResponse<T extends object>( response:Response | Error ):any {\n\t\tif( response instanceof Error ) return Promise.reject( response );\n\n\t\tif( ! (response.status >= 400 && response.status < 600 && statusCodeMap.has( response.status )) )\n\t\t\treturn Promise.reject( new UnknownError( response.data, response ) );\n\n\t\tconst error:HTTPError = new (statusCodeMap.get( response.status ))( response.data, response );\n\t\tif( ! response.data || ! this.context ) return Promise.reject( error );\n\n\t\treturn new JSONLDParser().parse( response.data ).then( ( freeNodes:RDF.Node.Class[] ) => {\n\t\t\tconst freeResources:FreeResources = this._getFreeResources( freeNodes );\n\t\t\tconst errorResponses:ErrorResponse.Class[] = freeResources\n\t\t\t\t.getResources()\n\t\t\t\t.filter( ( resource ):resource is ErrorResponse.Class => resource.hasType( ErrorResponse.RDF_CLASS ) );\n\t\t\tif( errorResponses.length === 0 ) return Promise.reject( new Errors.IllegalArgumentError( \"The response string does not contains a c:ErrorResponse.\" ) );\n\t\t\tif( errorResponses.length > 1 ) return Promise.reject( new Errors.IllegalArgumentError( \"The response string contains multiple c:ErrorResponse.\" ) );\n\n\t\t\tObject.assign( error, errorResponses[ 0 ] );\n\t\t\terror.message = ErrorResponse.Util.getMessage( error );\n\t\t\treturn Promise.reject( error );\n\t\t}, () => {\n\t\t\treturn Promise.reject( error );\n\t\t} );\n\t}\n\n\n\tprivate getFullDocument<T extends object>( uri:string, requestOptions:GETOptions ):Promise<[ T & PersistedDocument.Class, Response ]> {\n\t\tif( this.hasPointer( uri ) ) {\n\t\t\tconst pointer:Pointer = this.getPointer( uri );\n\t\t\tif( pointer.isResolved() ) {\n\t\t\t\tconst persistedDocument:T & PersistedDocument.Class = pointer as any;\n\t\t\t\tif( ! persistedDocument.isPartial() || ! requestOptions.ensureLatest )\n\t\t\t\t\treturn Promise.resolve<[ T & PersistedDocument.Class, Response ]>( [ persistedDocument, null ] );\n\t\t\t}\n\t\t}\n\n\t\tthis.setDefaultRequestOptions( requestOptions, LDP.RDFSource );\n\n\t\tif( this.documentsBeingResolved.has( uri ) )\n\t\t\treturn this.documentsBeingResolved.get( uri ) as Promise<[ T & PersistedDocument.Class, Response ]>;\n\n\t\tconst promise:Promise<[ T & PersistedDocument.Class, Response ]> = this.sendRequest( HTTPMethod.GET, uri, requestOptions, null, new RDFDocumentParser() )\n\t\t\t.then<[ T & PersistedDocument.Class, Response ]>( ( [ rdfDocuments, response ]:[ RDF.Document.Class[], Response ] ) => {\n\t\t\t\tconst eTag:string = response.getETag();\n\t\t\t\tif( eTag === null ) throw new BadResponseError( \"The response doesn't contain an ETag\", response );\n\n\t\t\t\tlet targetURI:string = uri;\n\t\t\t\tconst locationHeader:Header = response.getHeader( \"Content-Location\" );\n\t\t\t\tif( locationHeader ) {\n\t\t\t\t\tif( locationHeader.values.length !== 1 ) throw new BadResponseError( \"The response must contain one Content-Location header.\", response );\n\n\t\t\t\t\tconst locationString:string = \"\" + locationHeader;\n\t\t\t\t\tif( ! locationString ) throw new BadResponseError( `The response doesn't contain a valid 'Content-Location' header.`, response );\n\t\t\t\t\ttargetURI = locationString;\n\t\t\t\t}\n\n\t\t\t\tconst rdfDocument:RDF.Document.Class = this.getRDFDocument( targetURI, rdfDocuments, response );\n\t\t\t\tif( rdfDocument === null ) throw new BadResponseError( \"No document was returned.\", response );\n\n\t\t\t\tlet document:T & PersistedDocument.Class = this._getPersistedDocument<T>( rdfDocument, response );\n\t\t\t\tdocument._etag = eTag;\n\n\t\t\t\tthis.documentsBeingResolved.delete( uri );\n\t\t\t\treturn [ document, response ];\n\t\t\t} ).catch( error => {\n\t\t\t\tthis.documentsBeingResolved.delete( uri );\n\t\t\t\treturn Promise.reject( error );\n\t\t\t} );\n\n\t\tthis.documentsBeingResolved.set( uri, promise );\n\t\treturn promise;\n\t}\n\n\tprivate getPartialDocument<T extends object>( uri:string, requestOptions:RequestOptions, queryBuilderFn?:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<[ T & PersistedDocument.Class, Response ]> {\n\t\tconst queryContext:QueryContextBuilder = new QueryContextBuilder( this.context );\n\n\t\tconst documentProperty:QueryProperty = queryContext\n\t\t\t.addProperty( \"document\" )\n\t\t\t.setOptional( false );\n\n\t\tconst propertyValue:ValuesToken = new ValuesToken().addValues( documentProperty.variable, queryContext.compactIRI( uri ) );\n\t\tdocumentProperty.addPattern( propertyValue );\n\n\t\treturn this.executeQueryBuilder<T>( uri, requestOptions, queryContext, documentProperty, queryBuilderFn )\n\t\t\t.then<[ T & PersistedDocument.Class, Response ]>( ( [ documents, response ] ) => [ documents[ 0 ], response ] );\n\t}\n\n\n\tprivate patchDocument<T extends object>( persistedDocument:T & PersistedDocument.Class, requestOptions:RequestOptions ):Promise<[ T & PersistedDocument.Class, Response ]> {\n\t\tconst uri:string = this.getRequestURI( persistedDocument.id );\n\n\t\tif( ! persistedDocument.isDirty() ) return Promise.resolve<[ T & PersistedDocument.Class, Response ]>( [ persistedDocument, null ] );\n\t\tif( persistedDocument.isLocallyOutDated() ) throw new Errors.IllegalStateError( \"Cannot save an outdated document.\" );\n\n\t\tthis.setDefaultRequestOptions( requestOptions );\n\t\tRequestUtils.setContentTypeHeader( \"text/ldpatch\", requestOptions );\n\t\tRequestUtils.setIfMatchHeader( persistedDocument._etag, requestOptions );\n\n\t\tpersistedDocument._normalize();\n\t\tconst deltaCreator:LDPatch.DeltaCreator.DeltaCreator = new LDPatch.DeltaCreator.DeltaCreator( this.jsonldConverter );\n\t\t[ persistedDocument, ...persistedDocument.getFragments() ].forEach( ( resource:PersistedResource ) => {\n\t\t\tconst schema:DigestedObjectSchema = this.getSchemaFor( resource );\n\t\t\tdeltaCreator.addResource( schema, resource._snapshot, resource );\n\t\t} );\n\n\t\tconst body:string = deltaCreator.getPatch();\n\n\t\treturn this.sendRequest( HTTPMethod.PATCH, uri, requestOptions, body )\n\t\t\t.then<[ T & PersistedDocument.Class, Response ]>( ( response:Response ) => {\n\t\t\t\treturn this.applyResponseData( persistedDocument, response );\n\t\t\t} );\n\t}\n\n\n\tprivate refreshFullDocument<T extends object>( persistedDocument:T & PersistedDocument.Class, requestOptions:RequestOptions ):Promise<[ T & PersistedDocument.Class, Response ]> {\n\t\tconst uri:string = this.getRequestURI( persistedDocument.id );\n\n\t\tthis.setDefaultRequestOptions( requestOptions, LDP.RDFSource );\n\t\tRequestUtils.setIfNoneMatchHeader( persistedDocument._etag, requestOptions );\n\n\t\treturn this.sendRequest( HTTPMethod.GET, uri, requestOptions, null, new RDFDocumentParser() ).then<[ T & PersistedDocument.Class, Response ]>( ( [ rdfDocuments, response ]:[ RDF.Document.Class[], Response ] ) => {\n\t\t\tif( response === null ) return <any> [ rdfDocuments, response ];\n\n\t\t\tlet eTag:string = response.getETag();\n\t\t\tif( eTag === null ) throw new BadResponseError( \"The response doesn't contain an ETag\", response );\n\n\t\t\tlet rdfDocument:RDF.Document.Class = this.getRDFDocument( uri, rdfDocuments, response );\n\t\t\tif( rdfDocument === null ) throw new BadResponseError( \"No document was returned.\", response );\n\n\t\t\tlet updatedPersistedDocument:PersistedDocument.Class = this._getPersistedDocument( rdfDocument, response );\n\t\t\tupdatedPersistedDocument._etag = eTag;\n\n\t\t\treturn [ updatedPersistedDocument, response ];\n\t\t} ).catch<[ T & PersistedDocument.Class, Response ]>( ( error:HTTPError ) => {\n\t\t\tif( error.statusCode === 304 ) return [ persistedDocument, null ];\n\t\t\treturn Promise.reject( error );\n\t\t} );\n\t}\n\n\tprivate refreshPartialDocument<T extends object>( persistedDocument:T & PersistedDocument.Class, requestOptions:RequestOptions ):Promise<[ T & PersistedDocument.Class, Response ]> {\n\t\tconst uri:string = this.getRequestURI( persistedDocument.id );\n\t\tconst queryContext:QueryContextPartial = new QueryContextPartial( persistedDocument, this.context );\n\n\t\tconst targetName:string = \"document\";\n\t\tconst constructPatterns:OptionalToken = new OptionalToken()\n\t\t\t.addPattern( new ValuesToken()\n\t\t\t\t.addValues( queryContext.getVariable( targetName ), new IRIToken( uri ) )\n\t\t\t)\n\t\t;\n\n\t\t(function createRefreshQuery( parentAdder:OptionalToken, resource:PersistedResource, parentName:string ):void {\n\t\t\tif( resource._partialMetadata.schema === PartialMetadata.ALL ) {\n\t\t\t\tparentAdder.addPattern( createAllPattern( queryContext, parentName ) );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tparentAdder.addPattern( createTypesPattern( queryContext, parentName ) );\n\n\t\t\tresource._partialMetadata.schema.properties.forEach( ( digestedProperty, propertyName ) => {\n\t\t\t\tconst path:string = `${ parentName }.${ propertyName }`;\n\n\t\t\t\tconst propertyPattern:OptionalToken = new OptionalToken()\n\t\t\t\t\t.addPattern( ...createPropertyPatterns(\n\t\t\t\t\t\tqueryContext,\n\t\t\t\t\t\tparentName,\n\t\t\t\t\t\tpath,\n\t\t\t\t\t\tdigestedProperty\n\t\t\t\t\t) );\n\t\t\t\tparentAdder.addPattern( propertyPattern );\n\n\t\t\t\tconst propertyValues:any[] = Array.isArray( resource[ propertyName ] ) ? resource[ propertyName ] : [ resource[ propertyName ] ];\n\t\t\t\tconst propertyFragment:PersistedFragment.Class = propertyValues\n\t\t\t\t\t.filter( PersistedFragment.Factory.is )\n\t\t\t\t\t.find( fragment => fragment.isPartial() );\n\t\t\t\tif( ! propertyFragment ) return;\n\n\t\t\t\tcreateRefreshQuery( propertyPattern, propertyFragment, path );\n\t\t\t} );\n\t\t})( constructPatterns, persistedDocument, targetName );\n\n\t\treturn this.executeConstructPatterns<T>( uri, requestOptions, queryContext, targetName, constructPatterns.patterns, persistedDocument )\n\t\t\t.then<[ T & PersistedDocument.Class, Response ]>( ( [ documents, response ] ) => [ documents[ 0 ], response ] );\n\t}\n\n\n\tprivate executeQueryBuilder<T extends object>( uri:string, requestOptions:RequestOptions, queryContext:QueryContextBuilder, targetProperty:QueryProperty, queryBuilderFn?:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<[ (T & PersistedDocument.Class)[], Response ]> {\n\t\ttype Builder = QueryDocumentBuilder | QueryDocumentBuilder;\n\t\t// tslint:disable: variable-name\n\t\tconst Builder:typeof QueryDocumentBuilder = targetProperty.name === \"document\" ?\n\t\t\tQueryDocumentBuilder : QueryDocumentsBuilder;\n\t\t// tslint:enable: variable-name\n\t\tconst queryBuilder:Builder = new Builder( queryContext, targetProperty );\n\n\t\ttargetProperty.setType( queryBuilderFn ?\n\t\t\tQueryPropertyType.PARTIAL :\n\t\t\tQueryPropertyType.FULL\n\t\t);\n\n\t\tif( queryBuilderFn && queryBuilderFn.call( void 0, queryBuilder ) !== queryBuilder )\n\t\t\tthrow new Errors.IllegalArgumentError( \"The provided query builder was not returned\" );\n\n\t\tconst constructPatterns:PatternToken[] = targetProperty.getPatterns();\n\t\treturn this\n\t\t\t.executeConstructPatterns<T>( uri, requestOptions, queryContext, targetProperty.name, constructPatterns )\n\t\t\t.then( ( returned ) => {\n\t\t\t\tif( queryBuilder instanceof QueryDocumentsBuilder && queryBuilder._orderData ) {\n\t\t\t\t\tconst { path, flow } = queryBuilder._orderData;\n\t\t\t\t\tconst inverter:number = flow === \"DESC\" ? - 1 : 1;\n\n\t\t\t\t\treturned[ 0 ].sort( ( a:any, b:any ) => {\n\t\t\t\t\t\ta = getPathProperty( a, path );\n\t\t\t\t\t\tb = getPathProperty( b, path );\n\n\t\t\t\t\t\tconst aValue:any = Pointer.is( a ) ? a.id : a;\n\t\t\t\t\t\tconst bValue:any = Pointer.is( b ) ? b.id : b;\n\n\t\t\t\t\t\tif( aValue === bValue ) return 0;\n\n\t\t\t\t\t\tif( aValue === void 0 ) return - 1 * inverter;\n\t\t\t\t\t\tif( bValue === void 0 ) return inverter;\n\n\t\t\t\t\t\tif( ! areDifferentType( a, b ) ) {\n\t\t\t\t\t\t\tif( Pointer.is( a ) ) {\n\t\t\t\t\t\t\t\tconst aIsBNode:boolean = RDF.URI.Util.isBNodeID( aValue );\n\t\t\t\t\t\t\t\tconst bIsBNode:boolean = RDF.URI.Util.isBNodeID( bValue );\n\n\t\t\t\t\t\t\t\tif( aIsBNode && ! bIsBNode ) return - 1 * inverter;\n\t\t\t\t\t\t\t\tif( bIsBNode && ! aIsBNode ) return inverter;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif( Pointer.is( a ) ) return - 1 * inverter;\n\t\t\t\t\t\t\tif( Pointer.is( b ) ) return inverter;\n\n\t\t\t\t\t\t\tif( Utils.isNumber( a ) ) return - 1 * inverter;\n\t\t\t\t\t\t\tif( Utils.isNumber( b ) ) return inverter;\n\n\t\t\t\t\t\t\tif( Utils.isDate( a ) ) return - 1 * inverter;\n\t\t\t\t\t\t\tif( Utils.isDate( b ) ) return inverter;\n\n\t\t\t\t\t\t\tif( Utils.isBoolean( a ) ) return - 1 * inverter;\n\t\t\t\t\t\t\tif( Utils.isBoolean( b ) ) return inverter;\n\n\t\t\t\t\t\t\tif( Utils.isString( a ) ) return - 1 * inverter;\n\t\t\t\t\t\t\tif( Utils.isString( b ) ) return inverter;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif( aValue < bValue ) return - 1 * inverter;\n\t\t\t\t\t\tif( aValue > bValue ) return inverter;\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\treturn returned;\n\t\t\t} )\n\t\t\t;\n\t}\n\n\tprivate executeConstructPatterns<T extends object>( uri:string, requestOptions:RequestOptions, queryContext:QueryContext, targetName:string, constructPatterns:PatternToken[], targetDocument?:T & PersistedDocument.Class ):Promise<[ (T & PersistedDocument.Class)[], Response ]> {\n\t\tconst metadataVar:VariableToken = queryContext.getVariable( \"metadata\" );\n\t\tconst construct:ConstructToken = new ConstructToken()\n\t\t\t.addTriple( new SubjectToken( metadataVar )\n\t\t\t\t.addPredicate( new PredicateToken( \"a\" )\n\t\t\t\t\t.addObject( queryContext.compactIRI( C.VolatileResource ) )\n\t\t\t\t\t.addObject( queryContext.compactIRI( C.QueryMetadata ) )\n\t\t\t\t)\n\t\t\t\t.addPredicate( new PredicateToken( queryContext.compactIRI( C.target ) )\n\t\t\t\t\t.addObject( queryContext.getVariable( targetName ) )\n\t\t\t\t)\n\t\t\t)\n\t\t\t.addPattern( new BindToken( \"BNODE()\", metadataVar ) )\n\t\t\t.addPattern( ...constructPatterns );\n\n\t\tconst query:QueryToken = new QueryToken( construct )\n\t\t\t.addPrologues( ...queryContext.getPrologues() );\n\n\t\tconst triples:SubjectToken[] = getAllTriples( constructPatterns );\n\t\tconstruct.addTriple( ...triples );\n\n\t\tRequestUtils.setRetrievalPreferences( { include: [ C.PreferResultsContext ] }, requestOptions, false );\n\t\tRequestUtils.setRetrievalPreferences( { include: [ C.PreferDocumentETags ] }, requestOptions, false );\n\n\t\tlet response:Response;\n\t\treturn this.executeRawCONSTRUCTQuery( uri, query.toString(), requestOptions ).then( ( [ jsonldString, _response ]:[ string, Response ] ) => {\n\t\t\tresponse = _response;\n\t\t\treturn new JSONLDParser().parse( jsonldString );\n\n\t\t} ).then<[ (T & PersistedDocument.Class)[], Response ]>( ( rdfNodes:RDF.Node.Class[] ) => {\n\t\t\tconst freeResources:FreeResources = this._getFreeResources( rdfNodes\n\t\t\t\t.filter( node => ! RDF.Document.Factory.is( node ) )\n\t\t\t);\n\n\t\t\tconst targetSet:Set<string> = new Set( freeResources\n\t\t\t\t.getResources()\n\t\t\t\t.filter( QueryMetadata.Factory.is )\n\t\t\t\t.map( x => this.context ? x.target : x[ C.target ] )\n\t\t\t\t// Alternative to flatMap\n\t\t\t\t.reduce( ( targets, currentTargets ) => targets.concat( currentTargets ), [] )\n\t\t\t\t.map( x => x.id )\n\t\t\t);\n\n\t\t\tconst targetETag:string = targetDocument && targetDocument._etag;\n\t\t\tif( targetDocument ) targetDocument._etag = void 0;\n\n\t\t\tfreeResources\n\t\t\t\t.getResources()\n\t\t\t\t.filter( ResponseMetadata.Factory.is )\n\t\t\t\t.map<DocumentMetadata.Class[] | DocumentMetadata.Class>( responseMetadata => responseMetadata.documentsMetadata || responseMetadata[ C.documentMetadata ] )\n\t\t\t\t.map<DocumentMetadata.Class[]>( documentsMetadata => Array.isArray( documentsMetadata ) ? documentsMetadata : [ documentsMetadata ] )\n\t\t\t\t.forEach( documentsMetadata => documentsMetadata.forEach( documentMetadata => {\n\t\t\t\t\tif( ! documentMetadata ) return;\n\n\t\t\t\t\tconst relatedDocument:PersistedDocument.Class = documentMetadata.relatedDocument || documentMetadata[ C.relatedDocument ];\n\t\t\t\t\tconst eTag:string = documentMetadata.eTag || documentMetadata[ C.eTag ];\n\n\t\t\t\t\tif( relatedDocument._etag === void 0 ) relatedDocument._etag = eTag;\n\t\t\t\t\tif( relatedDocument._etag !== eTag ) relatedDocument._etag = null;\n\t\t\t\t} ) );\n\n\t\t\tif( targetDocument && targetETag === targetDocument._etag )\n\t\t\t\treturn [ [ targetDocument ], null ];\n\n\t\t\tconst rdfDocuments:RDF.Document.Class[] = rdfNodes\n\t\t\t\t.filter<any>( RDF.Document.Factory.is );\n\n\t\t\tconst targetDocuments:RDF.Document.Class[] = rdfDocuments\n\t\t\t\t.filter( x => targetSet.has( x[ \"@id\" ] ) );\n\n\t\t\tconst documents:(T & PersistedDocument.Class)[] = new JSONLDCompacter( this, targetName, queryContext )\n\t\t\t\t.compactDocuments( rdfDocuments, targetDocuments );\n\n\t\t\treturn [ documents, response ];\n\t\t} );\n\t}\n\n\tprivate executeSelectPatterns( uri:string, requestOptions:RequestOptions, queryContext:QueryContext, targetName:string, selectPatterns:PatternToken[] ):Promise<[ PersistedDocument.Class[], Response ]> {\n\t\tconst targetVar:VariableToken = queryContext.getVariable( targetName );\n\t\tconst select:SelectToken = new SelectToken()\n\t\t\t.addVariable( targetVar )\n\t\t\t.addPattern( ...selectPatterns )\n\t\t;\n\n\t\tconst query:QueryToken = new QueryToken( select as any )\n\t\t\t.addPrologues( ...queryContext.getPrologues() );\n\n\t\treturn this\n\t\t\t.executeSELECTQuery( uri, query.toString(), requestOptions )\n\t\t\t.then<[ PersistedDocument.Class[], Response ]>( ( [ results, response ] ) => {\n\t\t\t\tconst name:string = targetVar.toString().slice( 1 );\n\t\t\t\tconst documents:PersistedDocument.Class[] = results\n\t\t\t\t\t.bindings\n\t\t\t\t\t.map( x => x[ name ] as Pointer )\n\t\t\t\t\t.map( x => PersistedDocument.Factory.decorate( x, this ) );\n\n\t\t\t\treturn [ documents, response ];\n\t\t\t} );\n\t}\n\n\n\tprivate persistChildDocument<T extends object>( parentURI:string, childObject:T, slug:string, requestOptions:RequestOptions ):Promise<[ T & PersistedProtectedDocument.Class, Response ]> {\n\t\tif( PersistedDocument.Factory.is( childObject ) ) throw new Errors.IllegalArgumentError( \"The child provided has been already persisted.\" );\n\t\tlet childDocument:T & Document = Document.is( childObject ) ? <T & Document> childObject : Document.createFrom<T>( childObject );\n\n\t\tthis.setDefaultRequestOptions( requestOptions, LDP.Container );\n\t\treturn this.persistDocument<T & Document, PersistedProtectedDocument.Class>( parentURI, slug, childDocument, requestOptions );\n\t}\n\n\tprivate persistAccessPoint<T extends object>( documentURI:string, accessPoint:T & AccessPointBase, slug:string, requestOptions:RequestOptions ):Promise<[ T & PersistedAccessPoint.Class, Response ]> {\n\t\tif( PersistedDocument.Factory.is( accessPoint ) ) throw new Errors.IllegalArgumentError( \"The access-point provided has been already persisted.\" );\n\n\t\tconst accessPointDocument:T & AccessPoint = AccessPoint.is( accessPoint ) ?\n\t\t\taccessPoint : AccessPoint.createFrom<T>( accessPoint, this.getPointer( documentURI ), accessPoint.hasMemberRelation, accessPoint.isMemberOfRelation );\n\n\t\tif( accessPointDocument.membershipResource.id !== documentURI ) throw new Errors.IllegalArgumentError( \"The documentURI must be the same as the accessPoint's membershipResource.\" );\n\n\t\tthis.setDefaultRequestOptions( requestOptions, LDP.RDFSource );\n\t\treturn this.persistDocument<T & AccessPoint, PersistedAccessPoint.Class>( documentURI, slug, accessPointDocument, requestOptions );\n\t}\n\n\tprivate persistDocument<T extends Document, W extends PersistedProtectedDocument.Class>( parentURI:string, slug:string, document:T, requestOptions:RequestOptions ):Promise<[ T & W, Response ]> {\n\t\tRequestUtils.setContentTypeHeader( \"application/ld+json\", requestOptions );\n\n\t\tif( document.id ) {\n\t\t\tlet childURI:string = document.id;\n\t\t\tif( ! ! this.context ) childURI = this.context.resolve( childURI );\n\t\t\tif( ! RDF.URI.Util.isBaseOf( parentURI, childURI ) ) {\n\t\t\t\treturn Promise.reject( new Errors.IllegalArgumentError( \"The document's URI is not relative to the parentURI specified\" ) );\n\t\t\t}\n\t\t}\n\n\t\tif( document[ \"__CarbonSDK_InProgressOfPersisting\" ] ) return Promise.reject( new Errors.IllegalArgumentError( \"The document is already being persisted.\" ) );\n\t\tObject.defineProperty( document, \"__CarbonSDK_InProgressOfPersisting\", { configurable: true, enumerable: false, writable: false, value: true } );\n\n\t\tlet body:string = JSON.stringify( document.toJSON( this, this.jsonldConverter ) );\n\n\t\tif( ! ! slug ) RequestUtils.setSlug( slug, requestOptions );\n\n\t\treturn this.sendRequest( HTTPMethod.POST, parentURI, requestOptions, body ).then<[ T & W, Response ]>( ( response:Response ) => {\n\t\t\tdelete document[ \"__CarbonSDK_InProgressOfPersisting\" ];\n\n\t\t\tlet locationHeader:Header = response.getHeader( \"Location\" );\n\t\t\tif( locationHeader === null || locationHeader.values.length < 1 ) throw new BadResponseError( \"The response is missing a Location header.\", response );\n\t\t\tif( locationHeader.values.length !== 1 ) throw new BadResponseError( \"The response contains more than one Location header.\", response );\n\n\t\t\tconst localID:string = this.getPointerID( locationHeader.values[ 0 ].toString() );\n\t\t\tthis.pointers.set( localID, this.createPointerFrom( document, localID ) );\n\n\t\t\tconst persistedDocument:T & W = <T & W> PersistedProtectedDocument.Factory.decorate<T>( document, this );\n\t\t\tpersistedDocument.getFragments().forEach( PersistedFragment.Factory.decorate );\n\n\t\t\treturn this.applyResponseData( persistedDocument, response );\n\t\t}, this._parseErrorResponse.bind( this ) ).catch( ( error ) => {\n\t\t\tdelete document[ \"__CarbonSDK_InProgressOfPersisting\" ];\n\t\t\treturn Promise.reject( error );\n\t\t} );\n\t}\n\n\n\tprivate getRDFDocument( requestURL:string, rdfDocuments:RDF.Document.Class[], response:Response ):RDF.Document.Class {\n\t\trdfDocuments = rdfDocuments.filter( ( rdfDocument:RDF.Document.Class ) => rdfDocument[ \"@id\" ] === requestURL );\n\n\t\tif( rdfDocuments.length > 1 ) throw new BadResponseError( \"Several documents share the same id.\", response );\n\n\t\treturn rdfDocuments.length > 0 ? rdfDocuments[ 0 ] : null;\n\t}\n\n\n\tprivate getPointerID( uri:string ):string {\n\t\tif( RDF.URI.Util.isBNodeID( uri ) ) throw new Errors.IllegalArgumentError( \"BNodes cannot be fetched directly.\" );\n\t\t// TODO: Make named fragments independently resolvable\n\t\t/*\n\t\t\tif( RDF.URI.Util.hasFragment( uri ) ) throw new Errors.IllegalArgumentError( \"Fragment URI's cannot be fetched directly.\" );\n\t\t*/\n\n\t\tif( ! ! this.context ) {\n\t\t\turi = ObjectSchemaUtils.resolveURI( uri, this.getGeneralSchema() );\n\n\t\t\tif( ! RDF.URI.Util.isRelative( uri ) ) {\n\t\t\t\tconst baseURI:string = this.context.baseURI;\n\t\t\t\tif( ! RDF.URI.Util.isBaseOf( baseURI, uri ) ) return null;\n\n\t\t\t\treturn uri.substring( baseURI.length );\n\t\t\t} else {\n\t\t\t\treturn uri[ 0 ] === \"/\" ? uri.substr( 1 ) : uri;\n\t\t\t}\n\t\t} else {\n\t\t\tif( RDF.URI.Util.isPrefixed( uri ) ) throw new Errors.IllegalArgumentError( \"This Documents instance doesn't support prefixed URIs.\" );\n\t\t\tif( RDF.URI.Util.isRelative( uri ) ) throw new Errors.IllegalArgumentError( \"This Documents instance doesn't support relative URIs.\" );\n\t\t\treturn uri;\n\t\t}\n\t}\n\n\tprivate createPointer( localID:string ):Pointer {\n\t\treturn this.createPointerFrom( {}, localID );\n\t}\n\n\tprivate createPointerFrom<T extends Object>( object:T, localID:string ):T & Pointer {\n\t\tlet id:string = ! ! this.context ? this.context.resolve( localID ) : localID;\n\t\tlet pointer:T & Pointer = Pointer.createFrom<T>( object, id );\n\t\tObject.defineProperty( pointer, \"resolve\", {\n\t\t\twritable: false,\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: ():Promise<[ PersistedDocument.Class, Response ]> => {\n\t\t\t\treturn this.get( id );\n\t\t\t},\n\t\t} );\n\n\t\treturn pointer;\n\t}\n\n\n\tprivate compact( expandedObjects:Object[], targetObjects:Object[], pointerLibrary:PointerLibrary ):Object[];\n\tprivate compact( expandedObject:Object, targetObject:Object, pointerLibrary:PointerLibrary ):Object;\n\tprivate compact( expandedObjectOrObjects:any, targetObjectOrObjects:any, pointerLibrary:PointerLibrary ):any {\n\t\tif( ! Utils.isArray( expandedObjectOrObjects ) ) return this.compactSingle( expandedObjectOrObjects, targetObjectOrObjects, pointerLibrary );\n\n\t\tlet expandedObjects:Object[] = expandedObjectOrObjects;\n\t\tlet targetObjects:Object[] = ! ! targetObjectOrObjects ? targetObjectOrObjects : [];\n\t\tfor( let i:number = 0, length:number = expandedObjects.length; i < length; i ++ ) {\n\t\t\tlet expandedObject:Object = expandedObjects[ i ];\n\t\t\tlet targetObject:Object = targetObjects[ i ] = ! ! targetObjects[ i ] ? targetObjects[ i ] : {};\n\n\t\t\tthis.compactSingle( expandedObject, targetObject, pointerLibrary );\n\t\t}\n\n\t\treturn targetObjects;\n\t}\n\n\tprivate compactSingle( expandedObject:Object, targetObject:Object, pointerLibrary:PointerLibrary ):Object {\n\t\tlet digestedSchema:DigestedObjectSchema = this.getDigestedObjectSchemaForExpandedObject( expandedObject );\n\n\t\treturn this.jsonldConverter.compact( expandedObject, targetObject, digestedSchema, pointerLibrary );\n\t}\n\n\n\tprivate getDigestedObjectSchemaForExpandedObject( expandedObject:Object ):DigestedObjectSchema {\n\t\tlet types:string[] = RDF.Node.Util.getTypes( <any> expandedObject );\n\n\t\treturn this.getDigestedObjectSchema( types, expandedObject[ \"@id\" ] );\n\t}\n\n\tprivate getDigestedObjectSchemaForDocument( document:Document ):DigestedObjectSchema {\n\t\tif( PersistedResource.isDecorated( document ) && document.isPartial() ) {\n\t\t\tconst schemas:DigestedObjectSchema[] = [ document._partialMetadata.schema ];\n\t\t\treturn this.getProcessedSchema( schemas );\n\t\t} else {\n\t\t\tconst types:string[] = document.types || [];\n\t\t\treturn this.getDigestedObjectSchema( types, document.id );\n\t\t}\n\t}\n\n\tprivate getDigestedObjectSchema( objectTypes:string[], objectID:string ):DigestedObjectSchema {\n\t\tif( ! this.context ) return new DigestedObjectSchema();\n\n\t\tif(\n\t\t\tUtils.isDefined( objectID ) &&\n\t\t\t! RDF.URI.Util.hasFragment( objectID ) &&\n\t\t\t! RDF.URI.Util.isBNodeID( objectID ) &&\n\t\t\tobjectTypes.indexOf( Document.TYPE ) === - 1\n\t\t)\n\t\t\tobjectTypes = objectTypes.concat( Document.TYPE );\n\n\t\tconst schemas:DigestedObjectSchema[] = objectTypes\n\t\t\t.filter( type => this.context.hasObjectSchema( type ) )\n\t\t\t.map( type => this.context.getObjectSchema( type ) )\n\t\t;\n\n\t\treturn this.getProcessedSchema( schemas );\n\t}\n\n\tprivate getProcessedSchema( objectSchemas:DigestedObjectSchema[] = [] ):DigestedObjectSchema {\n\t\tobjectSchemas.unshift( this.context.getObjectSchema() );\n\t\treturn ObjectSchemaDigester\n\t\t\t.combineDigestedObjectSchemas( objectSchemas );\n\t}\n\n\n\tprivate getRequestURI( uri:string ):string {\n\t\tif( RDF.URI.Util.isBNodeID( uri ) ) {\n\t\t\tthrow new Errors.IllegalArgumentError( \"BNodes cannot be fetched directly.\" );\n\t\t} else if( RDF.URI.Util.isPrefixed( uri ) ) {\n\t\t\tif( ! this.context ) throw new Errors.IllegalArgumentError( \"This Documents instance doesn't support prefixed URIs.\" );\n\t\t\turi = ObjectSchemaUtils.resolveURI( uri, this.context.getObjectSchema() );\n\t\t\tif( RDF.URI.Util.isPrefixed( uri ) ) throw new Errors.IllegalArgumentError( `The prefixed URI \"${ uri }\" could not be resolved.` );\n\t\t} else if( RDF.URI.Util.isRelative( uri ) ) {\n\t\t\tif( ! this.context ) throw new Errors.IllegalArgumentError( \"This Documents instance doesn't support relative URIs.\" );\n\t\t\turi = this.context.resolve( uri );\n\t\t} else if( this.context && ! RDF.URI.Util.isBaseOf( this.context.baseURI, uri ) ) {\n\t\t\tthrow new Errors.IllegalArgumentError( `\"${ uri }\" isn't a valid URI for this Carbon instance.` );\n\t\t}\n\t\treturn uri;\n\t}\n\n\tprivate setDefaultRequestOptions( requestOptions:RequestOptions, interactionModel?:string ):RequestOptions {\n\t\tif( this.context && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\t\tif( interactionModel ) RequestUtils.setPreferredInteractionModel( interactionModel, requestOptions );\n\n\t\tRequestUtils.setAcceptHeader( \"application/ld+json\", requestOptions );\n\n\t\treturn requestOptions;\n\t}\n\n\tprivate updateFromPreferenceApplied<T extends object>( persistedDocument:T & PersistedDocument.Class, rdfDocuments:RDF.Document.Class[], response:Response ):[ T, Response ] {\n\t\tlet eTag:string = response.getETag();\n\t\tif( eTag === null ) throw new BadResponseError( \"The response doesn't contain an ETag\", response );\n\n\t\tlet rdfDocument:RDF.Document.Class = this.getRDFDocument( persistedDocument.id, rdfDocuments, response );\n\t\tif( rdfDocument === null ) throw new BadResponseError( \"No document was returned.\", response );\n\n\t\tpersistedDocument = this._getPersistedDocument<T>( rdfDocument, response );\n\t\tpersistedDocument._etag = eTag;\n\n\t\treturn [ persistedDocument, response ];\n\t}\n\n\tprivate _parseMembers( pointers:(string | Pointer)[] ):Pointer[] {\n\t\treturn pointers.map( pointer => {\n\t\t\tif( Utils.isString( pointer ) ) return this.getPointer( pointer );\n\t\t\tif( Pointer.is( pointer ) ) return pointer;\n\n\t\t\tthrow new Errors.IllegalArgumentError( \"No Carbon.Pointer or URI provided.\" );\n\t\t} );\n\t}\n\n\tprivate applyResponseData<T extends PersistedDocument.Class>( persistedProtectedDocument:T, response:Response ):[ T, Response ] | Promise<[ T, Response ]> {\n\t\tif( response.status === 204 || ! response.data ) return [ persistedProtectedDocument, response ];\n\n\t\treturn new JSONLDParser().parse( response.data ).then<[ T, Response ]>( ( expandedResult:object[] ) => {\n\t\t\tconst freeNodes:RDF.Node.Class[] = RDF.Node.Util.getFreeNodes( expandedResult );\n\t\t\tthis.applyNodeMap( freeNodes );\n\n\t\t\tlet preferenceHeader:Header = response.getHeader( \"Preference-Applied\" );\n\t\t\tif( preferenceHeader === null || preferenceHeader.toString() !== \"return=representation\" ) return [ persistedProtectedDocument, response ];\n\n\t\t\tconst rdfDocuments:RDF.Document.Class[] = RDF.Document.Util.getDocuments( expandedResult );\n\t\t\treturn this.updateFromPreferenceApplied<T>( persistedProtectedDocument, rdfDocuments, response );\n\t\t} );\n\t}\n\n\tprivate applyNodeMap( freeNodes:RDF.Node.Class[] ):void {\n\t\tif( ! freeNodes.length ) return;\n\t\tconst freeResources:FreeResources = this._getFreeResources( freeNodes );\n\t\tconst responseMetadata:ResponseMetadata.Class = <ResponseMetadata.Class> freeResources.getResources().find( ResponseMetadata.Factory.is );\n\n\t\tfor( const documentMetadata of responseMetadata.documentsMetadata ) {\n\t\t\tconst document:PersistedDocument.Class = documentMetadata.relatedDocument as PersistedDocument.Class;\n\t\t\tfor( const { entryKey, entryValue } of documentMetadata.bNodesMap.entries ) {\n\t\t\t\tconst originalBNode:PersistedBlankNode.Class = document.getFragment( entryKey.id );\n\t\t\t\toriginalBNode.id = entryValue.id;\n\n\t\t\t\tdocument._fragmentsIndex.delete( entryKey.id );\n\t\t\t\tdocument._fragmentsIndex.set( entryValue.id, originalBNode );\n\t\t\t}\n\t\t\tdocument._syncSavedFragments();\n\t\t}\n\t}\n\n\tprivate sendRequest( method:HTTPMethod, uri:string, options:RequestOptions, body?:string | Blob | Buffer ):Promise<Response>;\n\tprivate sendRequest<T extends object>( method:HTTPMethod, uri:string, options:RequestOptions, body?:string | Blob | Buffer, parser?:Parser<T> ):Promise<[ T, Response ]>;\n\tprivate sendRequest( method:HTTPMethod, uri:string, options:RequestOptions, body?:string | Blob | Buffer, parser?:Parser<any> ):any {\n\t\treturn RequestService.send( method, uri, body || null, options, parser )\n\t\t\t.catch( this._parseErrorResponse.bind( this ) );\n\t}\n}\n\nexport default Documents;\n"]}