{"version":3,"sources":["Auth/PersistedUser.ts"],"names":[],"mappings":";;AAAA,kCAIkB;AAIlB,4EAA8E;AAC9E,6BAA+B;AAS/B,gBAAoC,cAAoC;IACvE,MAAM,CAAC,kBAAkB,CAAC,IAAI,CAAE,IAAI,EAAE,SAAS,EAAE,cAAc,CAAE,CAAC;AACnE,CAAC;AAFD,wBAEC;AAED,iBAAqC,cAAoC;IACxE,MAAM,CAAC,kBAAkB,CAAC,IAAI,CAAE,IAAI,EAAE,UAAU,EAAE,cAAc,CAAE,CAAC;AACpE,CAAC;AAFD,0BAEC;AAED,4BAAyC,IAA2B,EAAE,cAAoC;IAA1G,iBAqBC;IApBA,IAAM,SAAS,GAAyB,EAAE,CAAC;IAE3C,MAAM,CAAC,IAAI;SACT,OAAO,EAAE;SACT,IAAI,CAAE,UAAE,EAAc;YAAV,gBAAQ;QACpB,EAAE,CAAA,CAAE,QAAS,CAAC;YAAC,SAAS,CAAC,IAAI,CAAE,QAAQ,CAAE,CAAC;QAE1C,KAAI,CAAE,IAAI,CAAE,GAAG,IAAI,CAAC;QAEpB,IAAM,OAAO,GAA0B,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC;QACnF,OAAO,KAAI,CAAE,OAAO,CAAE,CAAC;QAEvB,MAAM,CAAC,KAAI,CAAC,IAAI,CAAE,cAAc,CAAE,CAAC;IACpC,CAAC,CAAE;SACF,IAAI,CAAoC,UAAE,EAAc;YAAV,gBAAQ;QACtD,SAAS,CAAC,IAAI,CAAE,QAAQ,CAAE,CAAC;QAE3B,MAAM,CAAC,CAAE,KAAI,EAAE,SAAS,CAAE,CAAC;IAC5B,CAAC,CAAE,CACF;AACH,CAAC;AAGD;IAAA;IAqCA,CAAC;IApCO,0BAAkB,GAAzB,UAA2B,MAAa;QACvC,MAAM,CAAC,gBAAQ,CAAE,MAAM,CAAE;eACrB,mBAAW,CAAE,MAAM,EAAE,QAAQ,CAAE;eAC/B,mBAAW,CAAE,MAAM,EAAE,SAAS,CAAE,CAClC;IACH,CAAC;IAEM,UAAE,GAAT,UAAW,MAAa;QACvB,MAAM,CAAC,OAAO,CAAC,kBAAkB,CAAE,MAAM,CAAE;eACvC,IAAI,CAAC,OAAO,CAAC,kBAAkB,CAAE,MAAM,CAAE;eACzC,0BAA0B,CAAC,OAAO,CAAC,EAAE,CAAE,MAAM,CAAE,CACjD;IACH,CAAC;IAEM,gBAAQ,GAAf,UAAmC,MAAQ,EAAE,SAAyB;QACrE,EAAE,CAAA,CAAE,OAAO,CAAC,kBAAkB,CAAE,MAAM,CAAG,CAAC;YAAC,MAAM,CAAC,MAAM,CAAC;QAEzD,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAE,MAAM,CAAE,CAAC;QAChC,0BAA0B,CAAC,OAAO,CAAC,QAAQ,CAAE,MAAM,EAAE,SAAS,CAAE,CAAC;QAEjE,IAAM,aAAa,GAAa,MAAM,CAAC,gBAAgB,CAAE,MAAM,EAAE;YAChE,QAAQ,EAAE;gBACT,YAAY,EAAE,IAAI;gBAClB,QAAQ,EAAE,IAAI;gBACd,KAAK,EAAE,MAAM;aACb;YACD,SAAS,EAAE;gBACV,YAAY,EAAE,IAAI;gBAClB,QAAQ,EAAE,IAAI;gBACd,KAAK,EAAE,OAAO;aACd;SACD,CAAE,CAAC;QAEJ,MAAM,CAAC,aAAa,CAAC;IACtB,CAAC;IAEF,cAAC;AAAD,CArCA,AAqCC,IAAA;AArCY,0BAAO","file":"PersistedUser.js","sourcesContent":["import {\n\thasFunction,\n\tisObject,\n\tMinus,\n} from \"../Utils\";\nimport * as Document from \"./../Document\";\nimport * as Documents from \"./../Documents\";\nimport * as HTTP from \"./../HTTP\";\nimport * as PersistedProtectedDocument from \"./../PersistedProtectedDocument\";\nimport * as User from \"./User\";\n\nexport interface Class extends Minus<User.Class, Document.Class>, PersistedProtectedDocument.Class {\n\tenable( requestOptions?:HTTP.Request.Options ):Promise<[ Class, HTTP.Response.Class[] ]>;\n\n\tdisable( requestOptions?:HTTP.Request.Options ):Promise<[ Class, HTTP.Response.Class[] ]>;\n}\n\n\nexport function enable( this:Class, requestOptions?:HTTP.Request.Options ):Promise<[ Class, HTTP.Response.Class[] ]> {\n\treturn changeAvailability.call( this, \"enabled\", requestOptions );\n}\n\nexport function disable( this:Class, requestOptions?:HTTP.Request.Options ):Promise<[ Class, HTTP.Response.Class[] ]> {\n\treturn changeAvailability.call( this, \"disabled\", requestOptions );\n}\n\nfunction changeAvailability( this:Class, flag:\"enabled\" | \"disabled\", requestOptions?:HTTP.Request.Options ):Promise<[ Class, HTTP.Response.Class[] ]> {\n\tconst responses:HTTP.Response.Class[] = [];\n\n\treturn this\n\t\t.resolve()\n\t\t.then( ( [ , response ] ) => {\n\t\t\tif( response ) responses.push( response );\n\n\t\t\tthis[ flag ] = true;\n\n\t\t\tconst reverse:\"disabled\" | \"enabled\" = flag === \"enabled\" ? \"disabled\" : \"enabled\";\n\t\t\tdelete this[ reverse ];\n\n\t\t\treturn this.save( requestOptions );\n\t\t} )\n\t\t.then<[ Class, HTTP.Response.Class[] ]>( ( [ , response ] ) => {\n\t\t\tresponses.push( response );\n\n\t\t\treturn [ this, responses ];\n\t\t} )\n\t\t;\n}\n\n\nexport class Factory {\n\tstatic hasClassProperties( object:object ):object is Class {\n\t\treturn isObject( object )\n\t\t\t&& hasFunction( object, \"enable\" )\n\t\t\t&& hasFunction( object, \"disable\" )\n\t\t\t;\n\t}\n\n\tstatic is( object:object ):object is Class {\n\t\treturn Factory.hasClassProperties( object )\n\t\t\t&& User.Factory.hasClassProperties( object )\n\t\t\t&& PersistedProtectedDocument.Factory.is( object )\n\t\t\t;\n\t}\n\n\tstatic decorate<T extends object>( object:T, documents:Documents.Class ):Class & T {\n\t\tif( Factory.hasClassProperties( object ) ) return object;\n\n\t\tUser.Factory.decorate( object );\n\t\tPersistedProtectedDocument.Factory.decorate( object, documents );\n\n\t\tconst persistedUser:T & Class = Object.defineProperties( object, {\n\t\t\t\"enable\": {\n\t\t\t\tconfigurable: true,\n\t\t\t\twritable: true,\n\t\t\t\tvalue: enable,\n\t\t\t},\n\t\t\t\"disable\": {\n\t\t\t\tconfigurable: true,\n\t\t\t\twritable: true,\n\t\t\t\tvalue: disable,\n\t\t\t},\n\t\t} );\n\n\t\treturn persistedUser;\n\t}\n\n}\n\nexport default Class;\n"]}