{"version":3,"sources":["Auth/PersistedRole.ts"],"names":[],"mappings":"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","file":"PersistedRole.js","sourcesContent":["import * as HTTP from \"./../HTTP\";\nimport * as Errors from \"./../Errors\";\nimport * as PersistedDocument from \"./../PersistedDocument\";\nimport * as PersistedProtectedDocument from \"./../PersistedProtectedDocument\";\nimport * as Pointer from \"./../Pointer\";\nimport * as RetrievalPreferences from \"./../RetrievalPreferences\";\nimport * as Role from \"./Role\";\nimport * as Roles from \"./Roles\";\nimport * as Utils from \"./../Utils\";\n\nexport interface Class extends PersistedProtectedDocument.Class {\n\t_roles:Roles.Class;\n\n\tname?:string;\n\tdescription?:string;\n\tagents?:Pointer.Class[];\n\n\tcreateChild<T>( role:T & Role.Class, requestOptions?:HTTP.Request.Options ):Promise<[ T & Class, HTTP.Response.Class ]>;\n\n\tcreateChild<T>( role:T & Role.Class, slug?:string, requestOptions?:HTTP.Request.Options ):Promise<[ T & Class, HTTP.Response.Class ]>;\n\n\tlistAgents( requestOptions?:HTTP.Request.Options ):Promise<[ PersistedDocument.Class[], HTTP.Response.Class ]>;\n\n\tgetAgents<T>( requestOptions?:HTTP.Request.Options ):Promise<[ (T & PersistedProtectedDocument.Class)[], HTTP.Response.Class ]>;\n\n\tgetAgents<T>( retrievalPreferences?:RetrievalPreferences.Class, requestOptions?:HTTP.Request.Options ):Promise<[ (T & PersistedProtectedDocument.Class)[], HTTP.Response.Class ]>;\n\n\taddAgent( agent:Pointer.Class | string, requestOptions?:HTTP.Request.Options ):Promise<HTTP.Response.Class>;\n\n\taddAgents( agents:(Pointer.Class | string)[], requestOptions?:HTTP.Request.Options ):Promise<HTTP.Response.Class>;\n\n\tremoveAgent( agent:Pointer.Class | string, requestOptions?:HTTP.Request.Options ):Promise<HTTP.Response.Class>;\n\n\tremoveAgents( agents:(Pointer.Class | string)[], requestOptions?:HTTP.Request.Options ):Promise<HTTP.Response.Class>;\n}\n\nexport class Factory {\n\n\tstatic hasClassProperties( object:Object ):boolean {\n\t\treturn Utils.hasPropertyDefined( object, \"_roles\" )\n\t\t\t&& Utils.hasFunction( object, \"createChild\" )\n\t\t\t&& Utils.hasFunction( object, \"listAgents\" )\n\t\t\t&& Utils.hasFunction( object, \"getAgents\" )\n\t\t\t&& Utils.hasFunction( object, \"addAgent\" )\n\t\t\t&& Utils.hasFunction( object, \"addAgents\" )\n\t\t\t&& Utils.hasFunction( object, \"removeAgent\" )\n\t\t\t&& Utils.hasFunction( object, \"removeAgents\" )\n\t\t\t;\n\t}\n\n\tstatic is( object:Object ):boolean {\n\t\treturn Factory.hasClassProperties( object )\n\t\t\t&& PersistedProtectedDocument.Factory.is( object );\n\t}\n\n\tstatic decorate<T extends PersistedDocument.Class>( object:T, roles:Roles.Class ):T & Class {\n\t\tlet role:Class & T = <any> object;\n\n\t\tif( Factory.hasClassProperties( role ) ) return role;\n\t\tif( ! PersistedProtectedDocument.Factory.hasClassProperties( role ) ) PersistedProtectedDocument.Factory.decorate( role );\n\n\t\tObject.defineProperties( role, {\n\t\t\t\"_roles\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: roles,\n\t\t\t},\n\t\t\t\"createChild\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: createChild,\n\t\t\t},\n\t\t\t\"listAgents\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: listAgents,\n\t\t\t},\n\t\t\t\"getAgents\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getAgents,\n\t\t\t},\n\t\t\t\"addAgent\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: addAgent,\n\t\t\t},\n\t\t\t\"addAgents\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: addAgents,\n\t\t\t},\n\t\t\t\"removeAgent\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: removeAgent,\n\t\t\t},\n\t\t\t\"removeAgents\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: removeAgents,\n\t\t\t},\n\t\t} );\n\n\t\treturn role;\n\t}\n\n}\n\nfunction createChild<T>( role:T & Role.Class, requestOptions?:HTTP.Request.Options ):Promise<[ T & Class, HTTP.Response.Class ]>;\nfunction createChild<T>( role:T & Role.Class, slug?:string, requestOptions?:HTTP.Request.Options ):Promise<[ T & Class, HTTP.Response.Class ]>;\nfunction createChild<T>( this:Class, role:T & Role.Class, slugOrRequestOptions?:any, requestOptions?:HTTP.Request.Options ):Promise<[ T & Class, HTTP.Response.Class ]> {\n\tcheckState( this );\n\treturn this._roles.createChild( this.id, role, slugOrRequestOptions, requestOptions );\n}\n\nfunction listAgents( this:Class, requestOptions?:HTTP.Request.Options ):Promise<[ PersistedDocument.Class[], HTTP.Response.Class ]> {\n\tcheckState( this );\n\treturn this._roles.listAgents( this.id, requestOptions );\n}\n\nfunction getAgents<T>( requestOptions?:HTTP.Request.Options ):Promise<[ (T & PersistedProtectedDocument.Class)[], HTTP.Response.Class ]>;\nfunction getAgents<T>( retrievalPreferences?:RetrievalPreferences.Class, requestOptions?:HTTP.Request.Options ):Promise<[ (T & PersistedProtectedDocument.Class)[], HTTP.Response.Class ]>;\nfunction getAgents<T>( this:Class, retrievalPreferencesOrRequestOptions?:any, requestOptions?:HTTP.Request.Options ):Promise<[ (T & PersistedProtectedDocument.Class)[], HTTP.Response.Class ]> {\n\tcheckState( this );\n\treturn this._roles.getAgents( this.id, retrievalPreferencesOrRequestOptions, requestOptions );\n}\n\nfunction addAgent( this:Class, agent:Pointer.Class | string, requestOptions?:HTTP.Request.Options ):Promise<HTTP.Response.Class> {\n\tcheckState( this );\n\treturn this._roles.addAgents( this.id, [ agent ], requestOptions );\n}\n\nfunction addAgents( this:Class, agents:(Pointer.Class | string)[], requestOptions?:HTTP.Request.Options ):Promise<HTTP.Response.Class> {\n\tcheckState( this );\n\treturn this._roles.addAgents( this.id, agents, requestOptions );\n}\n\nfunction removeAgent( this:Class, agent:Pointer.Class | string, requestOptions?:HTTP.Request.Options ):Promise<HTTP.Response.Class> {\n\tcheckState( this );\n\treturn this._roles.removeAgents( this.id, [ agent ], requestOptions );\n}\n\nfunction removeAgents( this:Class, agents:(Pointer.Class | string)[], requestOptions?:HTTP.Request.Options ):Promise<HTTP.Response.Class> {\n\tcheckState( this );\n\treturn this._roles.removeAgents( this.id, agents, requestOptions );\n}\n\nfunction checkState( self:Class ):void {\n\tif( ! self._roles ) throw new Errors.IllegalStateError( \"The context of the current role, does not support roles management.\" );\n}\n\nexport default Class;\n"]}