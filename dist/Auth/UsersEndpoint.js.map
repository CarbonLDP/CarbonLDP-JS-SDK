{"version":3,"sources":["Auth/UsersEndpoint.ts"],"names":[],"mappings":";;AACA,wCAAuC;AACvC,oCAAiD;AAGjD,kCAAuC;AACvC,gDAAqC;AACrC,iDAAgD;AAChD,+BAGgB;AAkBH,QAAA,aAAa,GAAwB;IACjD,IAAI,EAAE,iBAAE,CAAC,KAAK;IAEd,WAAW,EAAX,UAAa,MAAa;QACzB,MAAM,CAAC,CACN,mBAAW,CAAE,MAAM,EAAE,QAAQ,CAAE;YAC/B,mBAAW,CAAE,MAAM,EAAE,SAAS,CAAE,CAChC,CAAC;IACH,CAAC;IAGD,QAAQ,EAAR,UAA4B,MAAQ,EAAE,SAAmB;QACxD,EAAE,CAAA,CAAE,qBAAa,CAAC,WAAW,CAAE,MAAM,CAAG,CAAC;YAAC,MAAM,CAAC,MAAM,CAAC;QAExD,mBAAQ,CAAC,QAAQ,CAAE,MAAM,EAAE,SAAS,CAAE,CAAC;QAEvC,MAAM,CAAC,MAAM,CAAC,gBAAgB,CAAE,MAAM,EAAE;YACvC,eAAe,EAAE;gBAChB,KAAK,EAAmC;oBACvC,UAAU,EAAE,cAAc;oBAC1B,QAAQ,EAAE,6BAAa,CAAC,QAAQ;iBAChC;aACD;YACD,QAAQ,EAAE;gBACT,YAAY,EAAE,IAAI;gBAClB,KAAK,EAAE,UAAU;aACjB;YACD,SAAS,EAAE;gBACV,YAAY,EAAE,IAAI;gBAClB,KAAK,EAAE,WAAW;aAClB;SACD,CAAE,CAAC;IACL,CAAC;CACD,CAAC;AAGF,wBAA6C,IAAM;IAClD,IAAM,IAAI,GAAY,WAAI,CAAC,UAAU,CAAE,IAAI,CAAE,CAAC;IAE9C,EAAE,CAAA,CAAE,CAAE,IAAI,CAAC,WAAY,CAAC;QAAC,MAAM,IAAI,6BAAoB,CAAE,mCAAmC,CAAE,CAAC;IAC/F,IAAI,CAAC,cAAc,CAAE,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAE,CAAC;IAE5E,EAAE,CAAA,CAAE,CAAE,IAAI,CAAC,WAAW,CAAC,QAAS,CAAC;QAAC,MAAM,IAAI,6BAAoB,CAAE,yCAAyC,CAAE,CAAC;IAC9G,EAAE,CAAA,CAAE,CAAE,IAAI,CAAC,WAAW,CAAC,QAAS,CAAC;QAAC,MAAM,IAAI,6BAAoB,CAAE,yCAAyC,CAAE,CAAC;IAE9G,MAAM,CAAC,IAAI,CAAC;AACb,CAAC;AAGD,oBAAyC,OAAc,EAAE,cAA8B;IACtF,MAAM,CAAC,mBAAQ;SACb,QAAQ,CAAE,IAAI,EAAE,OAAO,CAAE;SACzB,IAAI,CAAE,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,MAAM,CAAE,cAAc,CAAE,EAA7B,CAA6B,CAAE,CAC7C;AACH,CAAC;AAED,qBAA0C,OAAc,EAAE,cAA8B;IACvF,MAAM,CAAC,mBAAQ;SACb,QAAQ,CAAE,IAAI,EAAE,OAAO,CAAE;SACzB,IAAI,CAAE,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,OAAO,CAAE,cAAc,CAAE,EAA9B,CAA8B,CAAE,CAC9C;AACH,CAAC","file":"UsersEndpoint.js","sourcesContent":["import { Documents } from \"../Documents\";\nimport { Endpoint } from \"../Endpoint\";\nimport { IllegalArgumentError } from \"../Errors\";\nimport { RequestOptions } from \"../HTTP\";\nimport { ModelDecorator } from \"../ModelDecorator\";\nimport { hasFunction } from \"../Utils\";\nimport { CS } from \"../Vocabularies\";\nimport { PersistedUser } from \"./PersistedUser\";\nimport {\n\tUser,\n\tUserBase,\n} from \"./User\";\n\n\nexport interface UsersEndpoint extends Endpoint<UserBase, User, PersistedUser> {\n\tenable( userURI:string, requestOptions?:RequestOptions ):Promise<PersistedUser>;\n\n\tdisable( userURI:string, requestOptions?:RequestOptions ):Promise<PersistedUser>;\n}\n\n\nexport interface UsersEndpointFactory extends ModelDecorator<UsersEndpoint> {\n\tTYPE:CS[ \"Users\" ];\n\n\tisDecorated( object:object ):object is UsersEndpoint;\n\n\tdecorate<T extends object>( object:T, documents:Documents ):T & UsersEndpoint;\n}\n\nexport const UsersEndpoint:UsersEndpointFactory = {\n\tTYPE: CS.Users,\n\n\tisDecorated( object:object ):object is UsersEndpoint {\n\t\treturn (\n\t\t\thasFunction( object, \"enable\" ) &&\n\t\t\thasFunction( object, \"disable\" )\n\t\t);\n\t},\n\n\n\tdecorate<T extends object>( object:T, documents:Documents ):T & UsersEndpoint {\n\t\tif( UsersEndpoint.isDecorated( object ) ) return object;\n\n\t\tEndpoint.decorate( object, documents );\n\n\t\treturn Object.defineProperties( object, {\n\t\t\t\"_ModelFactory\": {\n\t\t\t\tvalue: <UsersEndpoint[\"_ModelFactory\"]> {\n\t\t\t\t\tcreateFrom: createFromBase,\n\t\t\t\t\tdecorate: PersistedUser.decorate,\n\t\t\t\t},\n\t\t\t},\n\t\t\t\"enable\": {\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: enableUser,\n\t\t\t},\n\t\t\t\"disable\": {\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: disableUser,\n\t\t\t},\n\t\t} );\n\t},\n};\n\n\nfunction createFromBase<T extends UserBase>( base:T ):T & User {\n\tconst user:T & User = User.createFrom( base );\n\n\tif( ! user.credentials ) throw new IllegalArgumentError( \"A credentials object is required.\" );\n\tuser.setCredentials( user.credentials.username, user.credentials.username );\n\n\tif( ! user.credentials.username ) throw new IllegalArgumentError( \"A credentials username cannot be empty.\" );\n\tif( ! user.credentials.password ) throw new IllegalArgumentError( \"A credentials password cannot be empty.\" );\n\n\treturn user;\n}\n\n\nfunction enableUser( this:UsersEndpoint, userURI:string, requestOptions?:RequestOptions ):Promise<PersistedUser> {\n\treturn Endpoint\n\t\t.getChild( this, userURI )\n\t\t.then( user => user.enable( requestOptions ) )\n\t\t;\n}\n\nfunction disableUser( this:UsersEndpoint, userURI:string, requestOptions?:RequestOptions ):Promise<PersistedUser> {\n\treturn Endpoint\n\t\t.getChild( this, userURI )\n\t\t.then( user => user.disable( requestOptions ) )\n\t\t;\n}\n"]}