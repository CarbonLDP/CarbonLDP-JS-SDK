{"version":3,"sources":["Auth/PersistedCredentials.ts"],"names":[],"mappings":";;AAEA,4EAA2E;AAC3E,kCAAoC;AACpC,+CAAiD;AAajD;IAAA;IAoCA,CAAC;IAnCO,0BAAkB,GAAzB,UAA2B,MAAa;QACvC,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAE,MAAM,CAAE;eAC3B,KAAK,CAAC,WAAW,CAAE,MAAM,EAAE,QAAQ,CAAE;eACrC,KAAK,CAAC,WAAW,CAAE,MAAM,EAAE,SAAS,CAAE,CACxC;IACH,CAAC;IAEM,gBAAQ,GAAf,UAAmC,iBAAmB,EAAE,SAAmB;QAC1E,IAAM,oBAAoB,GAAyB,iBAAiB,CAAC;QACrE,EAAE,CAAA,CAAE,OAAO,CAAC,kBAAkB,CAAE,iBAAiB,CAAG,CAAC;YAAC,MAAM,CAAC,oBAAoB,CAAC;QAElF,uDAA0B,CAAC,QAAQ,CAAE,oBAAoB,EAAE,SAAS,CAAE,CAAC;QAEvE,MAAM,CAAC,gBAAgB,CAAE,oBAAoB,EAAE;YAC9C,QAAQ,EAAE;gBACT,QAAQ,EAAE,KAAK;gBACf,UAAU,EAAE,KAAK;gBACjB,YAAY,EAAE,IAAI;gBAClB,KAAK,EAAE,aAAa,CAAC,IAAI,CAAE,oBAAoB,EAAE,IAAI,CAAE;aACvD;YACD,SAAS,EAAE;gBACV,QAAQ,EAAE,KAAK;gBACf,UAAU,EAAE,KAAK;gBACjB,YAAY,EAAE,IAAI;gBAClB,KAAK,EAAE,aAAa,CAAC,IAAI,CAAE,oBAAoB,EAAE,KAAK,CAAE;aACxD;SACD,CAAE,CAAC;QAEJ,EAAE,CAAA,CAAE,oBAAoB,CAAC,IAAK,CAAC,CAAC,CAAC;YAChC,aAAa,CAAC,OAAO,CAAC,QAAQ,CAAE,oBAAoB,CAAC,IAAI,EAAE,SAAS,CAAE,CAAC;YACvE,oBAAoB,CAAC,IAAI,CAAC,WAAW,GAAG,oBAAoB,CAAC;QAC9D,CAAC;QAED,MAAM,CAAC,oBAAoB,CAAC;IAC7B,CAAC;IACF,cAAC;AAAD,CApCA,AAoCC,IAAA;AApCY,0BAAO;AAsCpB,uBAAoC,OAAe,EAAE,cAA8B;IAAnF,iBAMC;IALA,IAAM,OAAO,GAAiB,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;IACrF,MAAM,CAAC,OAAO,CAAC,IAAI,CAAE;QACpB,KAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,MAAM,CAAC,KAAI,CAAC,IAAI,CAAE,cAAc,CAAE,CAAC;IACpC,CAAC,CAAE,CAAC;AACL,CAAC","file":"PersistedCredentials.js","sourcesContent":["import { Documents } from \"../Documents\";\nimport { RequestOptions } from \"../HTTP/Request\";\nimport { PersistedProtectedDocument } from \"../PersistedProtectedDocument\";\nimport * as Utils from \"./../Utils\";\nimport * as PersistedUser from \"./PersistedUser\";\n\nexport interface Class extends PersistedProtectedDocument {\n\temail?:string;\n\tpassword?:string;\n\tenabled?:boolean;\n\tuser?:PersistedUser.Class;\n\n\tenable( requestOptions?:RequestOptions ):Promise<Class>;\n\n\tdisable( requestOptions?:RequestOptions ):Promise<Class>;\n}\n\nexport class Factory {\n\tstatic hasClassProperties( object:object ):boolean {\n\t\treturn Utils.isObject( object )\n\t\t\t&& Utils.hasFunction( object, \"enable\" )\n\t\t\t&& Utils.hasFunction( object, \"disable\" )\n\t\t\t;\n\t}\n\n\tstatic decorate<T extends object>( persistedDocument:T, documents:Documents ):T & Class {\n\t\tconst persistedCredentials:T & Class = <T & Class> persistedDocument;\n\t\tif( Factory.hasClassProperties( persistedDocument ) ) return persistedCredentials;\n\n\t\tPersistedProtectedDocument.decorate( persistedCredentials, documents );\n\n\t\tObject.defineProperties( persistedCredentials, {\n\t\t\t\"enable\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: changeEnabled.bind( persistedCredentials, true ),\n\t\t\t},\n\t\t\t\"disable\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: changeEnabled.bind( persistedCredentials, false ),\n\t\t\t},\n\t\t} );\n\n\t\tif( persistedCredentials.user ) {\n\t\t\tPersistedUser.Factory.decorate( persistedCredentials.user, documents );\n\t\t\tpersistedCredentials.user.credentials = persistedCredentials;\n\t\t}\n\n\t\treturn persistedCredentials;\n\t}\n}\n\nfunction changeEnabled( this:Class, enabled:boolean, requestOptions?:RequestOptions ):Promise<Class> {\n\tconst promise:Promise<void> = this.isResolved() ? Promise.resolve() : this.resolve();\n\treturn promise.then( () => {\n\t\tthis.enabled = enabled;\n\t\treturn this.save( requestOptions );\n\t} );\n}\n\nexport default Class;\n"]}