{"version":3,"sources":["Auth/ACL.ts"],"names":[],"mappings":"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","file":"ACL.js","sourcesContent":["import * as ACE from \"./ACE\";\nimport * as NS from \"./../NS\";\nimport * as ObjectSchema from \"./../ObjectSchema\";\nimport * as Document from \"./../Document\";\nimport * as Pointer from \"./../Pointer\";\nimport * as Utils from \"./../Utils\";\n\nexport const RDF_CLASS:string = NS.CS.Class.AccessControlList;\n\nexport const SCHEMA:ObjectSchema.Class = {\n\t\"entries\": {\n\t\t\"@id\": NS.CS.Predicate.accessControlEntry,\n\t\t\"@type\": \"@id\",\n\t\t\"@container\": \"@set\",\n\t},\n\t\"accessTo\": {\n\t\t\"@id\": NS.CS.Predicate.accessTo,\n\t\t\"@type\": \"@id\",\n\t},\n\t\"inheritableEntries\": {\n\t\t\"@id\": NS.CS.Predicate.inheritableEntry,\n\t\t\"@type\": \"@id\",\n\t\t\"@container\": \"@set\",\n\t},\n};\n\nexport interface Class extends Document.Class {\n\taccessTo:Pointer.Class;\n\tentries?:ACE.Class[];\n\tinheritableEntries?:ACE.Class[];\n\n\t_parsePointer( element: string | Pointer.Class ):Pointer.Class;\n\n\tgrant( subject:string | Pointer.Class, subjectClass:string | Pointer.Class, permission:string | Pointer.Class ):void;\n\tgrant( subject:string | Pointer.Class, subjectClass:string | Pointer.Class, permissions:(string | Pointer.Class)[] ):void;\n\tgrant( subjects:(string | Pointer.Class)[], subjectClass:string | Pointer.Class, permission:string | Pointer.Class ):void;\n\tgrant( subjects:(string | Pointer.Class)[], subjectClass:string | Pointer.Class, permissions:(string | Pointer.Class)[] ):void;\n\n\tdeny( subject:string | Pointer.Class, subjectClass:string | Pointer.Class, permission:string | Pointer.Class ):void;\n\tdeny( subject:string | Pointer.Class, subjectClass:string | Pointer.Class, permissions:(string | Pointer.Class)[] ):void;\n\tdeny( subjects:(string | Pointer.Class)[], subjectClass:string | Pointer.Class, permission:string | Pointer.Class ):void;\n\tdeny( subjects:(string | Pointer.Class)[], subjectClass:string | Pointer.Class, permissions:(string | Pointer.Class)[] ):void;\n\n\tconfigureChildInheritance( granting:boolean, subject:string | Pointer.Class, subjectClass:string | Pointer.Class, permission:string | Pointer.Class ):void;\n\tconfigureChildInheritance( granting:boolean, subject:string | Pointer.Class, subjectClass:string | Pointer.Class, permissions:(string | Pointer.Class)[] ):void;\n\tconfigureChildInheritance( granting:boolean, subjects:(string | Pointer.Class)[], subjectClass:string | Pointer.Class, permission:string | Pointer.Class ):void;\n\tconfigureChildInheritance( granting:boolean, subjects:(string | Pointer.Class)[], subjectClass:string | Pointer.Class, permissions:(string | Pointer.Class)[] ):void;\n\n\tgrants( subject:string | Pointer.Class, permission:string | Pointer.Class ):boolean;\n\tdenies( subject:string | Pointer.Class, permission:string | Pointer.Class ):boolean;\n\tgetChildInheritance( subject:string | Pointer.Class, permissions:string | Pointer.Class ):boolean;\n\n\tremove( subject:string | Pointer.Class, permission:string | Pointer.Class ):void;\n\tremove( subject:string | Pointer.Class, permissions:(string | Pointer.Class)[] ):void;\n\tremoveChildInheritance( subject:string | Pointer.Class, permission:string | Pointer.Class ):void;\n\tremoveChildInheritance( subject:string | Pointer.Class, permissions:(string | Pointer.Class)[] ):void;\n}\n\nexport class Factory {\n\n\tstatic hasClassProperties( object:Object ):boolean {\n\t\treturn Utils.hasPropertyDefined( object, \"accessTo\" )\n\t\t\t&& Utils.hasFunction( object, \"_parsePointer\" )\n\t\t\t&& Utils.hasFunction( object, \"grant\" )\n\t\t\t&& Utils.hasFunction( object, \"deny\" )\n\t\t\t&& Utils.hasFunction( object, \"configureChildInheritance\" )\n\t\t\t&& Utils.hasFunction( object, \"grants\" )\n\t\t\t&& Utils.hasFunction( object, \"denies\" )\n\t\t\t&& Utils.hasFunction( object, \"getChildInheritance\" )\n\t\t\t&& Utils.hasFunction( object, \"remove\" )\n\t\t\t&& Utils.hasFunction( object, \"removeChildInheritance\" );\n\t}\n\n\tstatic decorate<T extends Object>( object:T ):T & Class {\n\t\tlet acl:T & Class = <any> object;\n\n\t\tif( Factory.hasClassProperties( acl ) ) return acl;\n\n\t\tObject.defineProperties( acl, {\n\t\t\t\"_parsePointer\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: parsePointer,\n\t\t\t},\n\t\t\t\"grant\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: grant,\n\t\t\t},\n\t\t\t\"deny\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: deny,\n\t\t\t},\n\t\t\t\"configureChildInheritance\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: configureChildInheritance,\n\t\t\t},\n\t\t\t\"grants\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: grants,\n\t\t\t},\n\t\t\t\"denies\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: denies,\n\t\t\t},\n\t\t\t\"getChildInheritance\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getChildInheritance,\n\t\t\t},\n\t\t\t\"remove\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: remove,\n\t\t\t},\n\t\t\t\"removeChildInheritance\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: removeChildInheritance,\n\t\t\t},\n\t\t} );\n\n\t\treturn acl;\n\t}\n\n}\n\nfunction parsePointer( element:string | Pointer.Class ):Pointer.Class {\n\treturn Pointer.Factory.is( element ) ? <Pointer.Class> element : Pointer.Factory.create( <string> element );\n}\n\nfunction parsePointers( elements:string | Pointer.Class | (string | Pointer.Class)[] ):Pointer.Class[] {\n\tlet elementsArray:(string | Pointer.Class)[] = Utils.isArray( elements ) ? <(string | Pointer.Class)[]> elements : [ <string | Pointer.Class> elements ];\n\treturn elementsArray.map( ( element:string | Pointer.Class ) => (this as Class)._parsePointer( element ) );\n}\n\nfunction configACE( granting:boolean, subject:Pointer.Class, subjectClass:Pointer.Class, permissions:Pointer.Class[], aces:ACE.Class[] ):ACE.Class {\n\tlet subjectACEs:ACE.Class[] = aces.filter( ace => ace.subjects.length === 1 && ace.granting === granting && Pointer.Util.areEqual( ace.subjects[ 0 ], subject ) );\n\n\tlet ace:ACE.Class;\n\tif( subjectACEs.length === 0 ) {\n\t\tace = ACE.Factory.createFrom( (<Class> this).createFragment(), granting, [ subject ], subjectClass, [] );\n\t\taces.push( ace );\n\t} else {\n\t\tace = subjectACEs[ 0 ];\n\t}\n\n\tArray.prototype.push.apply( ace.permissions, permissions );\n\treturn ace;\n}\nfunction configACEs( granting:boolean, subjects:string | Pointer.Class | (string | Pointer.Class)[], subjectsClass:string | Pointer.Class, permissions:string | Pointer.Class | (string | Pointer.Class)[], aces:ACE.Class[] ):void {\n\tlet subjectPointers:Pointer.Class[] = parsePointers.call( this, subjects );\n\tlet subjectClassPointer:Pointer.Class = (this as Class)._parsePointer( subjectsClass );\n\tlet permissionPointers:Pointer.Class[] = parsePointers.call( this, permissions );\n\n\tfor( let subject of subjectPointers ) {\n\t\tremovePermissionsFrom.call( this, subject, permissionPointers, aces );\n\t\tconfigACE.call( this, granting, subject, subjectClassPointer, permissionPointers, aces );\n\t}\n}\nfunction grant( subject:string | Pointer.Class, subjectClass:string | Pointer.Class, permission:string | Pointer.Class ):void;\nfunction grant( subject:string | Pointer.Class, subjectClass:string | Pointer.Class, permissions:(string | Pointer.Class)[] ):void;\nfunction grant( subjects:(string | Pointer.Class)[], subjectClass:string | Pointer.Class, permission:string | Pointer.Class ):void;\nfunction grant( subjects:(string | Pointer.Class)[], subjectClass:string | Pointer.Class, permissions:(string | Pointer.Class)[] ):void;\nfunction grant( subjects:string | Pointer.Class | (string | Pointer.Class)[], subjectsClass:string | Pointer.Class, permissions:string | Pointer.Class | (string | Pointer.Class)[] ):void {\n\tlet acl:Class = this;\n\tacl.entries = acl.entries || [];\n\tconfigACEs.call( this, true, subjects, subjectsClass, permissions, acl.entries );\n}\nfunction deny( subject:string | Pointer.Class, subjectClass:string | Pointer.Class, permission:string | Pointer.Class ):void;\nfunction deny( subject:string | Pointer.Class, subjectClass:string | Pointer.Class, permissions:(string | Pointer.Class)[] ):void;\nfunction deny( subjects:(string | Pointer.Class)[], subjectClass:string | Pointer.Class, permission:string | Pointer.Class ):void;\nfunction deny( subjects:(string | Pointer.Class)[], subjectClass:string | Pointer.Class, permissions:(string | Pointer.Class)[] ):void;\nfunction deny( subjects:string | Pointer.Class | (string | Pointer.Class)[], subjectsClass:string | Pointer.Class, permissions:string | Pointer.Class | (string | Pointer.Class)[] ):void {\n\tlet acl:Class = this;\n\tacl.entries = acl.entries || [];\n\tconfigACEs.call( this, false, subjects, subjectsClass, permissions, acl.entries );\n}\nfunction configureChildInheritance( granting:boolean, subject:string | Pointer.Class, subjectClass:string | Pointer.Class, permission:string | Pointer.Class ):void;\nfunction configureChildInheritance( granting:boolean, subject:string | Pointer.Class, subjectClass:string | Pointer.Class, permissions:(string | Pointer.Class)[] ):void;\nfunction configureChildInheritance( granting:boolean, subjects:(string | Pointer.Class)[], subjectClass:string | Pointer.Class, permission:string | Pointer.Class ):void;\nfunction configureChildInheritance( granting:boolean, subjects:(string | Pointer.Class)[], subjectClass:string | Pointer.Class, permissions:(string | Pointer.Class)[] ):void;\nfunction configureChildInheritance( granting:boolean, subjects:string | Pointer.Class | (string | Pointer.Class)[], subjectsClass:string | Pointer.Class, permissions:string | Pointer.Class | (string | Pointer.Class)[] ):void {\n\tlet acl:Class = this;\n\tacl.inheritableEntries = acl.inheritableEntries || [];\n\tconfigACEs.call( this, granting, subjects, subjectsClass, permissions, acl.inheritableEntries );\n}\n\nfunction grantingFrom( subject:Pointer.Class, permission:Pointer.Class, aces:ACE.Class[] ):boolean {\n\tlet subjectACEs:ACE.Class[] = aces.filter( ace => Utils.A.indexOf( ace.subjects, subject, Pointer.Util.areEqual ) !== - 1 );\n\n\tfor( let ace of subjectACEs ) {\n\t\tif( Utils.A.indexOf( ace.permissions, permission, Pointer.Util.areEqual ) !== - 1 )\n\t\t\treturn ace.granting;\n\t}\n\treturn null;\n}\nfunction getGranting( subject:string | Pointer.Class, permission:string | Pointer.Class, aces:ACE.Class[] ):boolean {\n\tif( ! aces ) return null;\n\n\tlet subjectPointer:Pointer.Class = (this as Class)._parsePointer( subject );\n\tlet permissionPointer:Pointer.Class = (this as Class)._parsePointer( permission );\n\n\treturn grantingFrom( subjectPointer, permissionPointer, aces );\n}\nfunction grants( subject:string | Pointer.Class, permission:string | Pointer.Class ):boolean {\n\tlet acl:Class = this;\n\treturn getGranting.call( this, subject, permission, acl.entries );\n}\nfunction denies( subject:string | Pointer.Class, permission:string | Pointer.Class ):boolean {\n\tlet acl:Class = this;\n\tlet granting:boolean = getGranting.call( this, subject, permission, acl.entries );\n\treturn granting === null ? null : ! granting;\n}\nfunction getChildInheritance( subject:string | Pointer.Class, permission:string | Pointer.Class ):boolean {\n\tlet acl:Class = this;\n\treturn getGranting.call( this, subject, permission, acl.inheritableEntries );\n}\n\nfunction removePermissionsFrom( subject:Pointer.Class, permissions:Pointer.Class[], aces:ACE.Class[] ):void {\n\tif( ! aces ) return;\n\n\tlet acl:Class = <Class> this;\n\tlet opposedAces:ACE.Class[] = acl.entries === aces ? acl.inheritableEntries : acl.entries;\n\n\tlet subjectACEs:ACE.Class[] = aces.filter( ace => Utils.A.indexOf( ace.subjects, subject, Pointer.Util.areEqual ) !== - 1 );\n\tfor( let ace of subjectACEs ) {\n\t\tif( opposedAces && Utils.A.indexOf( opposedAces, ace, Pointer.Util.areEqual ) !== - 1 ) {\n\t\t\taces.splice( Utils.A.indexOf( aces, ace, Pointer.Util.areEqual ), 1 );\n\n\t\t\tlet newACE:ACE.Class = configACE.call( this, ace.granting, subject, ace.subjectsClass, ace.permissions, aces );\n\t\t\tsubjectACEs.push( newACE );\n\t\t\tcontinue;\n\t\t}\n\n\t\tif( ace.subjects.length > 1 ) {\n\t\t\tace.subjects.splice( Utils.A.indexOf( ace.subjects, subject, Pointer.Util.areEqual ), 1 );\n\n\t\t\tlet newACE:ACE.Class = configACE.call( this, ace.granting, subject, ace.subjectsClass, ace.permissions, aces );\n\t\t\tsubjectACEs.push( newACE );\n\t\t\tcontinue;\n\t\t}\n\n\t\tfor( let permission of permissions ) {\n\t\t\tlet index:number = Utils.A.indexOf( ace.permissions, permission, Pointer.Util.areEqual );\n\n\t\t\tif( index === - 1 ) continue;\n\t\t\tace.permissions.splice( index, 1 );\n\t\t}\n\n\t\tif( ace.permissions.length === 0 ) {\n\t\t\taces.splice( Utils.A.indexOf( aces, ace, Pointer.Util.areEqual ), 1 );\n\t\t\tacl._removeFragment( ace );\n\t\t}\n\t}\n}\nfunction removePermissions( subject:string | Pointer.Class, permissions:string | Pointer.Class | (string | Pointer.Class)[], aces:ACE.Class[] ):void {\n\tlet subjectPointer:Pointer.Class = (this as Class)._parsePointer( subject );\n\tlet permissionPointers:Pointer.Class[] = parsePointers.call( this, permissions );\n\tremovePermissionsFrom.call( this, subjectPointer, permissionPointers, aces );\n}\nfunction remove( subject:string | Pointer.Class, permission:string | Pointer.Class ):void;\nfunction remove( subject:string | Pointer.Class, permissions:(string | Pointer.Class)[] ):void;\nfunction remove( subject:string | Pointer.Class, permissions:string | Pointer.Class | (string | Pointer.Class)[] ):void {\n\tlet acl:Class = this;\n\tremovePermissions.call( this, subject, permissions, acl.entries );\n}\nfunction removeChildInheritance( subject:string | Pointer.Class, permission:string | Pointer.Class ):void;\nfunction removeChildInheritance( subject:string | Pointer.Class, permissions:(string | Pointer.Class)[] ):void;\nfunction removeChildInheritance( subject:string | Pointer.Class, permissions:string | Pointer.Class | (string | Pointer.Class)[] ):void {\n\tlet acl:Class = this;\n\tremovePermissions.call( this, subject, permissions, acl.inheritableEntries );\n}\n\nexport default Class;\n"]}