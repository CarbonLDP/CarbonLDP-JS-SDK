{"version":3,"sources":["QueryDocuments/QueryContextPartial.ts"],"names":[],"mappings":";;;;;;;;;;;;AAIA,uDAAsD;AACtD,+CAA8C;AAG9C;IAAyC,uCAAY;IAIpD,6BAAa,QAAyB,EAAE,OAAuC;QAA/E,YACC,kBAAO,OAAO,CAAE,SAEhB;QADA,KAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;;IAC3B,CAAC;IAED,0CAAY,GAAZ,UAAc,MAAa,EAAE,IAAY;QACxC,IAAI,IAAI,KAAK,KAAK,CAAC;YAAG,OAAO,iBAAM,YAAY,YAAE,MAAM,CAAE,CAAC;QAE1D,IAAM,KAAK,GAAY,IAAI,CAAC,KAAK,CAAE,KAAK,CAAE,CAAC,KAAK,CAAE,CAAC,CAAE,CAAC;QACtD,IAAI,aAAa,GAAoB,IAAI,CAAC,SAAS,CAAC;QACpD,OAAO,KAAK,CAAC,MAAM,EAAG;YACrB,IAAM,IAAI,GAAU,KAAK,CAAC,KAAK,EAAE,CAAC;YAClC,IAAM,MAAM,GAAS,KAAK,CAAC,OAAO,CAAE,aAAa,CAAE,IAAI,CAAE,CAAE,CAAC,CAAC;gBAC5D,aAAa,CAAE,IAAI,CAAE,CAAC,CAAC,CAAC,CAAE,aAAa,CAAE,IAAI,CAAE,CAAE,CAAC;YAEnD,aAAa,GAAG,MAAM,CAAC,IAAI,CAAE,mCAAgB,CAAC,EAAE,CAAE,CAAC;YACnD,IAAI,CAAE,aAAa;gBAAG,OAAO,iBAAM,YAAY,YAAE,MAAM,CAAE,CAAC;SAC1D;QAED,OAAO,aAAa,CAAC,kBAAkB,CAAC,MAAM,CAAC;IAChD,CAAC;IACF,0BAAC;AAAD,CAzBA,AAyBC,CAzBwC,2BAAY,GAyBpD;AAzBY,kDAAmB","file":"QueryContextPartial.js","sourcesContent":["import { AbstractContext } from \"../Context/AbstractContext\";\n\nimport { DigestedObjectSchema } from \"../ObjectSchema/DigestedObjectSchema\";\n\nimport { QueryablePointer } from \"./QueryablePointer\";\nimport { QueryContext } from \"./QueryContext\";\n\n\nexport class QueryContextPartial extends QueryContext {\n\n\tprivate readonly _resource:QueryablePointer;\n\n\tconstructor( resource:QueryablePointer, context?:AbstractContext<any, any, any> ) {\n\t\tsuper( context );\n\t\tthis._resource = resource;\n\t}\n\n\tgetSchemaFor( object:object, path?:string ):DigestedObjectSchema {\n\t\tif( path === void 0 ) return super.getSchemaFor( object );\n\n\t\tconst parts:string[] = path.split( /\\./g ).slice( 1 );\n\t\tlet schemaLibrary:QueryablePointer = this._resource;\n\t\twhile( parts.length ) {\n\t\t\tconst part:string = parts.shift();\n\t\t\tconst values:any[] = Array.isArray( schemaLibrary[ part ] ) ?\n\t\t\t\tschemaLibrary[ part ] : [ schemaLibrary[ part ] ];\n\n\t\t\tschemaLibrary = values.find( QueryablePointer.is );\n\t\t\tif( ! schemaLibrary ) return super.getSchemaFor( object );\n\t\t}\n\n\t\treturn schemaLibrary._queryableMetadata.schema;\n\t}\n}\n"]}