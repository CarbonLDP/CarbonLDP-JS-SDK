{"version":3,"sources":["SPARQL/QueryDocument/QueryMembersBuilder.ts"],"names":[],"mappings":"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","file":"QueryMembersBuilder.js","sourcesContent":["import { LimitToken, OffsetToken, OptionalToken, OrderToken, PatternToken, SelectToken } from \"sparqler/tokens\";\n\nimport * as QueryDocumentBuilder from \"./QueryDocumentBuilder\";\nimport * as QueryProperty from \"./QueryProperty\";\n\nexport class Class extends QueryDocumentBuilder.Class {\n\n\torderAscendantBy( property:QueryProperty.Class ):this {\n\t\treturn this._orderBy( property, \"ASC\" );\n\t}\n\n\torderDescendantBy( property:QueryProperty.Class ):this {\n\t\treturn this._orderBy( property, \"DESC\" );\n\t}\n\n\torderBy( property:QueryProperty.Class ):this {\n\t\treturn this._orderBy( property );\n\t}\n\n\tlimit( limit:number ):this {\n\t\tconst select:SelectToken = this._document.getPatterns()[ 0 ] as SelectToken;\n\n\t\tconst limitIndex:number = select.modifiers.findIndex( pattern => pattern.token === \"limit\" );\n\t\tif( limitIndex !== - 1 ) select.modifiers.splice( limitIndex, 1 );\n\n\t\tselect.addModifier( new LimitToken( limit ) );\n\n\t\treturn this;\n\t}\n\n\toffset( offset:number ):this {\n\t\tconst select:SelectToken = this._document.getPatterns()[ 0 ] as SelectToken;\n\n\t\tconst offsetIndex:number = select.modifiers.findIndex( pattern => pattern.token === \"offset\" );\n\t\tif( offsetIndex !== - 1 ) select.modifiers.splice( offsetIndex, 1 );\n\n\t\tselect.addModifier( new OffsetToken( offset ) );\n\t\treturn this;\n\t}\n\n\tprivate _orderBy( property:QueryProperty.Class, flow?:\"ASC\" | \"DESC\" ):this {\n\t\tif( property.name.substr( this._document.name.length + 1 ).includes( \".\" ) ) throw new Error( `Property \"${ property.name }\" isn't a direct property of a member.` );\n\n\t\tconst select:SelectToken = this._document.getPatterns()[ 0 ] as SelectToken;\n\t\tconst orderIndex:number = select.modifiers.findIndex( pattern => pattern.token === \"order\" );\n\n\t\tif( orderIndex !== - 1 ) {\n\t\t\tselect.modifiers.splice( orderIndex, 1 );\n\n\t\t\tconst optionalIndex:number = select.patterns.findIndex( pattern => pattern.token === \"optional\" );\n\t\t\tselect.patterns.splice( optionalIndex, 1 );\n\t\t}\n\n\t\tselect.addModifier( new OrderToken( property.variable, flow ) );\n\n\t\tconst propertyTriple:PatternToken = ( property.getPatterns()\n\t\t\t.find( pattern => pattern.token === \"optional\" ) as OptionalToken )\n\t\t\t.patterns[ 0 ];\n\n\t\tselect.addPattern( new OptionalToken()\n\t\t\t.addPattern( propertyTriple )\n\t\t);\n\n\t\treturn this;\n\t}\n}\n\nexport default Class;\n\n"]}