{"version":3,"sources":["SPARQL/QueryDocument/QueryProperty.ts"],"names":[],"mappings":";;AAAA,0CAA4E;AAE5E,mDAA0D;AAI1D,IAAY,YAGX;AAHD,WAAY,YAAY;IACvB,+CAAI,CAAA;IACJ,qDAAO,CAAA;AACR,CAAC,EAHW,YAAY,GAAZ,oBAAY,KAAZ,oBAAY,QAGvB;AAED;IAYC,eAAa,OAA0B,EAAE,IAAW;QACnD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,WAAW,CAAE,IAAI,CAAE,CAAC;QAE5C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,KAAK,GAAG,YAAY,CAAC,OAAO,CAAC;QAElC,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;IACrB,CAAC;IAED,0BAAU,GAAV;QAAY,kBAA0B;aAA1B,UAA0B,EAA1B,qBAA0B,EAA1B,IAA0B;YAA1B,6BAA0B;;QACrC,CAAA,KAAA,IAAI,CAAC,SAAS,CAAA,CAAC,IAAI,WAAK,QAAQ,EAAG;QACnC,MAAM,CAAC,IAAI,CAAC;;IACb,CAAC;IAED,2BAAW,GAAX;QACC,EAAE,CAAA,CAAE,CAAE,IAAI,CAAC,SAAU,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;QAE7C,MAAM,CAAC,CAAE,CAAA,KAAA,IAAI,sBAAa,EAAE,CAAA,CAC1B,UAAU,WAAK,IAAI,CAAC,SAAS,GAC9B,CAAC;;IACH,CAAC;IAED,yBAAS,GAAT;QACC,EAAE,CAAA,CAAE,IAAI,CAAC,OAAQ,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;QAEvC,IAAI,CAAC,OAAO,GAAG,IAAI,mCAAoB,EAAE,CAAC;QAC1C,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAE,EAAE,CAAE,IAAI,IAAI,CAAC;QAE3D,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;IACrB,CAAC;IAED,0BAAU,GAAV;QACC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IACvB,CAAC;IAED,2BAAW,GAAX,UAAa,QAAgB;QAC5B,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,MAAM,CAAC,IAAI,CAAC;IACb,CAAC;IAED,uBAAO,GAAP;QACC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACnB,CAAC;IAED,uBAAO,GAAP,UAAS,IAAiB;QACzB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,MAAM,CAAC,IAAI,CAAC;IACb,CAAC;IAED,yBAAS,GAAT;QACC,MAAM,CAAC,IAAI,CAAC,SAAS;aACnB,IAAI,CAAE,UAAA,OAAO,IAAI,OAAA,OAAO,YAAY,qBAAY,EAA/B,CAA+B,CAAkB,CAAC;IACtE,CAAC;IAED,wBAAQ,GAAR;QACC,MAAM,CAAC,KAAI,IAAI,CAAC,QAAW,CAAC;IAC7B,CAAC;IACF,YAAC;AAAD,CAvEA,AAuEC,IAAA;AAvEY,sBAAK;AAyElB,kBAAe,KAAK,CAAC","file":"QueryProperty.js","sourcesContent":["import { OptionalToken, PatternToken, SubjectToken } from \"sparqler/tokens\";\n\nimport { DigestedObjectSchema } from \"../../ObjectSchema\";\nimport * as QueryContext from \"./QueryContext\";\nimport * as QueryVariable from \"./QueryVariable\";\n\nexport enum PropertyType {\n\tFULL,\n\tPARTIAL,\n}\n\nexport class Class {\n\treadonly name:string;\n\treadonly variable:QueryVariable.Class;\n\n\tprivate _context:QueryContext.Class;\n\n\tprivate _optional:boolean;\n\tprivate _type?:PropertyType;\n\n\tprivate _patterns:PatternToken[];\n\tprivate _schema:DigestedObjectSchema;\n\n\tconstructor( context:QueryContext.Class, name:string ) {\n\t\tthis.name = name;\n\t\tthis.variable = context.getVariable( name );\n\n\t\tthis._optional = true;\n\t\tthis._type = PropertyType.PARTIAL;\n\n\t\tthis._context = context;\n\t\tthis._patterns = [];\n\t}\n\n\taddPattern( ...patterns:PatternToken[] ):this {\n\t\tthis._patterns.push( ...patterns );\n\t\treturn this;\n\t}\n\n\tgetPatterns():PatternToken[] {\n\t\tif( ! this._optional ) return this._patterns;\n\n\t\treturn [ new OptionalToken()\n\t\t\t.addPattern( ...this._patterns ),\n\t\t];\n\t}\n\n\tgetSchema():DigestedObjectSchema {\n\t\tif( this._schema ) return this._schema;\n\n\t\tthis._schema = new DigestedObjectSchema();\n\t\tthis._schema.vocab = this._context.expandIRI( \"\" ) || null;\n\n\t\treturn this._schema;\n\t}\n\n\tisOptional():boolean {\n\t\treturn this._optional;\n\t}\n\n\tsetOptional( optional:boolean ):this {\n\t\tthis._optional = optional;\n\t\treturn this;\n\t}\n\n\tgetType():PropertyType {\n\t\treturn this._type;\n\t}\n\n\tsetType( type:PropertyType ):this {\n\t\tthis._type = type;\n\t\treturn this;\n\t}\n\n\tgetTriple():SubjectToken {\n\t\treturn this._patterns\n\t\t\t.find( pattern => pattern instanceof SubjectToken ) as SubjectToken;\n\t}\n\n\ttoString():string {\n\t\treturn `${ this.variable }`;\n\t}\n}\n\nexport default Class;\n"]}