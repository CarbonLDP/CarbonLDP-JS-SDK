{"version":3,"sources":["App/Context.ts"],"names":[],"mappings":";;;;;;AAAA,wDAAmD;AACnD,+BAA0B;AAG1B,+CAAiD;AACjD,8BAAgC;AAChC,6BAA+B;AAE/B;IAA2B,yBAAe;IAQzC,eAAa,aAAqB,EAAE,GAAgB;QAApD,YACC,kBAAO,aAAa,CAAE,SAWtB;QATA,KAAI,CAAC,IAAI,GAAG,IAAI,cAAI,CAAE,KAAI,CAAE,CAAC;QAC7B,KAAI,CAAC,SAAS,CAAC,kBAAkB,CAAC,GAAG,CAAE,IAAI,CAAC,SAAS,EAAE,EAAE,SAAS,EAAE,aAAa,CAAC,OAAO,CAAC,QAAQ,EAAE,UAAU,EAAE,CAAE,KAAI,CAAC,IAAI,CAAC,KAAK,CAAE,EAAE,CAAE,CAAC;QAExI,KAAI,CAAC,IAAI,GAAG,GAAG,CAAC;QAChB,KAAI,CAAC,IAAI,GAAG,KAAI,CAAC,OAAO,CAAE,KAAI,CAAC,GAAG,CAAE,CAAC;QAGrC,KAAI,CAAC,SAAS,CAAC,aAAa,CAAE,GAAG,CAAC,aAAa,CAAE,CAAC;QAClD,GAAG,CAAC,aAAa,GAAS,KAAI,CAAC,SAAS,CAAC,UAAU,CAAE,GAAG,CAAC,aAAa,CAAC,EAAE,CAAE,CAAC;;IAC7E,CAAC;IAjBD,sBAAW,sBAAG;aAAd,cAAgC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;;OAAA;IAAA,CAAC;IAmBpD,uBAAO,GAAP,UAAS,GAAU;QAClB,EAAE,CAAA,CAAE,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAE,GAAG,CAAG,CAAC;YAAC,MAAM,CAAC,GAAG,CAAC;QAEhD,IAAI,QAAQ,GAAU,IAAI,CAAC,aAAa,CAAC,OAAO,CAAE,IAAI,CAAC,IAAI,CAAE,CAAC;QAC9D,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAE,QAAQ,EAAE,GAAG,CAAE,CAAC;IAC9C,CAAC;IAEO,uBAAO,GAAf,UAAiB,QAAqB;QACrC,MAAM,CAAC,QAAQ,CAAC,aAAa,CAAC,EAAE,CAAC;IAClC,CAAC;IACF,YAAC;AAAD,CAhCA,AAgCC,CAhC0B,yBAAe,GAgCzC;AAhCY,sBAAK;;AAkClB,kBAAe,KAAK,CAAC","file":"Context.js","sourcesContent":["import AbstractContext from \"./../AbstractContext\";\nimport Auth from \"./Auth\";\nimport Context from \"./../Context\";\nimport PersistedApp from \"./../PersistedApp\";\nimport * as PersistedRole from \"./PersistedRole\";\nimport * as RDF from \"./../RDF\";\nimport * as Role from \"./Role\";\n\nexport class Class extends AbstractContext {\n\tpublic auth:Auth;\n\n\tpublic get app():PersistedApp { return this._app; };\n\n\tprivate _app:PersistedApp;\n\tprivate base:string;\n\n\tconstructor( parentContext:Context, app:PersistedApp ) {\n\t\tsuper( parentContext );\n\n\t\tthis.auth = new Auth( this );\n\t\tthis.documents.documentDecorators.set( Role.RDF_CLASS, { decorator: PersistedRole.Factory.decorate, parameters: [ this.auth.roles ] } );\n\n\t\tthis._app = app;\n\t\tthis.base = this.getBase( this.app );\n\n\t\t// Reassign the rootContainer pointer because the previous one was created in the SDKContext and this one must be resolved by this context.\n\t\tthis.documents.removePointer( app.rootContainer );\n\t\tapp.rootContainer = <any> this.documents.getPointer( app.rootContainer.id );\n\t}\n\n\tresolve( uri:string ):string {\n\t\tif( RDF.URI.Util.isAbsolute( uri ) ) return uri;\n\n\t\tlet finalURI:string = this.parentContext.resolve( this.base );\n\t\treturn RDF.URI.Util.resolve( finalURI, uri );\n\t}\n\n\tprivate getBase( resource:PersistedApp ):string {\n\t\treturn resource.rootContainer.id;\n\t}\n}\n\nexport default Class;\n"]}