{"version":3,"sources":["GlobalContext.ts"],"names":[],"mappings":"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","file":"GlobalContext.js","sourcesContent":["import { AbstractContext } from \"./AbstractContext\";\nimport {\n\tACE,\n\tACL,\n\tAuthenticatedUserInformationAccessor,\n\tAuthenticatedUserMetadata,\n\tCredentialsSet,\n\tLDAPCredentials,\n\tTokenCredentials,\n\tUser,\n\tUsernameAndPasswordCredentials\n} from \"./Auth\";\nimport { Document } from \"./Document\";\nimport {\n\tAddMemberAction,\n\tDocumentMetadata,\n\tError,\n\tErrorResponse,\n\tMap,\n\tMapEntry,\n\tRemoveMemberAction,\n\tResponseMetadata,\n\tValidationError\n} from \"./LDP\";\nimport {\n\tAccessPointCreated,\n\tChildCreated,\n\tDocumentCreatedDetails,\n\tDocumentDeleted,\n\tDocumentModified,\n\tMemberAdded,\n\tMemberAddedDetails,\n\tMemberRemoved,\n\tMemberRemovedDetails,\n} from \"./Messaging\";\nimport { DigestedObjectSchema } from \"./ObjectSchema\";\nimport { Pointer } from \"./Pointer\";\nimport { ProtectedDocument } from \"./ProtectedDocument\";\nimport { RegistryService } from \"./Registry\";\nimport {\n\tValidationReport,\n\tValidationResult,\n} from \"./SHACL\";\nimport { QueryMetadata } from \"./SPARQL/QueryDocument\";\nimport {\n\tPlatformInstance,\n\tPlatformMetadata,\n} from \"./System\";\n\n\nexport class GlobalContext extends AbstractContext<Pointer, undefined> {\n\tstatic readonly instance:GlobalContext = new GlobalContext();\n\n\treadonly registry:RegistryService<Pointer, GlobalContext>;\n\treadonly repository:undefined = undefined;\n\treadonly auth:undefined = undefined;\n\n\tprotected _baseURI:\"\" = \"\";\n\tprotected _parentContext:undefined = undefined;\n\n\n\tprivate constructor() {\n\t\tsuper();\n\t\tthis._generalObjectSchema = new DigestedObjectSchema();\n\t\tthis.registry = new RegistryService<Pointer, GlobalContext>( Pointer, this );\n\n\t\tthis._registerDefaultObjectSchemas();\n\t\tthis._registerDefaultDecorators();\n\t}\n\n\n\tprivate _registerDefaultObjectSchemas():void {\n\t\tthis\n\t\t\t.extendObjectSchema( Document.TYPE, Document.SCHEMA )\n\t\t\t.extendObjectSchema( ProtectedDocument.TYPE, ProtectedDocument.SCHEMA )\n\n\t\t\t.extendObjectSchema( PlatformMetadata.TYPE, PlatformMetadata.SCHEMA )\n\t\t\t.extendObjectSchema( PlatformInstance.TYPE, PlatformInstance.SCHEMA )\n\n\t\t\t.extendObjectSchema( AddMemberAction.TYPE, AddMemberAction.SCHEMA )\n\t\t\t.extendObjectSchema( Error.TYPE, Error.SCHEMA )\n\t\t\t.extendObjectSchema( Map.TYPE, Map.SCHEMA )\n\t\t\t.extendObjectSchema( MapEntry.SCHEMA )\n\t\t\t.extendObjectSchema( DocumentMetadata.TYPE, DocumentMetadata.SCHEMA )\n\t\t\t.extendObjectSchema( ErrorResponse.TYPE, ErrorResponse.SCHEMA )\n\t\t\t.extendObjectSchema( RemoveMemberAction.TYPE, RemoveMemberAction.SCHEMA )\n\t\t\t.extendObjectSchema( ResponseMetadata.TYPE, ResponseMetadata.SCHEMA )\n\t\t\t.extendObjectSchema( ValidationError.TYPE, ValidationError.SCHEMA )\n\n\t\t\t.extendObjectSchema( ACE.TYPE, ACE.SCHEMA )\n\t\t\t.extendObjectSchema( ACL.TYPE, ACL.SCHEMA )\n\t\t\t.extendObjectSchema( AuthenticatedUserInformationAccessor.TYPE, AuthenticatedUserInformationAccessor.SCHEMA )\n\t\t\t.extendObjectSchema( AuthenticatedUserMetadata.TYPE, AuthenticatedUserMetadata.SCHEMA )\n\t\t\t.extendObjectSchema( User.TYPE, User.SCHEMA )\n\t\t\t.extendObjectSchema( TokenCredentials.TYPE, TokenCredentials.SCHEMA )\n\t\t\t.extendObjectSchema( CredentialsSet.TYPE, CredentialsSet.SCHEMA )\n\t\t\t.extendObjectSchema( UsernameAndPasswordCredentials.TYPE, UsernameAndPasswordCredentials.SCHEMA )\n\t\t\t.extendObjectSchema( LDAPCredentials.TYPE, LDAPCredentials.SCHEMA )\n\n\t\t\t.extendObjectSchema( ValidationReport.TYPE, ValidationReport.SCHEMA )\n\t\t\t.extendObjectSchema( ValidationResult.TYPE, ValidationResult.SCHEMA )\n\n\t\t\t.extendObjectSchema( QueryMetadata.TYPE, QueryMetadata.SCHEMA )\n\n\t\t\t.extendObjectSchema( AccessPointCreated.TYPE, AccessPointCreated.SCHEMA )\n\t\t\t.extendObjectSchema( ChildCreated.TYPE, ChildCreated.SCHEMA )\n\t\t\t.extendObjectSchema( DocumentCreatedDetails.TYPE, DocumentCreatedDetails.SCHEMA )\n\t\t\t.extendObjectSchema( DocumentDeleted.TYPE, DocumentDeleted.SCHEMA )\n\t\t\t.extendObjectSchema( DocumentModified.TYPE, DocumentModified.SCHEMA )\n\t\t\t.extendObjectSchema( MemberAdded.TYPE, MemberAdded.SCHEMA )\n\t\t\t.extendObjectSchema( MemberAddedDetails.TYPE, MemberAddedDetails.SCHEMA )\n\t\t\t.extendObjectSchema( MemberRemoved.TYPE, MemberRemoved.SCHEMA )\n\t\t\t.extendObjectSchema( MemberRemovedDetails.TYPE, MemberRemovedDetails.SCHEMA )\n\t\t;\n\t}\n\n\tprivate _registerDefaultDecorators():void {\n\t\tthis.registry.documentDecorators\n\t\t\t.set( ProtectedDocument.TYPE, ProtectedDocument.decorate )\n\t\t\t.set( ACL.TYPE, ACL.decorate )\n\t\t\t.set( User.TYPE, User.decorate )\n\t\t;\n\t}\n}\n"]}