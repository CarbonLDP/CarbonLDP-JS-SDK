{"version":3,"sources":["Document/factory.ts"],"names":[],"mappings":"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","file":"factory.js","sourcesContent":["import { IllegalArgumentError } from \"../Errors\";\nimport { Fragment } from \"../Fragment\";\nimport { Resource } from \"../Resource\";\nimport {\n\thasFunction,\n\thasPropertyDefined,\n\tisObject\n} from \"../Utils\";\n\nimport { Document } from \"./\";\nimport {\n\tconvertNestedObjects,\n\tcreateFragment,\n\tcreateNamedFragment,\n\tgetFragment,\n\tgetFragments,\n\tgetNamedFragment,\n\tgetPointer,\n\thasFragment,\n\thasPointer,\n\tinScope,\n\tnormalize,\n\tremoveFragment,\n\tremoveNamedFragment,\n\ttoJSON,\n} from \"./prototype\";\n\nexport const isDecoratedDocument:( object:object ) => object is Document = ( object ):object is Document =>\n\tisObject( object ) &&\n\thasPropertyDefined( object, \"_fragmentsIndex\" ) &&\n\n\thasFunction( object, \"_normalize\" ) &&\n\thasFunction( object, \"_removeFragment\" ) &&\n\n\thasFunction( object, \"hasPointer\" ) &&\n\thasFunction( object, \"getPointer\" ) &&\n\n\thasFunction( object, \"inScope\" ) &&\n\n\thasFunction( object, \"hasFragment\" ) &&\n\thasFunction( object, \"getFragment\" ) &&\n\thasFunction( object, \"getNamedFragment\" ) &&\n\thasFunction( object, \"getFragments\" ) &&\n\thasFunction( object, \"createFragment\" ) &&\n\thasFunction( object, \"createNamedFragment\" ) &&\n\thasFunction( object, \"removeNamedFragment\" ) &&\n\n\thasFunction( object, \"toJSON\" )\n;\n\n\nexport const isDocument:( object:object ) => object is Document = ( object ):object is Document =>\n\tResource.is( object ) &&\n\tisDecoratedDocument( object )\n;\n\nexport const createDocument:() => Document = () => {\n\treturn createDocumentFrom( {} );\n};\n\nexport const createDocumentFrom:<T extends object>( object:T ) => T & Document = <T extends object>( object:T ) => {\n\tif( isDocument( object ) ) throw new IllegalArgumentError( \"The object provided is already a Document.\" );\n\n\tconst document:T & Document = decorateDocument<T>( object );\n\tconvertNestedObjects( document, document );\n\n\treturn document;\n};\n\nexport const decorateDocument:<T extends object>( object:T ) => T & Document = <T extends object>( object:T ) => {\n\tif( isDecoratedDocument( object ) ) return object;\n\n\tResource.decorate( object );\n\n\tObject.defineProperties( object, {\n\t\t\"_fragmentsIndex\": {\n\t\t\tconfigurable: true,\n\t\t\tvalue: new Map<string, Fragment>(),\n\t\t},\n\n\t\t\"_normalize\": {\n\t\t\tconfigurable: true,\n\t\t\tvalue: normalize,\n\t\t},\n\t\t\"_removeFragment\": {\n\t\t\tconfigurable: true,\n\t\t\tvalue: removeFragment,\n\t\t},\n\n\t\t\"hasPointer\": {\n\t\t\tconfigurable: true,\n\t\t\tvalue: hasPointer,\n\t\t},\n\t\t\"getPointer\": {\n\t\t\tconfigurable: true,\n\t\t\tvalue: getPointer,\n\t\t},\n\t\t\"inScope\": {\n\t\t\tconfigurable: true,\n\t\t\tvalue: inScope,\n\t\t},\n\n\t\t\"hasFragment\": {\n\t\t\tconfigurable: true,\n\t\t\tvalue: hasFragment,\n\t\t},\n\t\t\"getFragment\": {\n\t\t\tconfigurable: true,\n\t\t\tvalue: getFragment,\n\t\t},\n\t\t\"getNamedFragment\": {\n\t\t\tconfigurable: true,\n\t\t\tvalue: getNamedFragment,\n\t\t},\n\t\t\"getFragments\": {\n\t\t\tconfigurable: true,\n\t\t\tvalue: getFragments,\n\t\t},\n\t\t\"createFragment\": {\n\t\t\tconfigurable: true,\n\t\t\tvalue: createFragment,\n\t\t},\n\t\t\"createNamedFragment\": {\n\t\t\tconfigurable: true,\n\t\t\tvalue: createNamedFragment,\n\t\t},\n\t\t\"removeNamedFragment\": {\n\t\t\tconfigurable: true,\n\t\t\tvalue: removeNamedFragment,\n\t\t},\n\t\t\"toJSON\": {\n\t\t\tconfigurable: true,\n\t\t\tvalue: toJSON,\n\t\t},\n\t} );\n\n\treturn object as any;\n};\n"]}