{"version":3,"sources":["Document/PersistedDocument.ts"],"names":[],"mappings":";;AACA,gCAAyC;AAEzC,wCAAgD;AAChD,yDAAwD;AACxD,kCAGkB;AAelB,IAAM,SAAS,GAA2E;IACzF,SAAS,EAAE,KAAK;IAChB,KAAK,EAAE,KAAK,CAAC;IAGb,UAAU,EAAV;QACC,OAAO,CAAE,CAAE,IAAI,CAAC,SAAS,CAAC;IAC3B,CAAC;IAED,UAAU,EAAV;QACC,OAAO,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC;IAC5B,CAAC;CACD,CAAC;AAcW,QAAA,iBAAiB,GAA4B;IACzD,SAAS,WAAA;IAET,WAAW,EAAX,UAAa,MAAa;QACzB,OAAO,gBAAQ,CAAE,MAAM,CAAE;eACrB,qBAAc;iBACf,iBAAiB,CAAE,SAAS,EAAE,MAAM,CAAE,CACvC;IACH,CAAC;IAED,QAAQ,EAAR,UAA4B,MAAQ;QACnC,IAAI,yBAAiB,CAAC,WAAW,CAAE,MAAM,CAAE;YAAG,OAAO,MAAM,CAAC;QAE5D,IAAM,QAAQ,GAA6C,qBAAc;aACvE,gBAAgB,CAAE,MAAM,EAAE,qCAAiB,EAAE,4BAAiB,CAAE,CAAC;QAEnE,OAAO,qBAAc;aACnB,oBAAoB,CAAE,SAAS,EAAE,QAAQ,CAAE,CAAC;IAC/C,CAAC;IAGD,EAAE,EAAF,UAAI,KAAS;QACZ,OAAO,qCAAiB,CAAC,EAAE,CAAE,KAAK,CAAE;eAChC,4BAAiB,CAAC,WAAW,CAAE,KAAK,CAAE;eACtC,yBAAiB,CAAC,WAAW,CAAE,KAAK,CAAE,CACxC;IACH,CAAC;CACD,CAAC","file":"PersistedDocument.js","sourcesContent":["import { CarbonLDP } from \"../CarbonLDP\";\nimport { ModelDecorator } from \"../core\";\nimport { DocumentsRegistry } from \"../Registry\";\nimport { PersistedResource } from \"../Resource\";\nimport { TransientDocument } from \"./TransientDocument\";\nimport {\n\tisObject,\n\tPickSelfProps\n} from \"../Utils\";\n\n\nexport interface PersistedDocument extends TransientDocument, PersistedResource {\n\t_context:CarbonLDP | undefined;\n\t_registry:DocumentsRegistry | undefined;\n\n\t_resolved:boolean | undefined;\n\t_eTag:string | undefined | null;\n\n\tisResolved():boolean;\n\tisOutdated():boolean;\n}\n\n\nconst PROTOTYPE:PickSelfProps<PersistedDocument, TransientDocument & PersistedResource> = {\n\t_resolved: false,\n\t_eTag: void 0,\n\n\n\tisResolved( this:PersistedDocument ):boolean {\n\t\treturn ! ! this._resolved;\n\t},\n\n\tisOutdated( this:PersistedDocument ):boolean {\n\t\treturn this._eTag === null;\n\t},\n};\n\nexport interface PersistedDocumentFactory {\n\tPROTOTYPE:PickSelfProps<PersistedDocument, TransientDocument & PersistedResource>;\n\n\n\tisDecorated( object:object ):object is PersistedDocument;\n\n\tdecorate<T extends object>( object:T ):T & PersistedDocument;\n\n\n\tis( value:any ):value is PersistedDocument;\n}\n\nexport const PersistedDocument:PersistedDocumentFactory = {\n\tPROTOTYPE,\n\n\tisDecorated( object:object ):object is PersistedDocument {\n\t\treturn isObject( object )\n\t\t\t&& ModelDecorator\n\t\t\t\t.hasPropertiesFrom( PROTOTYPE, object )\n\t\t\t;\n\t},\n\n\tdecorate<T extends object>( object:T ):T & PersistedDocument {\n\t\tif( PersistedDocument.isDecorated( object ) ) return object;\n\n\t\tconst resource:T & TransientDocument & PersistedResource = ModelDecorator\n\t\t\t.decorateMultiple( object, TransientDocument, PersistedResource );\n\n\t\treturn ModelDecorator\n\t\t\t.definePropertiesFrom( PROTOTYPE, resource );\n\t},\n\n\n\tis( value:any ):value is PersistedDocument {\n\t\treturn TransientDocument.is( value )\n\t\t\t&& PersistedResource.isDecorated( value )\n\t\t\t&& PersistedDocument.isDecorated( value )\n\t\t\t;\n\t},\n};\n"]}