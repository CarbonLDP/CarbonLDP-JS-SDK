{"version":3,"sources":["JSONLD/Converter.ts"],"names":[],"mappings":"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","file":"Converter.js","sourcesContent":["import { IllegalArgumentError } from \"../Errors/IllegalArgumentError\";\n\nimport { ContainerType } from \"../ObjectSchema/ContainerType\";\nimport { DigestedObjectSchema } from \"../ObjectSchema/DigestedObjectSchema\";\nimport { DigestedObjectSchemaProperty } from \"../ObjectSchema/DigestedObjectSchemaProperty\";\n\nimport { Pointer } from \"../Pointer/Pointer\";\nimport { PointerLibrary } from \"../Pointer/PointerLibrary\";\n\nimport { RDFList } from \"../RDF/List\";\n\nimport { Serializer } from \"../RDF/Literal/Serializer\";\nimport * as XSDSerializers from \"../RDF/Literal/Serializers/XSD\";\n\nimport { RDFNode } from \"../RDF/Node\";\nimport { URI } from \"../RDF/URI\";\nimport { RDFValue } from \"../RDF/Value\";\n\nimport { forEachOwnProperty, isNull, isObject, isString, MapUtils } from \"../Utils\";\n\nimport { XSD } from \"../Vocabularies/XSD\";\n\nimport { guessXSDType } from \"./Utils\";\n\n\n// TODO: Use Literal.Parsers to parse literals\nexport class JSONLDConverter {\n\tprivate readonly _literalSerializers:Map<string, Serializer>;\n\n\tget literalSerializers():Map<string, Serializer> { return this._literalSerializers; }\n\n\tprivate static getDefaultSerializers():Map<string, Serializer> {\n\t\tlet literalSerializers:Map<string, Serializer> = new Map<string, Serializer>();\n\n\t\tliteralSerializers.set( XSD.date, XSDSerializers.dateSerializer );\n\t\tliteralSerializers.set( XSD.dateTime, XSDSerializers.dateTimeSerializer );\n\t\tliteralSerializers.set( XSD.time, XSDSerializers.timeSerializer );\n\t\tliteralSerializers.set( XSD.integer, XSDSerializers.integerSerializer );\n\t\tliteralSerializers.set( XSD.int, XSDSerializers.integerSerializer );\n\t\tliteralSerializers.set( XSD.unsignedInt, XSDSerializers.unsignedIntegerSerializer );\n\t\tliteralSerializers.set( XSD.long, XSDSerializers.longSerializer );\n\t\tliteralSerializers.set( XSD.unsignedLong, XSDSerializers.unsignedLongSerializer );\n\t\tliteralSerializers.set( XSD.float, XSDSerializers.floatSerializer );\n\t\tliteralSerializers.set( XSD.double, XSDSerializers.floatSerializer );\n\t\tliteralSerializers.set( XSD.boolean, XSDSerializers.booleanSerializer );\n\t\tliteralSerializers.set( XSD.string, XSDSerializers.stringSerializer );\n\n\t\treturn literalSerializers;\n\t}\n\n\tconstructor( literalSerializers?:Map<string, Serializer> ) {\n\t\tthis._literalSerializers = literalSerializers ?\n\t\t\tMapUtils.extend( new Map(), literalSerializers ) :\n\t\t\tJSONLDConverter.getDefaultSerializers()\n\t\t;\n\t}\n\n\tcompact( expandedObjects:Object[], targetObjects:Object[], digestedSchema:DigestedObjectSchema, pointerLibrary:PointerLibrary ):Object[];\n\tcompact( expandedObject:Object, targetObject:Object, digestedSchema:DigestedObjectSchema, pointerLibrary:PointerLibrary, strict?:boolean ):Object;\n\tcompact( expandedObjects:Object[], digestedSchema:DigestedObjectSchema, pointerLibrary:PointerLibrary ):Object[];\n\tcompact( expandedObject:Object, digestedSchema:DigestedObjectSchema, pointerLibrary:PointerLibrary ):Object;\n\tcompact( expandedObjectOrObjects:any, targetObjectOrObjectsOrDigestedContext:any, digestedSchemaOrPointerLibrary:any, pointerLibrary:PointerLibrary = null, strict?:boolean ):any {\n\t\tlet targetObjectOrObjects:any = ! pointerLibrary ? null : targetObjectOrObjectsOrDigestedContext;\n\t\tlet digestedSchema:any = ! pointerLibrary ? targetObjectOrObjectsOrDigestedContext : digestedSchemaOrPointerLibrary;\n\t\tpointerLibrary = ! pointerLibrary ? digestedSchemaOrPointerLibrary : pointerLibrary;\n\n\t\tif( ! Array.isArray( expandedObjectOrObjects ) ) return this.compactSingle( expandedObjectOrObjects, targetObjectOrObjects, digestedSchema, pointerLibrary, strict );\n\n\t\tlet expandedObjects:Object[] = expandedObjectOrObjects;\n\t\tlet targetObjects:Object[] = ! ! targetObjectOrObjects ? targetObjectOrObjects : [];\n\t\tfor( let i:number = 0, length:number = expandedObjects.length; i < length; i ++ ) {\n\t\t\tlet expandedObject:Object = expandedObjects[ i ];\n\t\t\tlet targetObject:Object = targetObjects[ i ] = ! ! targetObjects[ i ] ? targetObjects[ i ] : {};\n\n\t\t\tthis.compactSingle( expandedObject, targetObject, digestedSchema, pointerLibrary, strict );\n\t\t}\n\n\t\treturn targetObjects;\n\t}\n\n\texpand( compactedObjects:Object[], generalSchema:DigestedObjectSchema, digestedSchema:DigestedObjectSchema ):RDFNode[];\n\texpand( compactedObject:Object, generalSchema:DigestedObjectSchema, digestedSchema:DigestedObjectSchema ):RDFNode;\n\texpand( compactedObjectOrObjects:Object[], generalSchema:DigestedObjectSchema, digestedSchema:DigestedObjectSchema ):any {\n\t\tif( ! Array.isArray( compactedObjectOrObjects ) ) return this.expandSingle( compactedObjectOrObjects, generalSchema, digestedSchema );\n\t}\n\n\tprivate expandSingle( compactedObject:Object, generalSchema:DigestedObjectSchema, digestedSchema:DigestedObjectSchema ):RDFNode {\n\t\tlet expandedObject:any = {};\n\n\t\texpandedObject[ \"@id\" ] = ! ! compactedObject[ \"$id\" ] ? compactedObject[ \"$id\" ] : \"\";\n\n\t\tif( compactedObject[ \"types\" ] ) {\n\t\t\tconst types:string[] = Array.isArray( compactedObject[ \"types\" ] ) ?\n\t\t\t\tcompactedObject[ \"types\" ] : [ compactedObject[ \"types\" ] ];\n\n\t\t\tif( types.length )\n\t\t\t\texpandedObject[ \"@type\" ] = types\n\t\t\t\t\t.map( type => generalSchema.resolveURI( type, { vocab: true, base: true } ) );\n\t\t}\n\n\t\tforEachOwnProperty( compactedObject, ( propertyName:string, value:any ):void => {\n\t\t\tif( propertyName === \"$id\" ) return;\n\t\t\tif( propertyName === \"types\" ) return;\n\n\t\t\tconst expandedPropertyName:string = digestedSchema.resolveURI( propertyName, { vocab: true } );\n\t\t\tif( URI.isRelative( expandedPropertyName ) ) return;\n\n\t\t\tconst expandedValue:any[] = this.expandProperty( propertyName, value, digestedSchema, generalSchema );\n\t\t\tif( expandedValue === null ) return;\n\n\t\t\texpandedObject[ expandedPropertyName ] = expandedValue;\n\t\t} );\n\n\t\treturn expandedObject;\n\t}\n\n\tprivate expandProperty( propertyName:string, propertyValue:any, digestedSchema:DigestedObjectSchema, generalSchema:DigestedObjectSchema ):any[] {\n\t\tconst definition:DigestedObjectSchemaProperty = digestedSchema.properties.get( propertyName );\n\n\t\tconst propertyContainer:ContainerType = definition ? definition.containerType : void 0;\n\t\tif( propertyContainer === ContainerType.LANGUAGE ) return this.expandPropertyLanguageMap( propertyValue );\n\n\t\tpropertyValue = Array.isArray( propertyValue ) ? propertyValue : [ propertyValue ];\n\t\tif( propertyContainer === null ) propertyValue = [ propertyValue[ 0 ] ];\n\n\t\tconst propertyType:boolean = definition ? definition.literal : null;\n\t\tconst expandedValues:any[] = propertyType === true ?\n\t\t\tthis.expandPropertyLiteral( propertyValue, definition, digestedSchema ) :\n\t\t\tpropertyType === false ?\n\t\t\t\tthis.expandPropertyPointer( propertyValue, digestedSchema, generalSchema ) :\n\t\t\t\tthis.expandPropertyValue( propertyValue, digestedSchema, generalSchema )\n\t\t;\n\n\t\tconst filteredValues:any[] = expandedValues.filter( value => value !== null );\n\t\tif( ! filteredValues.length ) return null;\n\n\t\tif( propertyContainer === ContainerType.LIST ) return [\n\t\t\t{ \"@list\": filteredValues },\n\t\t];\n\n\t\treturn filteredValues;\n\t}\n\n\tprivate expandPropertyValue( propertyValue:any[], digestedSchema:DigestedObjectSchema, generalSchema:DigestedObjectSchema ):any[] {\n\t\treturn propertyValue.map( value => this.expandValue( value, digestedSchema, generalSchema ) );\n\t}\n\n\tprivate expandPropertyPointer( propertyValue:any[], digestedSchema:DigestedObjectSchema, generalSchema:DigestedObjectSchema ):any[] {\n\t\treturn propertyValue.map( value => this.expandPointerValue( value, digestedSchema, generalSchema ) );\n\t}\n\n\tprivate expandPropertyLiteral( propertyValue:any[], definition:DigestedObjectSchemaProperty, digestedSchema:DigestedObjectSchema ):any[] {\n\t\tconst literalType:string = digestedSchema.resolveURI( definition.literalType, { vocab: true, base: true } );\n\t\tconst expandedValues:any[] = propertyValue.map( value => this.expandLiteralValue( value, literalType ) );\n\n\t\tif( definition.language ) expandedValues.forEach( value => value[ \"@language\" ] = definition.language );\n\n\t\treturn expandedValues;\n\t}\n\n\tprivate expandPropertyLanguageMap( propertyValue:any ):any {\n\t\tif( ! isObject( propertyValue ) ) {\n\t\t\t// TODO: Warn of data loss\n\t\t\treturn null;\n\t\t}\n\n\t\tlet mapValues:Array<any> = [];\n\t\tforEachOwnProperty( propertyValue, ( languageTag:string, value:any ):void => {\n\t\t\t// TODO: Validate language tags\n\n\t\t\tlet serializedValue:string = this.literalSerializers.get( XSD.string ).serialize( value );\n\t\t\tmapValues.push( { \"@value\": serializedValue, \"@type\": XSD.string, \"@language\": languageTag } );\n\t\t} );\n\n\t\treturn mapValues;\n\t}\n\n\tprivate expandPointerValue( propertyValue:any, digestedSchema:DigestedObjectSchema, generalSchema:DigestedObjectSchema ):RDFNode {\n\t\tconst isStringID:boolean = isString( propertyValue );\n\t\tconst id:string = Pointer.is( propertyValue ) ?\n\t\t\tpropertyValue.$id :\n\t\t\tisStringID ?\n\t\t\t\tpropertyValue :\n\t\t\t\tnull;\n\n\t\t// TODO: Warn of data loss\n\t\tif( ! id ) return null;\n\n\t\tconst resolved:string = generalSchema.resolveURI( id, { vocab: isStringID } );\n\t\treturn { \"@id\": resolved };\n\t}\n\n\tprivate expandValue( propertyValue:any, digestedSchema:DigestedObjectSchema, generalSchema:DigestedObjectSchema ):any {\n\t\t// TODO: Lists of lists are not currently supported by the spec\n\t\tif( Array.isArray( propertyValue ) ) return null;\n\n\t\treturn Pointer.is( propertyValue ) ?\n\t\t\tthis.expandPointerValue( propertyValue, generalSchema, digestedSchema ) :\n\t\t\tthis.expandLiteralValue( propertyValue, guessXSDType( propertyValue ) )\n\t\t\t;\n\t}\n\n\tprivate expandLiteralValue( literalValue:any, literalType:string ):any {\n\t\tif( literalType === null ) return null;\n\n\t\t// TODO: Warn of data loss\n\t\tif( ! this.literalSerializers.has( literalType ) ) return null;\n\n\t\tconst serializedValue:string = this.literalSerializers\n\t\t\t.get( literalType )\n\t\t\t.serialize( literalValue );\n\t\treturn { \"@value\": serializedValue, \"@type\": literalType };\n\t}\n\n\tprivate compactSingle( expandedObject:any, targetObject:any, digestedSchema:DigestedObjectSchema, pointerLibrary:PointerLibrary, strict?:boolean ):void {\n\t\tif( ! expandedObject[ \"@id\" ] ) throw new IllegalArgumentError( \"The expandedObject doesn't have an @id defined.\" );\n\n\t\ttargetObject[ \"$id\" ] = expandedObject[ \"@id\" ];\n\t\ttargetObject[ \"types\" ] = ! ! expandedObject[ \"@type\" ] ? expandedObject[ \"@type\" ] : [];\n\n\t\tconst propertyURINameMap:Map<string, string> = this.getPropertyURINameMap( digestedSchema );\n\t\tforEachOwnProperty( expandedObject, ( propertyURI:string, propertyValues:any[] ):void => {\n\t\t\tif( propertyURI === \"@id\" ) return;\n\t\t\tif( propertyURI === \"@type\" ) return;\n\n\t\t\tif( ! propertyURINameMap.has( propertyURI ) && strict ) return;\n\n\t\t\tconst propertyName:string = propertyURINameMap.has( propertyURI ) ?\n\t\t\t\tpropertyURINameMap.get( propertyURI ) :\n\t\t\t\tdigestedSchema.vocab !== null ?\n\t\t\t\t\tURI.getRelativeURI( propertyURI, digestedSchema.vocab ) :\n\t\t\t\t\tpropertyURI\n\t\t\t;\n\n\t\t\tconst targetValue:any = this.getPropertyValue( propertyName, propertyValues, digestedSchema, pointerLibrary );\n\t\t\tif( targetValue === null || targetValue === void 0 ) return;\n\n\t\t\ttargetObject[ propertyName ] = targetValue;\n\t\t} );\n\n\t\treturn targetObject;\n\t}\n\n\tprivate getPropertyContainerType( propertyValues:any ):ContainerType {\n\t\tif( propertyValues.length === 1 ) {\n\t\t\tif( RDFList.is( propertyValues[ 0 ] ) ) return ContainerType.LIST;\n\t\t} else {\n\t\t\treturn ContainerType.SET;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate getPropertyValue( propertyName:string, propertyValues:any[], digestedSchema:DigestedObjectSchema, pointerLibrary:PointerLibrary ):any {\n\t\tconst definition:DigestedObjectSchemaProperty = digestedSchema.properties.get( propertyName );\n\t\tconst propertyContainer:ContainerType = definition ?\n\t\t\tdefinition.containerType :\n\t\t\tthis.getPropertyContainerType( propertyValues );\n\n\t\tif( propertyContainer === ContainerType.LANGUAGE ) return RDFNode.getPropertyLanguageMap( propertyValues );\n\n\t\tif( propertyContainer === ContainerType.LIST ) {\n\t\t\tconst list:RDFList = RDFNode.getList( propertyValues );\n\n\t\t\tif( ! list ) return null;\n\t\t\tpropertyValues = list[ \"@list\" ];\n\t\t}\n\n\t\tconst propertyType:boolean = definition ? definition.literal : null;\n\t\tif( propertyType === true && definition.language ) {\n\t\t\tpropertyValues = propertyValues.filter( value => value[ \"@language\" ] === definition.language );\n\t\t}\n\n\t\tif( propertyContainer === null ) propertyValues = [ propertyValues[ 0 ] ];\n\n\t\tconst compactedValues:any[] | undefined = propertyType === true ?\n\t\t\tthis.compactPropertyLiteral( propertyValues, definition, digestedSchema ) :\n\t\t\tpropertyType === false ?\n\t\t\t\tthis.getPropertyPointers( propertyValues, pointerLibrary ) :\n\t\t\t\tthis.getProperties( propertyValues, pointerLibrary )\n\t\t;\n\t\tif( ! compactedValues ) return null;\n\n\t\tconst filteredValues:any[] = compactedValues.filter( value => value !== null );\n\t\tif( ! filteredValues.length ) return null;\n\n\t\tif( propertyContainer === null ) return filteredValues[ 0 ];\n\t\treturn filteredValues;\n\t}\n\n\tprivate getPropertyURINameMap( digestedSchema:DigestedObjectSchema ):Map<string, string> {\n\t\tconst map:Map<string, string> = new Map<string, string>();\n\t\tdigestedSchema.properties.forEach( ( definition:DigestedObjectSchemaProperty, propertyName:string ):void => {\n\t\t\tconst uri:string = digestedSchema.resolveURI( definition.uri, { vocab: true } );\n\t\t\tmap.set( uri, propertyName );\n\t\t} );\n\t\treturn map;\n\t}\n\n\tprivate compactPropertyLiteral( propertyValues:any[], definition:DigestedObjectSchemaProperty, digestedSchema:DigestedObjectSchema ):any[] {\n\t\tconst literalType:string = definition.literalType === null ?\n\t\t\tXSD.string : digestedSchema.resolveURI( definition.literalType, { vocab: true, base: true } );\n\n\t\treturn RDFNode.getPropertyLiterals( propertyValues, literalType );\n\t}\n\n\tprivate getProperties( propertyValues:any[], pointerLibrary:PointerLibrary ):any[] | undefined {\n\t\tif( ! Array.isArray( propertyValues ) ) return;\n\n\t\treturn propertyValues\n\t\t\t.map( RDFValue.parse.bind( null, pointerLibrary ) )\n\t\t\t.filter( value => ! isNull( value ) )\n\t\t\t;\n\t}\n\n\tprivate getPropertyPointers( propertyValues:any[], pointerLibrary:PointerLibrary ):any[] | undefined {\n\t\tif( ! Array.isArray( propertyValues ) ) return;\n\n\t\treturn propertyValues\n\t\t\t.filter( RDFNode.is )\n\t\t\t.map( RDFNode.getID )\n\t\t\t.map( pointerLibrary.getPointer, pointerLibrary )\n\t\t\t.filter( pointer => ! isNull( pointer ) )\n\t\t\t;\n\t}\n\n}\n"]}