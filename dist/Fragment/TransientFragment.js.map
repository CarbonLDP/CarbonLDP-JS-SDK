{"version":3,"sources":["Fragment/TransientFragment.ts"],"names":[],"mappings":";;AAAA,oCAA+C;AAC/C,wCAAgD;AAEhD,kCAAoC;AAsBvB,QAAA,iBAAiB,GAA4B;IACzD,WAAW,EAAX,UAAa,MAAa;QACzB,MAAM,CAAC,gBAAQ,CAAE,MAAM,CAAE;eACrB,MAAM,CAAC,cAAc,CAAE,WAAW,CAAE,IAAI,CAAE,MAAM,CAAC,oBAAoB,CAAE,WAAW,CAAE,CACtF;IACH,CAAC;IAED,EAAE,EAAF,UAAI,KAAS;QACZ,MAAM,CAAC,4BAAiB,CAAC,EAAE,CAAE,KAAK,CAAE;YACnC,yBAAiB,CAAC,WAAW,CAAE,KAAK,CAAE,CACrC;IACH,CAAC;IAED,MAAM,EAAN,UAAgC,IAAM;QACrC,IAAM,IAAI,GAAK,MAAM,CAAC,MAAM,CAAE,EAAE,EAAE,IAAI,CAAE,CAAC;QACzC,MAAM,CAAC,yBAAiB,CAAC,UAAU,CAAK,IAAI,CAAE,CAAC;IAChD,CAAC;IAED,UAAU,EAAV,UAAoC,MAAQ;QAC3C,MAAM,CAAC,yBAAiB,CAAC,QAAQ,CAAK,MAAM,CAAE,CAAC;IAChD,CAAC;IAED,QAAQ,EAAR,UAA4B,MAAQ;QACnC,EAAE,CAAA,CAAE,yBAAiB,CAAC,WAAW,CAAE,MAAM,CAAG,CAAC;YAAC,MAAM,CAAC,MAAM,CAAC;QAE5D,4BAAiB,CAAC,QAAQ,CAAE,MAAM,CAAE,CAAC;QAErC,IAAM,QAAQ,GAAyB,MAA+B,CAAC;QACvE,MAAM,CAAC,gBAAgB,CAAE,QAAQ,EAAE;YAClC,WAAW,EAAE;gBACZ,QAAQ,EAAE,IAAI;gBACd,UAAU,EAAE,KAAK;gBACjB,YAAY,EAAE,IAAI;aAClB;YACD,SAAS,EAAE;gBACV,YAAY,EAAE,IAAI;gBAClB,KAAK,EAAE,eAAe;aACtB;SACD,CAAE,CAAC;QAEJ,MAAM,CAAC,QAAQ,CAAC;IACjB,CAAC;CACD,CAAC;AAEF;IACC,MAAM,IAAI,2BAAkB,CAAE,0CAA0C,CAAE,CAAC;AAC5E,CAAC","file":"TransientFragment.js","sourcesContent":["import { IllegalActionError } from \"../Errors\";\nimport { TransientResource } from \"../Resource\";\nimport { TransientDocument } from \"../TransientDocument\";\nimport { isObject } from \"../Utils\";\nimport { BaseFragment } from \"./BaseFragment\";\n\n\nexport interface TransientFragment extends TransientResource {\n\t_document:TransientDocument;\n}\n\n\nexport interface TransientFragmentFactory {\n\tisDecorated( object:object ):object is TransientFragment;\n\n\tis( value:any ):value is TransientFragment;\n\n\n\tcreate<T extends BaseFragment>( data:T ):T & TransientFragment;\n\n\tcreateFrom<T extends BaseFragment>( object:T ):T & TransientFragment;\n\n\tdecorate<T extends object>( object:T ):T & TransientFragment;\n}\n\nexport const TransientFragment:TransientFragmentFactory = {\n\tisDecorated( object:object ):object is TransientFragment {\n\t\treturn isObject( object )\n\t\t\t&& object.hasOwnProperty( \"_document\" ) && ! object.propertyIsEnumerable( \"_document\" )\n\t\t\t;\n\t},\n\n\tis( value:any ):value is TransientFragment {\n\t\treturn TransientResource.is( value ) &&\n\t\t\tTransientFragment.isDecorated( value )\n\t\t\t;\n\t},\n\n\tcreate<T extends BaseFragment>( data:T ):T & TransientFragment {\n\t\tconst copy:T = Object.assign( {}, data );\n\t\treturn TransientFragment.createFrom<T>( copy );\n\t},\n\n\tcreateFrom<T extends BaseFragment>( object:T ):T & TransientFragment {\n\t\treturn TransientFragment.decorate<T>( object );\n\t},\n\n\tdecorate<T extends object>( object:T ):T & TransientFragment {\n\t\tif( TransientFragment.isDecorated( object ) ) return object;\n\n\t\tTransientResource.decorate( object );\n\n\t\tconst fragment:T & TransientFragment = object as T & TransientFragment;\n\t\tObject.defineProperties( fragment, {\n\t\t\t\"_document\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t},\n\t\t\t\"resolve\": {\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: resolveFragment,\n\t\t\t},\n\t\t} );\n\n\t\treturn fragment;\n\t},\n};\n\nfunction resolveFragment():never {\n\tthrow new IllegalActionError( \"A fragment cannot be resolved by itself.\" );\n}\n"]}